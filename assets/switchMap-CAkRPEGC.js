import{g as te}from"./index-BftLqECp.js";import{_ as $,a as L,b as T,c as _,d as Ue,e as le,f as W,g as Re,h as Me}from"./tslib.es6-DjQuqsdl.js";var qe=function(){function e(){}return e.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:Be(),platform:"Web",os:void 0,deviceModel:void 0}},e}(),Be=function(){return typeof navigator<"u"&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},De=function(){function e(){this.queue=[]}return e.prototype.logEvent=function(t){this.receiver?this.receiver(t):this.queue.length<512&&this.queue.push(t)},e.prototype.setEventReceiver=function(t){this.receiver=t,this.queue.length>0&&(this.queue.forEach(function(r){t(r)}),this.queue=[])},e}(),O=function(){return O=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},O.apply(this,arguments)};function F(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ne(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],u;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){u={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(u)throw u.error}}return o}var V=function(e,t){var r,n,i=["string","number","boolean","undefined"],o=typeof e,u=typeof t;if(o!==u)return!1;try{for(var s=F(i),a=s.next();!a.done;a=s.next()){var c=a.value;if(c===o)return e===t}}catch(m){r={error:m}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}if(e==null&&t==null)return!0;if(e==null||t==null||e.length!==t.length)return!1;var f=Array.isArray(e),h=Array.isArray(t);if(f!==h)return!1;if(f&&h){for(var v=0;v<e.length;v++)if(!V(e[v],t[v]))return!1}else{var y=Object.keys(e).sort(),p=Object.keys(t).sort();if(!V(y,p))return!1;var l=!0;return Object.keys(e).forEach(function(m){V(e[m],t[m])||(l=!1)}),l}return!0},Fe="$set",Ve="$unset",Ye="$clearAll";Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),r=t.length,n=new Array(r);r--;)n[r]=[t[r],e[t[r]]];return n});var $e=function(){function e(){this.identity={userProperties:{}},this.listeners=new Set}return e.prototype.editIdentity=function(){var t=this,r=O({},this.identity.userProperties),n=O(O({},this.identity),{userProperties:r});return{setUserId:function(i){return n.userId=i,this},setDeviceId:function(i){return n.deviceId=i,this},setUserProperties:function(i){return n.userProperties=i,this},setOptOut:function(i){return n.optOut=i,this},updateUserProperties:function(i){var o,u,s,a,c,f,h=n.userProperties||{};try{for(var v=F(Object.entries(i)),y=v.next();!y.done;y=v.next()){var p=ne(y.value,2),l=p[0],m=p[1];switch(l){case Fe:try{for(var b=(s=void 0,F(Object.entries(m))),w=b.next();!w.done;w=b.next()){var E=ne(w.value,2),C=E[0],k=E[1];h[C]=k}}catch(R){s={error:R}}finally{try{w&&!w.done&&(a=b.return)&&a.call(b)}finally{if(s)throw s.error}}break;case Ve:try{for(var A=(c=void 0,F(Object.keys(m))),U=A.next();!U.done;U=A.next()){var C=U.value;delete h[C]}}catch(R){c={error:R}}finally{try{U&&!U.done&&(f=A.return)&&f.call(A)}finally{if(c)throw c.error}}break;case Ye:h={};break}}}catch(R){o={error:R}}finally{try{y&&!y.done&&(u=v.return)&&u.call(v)}finally{if(o)throw o.error}}return n.userProperties=h,this},commit:function(){return t.setIdentity(n),this}}},e.prototype.getIdentity=function(){return O({},this.identity)},e.prototype.setIdentity=function(t){var r=O({},this.identity);this.identity=O({},t),V(r,this.identity)||this.listeners.forEach(function(n){n(t)})},e.prototype.addIdentityListener=function(t){this.listeners.add(t)},e.prototype.removeIdentityListener=function(t){this.listeners.delete(t)},e}(),M=typeof globalThis<"u"?globalThis:typeof te<"u"?te:self,Fr=function(){function e(){this.identityStore=new $e,this.eventBridge=new De,this.applicationContextProvider=new qe}return e.getInstance=function(t){return M.analyticsConnectorInstances||(M.analyticsConnectorInstances={}),M.analyticsConnectorInstances[t]||(M.analyticsConnectorInstances[t]=new e),M.analyticsConnectorInstances[t]},e}();function d(e){return typeof e=="function"}function Q(e){var t=function(n){Error.call(n),n.stack=new Error().stack},r=e(t);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var H=Q(function(e){return function(r){e(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function j(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var B=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,r,n,i,o;if(!this.closed){this.closed=!0;var u=this._parentage;if(u)if(this._parentage=null,Array.isArray(u))try{for(var s=$(u),a=s.next();!a.done;a=s.next()){var c=a.value;c.remove(this)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}else u.remove(this);var f=this.initialTeardown;if(d(f))try{f()}catch(l){o=l instanceof H?l.errors:[l]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var v=$(h),y=v.next();!y.done;y=v.next()){var p=y.value;try{ie(p)}catch(l){o=o??[],l instanceof H?o=L(L([],T(o)),T(l.errors)):o.push(l)}}}catch(l){n={error:l}}finally{try{y&&!y.done&&(i=v.return)&&i.call(v)}finally{if(n)throw n.error}}}if(o)throw new H(o)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)ie(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(t)}},e.prototype._hasParent=function(t){var r=this._parentage;return r===t||Array.isArray(r)&&r.includes(t)},e.prototype._addParent=function(t){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t},e.prototype._removeParent=function(t){var r=this._parentage;r===t?this._parentage=null:Array.isArray(r)&&j(r,t)},e.prototype.remove=function(t){var r=this._finalizers;r&&j(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),ve=B.EMPTY;function de(e){return e instanceof B||e&&"closed"in e&&d(e.remove)&&d(e.add)&&d(e.unsubscribe)}function ie(e){d(e)?e():e.unsubscribe()}var je={Promise:void 0},Ge={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setTimeout.apply(void 0,L([e,t],T(r)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function he(e){Ge.setTimeout(function(){throw e})}function J(){}function Y(e){e()}var K=function(e){_(t,e);function t(r){var n=e.call(this)||this;return n.isStopped=!1,r?(n.destination=r,de(r)&&r.add(n)):n.destination=He,n}return t.create=function(r,n,i){return new q(r,n,i)},t.prototype.next=function(r){this.isStopped||this._next(r)},t.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(r){this.destination.next(r)},t.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(B),ze=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var r=this.partialObserver;if(r.next)try{r.next(t)}catch(n){D(n)}},e.prototype.error=function(t){var r=this.partialObserver;if(r.error)try{r.error(t)}catch(n){D(n)}else D(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(r){D(r)}},e}(),q=function(e){_(t,e);function t(r,n,i){var o=e.call(this)||this,u;return d(r)||!r?u={next:r??void 0,error:n??void 0,complete:i??void 0}:u=r,o.destination=new ze(u),o}return t}(K);function D(e){he(e)}function We(e){throw e}var He={closed:!0,next:J,error:We,complete:J},X=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function pe(e){return e}function Ze(e){return e.length===0?pe:e.length===1?e[0]:function(r){return e.reduce(function(n,i){return i(n)},r)}}var g=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(t,r,n){var i=this,o=Qe(t)?t:new q(t,r,n);return Y(function(){var u=i,s=u.operator,a=u.source;o.add(s?s.call(o,a):a?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){t.error(r)}},e.prototype.forEach=function(t,r){var n=this;return r=oe(r),new r(function(i,o){var u=new q({next:function(s){try{t(s)}catch(a){o(a),u.unsubscribe()}},error:o,complete:i});n.subscribe(u)})},e.prototype._subscribe=function(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)},e.prototype[X]=function(){return this},e.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Ze(t)(this)},e.prototype.toPromise=function(t){var r=this;return t=oe(t),new t(function(n,i){var o;r.subscribe(function(u){return o=u},function(u){return i(u)},function(){return n(o)})})},e.create=function(t){return new e(t)},e}();function oe(e){var t;return(t=e??je.Promise)!==null&&t!==void 0?t:Promise}function Je(e){return e&&d(e.next)&&d(e.error)&&d(e.complete)}function Qe(e){return e&&e instanceof K||Je(e)&&de(e)}function Ke(e){return d(e==null?void 0:e.lift)}function x(e){return function(t){if(Ke(t))return t.lift(function(r){try{return e(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function S(e,t,r,n,i){return new Xe(e,t,r,n,i)}var Xe=function(e){_(t,e);function t(r,n,i,o,u,s){var a=e.call(this,r)||this;return a.onFinalize=u,a.shouldUnsubscribe=s,a._next=n?function(c){try{n(c)}catch(f){r.error(f)}}:e.prototype._next,a._error=o?function(c){try{o(c)}catch(f){r.error(f)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=i?function(){try{i()}catch(c){r.error(c)}finally{this.unsubscribe()}}:e.prototype._complete,a}return t.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},t}(K),Ne=Q(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),ye=function(e){_(t,e);function t(){var r=e.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return t.prototype.lift=function(r){var n=new ue(this,this);return n.operator=r,n},t.prototype._throwIfClosed=function(){if(this.closed)throw new Ne},t.prototype.next=function(r){var n=this;Y(function(){var i,o;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var u=$(n.currentObservers),s=u.next();!s.done;s=u.next()){var a=s.value;a.next(r)}}catch(c){i={error:c}}finally{try{s&&!s.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}}})},t.prototype.error=function(r){var n=this;Y(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=r;for(var i=n.observers;i.length;)i.shift().error(r)}})},t.prototype.complete=function(){var r=this;Y(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var n=r.observers;n.length;)n.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(r){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,r)},t.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},t.prototype._innerSubscribe=function(r){var n=this,i=this,o=i.hasError,u=i.isStopped,s=i.observers;return o||u?ve:(this.currentObservers=null,s.push(r),new B(function(){n.currentObservers=null,j(s,r)}))},t.prototype._checkFinalizedStatuses=function(r){var n=this,i=n.hasError,o=n.thrownError,u=n.isStopped;i?r.error(o):u&&r.complete()},t.prototype.asObservable=function(){var r=new g;return r.source=this,r},t.create=function(r,n){return new ue(r,n)},t}(g),ue=function(e){_(t,e);function t(r,n){var i=e.call(this)||this;return i.destination=r,i.source=n,i}return t.prototype.next=function(r){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,r)},t.prototype.error=function(r){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,r)},t.prototype.complete=function(){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||n===void 0||n.call(r)},t.prototype._subscribe=function(r){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(r))!==null&&i!==void 0?i:ve},t}(ye),me={now:function(){return(me.delegate||Date).now()},delegate:void 0},er=function(e){_(t,e);function t(r,n){return e.call(this)||this}return t.prototype.schedule=function(r,n){return this},t}(B),se={setInterval:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setInterval.apply(void 0,L([e,t],T(r)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},rr=function(e){_(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.scheduler=r,i.work=n,i.pending=!1,i}return t.prototype.schedule=function(r,n){var i;if(n===void 0&&(n=0),this.closed)return this;this.state=r;var o=this.id,u=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(u,o,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(u,this.id,n),this},t.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),se.setInterval(r.flush.bind(r,this),i)},t.prototype.recycleAsyncId=function(r,n,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&se.clearInterval(n)},t.prototype.execute=function(r,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(r,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(r,n){var i=!1,o;try{this.work(r)}catch(u){i=!0,o=u||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},t.prototype.unsubscribe=function(){if(!this.closed){var r=this,n=r.id,i=r.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,j(o,this),n!=null&&(this.id=this.recycleAsyncId(i,n,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(er),ae=function(){function e(t,r){r===void 0&&(r=e.now),this.schedulerActionCtor=t,this.now=r}return e.prototype.schedule=function(t,r,n){return r===void 0&&(r=0),new this.schedulerActionCtor(this,t).schedule(n,r)},e.now=me.now,e}(),tr=function(e){_(t,e);function t(r,n){n===void 0&&(n=ae.now);var i=e.call(this,r,n)||this;return i.actions=[],i._active=!1,i}return t.prototype.flush=function(r){var n=this.actions;if(this._active){n.push(r);return}var i;this._active=!0;do if(i=r.execute(r.state,r.delay))break;while(r=n.shift());if(this._active=!1,i){for(;r=n.shift();)r.unsubscribe();throw i}},t}(ae),G=new tr(rr),nr=G,be=new g(function(e){return e.complete()});function we(e){return e&&d(e.schedule)}function N(e){return e[e.length-1]}function Vr(e){return d(N(e))?e.pop():void 0}function ir(e){return we(N(e))?e.pop():void 0}function or(e,t){return typeof N(e)=="number"?e.pop():t}var ee=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function ge(e){return d(e==null?void 0:e.then)}function Se(e){return d(e[X])}function Ie(e){return Symbol.asyncIterator&&d(e==null?void 0:e[Symbol.asyncIterator])}function xe(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function ur(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ee=ur();function Ae(e){return d(e==null?void 0:e[Ee])}function Oe(e){return Ue(this,arguments,function(){var r,n,i,o;return le(this,function(u){switch(u.label){case 0:r=e.getReader(),u.label=1;case 1:u.trys.push([1,,9,10]),u.label=2;case 2:return[4,W(r.read())];case 3:return n=u.sent(),i=n.value,o=n.done,o?[4,W(void 0)]:[3,5];case 4:return[2,u.sent()];case 5:return[4,W(i)];case 6:return[4,u.sent()];case 7:return u.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function Pe(e){return d(e==null?void 0:e.getReader)}function I(e){if(e instanceof g)return e;if(e!=null){if(Se(e))return sr(e);if(ee(e))return ar(e);if(ge(e))return cr(e);if(Ie(e))return _e(e);if(Ae(e))return fr(e);if(Pe(e))return lr(e)}throw xe(e)}function sr(e){return new g(function(t){var r=e[X]();if(d(r.subscribe))return r.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function ar(e){return new g(function(t){for(var r=0;r<e.length&&!t.closed;r++)t.next(e[r]);t.complete()})}function cr(e){return new g(function(t){e.then(function(r){t.closed||(t.next(r),t.complete())},function(r){return t.error(r)}).then(null,he)})}function fr(e){return new g(function(t){var r,n;try{for(var i=$(e),o=i.next();!o.done;o=i.next()){var u=o.value;if(t.next(u),t.closed)return}}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}t.complete()})}function _e(e){return new g(function(t){vr(e,t).catch(function(r){return t.error(r)})})}function lr(e){return _e(Oe(e))}function vr(e,t){var r,n,i,o;return Re(this,void 0,void 0,function(){var u,s;return le(this,function(a){switch(a.label){case 0:a.trys.push([0,5,6,11]),r=Me(e),a.label=1;case 1:return[4,r.next()];case 2:if(n=a.sent(),!!n.done)return[3,4];if(u=n.value,t.next(u),t.closed)return[2];a.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=a.sent(),i={error:s},[3,11];case 6:return a.trys.push([6,,9,10]),n&&!n.done&&(o=r.return)?[4,o.call(r)]:[3,8];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function P(e,t,r,n,i){n===void 0&&(n=0),i===void 0&&(i=!1);var o=t.schedule(function(){r(),i?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(o),!i)return o}function Te(e,t){return t===void 0&&(t=0),x(function(r,n){r.subscribe(S(n,function(i){return P(n,e,function(){return n.next(i)},t)},function(){return P(n,e,function(){return n.complete()},t)},function(i){return P(n,e,function(){return n.error(i)},t)}))})}function Ce(e,t){return t===void 0&&(t=0),x(function(r,n){n.add(e.schedule(function(){return r.subscribe(n)},t))})}function dr(e,t){return I(e).pipe(Ce(t),Te(t))}function hr(e,t){return I(e).pipe(Ce(t),Te(t))}function pr(e,t){return new g(function(r){var n=0;return t.schedule(function(){n===e.length?r.complete():(r.next(e[n++]),r.closed||this.schedule())})})}function yr(e,t){return new g(function(r){var n;return P(r,t,function(){n=e[Ee](),P(r,t,function(){var i,o,u;try{i=n.next(),o=i.value,u=i.done}catch(s){r.error(s);return}u?r.complete():r.next(o)},0,!0)}),function(){return d(n==null?void 0:n.return)&&n.return()}})}function ke(e,t){if(!e)throw new Error("Iterable cannot be null");return new g(function(r){P(r,t,function(){var n=e[Symbol.asyncIterator]();P(r,t,function(){n.next().then(function(i){i.done?r.complete():r.next(i.value)})},0,!0)})})}function mr(e,t){return ke(Oe(e),t)}function br(e,t){if(e!=null){if(Se(e))return dr(e,t);if(ee(e))return pr(e,t);if(ge(e))return hr(e,t);if(Ie(e))return ke(e,t);if(Ae(e))return yr(e,t);if(Pe(e))return mr(e,t)}throw xe(e)}function wr(e,t){return t?br(e,t):I(e)}function Le(e){return e instanceof Date&&!isNaN(e)}var gr=Q(function(e){return function(r){r===void 0&&(r=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=r}});function Yr(e,t){var r=Le(e)?{first:e}:typeof e=="number"?{each:e}:e,n=r.first,i=r.each,o=r.with,u=o===void 0?Sr:o,s=r.scheduler,a=s===void 0?G:s,c=r.meta,f=c===void 0?null:c;if(n==null&&i==null)throw new TypeError("No timeout provided.");return x(function(h,v){var y,p,l=null,m=0,b=function(w){p=P(v,a,function(){try{y.unsubscribe(),I(u({meta:f,lastValue:l,seen:m})).subscribe(v)}catch(E){v.error(E)}},w)};y=h.subscribe(S(v,function(w){p==null||p.unsubscribe(),m++,v.next(l=w),i>0&&b(i)},void 0,void 0,function(){p!=null&&p.closed||p==null||p.unsubscribe(),l=null})),!m&&b(n!=null?typeof n=="number"?n:+n-a.now():i)})}function Sr(e){throw new gr(e)}function re(e,t){return x(function(r,n){var i=0;r.subscribe(S(n,function(o){n.next(e.call(t,o,i++))}))})}var Ir=Array.isArray;function xr(e,t){return Ir(t)?e.apply(void 0,L([],T(t))):e(t)}function Er(e){return re(function(t){return xr(e,t)})}function Ar(e,t,r,n,i,o,u,s){var a=[],c=0,f=0,h=!1,v=function(){h&&!a.length&&!c&&t.complete()},y=function(l){return c<n?p(l):a.push(l)},p=function(l){c++;var m=!1;I(r(l,f++)).subscribe(S(t,function(b){t.next(b)},function(){m=!0},void 0,function(){if(m)try{c--;for(var b=function(){var w=a.shift();u||p(w)};a.length&&c<n;)b();v()}catch(w){t.error(w)}}))};return e.subscribe(S(t,y,function(){h=!0,v()})),function(){}}function z(e,t,r){return r===void 0&&(r=1/0),d(t)?z(function(n,i){return re(function(o,u){return t(n,o,i,u)})(I(e(n,i)))},r):(typeof t=="number"&&(r=t),x(function(n,i){return Ar(n,i,e,r)}))}function Or(e){return e===void 0&&(e=1/0),z(pe,e)}var Pr=["addListener","removeListener"],_r=["addEventListener","removeEventListener"],Tr=["on","off"];function ce(e,t,r,n){if(d(r)&&(n=r,r=void 0),n)return ce(e,t,r).pipe(Er(n));var i=T(Lr(e)?_r.map(function(s){return function(a){return e[s](t,a,r)}}):Cr(e)?Pr.map(fe(e,t)):kr(e)?Tr.map(fe(e,t)):[],2),o=i[0],u=i[1];if(!o&&ee(e))return z(function(s){return ce(s,t,r)})(I(e));if(!o)throw new TypeError("Invalid event target");return new g(function(s){var a=function(){for(var c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];return s.next(1<c.length?c:c[0])};return o(a),function(){return u(a)}})}function fe(e,t){return function(r){return function(n){return e[r](t,n)}}}function Cr(e){return d(e.addListener)&&d(e.removeListener)}function kr(e){return d(e.on)&&d(e.off)}function Lr(e){return d(e.addEventListener)&&d(e.removeEventListener)}function Ur(e,t,r){e===void 0&&(e=0),r===void 0&&(r=nr);var n=-1;return t!=null&&(we(t)?r=t:n=t),new g(function(i){var o=Le(e)?+e-r.now():e;o<0&&(o=0);var u=0;return r.schedule(function(){i.closed||(i.next(u++),0<=n?this.schedule(void 0,n):i.complete())},o)})}function $r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=ir(e),n=or(e,1/0),i=e;return i.length?i.length===1?I(i[0]):Or(n)(wr(i,r)):be}function jr(e,t){return x(function(r,n){var i=0;r.subscribe(S(n,function(o){return e.call(t,o,i++)&&n.next(o)}))})}function Gr(e){return x(function(t,r){var n=[];return t.subscribe(S(r,function(i){return n.push(i)},function(){r.next(n),r.complete()})),I(e).subscribe(S(r,function(){var i=n;n=[],r.next(i)},J)),function(){n=null}})}function zr(e,t){return t===void 0&&(t=G),x(function(r,n){var i=null,o=null,u=null,s=function(){if(i){i.unsubscribe(),i=null;var c=o;o=null,n.next(c)}};function a(){var c=u+e,f=t.now();if(f<c){i=this.schedule(void 0,c-f),n.add(i);return}s()}r.subscribe(S(n,function(c){o=c,u=t.now(),i||(i=t.schedule(a,e),n.add(i))},function(){s(),n.complete()},void 0,function(){o=i=null}))})}function Rr(e){return e<=0?function(){return be}:x(function(t,r){var n=0;t.subscribe(S(r,function(i){++n<=e&&(r.next(i),e<=n&&r.complete())}))})}function Mr(e){return re(function(){return e})}function qr(e,t){return z(function(r,n){return I(e(r,n)).pipe(Rr(1),Mr(r))})}function Wr(e,t){t===void 0&&(t=G);var r=Ur(e,t);return qr(function(){return r})}function Hr(){return x(function(e,t){var r,n=!1;e.subscribe(S(t,function(i){var o=r;r=i,n&&t.next([o,i]),n=!0}))})}function Zr(e){e===void 0&&(e={});var t=e.connector,r=t===void 0?function(){return new ye}:t,n=e.resetOnError,i=n===void 0?!0:n,o=e.resetOnComplete,u=o===void 0?!0:o,s=e.resetOnRefCountZero,a=s===void 0?!0:s;return function(c){var f,h,v,y=0,p=!1,l=!1,m=function(){h==null||h.unsubscribe(),h=void 0},b=function(){m(),f=v=void 0,p=l=!1},w=function(){var E=f;b(),E==null||E.unsubscribe()};return x(function(E,C){y++,!l&&!p&&m();var k=v=v??r();C.add(function(){y--,y===0&&!l&&!p&&(h=Z(w,a))}),k.subscribe(C),!f&&y>0&&(f=new q({next:function(A){return k.next(A)},error:function(A){l=!0,m(),h=Z(b,i,A),k.error(A)},complete:function(){p=!0,m(),h=Z(b,u),k.complete()}}),I(E).subscribe(f))})(c)}}function Z(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(t===!0){e();return}if(t!==!1){var i=new q({next:function(){i.unsubscribe(),e()}});return I(t.apply(void 0,L([],T(r)))).subscribe(i)}}function Jr(e,t){return x(function(r,n){var i=null,o=0,u=!1,s=function(){return u&&!i&&n.complete()};r.subscribe(S(n,function(a){i==null||i.unsubscribe();var c=0,f=o++;I(e(a,f)).subscribe(i=S(n,function(h){return n.next(t?t(a,h,f,c++):h)},function(){i=null,s()}))},function(){u=!0,s()}))})}export{Fr as A,J as B,Vr as C,Mr as D,be as E,g as O,ye as S,G as a,re as b,S as c,zr as d,Wr as e,jr as f,Gr as g,Rr as h,I as i,Yr as j,ce as k,Zr as l,$r as m,z as n,x as o,Hr as p,me as q,Q as r,Jr as s,Ur as t,q as u,Or as v,wr as w,ir as x,d as y,pe as z};
