import{r as s,j as e}from"./index-gtzDq4NN.js";import{I as n}from"./iconify-AJT-F7UA.js";import{a as N}from"./apiClient-Br2nePLb.js";import{D as $}from"./DexCard-Cf2Foe7F.js";import{P as O}from"./Pagination-Cagzm2ne.js";import{L as B}from"./components-CyfABTTb.js";import"./globalDisconnect-DEHmIGkh.js";import"./index-BftLqECp.js";import"./leaderboard-bKzLTWQW.js";import"./index-Dvs6MNyz.js";import"./index-B6zKOWfM.js";function K(){const[d,w]=s.useState([]),[i,p]=s.useState(!0),[h,b]=s.useState(null),[o,S]=s.useState("volume"),[r,E]=s.useState("30d"),[f,g]=s.useState(1),[m]=s.useState(20),[D,L]=s.useState(0),[l,k]=s.useState(null),[j,y]=s.useState(!0),u=async(t="volume",a="30d",x=1)=>{try{p(!0);const c=(x-1)*m,v=await N({endpoint:`/api/leaderboard?sort=${t}&period=${a}&limit=${m}&offset=${c}`,method:"GET",showToastOnError:!1});w(v.data),L(v.meta.total),g(x),b(null)}catch(c){b(c instanceof Error?c.message:"Failed to fetch board data"),console.error("Error fetching leaderboard:",c)}finally{p(!1)}},P=async(t="30d")=>{try{y(!0);const a=await N({endpoint:`/api/stats?period=${t}`,method:"GET",showToastOnError:!1});k(a)}catch(a){console.error("Error fetching DEX stats:",a)}finally{y(!1)}};s.useEffect(()=>{u(o,r,1),P(r)},[o,r]);const T=t=>{S(t),g(1)},C=t=>{E(t),g(1)},I=t=>{u(o,r,t)},X=t=>{switch(t){case"volume":return"Volume";case"pnl":return"PnL";case"fee":return"Fees"}};return e.jsx("div",{className:"min-h-screen pt-24 pb-12 px-4 md:px-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8 slide-fade-in",children:[e.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold mb-4 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"DEX Board"}),e.jsx("p",{className:"text-gray-300 text-lg md:text-xl mb-6",children:"Discover the top performing DEXes on Orderly One"})]}),l&&e.jsx("div",{className:"mb-6 slide-fade-in-delayed",children:e.jsxs("div",{className:"flex justify-center gap-6",children:[e.jsxs("div",{className:"bg-background-card rounded-lg border border-light/10 px-4 py-3 text-center",children:[e.jsx("div",{className:"text-lg font-bold text-primary-light mb-1",children:j?e.jsx(n,{icon:"svg-spinners:pulse-rings-multiple",width:16,className:"mx-auto"}):l.total.allTime.toLocaleString()}),e.jsx("div",{className:"text-xs text-gray-300 mb-1",children:"Total DEXes"}),e.jsxs("div",{className:"text-xs text-primary-light",children:["+",l.total.new.toLocaleString()," new (",l.period,")"]})]}),e.jsxs("div",{className:"bg-background-card rounded-lg border border-light/10 px-4 py-3 text-center",children:[e.jsx("div",{className:"text-lg font-bold text-green-400 mb-1",children:j?e.jsx(n,{icon:"svg-spinners:pulse-rings-multiple",width:16,className:"mx-auto"}):l.graduated.allTime.toLocaleString()}),e.jsx("div",{className:"text-xs text-gray-300 mb-1",children:"Graduated"}),e.jsxs("div",{className:"text-xs text-green-400/70",children:["+",l.graduated.new.toLocaleString()," new (",l.period,")"]})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8 slide-fade-in-delayed",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:["volume","fee","pnl"].map(t=>e.jsx("button",{onClick:()=>T(t),className:`px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 ${o===t?"bg-primary text-white":"bg-background-card text-gray-300 hover:bg-primary/20 hover:text-white"}`,children:X(t)},t))}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Period:"}),e.jsxs("select",{value:r,onChange:t=>C(t.target.value),className:"px-3 py-2 bg-background-card border border-light/10 rounded-lg text-white text-sm focus:outline-none focus:border-primary transition-colors duration-200",children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"30d",children:"30 Days"}),e.jsx("option",{value:"90d",children:"90 Days"})]})]}),e.jsxs("button",{onClick:()=>u(o,r),disabled:i,className:"flex items-center gap-2 px-4 py-2 bg-background-card hover:bg-primary/20 text-gray-300 hover:text-white rounded-full transition-all duration-200 disabled:opacity-50",children:[e.jsx(n,{icon:i?"svg-spinners:pulse-rings-multiple":"heroicons:arrow-path",width:16}),"Refresh"]})]})]}),h&&e.jsx("div",{className:"text-center py-8 slide-fade-in",children:e.jsxs("div",{className:"bg-error/10 border border-error/20 rounded-lg p-6 max-w-md mx-auto",children:[e.jsx(n,{icon:"heroicons:exclamation-triangle",width:24,className:"text-error mx-auto mb-3"}),e.jsx("p",{className:"text-error font-medium mb-2",children:"Failed to load board"}),e.jsx("p",{className:"text-gray-400 text-sm",children:h})]})}),i&&d.length===0&&e.jsxs("div",{className:"text-center py-12 slide-fade-in",children:[e.jsx(n,{icon:"svg-spinners:pulse-rings-multiple",width:48,className:"text-primary mx-auto mb-4"}),e.jsx("p",{className:"text-gray-300",children:"Loading board..."})]}),!i&&d.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 slide-fade-in items-stretch",children:d.map((t,a)=>{const x=(f-1)*m+a;return e.jsx(B,{to:`/board/${t.brokerId}`,className:"staggered-item block h-full",style:{animation:`slideFadeIn 0.25s ease ${a*.05}s forwards`},children:e.jsx($,{broker:t,rank:x,timePeriod:r})},t.brokerId)})}),!i&&d.length>0&&e.jsx(O,{currentPage:f,pageSize:m,totalItems:D,onPageChange:I,itemName:"DEXes",showPageSizeSelector:!1}),!i&&d.length===0&&!h&&e.jsxs("div",{className:"text-center py-12 slide-fade-in",children:[e.jsx(n,{icon:"heroicons:chart-bar",width:48,className:"text-gray-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-300 text-lg mb-2",children:"No data available"}),e.jsx("p",{className:"text-gray-400",children:"The board will populate as DEXes generate trading activity."})]}),e.jsxs("div",{className:"mt-12 bg-background-card rounded-lg border border-light/10 p-6 slide-fade-in",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"About the Board"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 text-sm text-gray-300",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-white mb-2 underline",children:"How it works"}),e.jsx("p",{children:"The board aggregates trading data from DEXes launched via Orderly One over the last 30 days."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-white mb-2 underline",children:"Metrics explained"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Volume:"})," Sum of all perpetual trading volume"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Fees:"})," Total fees paid by users from trading (includes both DEX revenue and infrastructure fees)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"PnL:"})," Realized profit and loss across all traders"]})]})]})]})]})]})})}export{K as default};
