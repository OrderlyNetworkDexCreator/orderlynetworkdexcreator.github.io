var me=t=>{throw TypeError(t)};var ee=(t,e,n)=>e.has(t)||me("Cannot "+n);var a=(t,e,n)=>(ee(t,e,"read from private field"),n?n.call(t):e.get(t)),O=(t,e,n)=>e.has(t)?me("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),x=(t,e,n,s)=>(ee(t,e,"write to private field"),s?s.call(t,n):e.set(t,n),n),T=(t,e,n)=>(ee(t,e,"access private method"),n);import{r as m,a as je,j as Ae}from"./index-gtzDq4NN.js";import{aB as ae,aC as Te,aD as We,aE as qe,aF as Ke,aG as Ve,aH as $e,aI as Be,h as te,y as pe,aJ as Qe}from"./globalDisconnect-BwfQ2Vw-.js";function ze(t,e){const{onChange:n}=e;return t.subscribe(()=>ae(t),n,{equalityFn:Te})}function Je(t,e){const{initialState:n,reconnectOnMount:s}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(r=>r.id===n.chainId)?n.chainId:t.chains[0].id,connections:s?n.connections:new Map,status:s?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(r=>{var c;const u=new Set;for(const h of r??[])if(h.rdns){const d=Array.isArray(h.rdns)?h.rdns:[h.rdns];for(const f of d)u.add(f)}const i=[],o=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const h of o){if(u.has(h.info.rdns))continue;const d=t._internal.connectors.providerDetailToConnector(h),f=t._internal.connectors.setup(d);i.push(f)}return[...r,...i]})),s?We(t):t.storage&&t.setState(r=>({...r,connections:new Map}))}}}function He(t){const{children:e,config:n,initialState:s,reconnectOnMount:r=!0}=t,{onMount:u}=Je(n,{initialState:s,reconnectOnMount:r});n._internal.ssr||u();const i=m.useRef(!0);return m.useEffect(()=>{if(i.current&&n._internal.ssr)return u(),()=>{i.current=!1}},[]),e}const _e=m.createContext(void 0);function Ft(t){const{children:e,config:n}=t,s={value:n};return m.createElement(He,t,m.createElement(_e.Provider,s,e))}const Ye="2.14.16",Xe=()=>`wagmi@${Ye}`;class Ze extends qe{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return Xe()}}class et extends Ze{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function Y(t={}){const e=t.config??m.useContext(_e);if(!e)throw new et;return e}var ne={exports:{}},se={},re={exports:{}},ie={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ve;function tt(){if(ve)return ie;ve=1;var t=je();function e(f,g){return f===g&&(f!==0||1/f===1/g)||f!==f&&g!==g}var n=typeof Object.is=="function"?Object.is:e,s=t.useState,r=t.useEffect,u=t.useLayoutEffect,i=t.useDebugValue;function o(f,g){var y=g(),E=s({inst:{value:y,getSnapshot:g}}),l=E[0].inst,v=E[1];return u(function(){l.value=y,l.getSnapshot=g,c(l)&&v({inst:l})},[f,y,g]),r(function(){return c(l)&&v({inst:l}),f(function(){c(l)&&v({inst:l})})},[f]),i(y),y}function c(f){var g=f.getSnapshot;f=f.value;try{var y=g();return!n(f,y)}catch{return!0}}function h(f,g){return g()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:o;return ie.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,ie}var ge;function nt(){return ge||(ge=1,re.exports=tt()),re.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var we;function st(){if(we)return se;we=1;var t=je(),e=nt();function n(h,d){return h===d&&(h!==0||1/h===1/d)||h!==h&&d!==d}var s=typeof Object.is=="function"?Object.is:n,r=e.useSyncExternalStore,u=t.useRef,i=t.useEffect,o=t.useMemo,c=t.useDebugValue;return se.useSyncExternalStoreWithSelector=function(h,d,f,g,y){var E=u(null);if(E.current===null){var l={hasValue:!1,value:null};E.current=l}else l=E.current;E=o(function(){function w(p){if(!S){if(S=!0,P=p,p=g(p),y!==void 0&&l.hasValue){var M=l.value;if(y(M,p))return k=M}return k=p}if(M=k,s(P,p))return M;var C=g(p);return y!==void 0&&y(M,C)?(P=p,M):(P=p,k=C)}var S=!1,P,k,b=f===void 0?null:f;return[function(){return w(d())},b===null?void 0:function(){return w(b())}]},[d,f,g,y]);var v=r(h,E[0],E[1]);return i(function(){l.hasValue=!0,l.value=v},[v]),c(v),v},se}var be;function rt(){return be||(be=1,ne.exports=st()),ne.exports}var it=rt();const oe=t=>typeof t=="object"&&!Array.isArray(t);function ot(t,e,n=e,s=Te){const r=m.useRef([]),u=it.useSyncExternalStoreWithSelector(t,e,n,i=>i,(i,o)=>{if(oe(i)&&oe(o)&&r.current.length){for(const c of r.current)if(!s(i[c],o[c]))return!1;return!0}return s(i,o)});return m.useMemo(()=>{if(oe(u)){const i={...u};let o={};for(const[c,h]of Object.entries(i))o={...o,[c]:{configurable:!1,enumerable:!0,get:()=>(r.current.includes(c)||r.current.push(c),h)}};return Object.defineProperties(i,o),i}return u},[u])}function at(t={}){const e=Y(t);return ot(n=>Ve(e,{onChange:n}),()=>Ke(e))}var de=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},X=typeof window>"u"||"Deno"in globalThis;function Nt(){}function Dt(t,e){return typeof t=="function"?t(e):t}function ut(t){return typeof t=="number"&&t>=0&&t!==1/0}function Gt(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Ut(t,e){return typeof t=="function"?t(e):t}function Wt(t,e){return typeof t=="function"?t(e):t}function qt(t,e){const{type:n="all",exact:s,fetchStatus:r,predicate:u,queryKey:i,stale:o}=t;if(i){if(s){if(e.queryHash!==ct(i,e.options))return!1}else if(!he(e.queryKey,i))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof o=="boolean"&&e.isStale()!==o||r&&r!==e.state.fetchStatus||u&&!u(e))}function Kt(t,e){const{exact:n,status:s,predicate:r,mutationKey:u}=t;if(u){if(!e.options.mutationKey)return!1;if(n){if(z(e.options.mutationKey)!==z(u))return!1}else if(!he(e.options.mutationKey,u))return!1}return!(s&&e.state.status!==s||r&&!r(e))}function ct(t,e){return((e==null?void 0:e.queryKeyHashFn)||z)(t)}function z(t){return JSON.stringify(t,(e,n)=>ue(n)?Object.keys(n).sort().reduce((s,r)=>(s[r]=n[r],s),{}):n)}function he(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!he(t[n],e[n])):!1}function Re(t,e){if(t===e)return t;const n=Se(t)&&Se(e);if(n||ue(t)&&ue(e)){const s=n?t:Object.keys(t),r=s.length,u=n?e:Object.keys(e),i=u.length,o=n?[]:{};let c=0;for(let h=0;h<i;h++){const d=n?h:u[h];(!n&&s.includes(d)||n)&&t[d]===void 0&&e[d]===void 0?(o[d]=void 0,c++):(o[d]=Re(t[d],e[d]),o[d]===t[d]&&t[d]!==void 0&&c++)}return r===i&&c===r?t:o}return e}function lt(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Se(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function ue(t){if(!Ee(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Ee(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Ee(t){return Object.prototype.toString.call(t)==="[object Object]"}function dt(t){return new Promise(e=>{setTimeout(e,t)})}function Vt(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?Re(t,e):e}function $t(t,e,n=0){const s=[...t,e];return n&&s.length>n?s.slice(1):s}function Bt(t,e,n=0){const s=[e,...t];return n&&s.length>n?s.slice(0,-1):s}var ht=Symbol();function Qt(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===ht?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var q,D,$,xe,ft=(xe=class extends de{constructor(){super();O(this,q);O(this,D);O(this,$);x(this,$,e=>{if(!X&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){a(this,D)||this.setEventListener(a(this,$))}onUnsubscribe(){var e;this.hasListeners()||((e=a(this,D))==null||e.call(this),x(this,D,void 0))}setEventListener(e){var n;x(this,$,e),(n=a(this,D))==null||n.call(this),x(this,D,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){a(this,q)!==e&&(x(this,q,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof a(this,q)=="boolean"?a(this,q):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},q=new WeakMap,D=new WeakMap,$=new WeakMap,xe),yt=new ft,B,G,Q,Oe,mt=(Oe=class extends de{constructor(){super();O(this,B,!0);O(this,G);O(this,Q);x(this,Q,e=>{if(!X&&window.addEventListener){const n=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}})}onSubscribe(){a(this,G)||this.setEventListener(a(this,Q))}onUnsubscribe(){var e;this.hasListeners()||((e=a(this,G))==null||e.call(this),x(this,G,void 0))}setEventListener(e){var n;x(this,Q,e),(n=a(this,G))==null||n.call(this),x(this,G,e(this.setOnline.bind(this)))}setOnline(e){a(this,B)!==e&&(x(this,B,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return a(this,B)}},B=new WeakMap,G=new WeakMap,Q=new WeakMap,Oe),Ie=new mt;function pt(){let t,e;const n=new Promise((r,u)=>{t=r,e=u});n.status="pending",n.catch(()=>{});function s(r){Object.assign(n,r),delete n.resolve,delete n.reject}return n.resolve=r=>{s({status:"fulfilled",value:r}),t(r)},n.reject=r=>{s({status:"rejected",reason:r}),e(r)},n}function vt(t){return Math.min(1e3*2**t,3e4)}function gt(t){return(t??"online")==="online"?Ie.isOnline():!0}var Le=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function zt(t){return t instanceof Le}function wt(t){let e=!1,n=0,s=!1,r;const u=pt(),i=l=>{var v;s||(g(new Le(l)),(v=t.abort)==null||v.call(t))},o=()=>{e=!0},c=()=>{e=!1},h=()=>yt.isFocused()&&(t.networkMode==="always"||Ie.isOnline())&&t.canRun(),d=()=>gt(t.networkMode)&&t.canRun(),f=l=>{var v;s||(s=!0,(v=t.onSuccess)==null||v.call(t,l),r==null||r(),u.resolve(l))},g=l=>{var v;s||(s=!0,(v=t.onError)==null||v.call(t,l),r==null||r(),u.reject(l))},y=()=>new Promise(l=>{var v;r=w=>{(s||h())&&l(w)},(v=t.onPause)==null||v.call(t)}).then(()=>{var l;r=void 0,s||(l=t.onContinue)==null||l.call(t)}),E=()=>{if(s)return;let l;const v=n===0?t.initialPromise:void 0;try{l=v??t.fn()}catch(w){l=Promise.reject(w)}Promise.resolve(l).then(f).catch(w=>{var p;if(s)return;const S=t.retry??(X?0:3),P=t.retryDelay??vt,k=typeof P=="function"?P(n,w):P,b=S===!0||typeof S=="number"&&n<S||typeof S=="function"&&S(n,w);if(e||!b){g(w);return}n++,(p=t.onFail)==null||p.call(t,n,w),dt(k).then(()=>h()?void 0:y()).then(()=>{e?g(w):E()})})};return{promise:u,cancel:i,continue:()=>(r==null||r(),u),cancelRetry:o,continueRetry:c,canStart:d,start:()=>(d()?E():y().then(E),u)}}var bt=t=>setTimeout(t,0);function St(){let t=[],e=0,n=o=>{o()},s=o=>{o()},r=bt;const u=o=>{e?t.push(o):r(()=>{n(o)})},i=()=>{const o=t;t=[],o.length&&r(()=>{s(()=>{o.forEach(c=>{n(c)})})})};return{batch:o=>{let c;e++;try{c=o()}finally{e--,e||i()}return c},batchCalls:o=>(...c)=>{u(()=>{o(...c)})},schedule:u,setNotifyFunction:o=>{n=o},setBatchNotifyFunction:o=>{s=o},setScheduler:o=>{r=o}}}var fe=St(),K,Pe,Et=(Pe=class{constructor(){O(this,K)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ut(this.gcTime)&&x(this,K,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(X?1/0:5*60*1e3))}clearGcTimeout(){a(this,K)&&(clearTimeout(a(this,K)),x(this,K,void 0))}},K=new WeakMap,Pe),_,j,V,R,N,ke,Jt=(ke=class extends Et{constructor(e){super();O(this,R);O(this,_);O(this,j);O(this,V);this.mutationId=e.mutationId,x(this,j,e.mutationCache),x(this,_,[]),this.state=e.state||Fe(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){a(this,_).includes(e)||(a(this,_).push(e),this.clearGcTimeout(),a(this,j).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){x(this,_,a(this,_).filter(n=>n!==e)),this.scheduleGc(),a(this,j).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){a(this,_).length||(this.state.status==="pending"?this.scheduleGc():a(this,j).remove(this))}continue(){var e;return((e=a(this,V))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var r,u,i,o,c,h,d,f,g,y,E,l,v,w,S,P,k,b,p,M;x(this,V,wt({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(C,F)=>{T(this,R,N).call(this,{type:"failed",failureCount:C,error:F})},onPause:()=>{T(this,R,N).call(this,{type:"pause"})},onContinue:()=>{T(this,R,N).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>a(this,j).canRun(this)}));const n=this.state.status==="pending",s=!a(this,V).canStart();try{if(!n){T(this,R,N).call(this,{type:"pending",variables:e,isPaused:s}),await((u=(r=a(this,j).config).onMutate)==null?void 0:u.call(r,e,this));const F=await((o=(i=this.options).onMutate)==null?void 0:o.call(i,e));F!==this.state.context&&T(this,R,N).call(this,{type:"pending",context:F,variables:e,isPaused:s})}const C=await a(this,V).start();return await((h=(c=a(this,j).config).onSuccess)==null?void 0:h.call(c,C,e,this.state.context,this)),await((f=(d=this.options).onSuccess)==null?void 0:f.call(d,C,e,this.state.context)),await((y=(g=a(this,j).config).onSettled)==null?void 0:y.call(g,C,null,this.state.variables,this.state.context,this)),await((l=(E=this.options).onSettled)==null?void 0:l.call(E,C,null,e,this.state.context)),T(this,R,N).call(this,{type:"success",data:C}),C}catch(C){try{throw await((w=(v=a(this,j).config).onError)==null?void 0:w.call(v,C,e,this.state.context,this)),await((P=(S=this.options).onError)==null?void 0:P.call(S,C,e,this.state.context)),await((b=(k=a(this,j).config).onSettled)==null?void 0:b.call(k,void 0,C,this.state.variables,this.state.context,this)),await((M=(p=this.options).onSettled)==null?void 0:M.call(p,void 0,C,e,this.state.context)),C}finally{T(this,R,N).call(this,{type:"error",error:C})}}finally{a(this,j).runNext(this)}}},_=new WeakMap,j=new WeakMap,V=new WeakMap,R=new WeakSet,N=function(e){const n=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),fe.batch(()=>{a(this,_).forEach(s=>{s.onMutationUpdate(e)}),a(this,j).notify({mutation:this,type:"updated",action:e})})},ke);function Fe(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var U,W,A,I,L,J,ce,Me,Ct=(Me=class extends de{constructor(e,n){super();O(this,L);O(this,U);O(this,W);O(this,A);O(this,I);x(this,U,e),this.setOptions(n),this.bindMethods(),T(this,L,J).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var s;const n=this.options;this.options=a(this,U).defaultMutationOptions(e),lt(this.options,n)||a(this,U).getMutationCache().notify({type:"observerOptionsUpdated",mutation:a(this,A),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&z(n.mutationKey)!==z(this.options.mutationKey)?this.reset():((s=a(this,A))==null?void 0:s.state.status)==="pending"&&a(this,A).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=a(this,A))==null||e.removeObserver(this)}onMutationUpdate(e){T(this,L,J).call(this),T(this,L,ce).call(this,e)}getCurrentResult(){return a(this,W)}reset(){var e;(e=a(this,A))==null||e.removeObserver(this),x(this,A,void 0),T(this,L,J).call(this),T(this,L,ce).call(this)}mutate(e,n){var s;return x(this,I,n),(s=a(this,A))==null||s.removeObserver(this),x(this,A,a(this,U).getMutationCache().build(a(this,U),this.options)),a(this,A).addObserver(this),a(this,A).execute(e)}},U=new WeakMap,W=new WeakMap,A=new WeakMap,I=new WeakMap,L=new WeakSet,J=function(){var n;const e=((n=a(this,A))==null?void 0:n.state)??Fe();x(this,W,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},ce=function(e){fe.batch(()=>{var n,s,r,u,i,o,c,h;if(a(this,I)&&this.hasListeners()){const d=a(this,W).variables,f=a(this,W).context;(e==null?void 0:e.type)==="success"?((s=(n=a(this,I)).onSuccess)==null||s.call(n,e.data,d,f),(u=(r=a(this,I)).onSettled)==null||u.call(r,e.data,null,d,f)):(e==null?void 0:e.type)==="error"&&((o=(i=a(this,I)).onError)==null||o.call(i,e.error,d,f),(h=(c=a(this,I)).onSettled)==null||h.call(c,void 0,e.error,d,f))}this.listeners.forEach(d=>{d(a(this,W))})})},Me);function xt(t){return{mutationFn(e){return $e(t,e)},mutationKey:["disconnect"]}}function Ot(t){return{mutationFn(e){return Be(t,e)},mutationKey:["signMessage"]}}var Ne=m.createContext(void 0),Pt=t=>{const e=m.useContext(Ne);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Ht=({client:t,children:e})=>(m.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),Ae.jsx(Ne.Provider,{value:t,children:e}));function kt(t,e){return typeof t=="function"?t(...e):!!t}function Mt(){}function De(t,e){const n=Pt(),[s]=m.useState(()=>new Ct(n,t));m.useEffect(()=>{s.setOptions(t)},[s,t]);const r=m.useSyncExternalStore(m.useCallback(i=>s.subscribe(fe.batchCalls(i)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),u=m.useCallback((i,o)=>{s.mutate(i,o).catch(Mt)},[s]);if(r.error&&kt(s.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:u,mutateAsync:r.mutate}}function jt(t={}){const e=Y(t);return m.useSyncExternalStore(n=>ze(e,{onChange:n}),()=>ae(e),()=>ae(e))}function At(t={}){const{mutation:e}=t,n=Y(t),s=xt(n),{mutate:r,mutateAsync:u,...i}=De({...e,...s});return{...i,connectors:jt({config:n}).map(o=>o.connector),disconnect:r,disconnectAsync:u}}function Tt(t={}){const{mutation:e}=t,n=Y(t),s=Ot(n),{mutate:r,mutateAsync:u,...i}=De({...e,...s});return{...i,signMessage:r,signMessageAsync:u}}const le="app:analytics";function Ce(t,e={}){if(typeof window>"u")return;const n=new CustomEvent(le,{detail:{eventName:t,params:e}});window.dispatchEvent(n)}const Ge=()=>typeof window>"u"?"":window.location.hostname==="dex.orderly.network"?"G-N1SWYG7W4E":"G-7TY9TF6N3K",H=()=>typeof window>"u"?()=>{}:window.gtag||(()=>{});function Yt(){m.useEffect(()=>{const t=Ge();if(!t)return;window.dataLayer=window.dataLayer||[],window.gtag=window.gtag||function(...i){window.dataLayer.push(arguments)},window.gtag("js",new Date);const e=document.createElement("script");e.async=!0,e.src=`https://www.googletagmanager.com/gtag/js?id=${t}`,document.head.appendChild(e),H()("config",t);const s=u=>{let i=u.target;const o=5;let c=0;for(;i&&i!==document.body&&c<o;){const h=i.tagName,d=i.classList?Array.from(i.classList):[],f=i.className&&typeof i.className=="string"?i.className:"",g=h==="BUTTON",y=h==="A",E=i.getAttribute("role")==="button",l=h==="INPUT"&&["button","submit"].includes(i.type),v=d.some(w=>w.includes("btn")||w.includes("button")||w.includes("cursor-pointer"));if(g||E||l||y||v){const w=i.innerText?i.innerText.substring(0,100):"",S=i.id||"",P=f;let k=i.href||i.getAttribute("data-link")||"";if(!k&&i.closest){const p=i.closest("a");p&&(k=p.href||"")}H()("event","element_click",{button_text:w,element_id:S,element_class:P,link_url:k});break}i=i.parentElement,c++}},r=u=>{const{eventName:i,params:o}=u.detail,c=H();try{c("event",i,o)}catch(h){console.error(`Error handling analytics event ${i}:`,h)}};return document.addEventListener("click",s),window.addEventListener(le,r),()=>{document.head.contains(e)&&document.head.removeChild(e),document.removeEventListener("click",s),window.removeEventListener(le,r)}},[])}function _t(t){m.useEffect(()=>{if(typeof window>"u")return;const e=Ge();if(!e)return;const n=H();try{n("config",e,{user_id:t??null}),n("set",{user_id:t??null})}catch(s){console.error("Failed to set GA user_id",s)}},[t])}const Ue=m.createContext(void 0);function Xt({children:t}){const[e,n]=m.useState(null),[s,r]=m.useState(null),[u,i]=m.useState(!1),[o,c]=m.useState(!0),[h,d]=m.useState(null),[f,g]=m.useState(null),{address:y,isConnected:E,connector:l}=at(),{signMessageAsync:v}=Tt(),{disconnect:w}=At();_t(y);const S=m.useCallback(()=>{n(null),r(null),localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),w()},[w]),P=m.useCallback(async()=>{if(!s||!(e!=null&&e.address)){const b=localStorage.getItem("auth_token"),p=localStorage.getItem("auth_user");return!!(b&&p)}if(y&&e.address.toLowerCase()!==y.toLowerCase())return console.log("Authenticated address doesn't match connected wallet address"),S(),!1;try{const b=await fetch(`${te}/api/auth/validate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:e.address,token:s})});return b.ok?(await b.json()).valid:(S(),!1)}catch(b){return console.error("Token validation error:",b),S(),!1}},[s,e,y,S]);m.useEffect(()=>{(async()=>{c(!0);try{const p=localStorage.getItem("auth_token"),M=localStorage.getItem("auth_user");if(!E&&(p||M)){console.log("Wallet not connected, but auth data exists. Clearing auth data."),S(),c(!1);return}if(p&&M){const C=JSON.parse(M);r(p),n(C),await P()||(console.log("Saved token is invalid, logging out"),S(),pe.warning("Your session has expired. Please log in again."))}}catch(p){console.error("Error validating saved auth:",p),S()}finally{c(!1)}})()},[E,y,S]),m.useEffect(()=>{!E&&e&&S()},[E,e,S]),m.useEffect(()=>{y&&f&&y!==f&&(console.log("Wallet address changed from",f,"to",y),n(null),r(null),localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),pe.info("Wallet switched. Please sign in with the new wallet.")),y&&y!==f&&Ce("connect_wallet_success",{address:`addr_${y}`,wallet:(l==null?void 0:l.name)??"unknown"}),g(y||null)},[y,f]),m.useEffect(()=>{Qe(w)},[w]);const k=m.useCallback(async()=>{if(!y){const b="No wallet connected";throw d(b),new Error(b)}try{i(!0),d(null);const b=await fetch(`${te}/api/auth/nonce`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:y})});if(!b.ok){const Z="Failed to get authentication nonce";throw new Error(Z)}const{message:p}=await b.json(),M=await v({message:p});Ce("sign_message_success",{address:`addr_${y}`,wallet:(l==null?void 0:l.name)??"unknown"});const C=await fetch(`${te}/api/auth/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:y,signature:M})});if(!C.ok){const Z="Signature verification failed";throw new Error(Z)}const{user:F,token:ye}=await C.json();n(F),r(ye),localStorage.setItem("auth_token",ye),localStorage.setItem("auth_user",JSON.stringify(F))}catch(b){const p=b instanceof Error?b.message:"Authentication failed";throw d(p),b}finally{i(!1)}},[y,v]);return Ae.jsx(Ue.Provider,{value:{user:e,token:s,isAuthenticated:!!e&&!!s,isLoading:u||o,error:h,login:k,logout:S,validateToken:P},children:t})}function Zt(){const t=m.useContext(Ue);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}export{Xt as A,zt as B,gt as C,pt as D,lt as E,X as F,ut as G,Re as H,kt as I,Pt as J,Mt as K,Jt as M,Ht as Q,Et as R,de as S,Ft as W,at as a,At as b,Y as c,De as d,Kt as e,Nt as f,Qt as g,ct as h,Bt as i,$t as j,yt as k,Dt as l,qt as m,fe as n,Ie as o,z as p,he as q,Ut as r,ht as s,Ce as t,Zt as u,Yt as v,Vt as w,Wt as x,Gt as y,wt as z};
