import{r as i,j as e}from"./index-gtzDq4NN.js";import{F as ls}from"./FormInput-CKH1Jbq0.js";import{B as W,C as he}from"./Card-DzC9HQ_p.js";import{a6 as ps,a7 as bs,a8 as ys,y as d,a9 as js,aa as Ge,ab as Ns,ac as vs,d as ws}from"./globalDisconnect-DEHmIGkh.js";import{p as Te,g as ie,j as ks}from"./apiClient-Br2nePLb.js";import{c as Qe,d as Es,u as Je,a as Rs}from"./useAuth-RM4Avg_6.js";import{c as Fs}from"./clsx.m-DHulAg21.js";import{u as Ds}from"./OrderlyKeyContext-Bc8PuPFV.js";import{f as ms,d as Ze,e as us,h as Ss,u as xs,i as Cs,j as Ts,k as Is,m as Ms,n as Os,o as As,p as os,b as Bs,l as $s,q as Ps,c as qe,r as Vs,t as Us,v as _s,w as qs,x as Ws}from"./ModalContext-3rcxIYCP.js";import{g as Xs}from"./deploymentUrl-2BmYCh8V.js";import{B as cs}from"./index--NnR_BUb.js";import{u as Ys}from"./DexContext-BUFcSEJ_.js";import{W as Ls}from"./WalletConnect-Bv6-w7CX.js";import{L as Ks}from"./components-CyfABTTb.js";import"./index-BftLqECp.js";import"./tslib.es6-DjQuqsdl.js";import"./switchMap-CAkRPEGC.js";import"./iconify-AJT-F7UA.js";import"./index-B6zKOWfM.js";import"./index-Dvs6MNyz.js";function Gs(o,x={}){return{async queryFn({queryKey:m}){const f=x.abi;if(!f)throw new Error("abi is required");const{functionName:b,scopeKey:D,...y}=m[1],T=(()=>{const O=m[1];if(O.address)return{address:O.address};if(O.code)return{code:O.code};throw new Error("address or code is required")})();if(!b)throw new Error("functionName is required");return ps(o,{abi:f,functionName:b,args:y.args,...T,...y})},queryKey:Hs(x)}}function Hs(o={}){const{abi:x,...m}=o;return["readContract",ms(m)]}function zs(o,x={}){return{async queryFn({queryKey:m}){const{hash:f,...b}=m[1];if(!f)throw new Error("hash is required");return bs(o,{...b,onReplaced:x.onReplaced,hash:f})},queryKey:Qs(x)}}function Qs(o={}){const{onReplaced:x,...m}=o;return["waitForTransactionReceipt",ms(m)]}function Js(o){return{mutationFn(x){return ys(o,x)},mutationKey:["writeContract"]}}function Zs(o={}){const{abi:x,address:m,functionName:f,query:b={}}=o,D=o.code,y=Qe(o),T=Ze({config:y}),O=Gs(y,{...o,chainId:o.chainId??T}),j=!!((m||D)&&x&&f&&(b.enabled??!0));return us({...b,...O,enabled:j,structuralSharing:b.structuralSharing??Ss})}function er(o={}){const{hash:x,query:m={}}=o,f=Qe(o),b=Ze({config:f}),D=zs(f,{...o,chainId:o.chainId??b}),y=!!(x&&(m.enabled??!0));return us({...m,...D,enabled:y})}function sr(o={}){const{mutation:x}=o,m=Qe(o),f=Js(m),{mutate:b,mutateAsync:D,...y}=Es({...x,...f});return{...y,writeContract:b,writeContractAsync:D}}const We=0,Xe=30,Z=150,Ye=0,Le=0,ee=150,V=(o,x=1)=>new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:x}).format(o),He=({makerFee:o,takerFee:x,rwaMakerFee:m=0,rwaTakerFee:f=50,readOnly:b=!1,isSavingFees:D=!1,onFeesChange:y,defaultOpenCalculator:T=!1,showSaveButton:O=!0,alwaysShowConfig:j=!1,useOrderlyApi:ge=!1,brokerId:S})=>{const{orderlyKey:X,accountId:se,hasValidKey:ne,setOrderlyKey:A}=Ds(),{openModal:le}=xs(),{token:Ee}=Je(),[Ie,re]=i.useState(!1),[oe,fe]=i.useState(j),[R,U]=i.useState(o),[w,_]=i.useState(x),[k,Y]=i.useState(m),[E,L]=i.useState(f),[B,r]=i.useState(null),[$,K]=i.useState(null),[G,I]=i.useState(null),[H,n]=i.useState(null),[Re,h]=i.useState(null),[ce,q]=i.useState(T),[pe,de]=i.useState(1e7),[F,Fe]=i.useState("public");i.useEffect(()=>{U(o),_(x),Y(m),L(f)},[o,x,m,f]);const v=(l,t)=>l==="maker"?t<We?(r(`Maker fee must be at least ${We/10} bps`),!1):t>Z?(r(`Maker fee cannot exceed ${Z/10} bps`),!1):(r(null),!0):l==="taker"?t<Xe?(K(`Taker fee must be at least ${Xe/10} bps`),!1):t>Z?(K(`Taker fee cannot exceed ${Z/10} bps`),!1):(K(null),!0):l==="rwaMaker"?t<Ye?(I(`RWA Maker fee must be at least ${Ye/10} bps`),!1):t>ee?(I(`RWA Maker fee cannot exceed ${ee/10} bps`),!1):(I(null),!0):t<Le?(n(`RWA Taker fee must be at least ${Le/10} bps`),!1):t>ee?(n(`RWA Taker fee cannot exceed ${ee/10} bps`),!1):(n(null),!0),Me=l=>{const t=l.target.value;if(t===""){U(0),r(null);return}const p=parseFloat(t);if(isNaN(p))return;if(t.includes(".")&&t.split(".")[1].length>1){r("Please enter only one decimal place (e.g., 3.5)");return}const u=p*10;U(u),v("maker",u),y&&y(u,w,k,E)},me=l=>{const t=l.target.value;if(t===""){_(0),K(null);return}const p=parseFloat(t);if(isNaN(p))return;if(t.includes(".")&&t.split(".")[1].length>1){K("Please enter only one decimal place (e.g., 6.5)");return}const u=p*10;_(u),v("taker",u),y&&y(R,u,k,E)},Oe=l=>{const t=l.target.value;if(t===""){U(0),r(null);return}const p=parseFloat(t);if(!isNaN(p)&&!(t.includes(".")&&t.split(".")[1].length>1)){const u=p*10;U(u),v("maker",u)}},Ae=l=>{const t=l.target.value;if(t===""){_(0),K(null);return}const p=parseFloat(t);if(!isNaN(p)&&!(t.includes(".")&&t.split(".")[1].length>1)){const u=p*10;_(u),v("taker",u)}},De=l=>{const t=l.target.value;if(t===""){Y(0),I(null);return}const p=parseFloat(t);if(isNaN(p))return;if(t.includes(".")&&t.split(".")[1].length>1){I("Please enter only one decimal place (e.g., 3.5)");return}const u=p*10;Y(u),v("rwaMaker",u),y&&y(R,w,u,E)},Be=l=>{const t=l.target.value;if(t===""){L(0),n(null);return}const p=parseFloat(t);if(isNaN(p))return;if(t.includes(".")&&t.split(".")[1].length>1){n("Please enter only one decimal place (e.g., 5.0)");return}const u=p*10;L(u),v("rwaTaker",u),y&&y(R,w,k,u)},be=l=>{const t=l.target.value;if(t===""){Y(0),I(null);return}const p=parseFloat(t);if(!isNaN(p)&&!(t.includes(".")&&t.split(".")[1].length>1)){const u=p*10;Y(u),v("rwaMaker",u)}},$e=l=>{const t=l.target.value;if(t===""){L(0),n(null);return}const p=parseFloat(t);if(!isNaN(p)&&!(t.includes(".")&&t.split(".")[1].length>1)){const u=p*10;L(u),v("rwaTaker",u)}},Pe=async l=>{if(l.preventDefault(),h(null),B||$||G||H){h("Please correct the errors before saving");return}const t=v("maker",R),p=v("taker",w),u=v("rwaMaker",k),C=v("rwaTaker",E);if(!t||!p||!u||!C){h("Fee values are outside of allowed range");return}if(ge){if(!ne||!X||!se){d.error("Orderly key required to update fees");return}re(!0);try{const P=R/1e5,ve=w/1e5,xe=k/1e5,te=E/1e5;await Cs(se,X,P,ve,xe,te),d.success("Fees updated successfully!");try{await Te("api/graduation/fees/invalidate-cache",{},Ee)}catch(ae){console.error("Error invalidating fee cache:",ae)}y&&y(R,w,k,E)}catch(P){console.error("Error updating fees:",P),d.error(P instanceof Error?P.message:"Failed to update fees")}finally{re(!1)}}},z={public:{maker:0,taker:3},silver:{maker:0,taker:2.75},gold:{maker:0,taker:2.5},platinum:{maker:0,taker:2},diamond:{maker:0,taker:1}},ye={public:{name:"Public",requirement:"No requirement",fee:"3.00 bps"},silver:{name:"Silver",requirement:"100K $ORDER or ≥$30M volume",fee:"2.75 bps"},gold:{name:"Gold",requirement:"250K $ORDER or ≥$90M volume",fee:"2.50 bps"},platinum:{name:"Platinum",requirement:"2M $ORDER or ≥$1B volume",fee:"2.00 bps"},diamond:{name:"Diamond",requirement:"7M $ORDER or ≥$10B volume",fee:"1.00 bps"}},N=(l,t,p,u=F)=>{const C=z[u].maker,P=z[u].taker,ve=Math.max(0,t-C),xe=Math.max(0,p-P),te=l*.5,ae=l*.5,Se=ve/1e4,Ve=xe/1e4,Ce=te*Se,we=ae*Ve;return{makerRevenue:Ce,takerRevenue:we,totalRevenue:Ce+we}},Q=l=>{const t=parseFloat(l.target.value);de(isNaN(t)?0:t)},M=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:1,compactDisplay:"short",notation:"compact"}).format(l),{makerRevenue:J,takerRevenue:ue,totalRevenue:je}=N(pe,R/10,w/10,F),Ne=l=>{Fe(l.target.value)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-light/5 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Fee Configuration"}),!b&&!j&&e.jsxs("button",{type:"button",onClick:()=>fe(!oe),className:"text-primary-light hover:text-primary flex items-center gap-1 text-sm",children:[oe?"Hide":"Configure",e.jsx("div",{className:`i-mdi:chevron-right w-4 h-4 transition-transform ${oe?"rotate-90":""}`})]})]}),!b&&(oe||j)?e.jsx("form",{onSubmit:Pe,className:"slide-fade-in",children:e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"Configure the trading fees for your DEX. Maker fees apply to limit orders that provide liquidity, while taker fees apply to market orders that take liquidity."}),e.jsx("div",{className:"bg-warning/10 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"text-sm flex items-start gap-2",children:[e.jsx("span",{className:"i-mdi:alert-circle text-warning w-5 h-5 flex-shrink-0 mt-0.5"}),e.jsxs("span",{children:[e.jsx("span",{className:"font-medium text-warning",children:"Important Fee Note:"})," ","The fees you configure here are the"," ",e.jsx("span",{className:"underline",children:"total fees"})," that traders will pay. This includes the Orderly base fee (varies by tier - see calculator below).",e.jsx("br",{}),"Your revenue will be:"," ",e.jsx("span",{className:"font-medium",children:"Your Custom Fee - Orderly Base Fee"}),"."]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"makerFee",className:"block text-sm font-bold mb-1",children:"Maker Fee (bps)"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"number",id:"makerFee",value:(R/10).toString(),onChange:Me,onBlur:Oe,step:"0.1",min:"0",max:"50",className:`w-full px-3 py-2 bg-background-dark border ${B?"border-error":"border-light/10"} rounded-lg`,placeholder:"0.0"}),e.jsx("span",{className:"ml-2 text-gray-400 text-sm",children:"bps (0.01%)"})]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Minimum: ",We/10," bps (0.00%), Maximum:"," ",Z/10," bps (",(Z/10*.01).toFixed(2),"%)"]}),B&&e.jsx("p",{className:"text-xs text-error mt-1",children:B})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"takerFee",className:"block text-sm font-bold mb-1",children:"Taker Fee (bps)"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"number",id:"takerFee",value:(w/10).toString(),onChange:me,onBlur:Ae,step:"0.1",min:"0",max:"50",className:`w-full px-3 py-2 bg-background-dark border ${$?"border-error":"border-light/10"} rounded-lg`,placeholder:"0.0"}),e.jsx("span",{className:"ml-2 text-gray-400 text-sm",children:"bps (0.01%)"})]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Minimum: ",Xe/10," bps (0.03%), Maximum:"," ",Z/10," bps (",(Z/10*.01).toFixed(2),"%)"]}),$&&e.jsx("p",{className:"text-xs text-error mt-1",children:$})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold mb-2 text-gray-200",children:"RWA Asset Fees"}),e.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Configure separate fees for Real World Asset (RWA) trading."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"rwaMakerFee",className:"block text-sm font-bold mb-1",children:"RWA Maker Fee (bps)"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"number",id:"rwaMakerFee",value:(k/10).toString(),onChange:De,onBlur:be,step:"0.1",min:"0",max:"50",className:`w-full px-3 py-2 bg-background-dark border ${G?"border-error":"border-light/10"} rounded-lg`,placeholder:"0.0"}),e.jsx("span",{className:"ml-2 text-gray-400 text-sm",children:"bps (0.01%)"})]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Minimum: ",Ye/10," bps (0.00%), Maximum:"," ",ee/10," bps (",(ee/10*.01).toFixed(2),"%)"]}),G&&e.jsx("p",{className:"text-xs text-error mt-1",children:G})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"rwaTakerFee",className:"block text-sm font-bold mb-1",children:"RWA Taker Fee (bps)"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"number",id:"rwaTakerFee",value:(E/10).toString(),onChange:Be,onBlur:$e,step:"0.1",min:"0",max:"50",className:`w-full px-3 py-2 bg-background-dark border ${H?"border-error":"border-light/10"} rounded-lg`,placeholder:"0.0"}),e.jsx("span",{className:"ml-2 text-gray-400 text-sm",children:"bps (0.01%)"})]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Minimum: ",Le/10," bps (0.00%), Maximum:"," ",ee/10," bps (",(ee/10*.01).toFixed(2),"%)"]}),H&&e.jsx("p",{className:"text-xs text-error mt-1",children:H})]})]})]}),Re&&e.jsx("div",{className:"mb-4 text-error text-sm",children:Re}),e.jsxs("div",{className:"flex items-center gap-2 text-sm bg-info/10 rounded p-3 mb-4",children:[e.jsx("span",{className:"i-mdi:information-outline text-info w-5 h-5 flex-shrink-0"}),e.jsx("span",{children:"Setting competitive fees can attract more traders to your DEX. The fee split you receive will be based on the fees your traders pay."})]}),!b&&O&&e.jsxs(e.Fragment,{children:[ge&&!ne&&e.jsx("div",{className:"bg-warning/10 border border-warning/20 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"i-mdi:key text-warning w-5 h-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-warning font-medium text-sm mb-1",children:"Orderly Key Required"}),e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"To update fees directly via Orderly API, you need to create an Orderly key first."}),e.jsxs(W,{type:"button",variant:"secondary",size:"sm",onClick:()=>le("orderlyKeyLogin",{onSuccess:l=>{A(l),d.success("Orderly key created successfully!")},onCancel:()=>{},brokerId:S,accountId:se}),className:"flex items-center gap-2",children:[e.jsx("div",{className:"i-mdi:key-plus w-4 h-4"}),"Create Orderly Key"]})]})]})}),e.jsx(W,{type:"submit",variant:"primary",isLoading:D||Ie,loadingText:"Saving...",className:"w-full",disabled:!!B||!!$||!!G||!!H||ge&&!ne,children:"Save Fee Configuration"})]})]})}):e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:e.jsx("span",{className:"text-gray-300",children:b?"Current Fee Structure":"Current Fee Structure:"})}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-400 mb-2",children:"Standard Fees"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-background-dark/50 p-3 rounded",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Maker Fee"}),e.jsxs("div",{className:"text-xl font-semibold",children:[V(R/10)," ",e.jsx("span",{className:"text-sm font-normal text-gray-400",children:"bps"})]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["(",V(R/10*.01,3),"%)"]})]}),e.jsxs("div",{className:"bg-background-dark/50 p-3 rounded",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Taker Fee"}),e.jsxs("div",{className:"text-xl font-semibold",children:[V(w/10)," ",e.jsx("span",{className:"text-sm font-normal text-gray-400",children:"bps"})]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["(",V(w/10*.01,3),"%)"]})]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-gray-400 mb-2",children:"RWA Asset Fees"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-background-dark/50 p-3 rounded",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"RWA Maker Fee"}),e.jsxs("div",{className:"text-xl font-semibold",children:[V(k/10)," ",e.jsx("span",{className:"text-sm font-normal text-gray-400",children:"bps"})]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["(",V(k/10*.01,3),"%)"]})]}),e.jsxs("div",{className:"bg-background-dark/50 p-3 rounded",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"RWA Taker Fee"}),e.jsxs("div",{className:"text-xl font-semibold",children:[V(E/10)," ",e.jsx("span",{className:"text-sm font-normal text-gray-400",children:"bps"})]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["(",V(E/10*.01,3),"%)"]})]})]})]}),e.jsxs("div",{className:"mt-4 bg-info/10 rounded-lg p-3 flex items-start gap-2 text-xs",children:[e.jsx("span",{className:"i-mdi:information-outline text-info w-4 h-4 flex-shrink-0 mt-0.5"}),e.jsxs("span",{className:"text-gray-300",children:[e.jsx("span",{className:"font-medium",children:"Note:"})," These are the total fees that traders will pay on your DEX. The Orderly base fee varies by tier (Public: 3.00 bps taker, Diamond: 1.00 bps taker). Your revenue = Your Custom Fee - Base Fee. Improve your tier through the"," ",e.jsx("a",{href:"https://app.orderly.network/",target:"_blank",rel:"noopener noreferrer",className:"text-primary-light hover:underline",children:"Builder Staking Programme"})," ","to reduce the base fee and increase your revenue."]})]})]})]}),e.jsxs("div",{className:"border-t border-light/10 pt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[e.jsx("span",{className:"i-mdi:calculator mr-2 h-5 w-5 text-success"}),"Revenue Calculator"]}),e.jsxs("button",{type:"button",onClick:()=>q(!ce),className:"text-primary-light hover:text-primary flex items-center gap-1 text-sm",children:[ce?"Hide Calculator":"Show Calculator",e.jsx("span",{className:`i-mdi:chevron-right w-4 h-4 transition-transform ${ce?"rotate-90":""}`})]})]}),ce&&e.jsxs("div",{className:"bg-light/5 rounded-lg p-4 mb-4 slide-fade-in",children:[e.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"Estimate your potential monthly revenue based on trading volume and your current fee configuration."}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tradingVolume",className:"block text-sm font-bold mb-1",children:"Monthly Trading Volume (USD)"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"bg-background-dark border-r border-light/10 px-3 py-2 rounded-l-lg text-gray-400",children:"$"}),e.jsx("input",{type:"number",id:"tradingVolume",min:"0",step:"1000",value:pe,onChange:Q,className:"w-full px-3 py-2 bg-background-dark border border-light/10 rounded-r-lg"})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Enter your expected monthly trading volume"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tierSelect",className:"block text-sm font-bold mb-1",children:"Builder Staking Tier"}),e.jsx("select",{id:"tierSelect",value:F,onChange:Ne,className:"w-full h-[42px] px-3 py-2 bg-background-dark border border-light/10 rounded-lg",children:Object.entries(ye).map(([l,t])=>e.jsxs("option",{value:l,children:[t.name," (",t.fee,")"]},l))}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:ye[F].requirement})]})]}),e.jsxs("div",{className:"bg-success/5 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold mb-3 text-gray-200",children:"Estimated Monthly Revenue (After Base Fee Deduction)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-background-dark/50 p-3 rounded",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Maker Revenue"}),e.jsx("div",{className:"text-xl font-semibold text-success",children:M(J)}),e.jsxs("div",{className:"text-xs text-gray-400",children:["(",V(Math.max(0,R/10-z[F].maker))," ","bps after base fee)"]})]}),e.jsxs("div",{className:"bg-background-dark/50 p-3 rounded",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Taker Revenue"}),e.jsx("div",{className:"text-xl font-semibold text-success",children:M(ue)}),e.jsxs("div",{className:"text-xs text-gray-400",children:["(",V(Math.max(0,w/10-z[F].taker))," ","bps after base fee)"]})]}),e.jsxs("div",{className:"bg-success/10 p-3 rounded",children:[e.jsx("div",{className:"text-sm text-gray-300",children:"Total Revenue"}),e.jsx("div",{className:"text-xl font-semibold text-success",children:M(je)}),e.jsx("div",{className:"text-xs text-gray-300",children:"per month"})]})]}),e.jsxs("div",{className:"mt-4 flex items-start gap-2 text-xs",children:[e.jsx("span",{className:"i-mdi:information-outline text-info w-4 h-4 flex-shrink-0 mt-0.5"}),e.jsxs("span",{className:"text-gray-300",children:["This calculation assumes an equal split between maker and taker volume. Actual revenue may vary based on market conditions, trading patterns, and fee changes. Revenue shown represents your earnings after the Orderly base fee (",z[F].maker," bps maker,"," ",z[F].taker," bps taker for"," ",ye[F].name," tier) is deducted from your custom fees."]})]})]})]})]})]})},ze=()=>e.jsxs("div",{className:"bg-primary/10 rounded-lg p-4 mb-6 border border-primary/20",children:[e.jsxs("h3",{className:"text-md font-medium mb-3 flex items-center",children:[e.jsx("div",{className:"i-mdi:finance text-primary w-5 h-5 mr-2"}),"Understanding Base Fees & Staking Tiers"]}),e.jsxs("div",{className:"text-sm text-gray-300 mb-4",children:[e.jsxs("p",{className:"mb-3",children:[e.jsx("span",{className:"font-medium text-white",children:"Base Fee:"})," Orderly retains 100% of a base taker fee while offering 0 bps maker fee. This fee varies by tier in our Builder Staking Programme:"]}),e.jsxs("div",{className:"bg-background-dark/50 rounded-lg overflow-hidden mb-4",children:[e.jsxs("div",{className:"grid grid-cols-4 text-center border-b border-light/10 text-xs md:text-sm",children:[e.jsx("div",{className:"p-2 font-medium bg-background-dark/70",children:"Tier"}),e.jsx("div",{className:"p-2 font-medium bg-background-dark/70",children:"Volume Requirement (30d)"}),e.jsx("div",{className:"p-2 font-medium bg-background-dark/70",children:"Staking Requirement"}),e.jsx("div",{className:"p-2 font-medium bg-background-dark/70",children:"Orderly Base Taker Fee (bps)"})]}),e.jsxs("div",{className:"grid grid-cols-4 text-center border-b border-light/10 text-xs md:text-sm",children:[e.jsx("div",{className:"p-2 flex flex-col justify-center",children:e.jsx("span",{className:"font-medium",children:"PUBLIC"})}),e.jsx("div",{className:"p-2",children:"No Requirement"}),e.jsx("div",{className:"p-2",children:"-"}),e.jsx("div",{className:"p-2",children:"3.00"})]}),e.jsxs("div",{className:"grid grid-cols-4 text-center border-b border-light/10 text-xs md:text-sm",children:[e.jsx("div",{className:"p-2 flex flex-col justify-center",children:e.jsx("span",{className:"font-medium text-gray-100",children:"SILVER"})}),e.jsxs("div",{className:"p-2",children:["≥ $30M",e.jsx("br",{}),e.jsx("span",{className:"text-gray-400",children:"OR"})]}),e.jsx("div",{className:"p-2",children:"100K $ORDER"}),e.jsx("div",{className:"p-2",children:"2.75"})]}),e.jsxs("div",{className:"grid grid-cols-4 text-center border-b border-light/10 text-xs md:text-sm",children:[e.jsx("div",{className:"p-2 flex flex-col justify-center",children:e.jsx("span",{className:"font-medium text-warning",children:"GOLD"})}),e.jsxs("div",{className:"p-2",children:["≥ $90M",e.jsx("br",{}),e.jsx("span",{className:"text-gray-400",children:"OR"})]}),e.jsx("div",{className:"p-2",children:"250K $ORDER"}),e.jsx("div",{className:"p-2",children:"2.50"})]}),e.jsxs("div",{className:"grid grid-cols-4 text-center border-b border-light/10 text-xs md:text-sm",children:[e.jsx("div",{className:"p-2 flex flex-col justify-center",children:e.jsx("span",{className:"font-medium text-blue-300",children:"PLATINUM"})}),e.jsxs("div",{className:"p-2",children:["≥ $1B",e.jsx("br",{}),e.jsx("span",{className:"text-gray-400",children:"OR"})]}),e.jsx("div",{className:"p-2",children:"2M $ORDER"}),e.jsx("div",{className:"p-2",children:"2.00"})]}),e.jsxs("div",{className:"grid grid-cols-4 text-center text-xs md:text-sm",children:[e.jsx("div",{className:"p-2 flex flex-col justify-center",children:e.jsx("span",{className:"font-medium text-cyan-300",children:"DIAMOND"})}),e.jsxs("div",{className:"p-2",children:["≥ $10B",e.jsx("br",{}),e.jsx("span",{className:"text-gray-400",children:"OR"})]}),e.jsx("div",{className:"p-2",children:"7M $ORDER"}),e.jsx("div",{className:"p-2",children:"1.00"})]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("p",{className:"font-medium text-white",children:"What does this mean for you?"}),e.jsxs("a",{href:"https://orderly.network/docs/build-on-omnichain/user-flows/builder-staking-programme",target:"_blank",rel:"noopener noreferrer",className:"text-primary-light hover:underline text-xs flex items-center",children:["View documentation",e.jsx("span",{className:"i-mdi:open-in-new w-3 h-3 ml-1"})]})]}),e.jsx("p",{className:"mb-3",children:"Your custom fee settings represent the total fees that traders pay. Your revenue is calculated by subtracting the base fee from your custom fees:"}),e.jsxs("ul",{className:"pl-5 list-disc space-y-1 mb-3",children:[e.jsx("li",{children:"Base Fee (retained by Orderly): Ranges from 3.00 bps (Public tier) to 1.00 bps (Diamond tier) - this is deducted from your custom fees"}),e.jsx("li",{children:"Your Revenue: Your Custom Fee - Base Fee"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"i-mdi:lightbulb text-warning w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:"By staking more ORDER tokens or achieving higher trading volume, you can reduce the base fee charged by Orderly, maximizing your DEX's competitiveness."})]}),e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsxs("a",{href:"https://app.orderly.network/",target:"_blank",rel:"noopener noreferrer",className:"bg-primary hover:bg-primary-light transition-colors px-4 py-2 rounded-full text-white font-medium flex items-center gap-2",children:[e.jsx("span",{className:"i-mdi:trending-up w-4 h-4"}),"Stake ORDER for Better Rates",e.jsx("span",{className:"i-mdi:open-in-new w-3.5 h-3.5"})]})}),e.jsx("div",{className:"mt-4 bg-warning/10 p-3 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx("div",{className:"i-mdi:alert-circle text-warning w-5 h-5 flex-shrink-0"}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-warning",children:"Important:"})," You must use the"," ",e.jsx("span",{className:"font-medium",children:"exact same wallet"})," for staking ORDER tokens that you used to set up this DEX. This ensures proper tier attribution and benefits."]})]})})]})]}),rr=[{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],type:"function"}],ke=Is(),ds=o=>/^0x[a-fA-F0-9]{40}$/.test(o),Ke=o=>{const x=Ge[o];return x?`https://swap.defillama.com/?chain=${o}&from=0x0000000000000000000000000000000000000000&tab=swap&to=${x}`:(console.warn(`No ORDER token address configured for chain: ${o}`),"#")};function tr({onNoDexSetup:o,onGraduationSuccess:x}){var ss,rs,ts,as;const{token:m}=Je(),{address:f}=Rs(),[b,D]=i.useState(""),y=Ps()==="mainnet"?"arbitrum":"arbitrum-sepolia",[T,O]=i.useState(y),[j,ge]=i.useState(""),[S,X]=i.useState(null),[se,ne]=i.useState(!1),[A,le]=i.useState(null),[Ee,Ie]=i.useState(!1),[re,oe]=i.useState(!1),[fe,R]=i.useState([]),[U,w]=i.useState(30),[_,k]=i.useState(60),[Y,E]=i.useState(0),[L,B]=i.useState(50),[r,$]=i.useState(null),[K,G]=i.useState(!1),[I,H]=i.useState(null),[n,Re]=i.useState(null),[h,ce]=i.useState("order"),[q,pe]=i.useState(null),{openModal:de}=xs(),[F,Fe]=i.useState("eoa"),[v,Me]=i.useState(""),[me,Oe]=i.useState(""),[Ae,De]=i.useState(!1),[Be,be]=i.useState(!1),$e=async(s,a)=>{try{await navigator.clipboard.writeText(s),d.success(`${a} copied to clipboard`)}catch(c){console.error("Failed to copy to clipboard:",c),d.error("Failed to copy to clipboard")}},Pe={DelegateSigner:[{name:"delegateContract",type:"address"},{name:"brokerId",type:"string"},{name:"chainId",type:"uint256"},{name:"timestamp",type:"uint64"},{name:"registrationNonce",type:"uint256"},{name:"txHash",type:"bytes32"}]},z=async(s,a,c,g)=>{if(!ue)throw new Error("Wallet client not available");const gs=(await(await fetch(`${qe()}/v1/registration_nonce`)).json()).data.registration_nonce,ns={delegateContract:s,brokerId:a,chainId:c,timestamp:Date.now(),registrationNonce:Number(gs),txHash:g},fs=await(await new cs(ue).getSigner()).signTypedData(Ws(c),{DelegateSigner:Pe.DelegateSigner},ns),_e=await(await fetch(`${qe()}/v1/delegate_signer`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:ns,signature:fs,userAddress:f})})).json();if(!_e.success)throw new Error(_e.message);return _e.data},ye=async()=>{if(!v.trim()){d.error("Please enter your multisig address");return}if(!me.trim()){d.error("Please enter the transaction hash from your Safe transaction");return}if(!f){d.error("Please connect your wallet first");return}if(!(r!=null&&r.brokerId)){d.error("No broker ID found. Please complete the previous steps first.");return}De(!0);try{const s=os(v),a=qs(v);if(a&&a!==J){await Ne({chainId:a}),d.info("Switching to the correct network for this multisig address");return}await z(s,r.brokerId,J,me);const c=await Te("api/graduation/finalize-admin-wallet",{multisigAddress:s,multisigChainId:J},m,{showToastOnError:!1});if(c.success){d.success("Multisig registered and admin wallet setup completed! Your DEX has graduated successfully.");const g=await ie("api/graduation/graduation-status",m);$(g),x&&x()}else d.error(c.message)}catch(s){console.error("Error registering multisig:",s),d.error(s instanceof Error?s.message:"Failed to register multisig")}finally{De(!1)}},N=i.useMemo(()=>Ts(T),[T]),Q=i.useMemo(()=>h==="usdc"?js[N]:Ge[N],[N,h]),M=((ss=ke.find(s=>s.id===N))==null?void 0:ss.chainId)||1,J=Ze(),{data:ue}=Ms(),je=J===M,{switchChain:Ne}=Os();i.useEffect(()=>{Object.entries(Ge).forEach(([s,a])=>{a?ds(a)||console.log(`Invalid ORDER token address format for ${s}`):console.log(`Missing ORDER token address for ${s}`)})},[]);const{data:l}=As({address:f,token:Q,chainId:M,query:{enabled:!!f&&!0,retry:3,staleTime:6e4}}),t=(s,a)=>{O(s),ce(a)},{data:p,error:u}=Zs({address:Q,abi:[{name:"decimals",type:"function",stateMutability:"view",inputs:[],outputs:[{name:"",type:"uint8"}]}],functionName:"decimals",chainId:M,query:{enabled:!0,retry:3,staleTime:6e4}}),{data:C,isPending:P,writeContract:ve}=sr(),{isLoading:xe,isSuccess:te}=er({hash:C,confirmations:1});i.useEffect(()=>{u&&console.warn("Token decimals read failed:",u)},[u]),i.useEffect(()=>{te&&C&&(D(C),we(C.toString()))},[te,C]),i.useEffect(()=>{async function s(){var a;try{const c=await fetch(`${qe()}/v1/public/broker/name`);if(!c.ok)throw new Error("Failed to fetch broker IDs");const g=await c.json();if(g.success&&((a=g.data)!=null&&a.rows)){const Ue=g.data.rows.map(is=>is.broker_id);R(Ue)}}catch(c){console.error("Error fetching broker IDs:",c)}}s()},[]),i.useEffect(()=>{if(!j){X(null);return}if(!/^[a-z0-9_-]+$/.test(j)){X("Broker ID must contain only lowercase letters, numbers, hyphens, and underscores");return}if(fe.includes(j)){X("This broker ID is already taken. Please choose another one.");return}X(null)},[j,fe]);const ae=i.useCallback(async()=>{try{const s=await ie("api/graduation/fees",m);s.success&&(w(s.makerFee),k(s.takerFee),E(s.rwaMakerFee),B(s.rwaTakerFee))}catch(s){console.error("Error loading fee configuration:",s)}},[m,w,k,E,B]),Se=i.useCallback(async()=>{try{const s=await ie("api/graduation/fee-options",m);Re(s)}catch(s){console.error("Error loading fee options:",s),d.error("Failed to load graduation fee options")}},[m]);i.useEffect(()=>{async function s(){try{await Promise.all([ae(),Se()])}catch(a){console.error("Error loading graduation status:",a),a instanceof Error&&a.message.includes("You must create a DEX first")&&o&&o()}}s()},[m,Ee,ae,Se,o]),i.useEffect(()=>{async function s(){try{const g=await ie("api/graduation/graduation-status",m,{showToastOnError:!1});$(g)}catch(g){console.error("Error loading graduation status:",g),$(null)}}async function a(){try{const g=await ie("api/dex",m,{showToastOnError:!1});H(g)}catch(g){console.error("Error loading DEX data:",g),H(null)}}async function c(){try{const g=await ie("api/graduation/tier",m,{showToastOnError:!1});pe(g)}catch(g){console.error("Error loading broker tier:",g),pe(null)}}m&&(s(),a(),c())},[m,Ee]),i.useEffect(()=>{if(r!=null&&r.isMultisig&&(r!=null&&r.multisigAddress)&&(r!=null&&r.brokerId)){const s=os(r.multisigAddress),a=Bs(s,r.brokerId),c=$s(a);be(!!c)}else be(!1)},[r]);const Ve=async()=>{if(!f){d.error("Please connect your wallet first");return}if(!(r!=null&&r.brokerId)){d.error("No broker ID found. Please complete the previous steps first.");return}if(!ue){d.error("No wallet client available. Please ensure your wallet is connected.");return}G(!0);try{if(!(await Vs(f,r.brokerId)).isRegistered){const g=await new cs(ue).getSigner();await Us(g,f,J||1,r.brokerId),await _s(f,r.brokerId,20,1e3),d.success("Account registered successfully!")}const a=await Te("api/graduation/finalize-admin-wallet",{},m,{showToastOnError:!1});if(a.success){d.success("Admin wallet setup completed! Your DEX has graduated successfully.");const c=await ie("api/graduation/graduation-status",m);$(c),x&&x()}else d.error(a.message)}catch(s){console.error("Error finalizing admin wallet:",s),d.error(s instanceof Error?s.message:"Failed to finalize admin wallet setup")}finally{G(!1)}},Ce=async()=>{if(!f){d.error("Please connect your wallet first");return}if(S){d.error(S);return}if(!j){d.error("Please enter your broker ID");return}try{if(console.log(`Initiating ORDER token transfer on ${T}`),!Q){console.log(`Missing ORDER token address for ${T}`),d.error("Missing token address configuration");return}if(!(n!=null&&n.receiverAddress)){console.log("Missing receiver address from fee options"),d.error("Missing receiver address configuration");return}if(p===void 0){d.error("Loading token information, please try again in a moment");return}if(!ds(n.receiverAddress)){console.log("Invalid receiver address format"),d.error("Invalid receiver address configuration");return}try{await Ne({chainId:M})}catch(g){console.error("Failed to switch chain:",g),d.error("Please make sure your wallet is on the correct network before continuing");return}if(!n){d.error("Fee options not loaded. Please try again.");return}const s=h==="usdc"?n.usdc:n.order,a=p??(h==="usdc"?6:18),c=vs(s.amount.toString(),a);console.log({chain:N,decimals:a,requiredAmount:s.amount,calculatedAmount:c.toString(),address:Q,functionName:"transfer",args:[n.receiverAddress,c],chainId:M}),ve({abi:rr,address:Q,functionName:"transfer",args:[n.receiverAddress,c],chainId:M})}catch(s){console.log("ORDER token transfer error:",s);let a="Failed to initiate transfer";s instanceof Error&&(a=`Failed to initiate transfer: ${s.message}`),d.error(a)}},we=async s=>{le(null),ne(!0),d.info("Verifying transaction... This may take up to 1-2 minutes. Please wait.");try{const a=await Te("api/graduation/verify-tx",{txHash:s,chain:N,brokerId:j,makerFee:U,takerFee:_,paymentType:h},m,{showToastOnError:!1});le(a),Ie(!0),a.success?(d.success("Transaction verified successfully!"),ae(),D(""),window.scrollTo({top:0,behavior:"smooth"}),x&&x()):d.error(a.message||"Verification failed")}catch(a){console.log("Transaction verification error:",a);let c="Verification failed",g=!1;a instanceof Error?(c=a.message,g=(a==null?void 0:a.status)===502||a.message.includes("502")||a.message.includes("Bad Gateway"),le({success:!1,message:a.message})):le({success:!1,message:"Unknown error occurred"}),g?(d.error("Connection lost during verification. The transaction may have succeeded. Refreshing page to check status...",{autoClose:3e3,closeButton:!1}),setTimeout(()=>{window.location.reload()},2e3)):d.error(c)}finally{ne(!1)}},hs=async s=>{if(s.preventDefault(),S){d.error(S);return}await we(b)},es=(s,a)=>{const c=ke.find(g=>g.id===a);return c?ws(s,c.chainId):null};return r!=null&&r.success&&r.brokerId!=="demo"&&!r.isGraduated?e.jsx(he,{className:"w-full max-w-lg mx-auto slide-fade-in",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"i-mdi:account-check text-6xl text-primary-light mx-auto mb-2"}),e.jsx("div",{className:"bg-primary/10 rounded-full text-primary-light px-4 py-2 inline-block text-sm font-medium mb-4",children:"Broker ID Created!"}),e.jsx("h2",{className:"text-2xl font-bold",children:"Complete Your Graduation"}),e.jsxs("p",{className:"text-gray-300 mt-2 mb-6",children:["Your broker ID"," ",e.jsx("span",{className:"font-mono bg-background-card px-2 py-1 rounded text-primary-light",children:r.brokerId})," ","has been created. Complete the final step to start earning fees."]}),e.jsxs("div",{className:"bg-warning/10 rounded-lg p-4 mb-6 text-left",children:[e.jsxs("h3",{className:"font-medium flex items-center mb-2",children:[e.jsx("div",{className:"i-mdi:alert-circle text-warning mr-2 h-5 w-5"}),"Final Step Required"]}),e.jsxs("p",{className:"text-sm text-gray-400 mb-3",children:[e.jsx("strong",{className:"text-warning",children:"You are not earning fees yet."})," ","Complete the admin wallet setup to start earning revenue from your DEX."]})]}),e.jsxs("div",{className:"bg-light/5 rounded-lg p-4 mb-6 text-left",children:[e.jsxs("h3",{className:"text-md font-medium mb-3 flex items-center",children:[e.jsx("div",{className:"i-mdi:wallet text-primary-light mr-2 h-5 w-5"}),"Select Wallet Type"]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("button",{onClick:()=>Fe("eoa"),className:`flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-all ${F==="eoa"?"bg-primary/20 text-primary border border-primary/30":"bg-background-card text-gray-400 hover:text-gray-300 border border-light/10"}`,children:"EOA Wallet"}),e.jsx("button",{onClick:()=>Fe("multisig"),className:`flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-all ${F==="multisig"?"bg-primary/20 text-primary border border-primary/30":"bg-background-card text-gray-400 hover:text-gray-300 border border-light/10"}`,children:"Gnosis Safe"})]}),F==="eoa"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-background-card rounded-lg p-4",children:[e.jsxs("h4",{className:"text-sm font-medium mb-2 flex items-center",children:[e.jsx("div",{className:"i-mdi:information-outline text-info mr-2 h-4 w-4"}),"What This Does"]}),e.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"This registers your connected EOA (Externally Owned Account) wallet with Orderly Network and activates your broker account. Once completed, you'll start earning fees from all trades on your DEX."}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsx("p",{children:"• Registers your EVM address with Orderly Network"}),e.jsx("p",{children:"• Creates your broker account for fee collection"}),e.jsx("p",{children:"• Enables revenue sharing from your DEX"})]})]}),e.jsx(W,{onClick:Ve,isLoading:K,loadingText:"Registering with Orderly...",variant:"primary",className:"w-full text-center",children:"Register with Orderly & Start Earning"}),e.jsx("div",{className:"bg-light/5 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-gray-400",children:["When you click the button above, you'll be prompted to sign a message to register your EVM address with Orderly Network using broker ID"," ",e.jsx("span",{className:"font-mono text-primary-light",children:r.brokerId}),". This happens directly in your wallet."]})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-background-card rounded-lg p-4",children:[e.jsxs("h4",{className:"text-sm font-medium mb-2 flex items-center",children:[e.jsx("div",{className:"i-mdi:shield-check text-info mr-2 h-4 w-4"}),"Gnosis Safe Wallet"]}),e.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Use this option if you want to register a Gnosis Safe multisig wallet as your admin wallet. This provides enhanced security through multi-signature approval for fee withdrawals and admin actions."}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1 mb-4",children:[e.jsx("p",{children:"• Enhanced security with multi-signature approval"}),e.jsx("p",{children:"• Share control with multiple signers"}),e.jsx("p",{children:"• Perfect for teams and organizations"})]})]}),e.jsx(W,{onClick:()=>de("safeInstructions",{brokerId:r.brokerId,chainId:J}),variant:"secondary",className:"w-full",children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"i-mdi:book-open-variant h-4 w-4"}),"View Setup Instructions"]})}),e.jsxs("div",{className:"bg-background-card rounded-lg p-4 border border-primary/10",children:[e.jsxs("h4",{className:"text-sm font-medium mb-3 flex items-center",children:[e.jsx("div",{className:"i-mdi:account-plus text-primary mr-2 h-4 w-4"}),"Register Your Multisig"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-300 mb-2",children:"Multisig Address"}),e.jsx("input",{type:"text",value:v,onChange:s=>Me(s.target.value),placeholder:"0x... or eth:0x... or base:0x...",className:"w-full px-3 py-2 bg-background-dark border border-light/10 rounded-lg text-white placeholder-gray-400 focus:border-primary/50 focus:outline-none text-sm"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Enter your Gnosis Safe address. Chain prefixes (eth:, base:, arb:) are supported."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-300 mb-2",children:"Transaction Hash"}),e.jsx("input",{type:"text",value:me,onChange:s=>Oe(s.target.value),placeholder:"0x...",className:"w-full px-3 py-2 bg-background-dark border border-light/10 rounded-lg text-white placeholder-gray-400 focus:border-primary/50 focus:outline-none text-sm"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"The transaction hash from your Safe delegateSigner transaction."})]}),e.jsx(W,{onClick:ye,isLoading:Ae,loadingText:"Registering multisig...",variant:"primary",className:"w-full",disabled:!v.trim()||!me.trim()||!f,children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"i-mdi:account-plus h-4 w-4"}),"Register Multisig"]})}),!f&&e.jsx("p",{className:"text-xs text-warning text-center",children:"Please connect your wallet to register your multisig"})]})]}),e.jsx("div",{className:"bg-info/10 rounded-lg p-3 border border-info/20",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"i-mdi:information-outline text-info w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-info font-medium mb-1",children:"Step-by-Step Guide"}),e.jsxs("p",{className:"text-xs text-gray-400",children:['Click "View Setup Instructions" above to see detailed steps on how to set up your Gnosis Safe wallet with broker ID'," ",e.jsx("span",{className:"font-mono text-primary-light",children:r.brokerId}),"."]})]})]})})]})]})]})}):r!=null&&r.isGraduated?e.jsx(he,{className:"w-full max-w-lg mx-auto slide-fade-in",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"i-mdi:check-circle text-6xl text-success mx-auto mb-2"}),e.jsx("div",{className:"bg-success/10 rounded-full text-success px-4 py-2 inline-block text-sm font-medium mb-4",children:"Graduated Successfully!"}),e.jsx("h2",{className:"text-2xl font-bold",children:"Congratulations!"}),e.jsxs("p",{className:"text-gray-300 mt-2 mb-6",children:["Your DEX has successfully graduated to the revenue-sharing tier. Your custom broker ID"," ",e.jsx("span",{className:"font-mono bg-background-card px-2 py-1 rounded text-primary-light",children:r.brokerId})," ","is now active and your DEX is fully ready for users!"]}),(I==null?void 0:I.repoUrl)&&e.jsxs("div",{className:"bg-success/10 rounded-lg p-4 mb-6 text-left",children:[e.jsxs("h3",{className:"font-medium flex items-center mb-2",children:[e.jsx("div",{className:"i-mdi:check-circle text-success mr-2 h-5 w-5"}),"Your DEX is Ready!"]}),e.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Your DEX has been deployed with your broker ID and is now fully operational. Users can start trading and you'll earn fees from all trades."}),e.jsx("a",{href:Xs(I.repoUrl),target:"_blank",rel:"noopener noreferrer",className:"text-success hover:underline font-medium",children:"View Your Live DEX →"})]}),e.jsxs("div",{className:"bg-light/5 rounded-lg p-5 mb-6 text-left",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"i-mdi:star text-warning mr-2 h-5 w-5"}),"Your DEX Benefits"]}),e.jsxs("ul",{className:"space-y-4",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-success/20 p-1.5 rounded-full mt-0.5",children:e.jsx("div",{className:"i-mdi:cash-multiple text-success h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Fee Revenue Sharing"}),e.jsx("p",{className:"text-sm text-gray-400 mt-0.5",children:"You now earn a percentage of all trading fees generated through your DEX."})]})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-warning/20 p-1.5 rounded-full mt-0.5",children:e.jsx("div",{className:"i-mdi:cog text-warning h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Custom Fee Configuration"}),e.jsx("p",{className:"text-sm text-gray-400 mt-0.5",children:"You can now customize your maker and taker fees to optimize for your trading community."})]})]})]})]}),(r==null?void 0:r.isMultisig)&&e.jsxs("div",{className:"bg-warning/10 rounded-lg p-5 mb-6 border border-warning/20 text-left",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"i-mdi:wallet text-warning mr-2 h-5 w-5"}),"Multisig Fee Withdrawal"]}),e.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"Since you're using a multisig wallet as your admin wallet, use the withdrawal modal below to transfer fees from your Orderly account to your Safe wallet."}),e.jsxs("div",{className:"bg-background-card rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center",children:[e.jsx("div",{className:"i-mdi:shield-check text-primary mr-2 h-4 w-4"}),"How to Withdraw Fees"]}),e.jsxs("ol",{className:"text-sm text-gray-300 space-y-2 list-decimal list-inside",children:[e.jsx("li",{children:'Click the "Withdraw Fees" button below'}),e.jsx("li",{children:"Enter the amount of USDC you want to withdraw"}),e.jsx("li",{children:"Sign the EIP-712 messages in your connected wallet (for PnL settlement and withdrawal)"}),e.jsx("li",{children:"Fees will be transferred from your Orderly account to your Safe wallet"})]}),e.jsx("div",{className:"mt-3 p-3 bg-info/10 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"i-mdi:information-outline text-info w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-info font-medium mb-1",children:"Important Note"}),e.jsx("p",{className:"text-xs text-gray-400",children:"All fee withdrawals must be approved by the required number of signers in your Safe wallet, providing enhanced security for your earnings."})]})]})}),e.jsxs("div",{className:"mt-4",children:[Be?e.jsx(W,{onClick:()=>de("feeWithdrawal",{brokerId:r.brokerId,multisigAddress:r.multisigAddress,multisigChainId:r.multisigChainId}),variant:"primary",className:"w-full",disabled:!r.multisigAddress||!r.multisigChainId,children:e.jsxs("span",{className:"flex items-center justify-center w-full gap-2",children:[e.jsx("div",{className:"i-mdi:cash-multiple h-4 w-4"}),"Withdraw Fees"]})}):e.jsx(W,{onClick:()=>de("orderlyKeyLogin",{brokerId:r.brokerId,onSuccess:()=>{be(!0)},onCancel:()=>{}}),variant:"primary",className:"w-full",disabled:!r.multisigAddress,children:e.jsxs("span",{className:"flex items-center justify-center w-full gap-2",children:[e.jsx("div",{className:"i-mdi:key-plus h-4 w-4"}),"Create Orderly Key"]})}),(!r.multisigAddress||!r.multisigChainId)&&e.jsx("p",{className:"text-xs text-warning text-center mt-2",children:"Unable to retrieve multisig configuration. Please ensure you have completed the multisig registration."})]})]})]}),q&&e.jsxs("div",{className:"bg-light/5 rounded-lg p-5 mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"i-mdi:trophy text-warning mr-2 h-5 w-5"}),"Your Broker Tier"]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-primary-light",children:q.tier}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Current Tier Level"})]}),e.jsx("div",{className:"bg-primary/20 p-3 rounded-full",children:e.jsx("div",{className:"i-mdi:star text-primary w-8 h-8"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-background-card rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Staking Volume"}),e.jsxs("div",{className:"font-medium",children:["$",new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(parseFloat(q.stakingVolume))]})]}),e.jsxs("div",{className:"bg-background-card rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Trading Volume"}),e.jsxs("div",{className:"font-medium",children:["$",new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(parseFloat(q.tradingVolume))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-success/10 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Orderly Maker Fee"}),e.jsxs("div",{className:"font-medium text-success",children:[new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:4}).format(parseFloat(q.makerFeeRate)/100),"%"]})]}),e.jsxs("div",{className:"bg-info/10 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Orderly Taker Fee"}),e.jsxs("div",{className:"font-medium text-info",children:[new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:4}).format(parseFloat(q.takerFeeRate)/100),"%"]})]})]}),e.jsxs("div",{className:"mt-4 text-xs text-gray-400",children:["Last updated:"," ",new Date(q.logDate).toLocaleDateString()]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-light/10",children:[e.jsxs("p",{className:"text-xs text-gray-400",children:[e.jsx("span",{className:"text-primary-light font-medium",children:"Tier Benefits:"})," ","Higher tiers reduce the fees Orderly charges you, allowing you to earn higher fees yourself. Stake more ORDER tokens or increase trading volume to upgrade your tier."]}),e.jsx("div",{className:"mt-2 bg-warning/10 border border-warning/20 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"i-mdi:information-outline text-warning w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-warning font-medium mb-1",children:"Important: Admin Wallet Staking"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["ORDER tokens must be staked on your admin wallet"," ",r!=null&&r.isMultisig?e.jsxs(e.Fragment,{children:["(your multisig:"," ",e.jsx("span",{className:"font-mono text-primary-light",children:r.multisigAddress?`${r.multisigAddress.slice(0,6)}...${r.multisigAddress.slice(-4)}`:"loading..."}),")"]}):e.jsx(e.Fragment,{children:"(your connected EOA wallet)"})," ","to count towards your broker tier. Staking on other addresses will not improve your tier."]})]})]})}),e.jsx("div",{className:"mt-2 bg-info/10 border border-info/20 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"i-mdi:clock-outline text-info w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-info font-medium mb-1",children:"Daily Tier Updates"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Tier information is updated once per day, so changes to your staking or trading volume may take up to 24 hours to reflect in your tier level."})]})]})})]})]}),e.jsx(He,{makerFee:U,takerFee:_,rwaMakerFee:Y,rwaTakerFee:L,readOnly:!1,defaultOpenCalculator:!0,showSaveButton:!0,useOrderlyApi:!0,brokerId:r==null?void 0:r.brokerId,onFeesChange:(s,a,c,g)=>{w(s),k(a),E(c||0),B(g||50)}}),e.jsx(ze,{})]})}):e.jsxs(he,{className:"w-full max-w-lg mx-auto slide-fade-in",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Graduate Your DEX"}),e.jsxs("div",{className:"bg-light/5 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-md font-medium mb-3",children:"What is DEX Graduation?"}),e.jsx("p",{className:"text-gray-300 text-sm mb-3",children:"Graduating your DEX enables revenue sharing and additional features:"}),e.jsxs("ul",{className:"text-sm space-y-2 mb-3",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"i-mdi:cash-multiple text-success w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"You'll earn a percentage of all trading fees generated through your DEX"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"i-mdi:cog text-warning w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"You can customize trading fees to optimize for your community"})]})]}),e.jsxs("p",{className:"text-gray-300 text-sm",children:[e.jsx("span",{className:"font-medium",children:"Why send tokens for graduation?"})," ","This requirement ensures DEX creators are committed to the Orderly ecosystem and helps maintain quality standards."]})]}),e.jsx(ze,{}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"bg-light/5 rounded-xl p-4 mb-4",children:[e.jsxs("h3",{className:"text-md font-medium mb-2 flex items-center",children:[e.jsx("div",{className:"i-mdi:cog text-gray-400 w-5 h-5 mr-2"}),"Trading Fee Configuration"]}),e.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"Configure your trading fees to determine your revenue split. Default values are shown below."}),e.jsx(He,{makerFee:U,takerFee:_,rwaMakerFee:Y,rwaTakerFee:L,readOnly:!1,onFeesChange:(s,a,c,g)=>{w(s),k(a),E(c||0),B(g||50)},defaultOpenCalculator:!1,alwaysShowConfig:!0,showSaveButton:!1})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx(ls,{id:"brokerId",label:"Broker ID",type:"text",value:j,onChange:s=>ge(s.target.value),placeholder:"my-broker-id",required:!0,helpText:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-400 mb-1 block",children:"Your preferred unique broker ID (5-15 characters, lowercase letters, numbers, hyphens, and underscores only)"}),e.jsx("span",{className:"text-gray-400 mt-1 block",children:"This ID uniquely identifies your DEX in the Orderly ecosystem and will be used for revenue tracking and user rewards."})]}),validator:ks(fe),onError:s=>X(s)}),!S&&j&&e.jsxs("div",{className:"mt-1 text-xs text-success flex items-center",children:[e.jsx("span",{className:"i-mdi:check-circle mr-1"}),"Broker ID is available"]}),n&&e.jsxs("div",{className:"mb-6 mt-8",children:[e.jsx("p",{className:"text-gray-300 mb-4",children:"Choose your graduation payment method:"}),e.jsx("div",{className:"mb-4",children:e.jsxs("button",{onClick:()=>de("tokenSelection",{onSelect:t,currentChain:T,currentPaymentType:h}),className:"w-full p-4 border border-light/10 bg-background-card hover:border-light/20 rounded-xl transition-colors text-left",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-8 h-8 rounded-full bg-background-card flex items-center justify-center overflow-hidden",children:[e.jsx("img",{src:h==="usdc"?"https://assets.coingecko.com/coins/images/6319/standard/usdc.png":"https://assets.coingecko.com/coins/images/38501/standard/Orderly_Network_Coingecko_200*200.png",alt:h==="usdc"?"USDC":"ORDER",className:"w-6 h-6 rounded-full",onError:s=>{const a=s.currentTarget;a.style.display="none";const c=a.nextElementSibling;c&&(c.style.display="block")}}),e.jsx("span",{className:"text-lg hidden",children:h==="usdc"?"💵":"🪙"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:h==="usdc"?"USDC":"ORDER"}),e.jsxs("div",{className:"text-xs text-gray-400 flex items-center gap-1 mt-1",children:[e.jsx("img",{src:Ns(N),alt:((rs=ke.find(s=>s.id===N))==null?void 0:rs.name)||N,className:"w-3 h-3 rounded-full",onError:s=>{const a=s.currentTarget;a.style.display="none";const c=a.nextElementSibling;c&&(c.style.display="block")}}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary hidden"}),((ts=ke.find(s=>s.id===N))==null?void 0:ts.name)||N]}),e.jsx("div",{className:"text-sm text-gray-400 mt-1",children:h==="usdc"?`$${n.usdc.amount.toLocaleString()} USDC`:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{children:[n.order.amount.toLocaleString()," ORDER"," ","(~$",(n.order.amount*n.order.currentPrice).toFixed(2),")"]}),e.jsx("div",{className:"bg-warning/20 text-warning px-2 py-1 rounded-full text-xs font-medium",children:"25% OFF"})]})})]})]}),e.jsx("div",{className:"text-primary-light",children:e.jsx("div",{className:"i-mdi:chevron-right w-5 h-5"})})]}),l&&e.jsxs("div",{className:"mt-2 text-xs text-gray-400",children:["Your balance:"," ",parseFloat(l.formatted).toFixed(2)," ",h==="usdc"?"USDC":"ORDER"]})]})}),e.jsx("div",{className:"bg-warning/10 border border-warning/20 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"i-mdi:alert-circle text-warning w-5 h-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-warning font-medium text-sm mb-1",children:"Do NOT send tokens manually"}),e.jsx("p",{className:"text-xs text-gray-400",children:"The system will handle the token transfer automatically when you click the button below. Do not send tokens to any address manually - this will not complete your graduation."})]})]})}),e.jsxs("p",{className:"text-gray-300 text-sm",children:["The system will automatically transfer the required tokens when you click the button below.",h==="order"&&e.jsxs("a",{href:Ke(N),target:"_blank",rel:"noopener noreferrer",className:"ml-1 text-primary-light hover:underline inline-flex items-center",children:["Need ORDER tokens? Buy here",e.jsx("span",{className:"i-mdi:open-in-new w-3.5 h-3.5 ml-1"})]})]})]}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"border rounded-xl p-4 bg-primary/10 border-primary/20",children:[e.jsxs("h3",{className:"text-md font-medium mb-2 flex items-center",children:[e.jsx("div",{className:"w-5 h-5 mr-2 i-mdi:rocket-launch text-primary"}),"Send ",h==="usdc"?"USDC":"ORDER"," Tokens"]}),e.jsxs("p",{className:"text-sm text-gray-300 mb-4",children:["Send ",h==="usdc"?"USDC":"ORDER"," tokens and verify in one step directly from your wallet."]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Using token:"}),e.jsxs("div",{className:"text-xs bg-info/20 text-info px-2 py-1 rounded-full flex items-center",children:[e.jsx("div",{className:"i-mdi:information-outline mr-1 w-3.5 h-3.5"}),e.jsxs("span",{children:[((as=ke.find(s=>s.id===N))==null?void 0:as.name)||N," ",h==="usdc"?"USDC":"ORDER"]})]})]}),l&&e.jsxs("div",{className:"text-xs mb-3 flex items-center",children:[e.jsx("span",{className:"text-info",children:"Your balance:"})," ",e.jsxs("span",{className:"font-medium ml-1",children:[new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(parseFloat((l==null?void 0:l.formatted)||"0"))," ",h==="usdc"?"USDC":"ORDER"]}),n&&parseFloat((l==null?void 0:l.formatted)||"0")<(h==="usdc"?n.usdc.amount:n.order.amount)&&e.jsxs("div",{className:"ml-2 text-warning flex items-center",children:["(Insufficient for graduation)",h==="order"&&e.jsxs("a",{href:Ke(N),target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-primary-light hover:underline inline-flex items-center",children:["Buy ORDER",e.jsx("span",{className:"i-mdi:open-in-new w-3 h-3 ml-0.5"})]})]})]})]}),h==="order"&&e.jsxs("div",{className:"bg-warning/10 border border-warning/20 rounded-lg p-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"i-mdi:tag text-warning w-4 h-4"}),e.jsx("span",{className:"text-warning font-medium text-sm",children:"Save 25% by paying with ORDER tokens!"})]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Instead of $",n==null?void 0:n.usdc.amount.toLocaleString()," USDC, pay only ",n==null?void 0:n.order.amount.toLocaleString()," ORDER (~$",(((n==null?void 0:n.order.amount)||0)*((n==null?void 0:n.order.currentPrice)||0)).toFixed(2),")"]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"text-sm",children:"Amount:"}),e.jsx("div",{className:"font-medium flex items-center gap-2",children:n?h==="usdc"?`${n.usdc.amount.toLocaleString()} USDC`:e.jsxs(e.Fragment,{children:[n.order.amount.toLocaleString()," ORDER",e.jsx("div",{className:"bg-warning/20 text-warning px-2 py-1 rounded-full text-xs font-medium",children:"25% OFF"})]}):"Loading..."})]}),e.jsx(W,{onClick:je?Ce:()=>Ne({chainId:M}),isLoading:P||xe||se,loadingText:P?"Confirm in wallet...":xe?"Confirming...":"Verifying transaction... This may take 1-2 minutes",disabled:je&&(!!S||!j||!n||se||(n&&l?parseFloat((l==null?void 0:l.formatted)||"0")<(h==="usdc"?n.usdc.amount:n.order.amount):!1)),variant:"primary",className:"w-full justify-center",children:je?`Transfer ${h==="usdc"?"USDC":"ORDER"} Tokens`:"Switch Chain"}),te&&C&&!A&&e.jsx("div",{className:"mt-3 bg-success/10 text-success text-sm p-2 rounded",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Transfer successful! Verifying transaction..."}),es(C,N)&&e.jsxs("a",{href:es(C,N),target:"_blank",rel:"noopener noreferrer",className:"text-primary-light hover:text-primary text-xs flex items-center ml-2",children:["View on Explorer",e.jsx("span",{className:"i-mdi:open-in-new w-3 h-3 ml-1"})]})]})})]}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{type:"button",onClick:()=>oe(!re),className:"text-sm text-primary-light hover:text-primary flex items-center gap-1 mx-auto",children:[e.jsx("div",{className:Fs("transition-transform",re?"rotate-90":""),children:e.jsx("div",{className:"i-mdi:chevron-right w-4 h-4"})}),re?"Hide manual option":`I already sent ${h==="usdc"?"USDC":"ORDER"} tokens`]})}),re&&e.jsxs("div",{className:"border rounded-xl p-4 bg-background-card",children:[e.jsxs("h3",{className:"text-md font-medium mb-2 flex items-center",children:[e.jsx("div",{className:"w-5 h-5 mr-2 i-mdi:file-document text-gray-400"}),"Manual Transaction Verification"]}),e.jsxs("p",{className:"text-sm text-gray-300 mb-4",children:["If you've already sent"," ",h==="usdc"?"USDC":"ORDER"," tokens, enter the transaction hash to verify and complete your graduation."]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Recipient Address:"}),e.jsxs("button",{onClick:()=>$e((n==null?void 0:n.receiverAddress)||"","Recipient Address"),className:"text-primary-light hover:text-primary text-xs flex items-center",children:[e.jsx("div",{className:"i-mdi:content-copy w-3 h-3 mr-1"}),"Copy"]})]}),e.jsx("div",{className:"bg-background-dark/70 p-2 rounded overflow-hidden",children:e.jsx("code",{className:"text-xs font-mono break-all w-full block",children:(n==null?void 0:n.receiverAddress)||"Loading..."})})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsxs("p",{className:"text-xs text-gray-400",children:[h==="usdc"?"USDC":"ORDER"," Token Address:"]}),e.jsxs("a",{href:Ke(N),target:"_blank",rel:"noopener noreferrer",className:"text-primary-light hover:text-primary text-xs flex items-center",children:[e.jsx("div",{className:"i-mdi:cart w-3 h-3 mr-1"}),"Buy ",h==="usdc"?"USDC":"ORDER"]})]}),e.jsx("div",{className:"bg-background-dark/70 p-2 rounded overflow-hidden",children:e.jsx("code",{className:"text-xs font-mono break-all w-full block",children:Q})})]}),e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-4 my-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"i-mdi:information-outline text-blue-400 mt-0.5 h-5 w-5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-blue-400 mb-1",children:"Transaction Verification"}),e.jsx("p",{className:"text-xs text-gray-300",children:"Verification involves checking the blockchain transaction and may take 1-2 minutes to complete. Please be patient and do not refresh the page during this process."})]})]})}),e.jsxs("form",{onSubmit:hs,className:"space-y-4",children:[e.jsx(ls,{id:"txHash",label:"Transaction Hash",type:"text",value:b,onChange:s=>D(s.target.value),placeholder:"0x...",required:!0,helpText:`The transaction hash of your ${h==="usdc"?"USDC":"ORDER"} token transfer`}),e.jsx(W,{type:"submit",variant:"secondary",isLoading:se,loadingText:"Verifying transaction... This may take 1-2 minutes",className:"w-full justify-center",disabled:!b||!!S||!j,children:"Verify Transaction"}),(!b||!!S||!j)&&e.jsxs("div",{className:"mt-2 text-xs text-gray-400 text-center",children:[!j&&e.jsx("span",{children:"Please enter your broker ID to continue"}),j&&S&&e.jsx("span",{children:"Please fix the broker ID error above"}),j&&!S&&!b&&e.jsx("span",{children:"Please enter the transaction hash to verify"})]})]})]})]})]}),A&&e.jsxs("div",{className:`mt-4 p-4 rounded-lg ${A.success?"bg-success/10":"bg-error/10"}`,children:[e.jsx("p",{className:A.success?"text-success":"text-error",children:A.message}),A.success&&A.amount&&e.jsxs("p",{className:"text-gray-300 text-sm mt-2",children:["Verified transfer of ",A.amount," ",h==="usdc"?"USDC":"ORDER"," tokens"]})]})]})}function Fr(){const{isAuthenticated:o,isLoading:x}=Je(),{refreshDexData:m}=Ys(),[f,b]=i.useState(!1);return x?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh] mt-26 pb-52",children:e.jsx("div",{className:"i-svg-spinners:three-dots text-4xl text-primary"})}):e.jsxs("div",{className:"container mx-auto p-4 max-w-3xl mt-26 pb-52",children:[e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:e.jsxs("div",{children:[e.jsxs(Ks,{to:"/dex",className:"text-sm text-gray-400 hover:text-primary-light mb-2 inline-flex items-center",children:[e.jsx("div",{className:"i-mdi:arrow-left h-4 w-4 mr-1"}),"Back to DEX Dashboard"]}),e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Graduate Your DEX"}),e.jsx("p",{className:"text-gray-300 max-w-2xl",children:"By sending ORDER tokens, you can graduate your DEX to earn fee splits and unlock additional features."})]})]})}),f&&o&&e.jsxs("div",{className:"max-w-3xl mx-auto mb-8",children:[e.jsx(he,{className:"border border-warning/20 bg-warning/5 mb-8",children:e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx("div",{className:"bg-warning/20 p-2 rounded-full flex-shrink-0",children:e.jsx("div",{className:"i-mdi:alert-circle text-warning w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-warning",children:"DEX Setup Required"}),e.jsx("p",{className:"text-gray-300 mt-1 mb-3",children:"Before you can graduate your DEX to earn trading fees, you need to create a DEX first. Please go to the DEX creation page to set up your own customized decentralized exchange powered by Orderly."}),e.jsxs("a",{href:"/",className:"inline-flex items-center px-4 py-2 rounded-full bg-warning/10 text-warning hover:bg-warning/20 transition-colors",children:[e.jsx("div",{className:"i-mdi:rocket-launch w-4 h-4 mr-2"}),"Create Your DEX",e.jsx("div",{className:"i-mdi:arrow-right w-4 h-4 ml-2"})]})]})]})}),e.jsxs(he,{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-medium mb-4",children:"Preview Revenue Potential"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"While you need to create a DEX first, you can still explore the potential revenue you could earn after graduation:"}),e.jsx(ze,{}),e.jsx(He,{makerFee:30,takerFee:60,readOnly:!0,defaultOpenCalculator:!0})]})]}),o?e.jsxs(e.Fragment,{children:[e.jsx(tr,{onNoDexSetup:()=>b(!0),onGraduationSuccess:m}),e.jsxs("div",{className:"mt-16 max-w-2xl mx-auto bg-light/5 rounded-xl p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Benefits of Graduating"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx("div",{className:"bg-primary/20 p-2 rounded-full",children:e.jsx("div",{className:"i-mdi:cash-multiple text-primary w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:"Fee Revenue"}),e.jsx("p",{className:"text-gray-300",children:"Earn a split of trading fees generated by users on your DEX. Your revenue comes from the custom fee component that you set."})]})]}),e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx("div",{className:"bg-primary/20 p-2 rounded-full",children:e.jsx("div",{className:"i-mdi:card-account-details text-primary w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:"Unique Broker ID"}),e.jsx("p",{className:"text-gray-300",children:"Get your own unique identifier in the Orderly ecosystem to track your revenue and rewards. This ID is essential for revenue attribution."})]})]}),e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx("div",{className:"bg-warning/20 p-2 rounded-full",children:e.jsx("div",{className:"i-mdi:finance text-warning w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:"Builder Staking Programme"}),e.jsx("p",{className:"text-gray-300",children:"Access our 5-tier staking system to reduce base fees and unlock additional benefits. Achieve Silver tier (2.75 bps) with 100K ORDER or $30M volume, Gold tier (2.50 bps) with 250K ORDER or $90M volume, Platinum tier (2.00 bps) with 2M ORDER or $1B volume, or Diamond tier (1.00 bps) with 7M ORDER or $10B volume."}),e.jsxs("a",{href:"https://app.orderly.network/",target:"_blank",rel:"noopener noreferrer",className:"mt-2 text-primary-light hover:text-primary inline-flex items-center text-sm",children:["Stake ORDER tokens",e.jsx("div",{className:"i-mdi:arrow-right ml-1 w-4 h-4"})]}),e.jsx("div",{className:"flex gap-2 mt-1",children:e.jsxs("a",{href:"https://orderly.network/docs/build-on-omnichain/user-flows/builder-staking-programme",target:"_blank",rel:"noopener noreferrer",className:"text-primary-light hover:text-primary inline-flex items-center text-sm",children:[e.jsx("div",{className:"i-mdi:file-document-outline w-4 h-4 mr-1"}),"View programme details"]})}),e.jsxs("div",{className:"mt-2 bg-warning/10 p-2 rounded text-xs flex items-start gap-1.5",children:[e.jsx("div",{className:"i-mdi:alert-circle-outline text-warning w-4 h-4 flex-shrink-0 mt-0.5"}),e.jsxs("p",{className:"text-gray-300",children:["You must use the"," ",e.jsx("span",{className:"font-medium",children:"same wallet"})," for staking that you used to set up your DEX."]})]})]})]}),e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx("div",{className:"bg-success/20 p-2 rounded-full",children:e.jsx("div",{className:"i-mdi:shield-check text-success w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:"Enhanced Support & Services"}),e.jsx("p",{className:"text-gray-300",children:"As you progress through higher tiers, unlock additional benefits including dedicated tech support, marketing assistance, and priority for new chain expansions. Platinum and Diamond tier members receive enhanced marketing support, flagship partner program access, and dedicated customer service."})]})]})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-light/10",children:e.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[e.jsx("div",{className:"i-mdi:information-outline text-info w-5 h-5 flex-shrink-0 mt-0.5"}),e.jsxs("p",{className:"text-gray-400",children:[e.jsx("span",{className:"text-white font-medium",children:"DEX Fee Structure:"})," ","Your custom fees represent the total fees that traders pay. Orderly's base fee (which varies by tier) is deducted from your custom fees to calculate your revenue. The base fee supports the Orderly ecosystem infrastructure and liquidity."]})]})})]})]}):e.jsx("div",{className:"w-full max-w-3xl mx-auto px-4 py-6 md:py-10",children:e.jsx("div",{className:"text-center",children:e.jsxs(he,{children:[e.jsx("h2",{className:"text-lg md:text-xl font-medium mb-3 md:mb-4",children:"Authentication Required"}),e.jsx("p",{className:"mb-4 md:mb-6 text-sm md:text-base text-gray-300",children:"Please connect your wallet and login to access DEX graduation benefits."}),e.jsx("div",{className:"flex justify-center",children:e.jsx(Ls,{})})]})})})]})}export{Fr as default};
