const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/secp256k1-kO8RdEKQ.js","assets/index-BftLqECp.js","assets/index-gtzDq4NN.js","assets/ccip-BhoN9g09.js","assets/embedded-wallet-BDUUyQ4_.js","assets/if-defined-DD_1_acj.js","assets/index-psDRzQtt.js","assets/index-BAZBxnpC.js","assets/index-BKdQC-7I.js","assets/index-D2vU-kRu.js","assets/index-BhDhECzZ.js","assets/index-dMpcFRi2.js","assets/index-i65RN3RT.js","assets/index-DTCIio-U.js","assets/email-B4f2FXJV.js","assets/index-Ci4Y-PCN.js","assets/socials-psGRtsKj.js","assets/index-CkntE5FT.js","assets/index-hG0Tu7D1.js","assets/index-BMHo5J-A.js","assets/dijkstra-C00ieaqj.js","assets/index-4szKfCc7.js","assets/swaps-B2qPRLXd.js","assets/index-Q6JPLwjY.js","assets/index-DP-n7Gdg.js","assets/index-yccNFe1e.js","assets/send-D1DQvNWr.js","assets/index-9eZJYJpG.js","assets/receive-CJH8kBg8.js","assets/index-CkEN5PnR.js","assets/onramp-D3lbo5cP.js","assets/index-CVhz9YrC.js","assets/dayjs.min-DsMxAas2.js","assets/index-B7RfgT_Z.js","assets/transactions-CXG_ZYn9.js","assets/index-DCxvuAse.js","assets/index-DKc0ceRv.js","assets/index-BLicqXLH.js","assets/w3m-modal-ClnZSz2-.js","assets/index-CGS4Xqe0.js"])))=>i.map(i=>d[i]);
import{r as tt,W as Ye,p as Ut,g as hp,b as Pw,c as Kr}from"./index-gtzDq4NN.js";import{n as _A,B as Et,g as ce,p as xw,_ as Zt,q as CA,s as IA,E as SA}from"./index-BftLqECp.js";function Ow(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=Ow(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Ts(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=Ow(t))&&(n&&(n+=" "),n+=e);return n}function TA(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}TA(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Wa=t=>typeof t=="number"&&!isNaN(t),xs=t=>typeof t=="string",En=t=>typeof t=="function",NA=t=>xs(t)||Wa(t),Bd=t=>xs(t)||En(t)?t:null,PA=(t,e)=>t===!1||Wa(t)&&t>0?t:e,Ld=t=>tt.isValidElement(t)||xs(t)||En(t)||Wa(t);function xA(t,e,r=300){let{scrollHeight:n,style:s}=t;requestAnimationFrame(()=>{s.minHeight="initial",s.height=n+"px",s.transition=`all ${r}ms`,requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(e,r)})})}function OA({enter:t,exit:e,appendPosition:r=!1,collapse:n=!0,collapseDuration:s=300}){return function({children:i,position:o,preventExitTransition:a,done:l,nodeRef:c,isIn:u,playToast:d}){let h=r?`${t}--${o}`:t,p=r?`${e}--${o}`:e,g=tt.useRef(0);return tt.useLayoutEffect(()=>{let f=c.current,y=h.split(" "),b=m=>{m.target===c.current&&(d(),f.removeEventListener("animationend",b),f.removeEventListener("animationcancel",b),g.current===0&&m.type!=="animationcancel"&&f.classList.remove(...y))};f.classList.add(...y),f.addEventListener("animationend",b),f.addEventListener("animationcancel",b)},[]),tt.useEffect(()=>{let f=c.current,y=()=>{f.removeEventListener("animationend",y),n?xA(f,l,s):l()};u||(a?y():(g.current=1,f.className+=` ${p}`,f.addEventListener("animationend",y)))},[u]),Ye.createElement(Ye.Fragment,null,i)}}function Nf(t,e){return{content:Rw(t.content,t.props),containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,reason:t.removalReason,status:e}}function Rw(t,e,r=!1){return tt.isValidElement(t)&&!xs(t.type)?tt.cloneElement(t,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:r}):En(t)?t({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:r}):t}function RA({closeToast:t,theme:e,ariaLabel:r="close"}){return Ye.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:n=>{n.stopPropagation(),t(!0)},"aria-label":r},Ye.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Ye.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function DA({delay:t,isRunning:e,closeToast:r,type:n="default",hide:s,className:i,controlledProgress:o,progress:a,rtl:l,isIn:c,theme:u}){let d=s||o&&a===0,h={animationDuration:`${t}ms`,animationPlayState:e?"running":"paused"};o&&(h.transform=`scaleX(${a})`);let p=Ts("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${u}`,`Toastify__progress-bar--${n}`,{"Toastify__progress-bar--rtl":l}),g=En(i)?i({rtl:l,type:n,defaultClassName:p}):Ts(p,i),f={[o&&a>=1?"onTransitionEnd":"onAnimationEnd"]:o&&a<1?null:()=>{c&&r()}};return Ye.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":d},Ye.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${u} Toastify__progress-bar--${n}`}),Ye.createElement("div",{role:"progressbar","aria-hidden":d?"true":"false","aria-label":"notification timer",className:g,style:h,...f}))}var kA=1,Dw=()=>`${kA++}`;function $A(t,e,r){let n=1,s=0,i=[],o=[],a=e,l=new Map,c=new Set,u=m=>(c.add(m),()=>c.delete(m)),d=()=>{o=Array.from(l.values()),c.forEach(m=>m())},h=({containerId:m,toastId:w,updateId:C})=>{let _=m?m!==t:t!==1,v=l.has(w)&&C==null;return _||v},p=(m,w)=>{l.forEach(C=>{var _;(w==null||w===C.props.toastId)&&((_=C.toggle)==null||_.call(C,m))})},g=m=>{var w,C;(C=(w=m.props)==null?void 0:w.onClose)==null||C.call(w,m.removalReason),m.isActive=!1},f=m=>{if(m==null)l.forEach(g);else{let w=l.get(m);w&&g(w)}d()},y=()=>{s-=i.length,i=[]},b=m=>{var w,C;let{toastId:_,updateId:v}=m.props,A=v==null;m.staleId&&l.delete(m.staleId),m.isActive=!0,l.set(_,m),d(),r(Nf(m,A?"added":"updated")),A&&((C=(w=m.props).onOpen)==null||C.call(w))};return{id:t,props:a,observe:u,toggle:p,removeToast:f,toasts:l,clearQueue:y,buildToast:(m,w)=>{if(h(w))return;let{toastId:C,updateId:_,data:v,staleId:A,delay:N}=w,T=_==null;T&&s++;let O={...a,style:a.toastStyle,key:n++,...Object.fromEntries(Object.entries(w).filter(([U,L])=>L!=null)),toastId:C,updateId:_,data:v,isIn:!1,className:Bd(w.className||a.toastClassName),progressClassName:Bd(w.progressClassName||a.progressClassName),autoClose:w.isLoading?!1:PA(w.autoClose,a.autoClose),closeToast(U){l.get(C).removalReason=U,f(C)},deleteToast(){let U=l.get(C);if(U!=null){if(r(Nf(U,"removed")),l.delete(C),s--,s<0&&(s=0),i.length>0){b(i.shift());return}d()}}};O.closeButton=a.closeButton,w.closeButton===!1||Ld(w.closeButton)?O.closeButton=w.closeButton:w.closeButton===!0&&(O.closeButton=Ld(a.closeButton)?a.closeButton:!0);let x={content:m,props:O,staleId:A};a.limit&&a.limit>0&&s>a.limit&&T?i.push(x):Wa(N)?setTimeout(()=>{b(x)},N):b(x)},setProps(m){a=m},setToggle:(m,w)=>{let C=l.get(m);C&&(C.toggle=w)},isToastActive:m=>{var w;return(w=l.get(m))==null?void 0:w.isActive},getSnapshot:()=>o}}var jt=new Map,Zo=[],jd=new Set,UA=t=>jd.forEach(e=>e(t)),kw=()=>jt.size>0;function MA(){Zo.forEach(t=>Uw(t.content,t.options)),Zo=[]}var FA=(t,{containerId:e})=>{var r;return(r=jt.get(e||1))==null?void 0:r.toasts.get(t)};function $w(t,e){var r;if(e)return!!((r=jt.get(e))!=null&&r.isToastActive(t));let n=!1;return jt.forEach(s=>{s.isToastActive(t)&&(n=!0)}),n}function BA(t){if(!kw()){Zo=Zo.filter(e=>t!=null&&e.options.toastId!==t);return}if(t==null||NA(t))jt.forEach(e=>{e.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){let e=jt.get(t.containerId);e?e.removeToast(t.id):jt.forEach(r=>{r.removeToast(t.id)})}}var LA=(t={})=>{jt.forEach(e=>{e.props.limit&&(!t.containerId||e.id===t.containerId)&&e.clearQueue()})};function Uw(t,e){Ld(t)&&(kw()||Zo.push({content:t,options:e}),jt.forEach(r=>{r.buildToast(t,e)}))}function jA(t){var e;(e=jt.get(t.containerId||1))==null||e.setToggle(t.id,t.fn)}function Mw(t,e){jt.forEach(r=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===r.id)&&r.toggle(t,e==null?void 0:e.id)})}function zA(t){let e=t.containerId||1;return{subscribe(r){let n=$A(e,t,UA);jt.set(e,n);let s=n.observe(r);return MA(),()=>{s(),jt.delete(e)}},setProps(r){var n;(n=jt.get(e))==null||n.setProps(r)},getSnapshot(){var r;return(r=jt.get(e))==null?void 0:r.getSnapshot()}}}function HA(t){return jd.add(t),()=>{jd.delete(t)}}function qA(t){return t&&(xs(t.toastId)||Wa(t.toastId))?t.toastId:Dw()}function Va(t,e){return Uw(t,e),e.toastId}function Ll(t,e){return{...e,type:e&&e.type||t,toastId:qA(e)}}function jl(t){return(e,r)=>Va(e,Ll(t,r))}function He(t,e){return Va(t,Ll("default",e))}He.loading=(t,e)=>Va(t,Ll("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function WA(t,{pending:e,error:r,success:n},s){let i;e&&(i=xs(e)?He.loading(e,s):He.loading(e.render,{...s,...e}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},a=(c,u,d)=>{if(u==null){He.dismiss(i);return}let h={type:c,...o,...s,data:d},p=xs(u)?{render:u}:u;return i?He.update(i,{...h,...p}):He(p.render,{...h,...p}),d},l=En(t)?t():t;return l.then(c=>a("success",n,c)).catch(c=>a("error",r,c)),l}He.promise=WA;He.success=jl("success");He.info=jl("info");He.error=jl("error");He.warning=jl("warning");He.warn=He.warning;He.dark=(t,e)=>Va(t,Ll("default",{theme:"dark",...e}));function VA(t){BA(t)}He.dismiss=VA;He.clearWaitingQueue=LA;He.isActive=$w;He.update=(t,e={})=>{let r=FA(t,e);if(r){let{props:n,content:s}=r,i={delay:100,...n,...e,toastId:e.toastId||t,updateId:Dw()};i.toastId!==t&&(i.staleId=t);let o=i.render||s;delete i.render,Va(o,i)}};He.done=t=>{He.update(t,{progress:1})};He.onChange=HA;He.play=t=>Mw(!0,t);He.pause=t=>Mw(!1,t);function GA(t){var e;let{subscribe:r,getSnapshot:n,setProps:s}=tt.useRef(zA(t)).current;s(t);let i=(e=tt.useSyncExternalStore(r,n,n))==null?void 0:e.slice();function o(a){if(!i)return[];let l=new Map;return t.newestOnTop&&i.reverse(),i.forEach(c=>{let{position:u}=c.props;l.has(u)||l.set(u,[]),l.get(u).push(c)}),Array.from(l,c=>a(c[0],c[1]))}return{getToastToRender:o,isToastActive:$w,count:i==null?void 0:i.length}}function KA(t){let[e,r]=tt.useState(!1),[n,s]=tt.useState(!1),i=tt.useRef(null),o=tt.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:a,pauseOnHover:l,closeToast:c,onClick:u,closeOnClick:d}=t;jA({id:t.toastId,containerId:t.containerId,fn:r}),tt.useEffect(()=>{if(t.pauseOnFocusLoss)return h(),()=>{p()}},[t.pauseOnFocusLoss]);function h(){document.hasFocus()||b(),window.addEventListener("focus",y),window.addEventListener("blur",b)}function p(){window.removeEventListener("focus",y),window.removeEventListener("blur",b)}function g(A){if(t.draggable===!0||t.draggable===A.pointerType){m();let N=i.current;o.canCloseOnClick=!0,o.canDrag=!0,N.style.transition="none",t.draggableDirection==="x"?(o.start=A.clientX,o.removalDistance=N.offsetWidth*(t.draggablePercent/100)):(o.start=A.clientY,o.removalDistance=N.offsetHeight*(t.draggablePercent===80?t.draggablePercent*1.5:t.draggablePercent)/100)}}function f(A){let{top:N,bottom:T,left:O,right:x}=i.current.getBoundingClientRect();A.nativeEvent.type!=="touchend"&&t.pauseOnHover&&A.clientX>=O&&A.clientX<=x&&A.clientY>=N&&A.clientY<=T?b():y()}function y(){r(!0)}function b(){r(!1)}function m(){o.didMove=!1,document.addEventListener("pointermove",C),document.addEventListener("pointerup",_)}function w(){document.removeEventListener("pointermove",C),document.removeEventListener("pointerup",_)}function C(A){let N=i.current;if(o.canDrag&&N){o.didMove=!0,e&&b(),t.draggableDirection==="x"?o.delta=A.clientX-o.start:o.delta=A.clientY-o.start,o.start!==A.clientX&&(o.canCloseOnClick=!1);let T=t.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;N.style.transform=`translate3d(${T},0)`,N.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function _(){w();let A=i.current;if(o.canDrag&&o.didMove&&A){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){s(!0),t.closeToast(!0),t.collapseAll();return}A.style.transition="transform 0.2s, opacity 0.2s",A.style.removeProperty("transform"),A.style.removeProperty("opacity")}}let v={onPointerDown:g,onPointerUp:f};return a&&l&&(v.onMouseEnter=b,t.stacked||(v.onMouseLeave=y)),d&&(v.onClick=A=>{u&&u(A),o.canCloseOnClick&&c(!0)}),{playToast:y,pauseToast:b,isRunning:e,preventExitTransition:n,toastRef:i,eventHandlers:v}}var QA=typeof window<"u"?tt.useLayoutEffect:tt.useEffect,zl=({theme:t,type:e,isLoading:r,...n})=>Ye.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...n});function YA(t){return Ye.createElement(zl,{...t},Ye.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function JA(t){return Ye.createElement(zl,{...t},Ye.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function ZA(t){return Ye.createElement(zl,{...t},Ye.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function XA(t){return Ye.createElement(zl,{...t},Ye.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function e1(){return Ye.createElement("div",{className:"Toastify__spinner"})}var zd={info:JA,warning:YA,success:ZA,error:XA,spinner:e1},t1=t=>t in zd;function r1({theme:t,type:e,isLoading:r,icon:n}){let s=null,i={theme:t,type:e};return n===!1||(En(n)?s=n({...i,isLoading:r}):tt.isValidElement(n)?s=tt.cloneElement(n,i):r?s=zd.spinner():t1(e)&&(s=zd[e](i))),s}var n1=t=>{let{isRunning:e,preventExitTransition:r,toastRef:n,eventHandlers:s,playToast:i}=KA(t),{closeButton:o,children:a,autoClose:l,onClick:c,type:u,hideProgressBar:d,closeToast:h,transition:p,position:g,className:f,style:y,progressClassName:b,updateId:m,role:w,progress:C,rtl:_,toastId:v,deleteToast:A,isIn:N,isLoading:T,closeOnClick:O,theme:x,ariaLabel:U}=t,L=Ts("Toastify__toast",`Toastify__toast-theme--${x}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":_},{"Toastify__toast--close-on-click":O}),M=En(f)?f({rtl:_,position:g,type:u,defaultClassName:L}):Ts(L,f),I=r1(t),S=!!C||!l,R={closeToast:h,type:u,theme:x},$=null;return o===!1||(En(o)?$=o(R):tt.isValidElement(o)?$=tt.cloneElement(o,R):$=RA(R)),Ye.createElement(p,{isIn:N,done:A,position:g,preventExitTransition:r,nodeRef:n,playToast:i},Ye.createElement("div",{id:v,tabIndex:0,onClick:c,"data-in":N,className:M,...s,style:y,ref:n,...N&&{role:w,"aria-label":U}},I!=null&&Ye.createElement("div",{className:Ts("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!T})},I),Rw(a,t,!e),$,!t.customProgressBar&&Ye.createElement(DA,{...m&&!S?{key:`p-${m}`}:{},rtl:_,theme:x,delay:l,isRunning:e,isIn:N,closeToast:h,hide:d,type:u,className:b,controlledProgress:S,progress:C||0})))},s1=(t,e=!1)=>({enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}),i1=OA(s1("bounce",!0)),o1={position:"top-right",transition:i1,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:t=>t.altKey&&t.code==="KeyT"};function uj(t){let e={...o1,...t},r=t.stacked,[n,s]=tt.useState(!0),i=tt.useRef(null),{getToastToRender:o,isToastActive:a,count:l}=GA(e),{className:c,style:u,rtl:d,containerId:h,hotKeys:p}=e;function g(y){let b=Ts("Toastify__toast-container",`Toastify__toast-container--${y}`,{"Toastify__toast-container--rtl":d});return En(c)?c({position:y,rtl:d,defaultClassName:b}):Ts(b,Bd(c))}function f(){r&&(s(!0),He.play())}return QA(()=>{var y;if(r){let b=i.current.querySelectorAll('[data-in="true"]'),m=12,w=(y=e.position)==null?void 0:y.includes("top"),C=0,_=0;Array.from(b).reverse().forEach((v,A)=>{let N=v;N.classList.add("Toastify__toast--stacked"),A>0&&(N.dataset.collapsed=`${n}`),N.dataset.pos||(N.dataset.pos=w?"top":"bot");let T=C*(n?.2:1)+(n?0:m*A);N.style.setProperty("--y",`${w?T:T*-1}px`),N.style.setProperty("--g",`${m}`),N.style.setProperty("--s",`${1-(n?_:0)}`),C+=N.offsetHeight,_+=.025})}},[n,l,r]),tt.useEffect(()=>{function y(b){var m;let w=i.current;p(b)&&((m=w.querySelector('[tabIndex="0"]'))==null||m.focus(),s(!1),He.pause()),b.key==="Escape"&&(document.activeElement===w||w!=null&&w.contains(document.activeElement))&&(s(!0),He.play())}return document.addEventListener("keydown",y),()=>{document.removeEventListener("keydown",y)}},[p]),Ye.createElement("section",{ref:i,className:"Toastify",id:h,onMouseEnter:()=>{r&&(s(!1),He.pause())},onMouseLeave:f,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},o((y,b)=>{let m=b.length?{...u}:{...u,pointerEvents:"none"};return Ye.createElement("div",{tabIndex:-1,className:g(y),"data-stacked":r,style:m,key:`c-${y}`},b.map(({content:w,props:C})=>Ye.createElement(n1,{...C,stacked:r,collapseAll:f,isIn:a(C.toastId,C.containerId),key:`t-${C.key}`},w)))}))}const a1=Symbol(),Pf=Object.getPrototypeOf,Hd=new WeakMap,c1=t=>t&&(Hd.has(t)?Hd.get(t):Pf(t)===Object.prototype||Pf(t)===Array.prototype),l1=t=>c1(t)&&t[a1]||null,xf=(t,e=!0)=>{Hd.set(t,e)},nl={},Iu=t=>typeof t=="object"&&t!==null,kn=new WeakMap,ko=new WeakSet,u1=(t=Object.is,e=(c,u)=>new Proxy(c,u),r=c=>Iu(c)&&!ko.has(c)&&(Array.isArray(c)||!(Symbol.iterator in c))&&!(c instanceof WeakMap)&&!(c instanceof WeakSet)&&!(c instanceof Error)&&!(c instanceof Number)&&!(c instanceof Date)&&!(c instanceof String)&&!(c instanceof RegExp)&&!(c instanceof ArrayBuffer),n=c=>{switch(c.status){case"fulfilled":return c.value;case"rejected":throw c.reason;default:throw c}},s=new WeakMap,i=(c,u,d=n)=>{const h=s.get(c);if((h==null?void 0:h[0])===u)return h[1];const p=Array.isArray(c)?[]:Object.create(Object.getPrototypeOf(c));return xf(p,!0),s.set(c,[u,p]),Reflect.ownKeys(c).forEach(g=>{if(Object.getOwnPropertyDescriptor(p,g))return;const f=Reflect.get(c,g),{enumerable:y}=Reflect.getOwnPropertyDescriptor(c,g),b={value:f,enumerable:y,configurable:!0};if(ko.has(f))xf(f,!1);else if(f instanceof Promise)delete b.value,b.get=()=>d(f);else if(kn.has(f)){const[m,w]=kn.get(f);b.value=i(m,w(),d)}Object.defineProperty(p,g,b)}),Object.preventExtensions(p)},o=new WeakMap,a=[1,1],l=c=>{if(!Iu(c))throw new Error("object required");const u=o.get(c);if(u)return u;let d=a[0];const h=new Set,p=(T,O=++a[0])=>{d!==O&&(d=O,h.forEach(x=>x(T,O)))};let g=a[1];const f=(T=++a[1])=>(g!==T&&!h.size&&(g=T,b.forEach(([O])=>{const x=O[1](T);x>d&&(d=x)})),d),y=T=>(O,x)=>{const U=[...O];U[1]=[T,...U[1]],p(U,x)},b=new Map,m=(T,O)=>{if((nl?"production":void 0)!=="production"&&b.has(T))throw new Error("prop listener already exists");if(h.size){const x=O[3](y(T));b.set(T,[O,x])}else b.set(T,[O])},w=T=>{var O;const x=b.get(T);x&&(b.delete(T),(O=x[1])==null||O.call(x))},C=T=>(h.add(T),h.size===1&&b.forEach(([x,U],L)=>{if((nl?"production":void 0)!=="production"&&U)throw new Error("remove already exists");const M=x[3](y(L));b.set(L,[x,M])}),()=>{h.delete(T),h.size===0&&b.forEach(([x,U],L)=>{U&&(U(),b.set(L,[x]))})}),_=Array.isArray(c)?[]:Object.create(Object.getPrototypeOf(c)),A=e(_,{deleteProperty(T,O){const x=Reflect.get(T,O);w(O);const U=Reflect.deleteProperty(T,O);return U&&p(["delete",[O],x]),U},set(T,O,x,U){const L=Reflect.has(T,O),M=Reflect.get(T,O,U);if(L&&(t(M,x)||o.has(x)&&t(M,o.get(x))))return!0;w(O),Iu(x)&&(x=l1(x)||x);let I=x;if(x instanceof Promise)x.then(S=>{x.status="fulfilled",x.value=S,p(["resolve",[O],S])}).catch(S=>{x.status="rejected",x.reason=S,p(["reject",[O],S])});else{!kn.has(x)&&r(x)&&(I=l(x));const S=!ko.has(I)&&kn.get(I);S&&m(O,S)}return Reflect.set(T,O,I,U),p(["set",[O],x,M]),!0}});o.set(c,A);const N=[_,f,i,C];return kn.set(A,N),Reflect.ownKeys(c).forEach(T=>{const O=Object.getOwnPropertyDescriptor(c,T);"value"in O&&(A[T]=c[T],delete O.value,delete O.writable),Object.defineProperty(_,T,O)}),A})=>[l,kn,ko,t,e,r,n,s,i,o,a],[d1]=u1();function Je(t={}){return d1(t)}function qt(t,e,r){const n=kn.get(t);(nl?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");let s;const i=[],o=n[3];let a=!1;const c=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,c()}}function Xo(t,e){const r=kn.get(t);(nl?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");const[n,s,i]=r;return i(n,s(),e)}function Os(t){return ko.add(t),t}function tr(t,e,r,n){let s=t[e];return qt(t,()=>{const i=t[e];Object.is(s,i)||r(s=i)})}function h1(t){const e=Je({data:Array.from([]),has(r){return this.data.some(n=>n[0]===r)},set(r,n){const s=this.data.find(i=>i[0]===r);return s?s[1]=n:this.data.push([r,n]),this},get(r){var n;return(n=this.data.find(s=>s[0]===r))==null?void 0:n[1]},delete(r){const n=this.data.findIndex(s=>s[0]===r);return n===-1?!1:(this.data.splice(n,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(r){this.data.forEach(n=>{r(n[1],n[0],this)})},keys(){return this.data.map(r=>r[0]).values()},values(){return this.data.map(r=>r[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}const ea={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(r=>r.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]}};var p1=20,f1=1,Qi=1e6,g1=1e6,m1=-7,y1=21,w1=!1,Ga="[big.js] ",Gs=Ga+"Invalid ",Hl=Gs+"decimal places",b1=Gs+"rounding mode",Fw=Ga+"Division by zero",ke={},Jr=void 0,v1=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function Bw(){function t(e){var r=this;if(!(r instanceof t))return e===Jr?Bw():new t(e);if(e instanceof t)r.s=e.s,r.e=e.e,r.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(Gs+"value");e=e===0&&1/e<0?"-0":String(e)}E1(r,e)}r.constructor=t}return t.prototype=ke,t.DP=p1,t.RM=f1,t.NE=m1,t.PE=y1,t.strict=w1,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function E1(t,e){var r,n,s;if(!v1.test(e))throw Error(Gs+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),s=e.length,n=0;n<s&&e.charAt(n)=="0";)++n;if(n==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=r-n-1,t.c=[],r=0;n<=s;)t.c[r++]=+e.charAt(n++)}return t}function Ks(t,e,r,n){var s=t.c;if(r===Jr&&(r=t.constructor.RM),r!==0&&r!==1&&r!==2&&r!==3)throw Error(b1);if(e<1)n=r===3&&(n||!!s[0])||e===0&&(r===1&&s[0]>=5||r===2&&(s[0]>5||s[0]===5&&(n||s[1]!==Jr))),s.length=1,n?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(n=r===1&&s[e]>=5||r===2&&(s[e]>5||s[e]===5&&(n||s[e+1]!==Jr||s[e-1]&1))||r===3&&(n||!!s[0]),s.length=e,n){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function Qs(t,e,r){var n=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(n<0?"e":"e+")+n;else if(n<0){for(;++n;)s="0"+s;s="0."+s}else if(n>0)if(++n>i)for(n-=i;n--;)s+="0";else n<i&&(s=s.slice(0,n)+"."+s.slice(n));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&r?"-"+s:s}ke.abs=function(){var t=new this.constructor(this);return t.s=1,t};ke.cmp=function(t){var e,r=this,n=r.c,s=(t=new r.constructor(t)).c,i=r.s,o=t.s,a=r.e,l=t.e;if(!n[0]||!s[0])return n[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=l)return a>l^e?1:-1;for(o=(a=n.length)<(l=s.length)?a:l,i=-1;++i<o;)if(n[i]!=s[i])return n[i]>s[i]^e?1:-1;return a==l?0:a>l^e?1:-1};ke.div=function(t){var e=this,r=e.constructor,n=e.c,s=(t=new r(t)).c,i=e.s==t.s?1:-1,o=r.DP;if(o!==~~o||o<0||o>Qi)throw Error(Hl);if(!s[0])throw Error(Fw);if(!n[0])return t.s=i,t.c=[t.e=0],t;var a,l,c,u,d,h=s.slice(),p=a=s.length,g=n.length,f=n.slice(0,a),y=f.length,b=t,m=b.c=[],w=0,C=o+(b.e=e.e-t.e)+1;for(b.s=i,i=C<0?0:C,h.unshift(0);y++<a;)f.push(0);do{for(c=0;c<10;c++){if(a!=(y=f.length))u=a>y?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=f[d]){u=s[d]>f[d]?1:-1;break}if(u<0){for(l=y==a?s:h;y;){if(f[--y]<l[y]){for(d=y;d&&!f[--d];)f[d]=9;--f[d],f[y]+=10}f[y]-=l[y]}for(;!f[0];)f.shift()}else break}m[w++]=u?c:++c,f[0]&&u?f[y]=n[p]||0:f=[n[p]]}while((p++<g||f[0]!==Jr)&&i--);return!m[0]&&w!=1&&(m.shift(),b.e--,C--),w>C&&Ks(b,C,r.RM,f[0]!==Jr),b};ke.eq=function(t){return this.cmp(t)===0};ke.gt=function(t){return this.cmp(t)>0};ke.gte=function(t){return this.cmp(t)>-1};ke.lt=function(t){return this.cmp(t)<0};ke.lte=function(t){return this.cmp(t)<1};ke.minus=ke.sub=function(t){var e,r,n,s,i=this,o=i.constructor,a=i.s,l=(t=new o(t)).s;if(a!=l)return t.s=-l,i.plus(t);var c=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!c[0]||!d[0])return d[0]?t.s=-l:c[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,n=c):(h=u,n=d),n.reverse(),l=a;l--;)n.push(0);n.reverse()}else for(r=((s=c.length<d.length)?c:d).length,a=l=0;l<r;l++)if(c[l]!=d[l]){s=c[l]<d[l];break}if(s&&(n=c,c=d,d=n,t.s=-t.s),(l=(r=d.length)-(e=c.length))>0)for(;l--;)c[e++]=0;for(l=e;r>a;){if(c[--r]<d[r]){for(e=r;e&&!c[--e];)c[e]=9;--c[e],c[r]+=10}c[r]-=d[r]}for(;c[--l]===0;)c.pop();for(;c[0]===0;)c.shift(),--h;return c[0]||(t.s=1,c=[h=0]),t.c=c,t.e=h,t};ke.mod=function(t){var e,r=this,n=r.constructor,s=r.s,i=(t=new n(t)).s;if(!t.c[0])throw Error(Fw);return r.s=t.s=1,e=t.cmp(r)==1,r.s=s,t.s=i,e?new n(r):(s=n.DP,i=n.RM,n.DP=n.RM=0,r=r.div(t),n.DP=s,n.RM=i,this.minus(r.times(t)))};ke.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};ke.plus=ke.add=function(t){var e,r,n,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,l=t.e,c=t.c;if(!a[0]||!c[0])return c[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-l){for(e>0?(l=o,n=c):(e=-e,n=a),n.reverse();e--;)n.push(0);n.reverse()}for(a.length-c.length<0&&(n=c,c=a,a=n),e=c.length,r=0;e;a[e]%=10)r=(a[--e]=a[e]+c[e]+r)/10|0;for(r&&(a.unshift(r),++l),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=l,t};ke.pow=function(t){var e=this,r=new e.constructor("1"),n=r,s=t<0;if(t!==~~t||t<-1e6||t>g1)throw Error(Gs+"exponent");for(s&&(t=-t);t&1&&(n=n.times(e)),t>>=1,!!t;)e=e.times(e);return s?r.div(n):n};ke.prec=function(t,e){if(t!==~~t||t<1||t>Qi)throw Error(Gs+"precision");return Ks(new this.constructor(this),t,e)};ke.round=function(t,e){if(t===Jr)t=0;else if(t!==~~t||t<-1e6||t>Qi)throw Error(Hl);return Ks(new this.constructor(this),t+this.e+1,e)};ke.sqrt=function(){var t,e,r,n=this,s=n.constructor,i=n.s,o=n.e,a=new s("0.5");if(!n.c[0])return new s(n);if(i<0)throw Error(Ga+"No square root");i=Math.sqrt(+Qs(n,!0,!0)),i===0||i===1/0?(e=n.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do r=t,t=a.times(r.plus(n.div(r)));while(r.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return Ks(t,(s.DP-=4)+t.e+1,s.RM)};ke.times=ke.mul=function(t){var e,r=this,n=r.constructor,s=r.c,i=(t=new n(t)).c,o=s.length,a=i.length,l=r.e,c=t.e;if(t.s=r.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=l+c,o<a&&(e=s,s=i,i=e,c=o,o=a,a=c),e=new Array(c=o+a);c--;)e[c]=0;for(l=a;l--;){for(a=0,c=o+l;c>l;)a=e[c]+i[l]*s[c-l-1]+a,e[c--]=a%10,a=a/10|0;e[c]=a}for(a?++t.e:e.shift(),l=e.length;!e[--l];)e.pop();return t.c=e,t};ke.toExponential=function(t,e){var r=this,n=r.c[0];if(t!==Jr){if(t!==~~t||t<0||t>Qi)throw Error(Hl);for(r=Ks(new r.constructor(r),++t,e);r.c.length<t;)r.c.push(0)}return Qs(r,!0,!!n)};ke.toFixed=function(t,e){var r=this,n=r.c[0];if(t!==Jr){if(t!==~~t||t<0||t>Qi)throw Error(Hl);for(r=Ks(new r.constructor(r),t+r.e+1,e),t=t+r.e+1;r.c.length<t;)r.c.push(0)}return Qs(r,!1,!!n)};ke[Symbol.for("nodejs.util.inspect.custom")]=ke.toJSON=ke.toString=function(){var t=this,e=t.constructor;return Qs(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};ke.toNumber=function(){var t=+Qs(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(Ga+"Imprecise conversion");return t};ke.toPrecision=function(t,e){var r=this,n=r.constructor,s=r.c[0];if(t!==Jr){if(t!==~~t||t<1||t>Qi)throw Error(Gs+"precision");for(r=Ks(new n(r),t,e);r.c.length<t;)r.c.push(0)}return Qs(r,t<=r.e||r.e<=n.NE||r.e>=n.PE,!!s)};ke.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(Ga+"valueOf disallowed");return Qs(t,t.e<=e.NE||t.e>=e.PE,!0)};var co=Bw();const fc={bigNumber(t){return t?new co(t):new co(0)},multiply(t,e){if(t===void 0||e===void 0)return new co(0);const r=new co(t),n=new co(e);return r.times(n)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},A1=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],_1=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],C1=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],j={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network"},I1={getERC20Abi:t=>j.USDT_CONTRACT_ADDRESSES.includes(t)?C1:A1,getSwapAbi:()=>_1},Tn={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[r,n,s]=e;if(!r||!n||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:r,chainId:n,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[r,n]=e;if(!r||!n)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:r,chainId:n}}},be={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache"};function Su(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const ge={setItem(t,e){$o()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if($o())return localStorage.getItem(t)||void 0},removeItem(t){$o()&&localStorage.removeItem(t)},clear(){$o()&&localStorage.clear()}};function $o(){return typeof window<"u"&&typeof localStorage<"u"}function mn(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}function S1(t){return(t==null?void 0:t.endsWith(j.WC_NAME_SUFFIX_LEGACY))||(t==null?void 0:t.endsWith(j.WC_NAME_SUFFIX))}var Of={};const Tu=(typeof Ut<"u"&&typeof Of<"u"?Of.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",dj=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],hj="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",ht={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:Tu,SECURE_SITE_DASHBOARD:`${Tu}/dashboard`,SECURE_SITE_FAVICON:`${Tu}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155","solana"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in a new browser tab"},DEFAULT_FEATURES:{swaps:!0,onramp:!0,receive:!0,send:!0,email:!0,emailShowWallets:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],history:!0,analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},Z={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Z.getActiveNamespace(),e=Z.getActiveCaipNetworkId(),r=e?e.split(":")[1]:void 0,n=r?isNaN(Number(r))?r:Number(r):void 0;return{namespace:t,caipNetworkId:e,chainId:n}},setWalletConnectDeepLink({name:t,href:e}){try{ge.setItem(be.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=ge.getItem(be.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{ge.removeItem(be.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{ge.setItem(be.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{ge.setItem(be.ACTIVE_CAIP_NETWORK_ID,t),Z.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return ge.getItem(be.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{ge.removeItem(be.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=Su(t);ge.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Z.getRecentWallets();e.find(n=>n.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),ge.setItem(be.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=ge.getItem(be.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const r=Su(t);ge.setItem(r,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return ge.getItem(be.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=Su(t);return ge.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{ge.setItem(be.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return ge.getItem(be.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{ge.removeItem(be.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return ge.getItem(be.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var r;const t=ge.getItem(be.ACTIVE_CAIP_NETWORK_ID);return(r=t==null?void 0:t.split(":"))==null?void 0:r[1]},setConnectionStatus(t){try{ge.setItem(be.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return ge.getItem(be.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=ge.getItem(be.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));ge.setItem(be.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Z.getConnectedNamespaces();e.includes(t)||(e.push(t),Z.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Z.getConnectedNamespaces(),r=e.indexOf(t);r>-1&&(e.splice(r,1),Z.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return ge.getItem(be.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{ge.setItem(be.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{ge.removeItem(be.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=ge.getItem(be.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Z.getBalanceCache();ge.setItem(be.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const r=Z.getBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.portfolio))return r.balance;Z.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Z.getBalanceCache();e[t.caipAddress]=t,ge.setItem(be.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=ge.getItem(be.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Z.getBalanceCache();ge.setItem(be.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const r=Z.getNativeBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.nativeBalance))return r;console.info("Discarding cache for address",t),Z.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Z.getNativeBalanceCache();e[t.caipAddress]=t,ge.setItem(be.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=ge.getItem(be.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const r=Z.getEnsCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.ens))return r.ens;Z.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Z.getEnsCache();e[t.address]=t,ge.setItem(be.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Z.getEnsCache();ge.setItem(be.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=ge.getItem(be.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const r=Z.getIdentityCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.identity))return r.identity;Z.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Z.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},ge.setItem(be.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Z.getIdentityCache();ge.setItem(be.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{ge.removeItem(be.PORTFOLIO_CACHE),ge.removeItem(be.NATIVE_BALANCE_CACHE),ge.removeItem(be.ENS_CACHE),ge.removeItem(be.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}}},ue={isMobile(){var t;return this.isClient()?!!((t=window==null?void 0:window.matchMedia("(pointer:coarse)"))!=null&&t.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return ue.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=ht.TEN_SEC_MS:!0},isAllowedRetry(t,e=ht.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},getPairingExpiry(){return Date.now()+ht.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let r;return(...n)=>{function s(){t(...n)}r&&clearTimeout(r),r=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e){if(ue.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const n=encodeURIComponent(e);return{redirect:`${r}wc?uri=${n}`,href:r}},formatUniversalUrl(t,e){if(!ue.isHttpUrl(t))return this.formatNativeUrl(t,e);let r=t;r.endsWith("/")||(r=`${r}/`);const n=encodeURIComponent(e);return{redirect:`${r}wc?uri=${n}`,href:r}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Z.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,r){window==null||window.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},returnOpenHref(t,e,r){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},async preloadImage(t){const e=new Promise((r,n)=>{const s=new Image;s.onload=r,s.onerror=n,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,ue.wait(2e3)])},formatBalance(t,e){let r="0.000";if(typeof t=="string"){const n=Number(t);if(n){const s=Math.floor(n*1e3)/1e3;s&&(r=s.toString())}}return`${r}${e?` ${e}`:""}`},formatBalance2(t,e){var n;let r;if(t==="0")r="0";else if(typeof t=="string"){const s=Number(t);s&&(r=(n=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:n[0])}return{value:r??"0",rest:r==="0"?"000":"",symbol:e}},getApiUrl(){return j.W3M_API_URL},getBlockchainApiUrl(){return j.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return j.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,r;return typeof t=="string"?t:typeof((r=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:r.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const r={};return e&&t&&(t.forEach((n,s)=>{r[n]=s}),e.sort((n,s)=>{const i=r[n.id],o=r[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const r of t)e+=r.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[r,n]=e.split(".");return{dollars:r,pennies:n}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const r=new Set;return t.filter(n=>{const s=n[e];return r.has(s)?!1:(r.add(s),!0)})},generateSdkVersion(t,e,r){const s=t.length===0?ht.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${r}`},createAccount(t,e,r,n,s){return{namespace:t,address:e,type:r,publicKey:n,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),r=e[0];return e.filter(Boolean).length===3&&r in j.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,r="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),r,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,r,e)},injectIntoUrl(t,e,r){const n=t.indexOf(e);if(n===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",n),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,n+i),l=t.substring(n+i,o),c=t.substring(s),u=l+r;return a+u+c}};async function lo(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class ql{constructor({baseUrl:e,clientId:r}){this.baseUrl=e,this.clientId=r}async get({headers:e,signal:r,cache:n,...s}){const i=this.createUrl(s);return(await lo(i,{method:"GET",headers:e,signal:r,cache:n})).json()}async getBlob({headers:e,signal:r,...n}){const s=this.createUrl(n);return(await lo(s,{method:"GET",headers:e,signal:r})).blob()}async post({body:e,headers:r,signal:n,...s}){const i=this.createUrl(s);return(await lo(i,{method:"POST",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async put({body:e,headers:r,signal:n,...s}){const i=this.createUrl(s);return(await lo(i,{method:"PUT",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async delete({body:e,headers:r,signal:n,...s}){const i=this.createUrl(s);return(await lo(i,{method:"DELETE",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}createUrl({path:e,params:r}){const n=new URL(e,this.baseUrl);return r&&Object.entries(r).forEach(([s,i])=>{i&&n.searchParams.append(s,i)}),this.clientId&&n.searchParams.append("clientId",this.clientId),n}}const T1={handleSolanaDeeplinkRedirect(t){if(P.state.activeChain===j.CHAIN.SOLANA){const e=window.location.href,r=encodeURIComponent(e);if(t==="Phantom"&&!("phantom"in window)){const n=e.startsWith("https")?"https":"http",s=e.split("/")[2],i=encodeURIComponent(`${n}://${s}`);window.location.href=`https://phantom.app/ul/browse/${r}?ref=${i}`}t==="Coinbase Wallet"&&!("coinbaseSolana"in window)&&(window.location.href=`https://go.cb-w.com/dapp?cb_url=${r}`)}}},sr=Je({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),Or={state:sr,subscribeNetworkImages(t){return qt(sr.networkImages,()=>t(sr.networkImages))},subscribeKey(t,e){return tr(sr,t,e)},subscribe(t){return qt(sr,()=>t(sr))},setWalletImage(t,e){sr.walletImages[t]=e},setNetworkImage(t,e){sr.networkImages[t]=e},setChainImage(t,e){sr.chainImages[t]=e},setConnectorImage(t,e){sr.connectorImages={...sr.connectorImages,[t]:e}},setTokenImage(t,e){sr.tokenImages[t]=e},setCurrencyImage(t,e){sr.currencyImages[t]=e}},N1={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00"},Nu=Je({networkImagePromises:{}}),Lw={async fetchWalletImage(t){if(t)return await ye._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(Nu.networkImagePromises[t]||(Nu.networkImagePromises[t]=ye._fetchNetworkImage(t)),await Nu.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Or.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Or.state.walletImages[t.image_id]},getNetworkImage(t){var e,r,n;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(r=t==null?void 0:t.assets)==null?void 0:r.imageUrl;if((n=t==null?void 0:t.assets)!=null&&n.imageId)return Or.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Or.state.networkImages[t]},getConnectorImage(t){if(t!=null&&t.imageUrl)return t.imageUrl;if(t!=null&&t.imageId)return Or.state.connectorImages[t.imageId]},getChainImage(t){return Or.state.networkImages[N1[t]]}},P1={getFeatureValue(t,e){const r=e==null?void 0:e[t];return r===void 0?ht.DEFAULT_FEATURES[t]:r},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(ue.isTelegram()){if(ue.isIos())return t.filter(e=>e!=="google");if(ue.isMac())return t.filter(e=>e!=="x");if(ue.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},ie=Je({features:ht.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:ht.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0}),z={state:ie,subscribeKey(t,e){return tr(ie,t,e)},setOptions(t){Object.assign(ie,t)},setFeatures(t){if(!t)return;ie.features||(ie.features=ht.DEFAULT_FEATURES);const e={...ie.features,...t};ie.features=e,ie.features.socials&&(ie.features.socials=P1.filterSocialsByPlatform(ie.features.socials))},setProjectId(t){ie.projectId=t},setCustomRpcUrls(t){ie.customRpcUrls=t},setAllWallets(t){ie.allWallets=t},setIncludeWalletIds(t){ie.includeWalletIds=t},setExcludeWalletIds(t){ie.excludeWalletIds=t},setFeaturedWalletIds(t){ie.featuredWalletIds=t},setTokens(t){ie.tokens=t},setTermsConditionsUrl(t){ie.termsConditionsUrl=t},setPrivacyPolicyUrl(t){ie.privacyPolicyUrl=t},setCustomWallets(t){ie.customWallets=t},setIsSiweEnabled(t){ie.isSiweEnabled=t},setIsUniversalProvider(t){ie.isUniversalProvider=t},setSdkVersion(t){ie.sdkVersion=t},setMetadata(t){ie.metadata=t},setDisableAppend(t){ie.disableAppend=t},setEIP6963Enabled(t){ie.enableEIP6963=t},setDebug(t){ie.debug=t},setEnableWalletConnect(t){ie.enableWalletConnect=t},setEnableWalletGuide(t){ie.enableWalletGuide=t},setEnableAuthLogger(t){ie.enableAuthLogger=t},setEnableWallets(t){ie.enableWallets=t},setHasMultipleAddresses(t){ie.hasMultipleAddresses=t},setSIWX(t){ie.siwx=t},setConnectMethodsOrder(t){ie.features={...ie.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){ie.features={...ie.features,walletFeaturesOrder:t}},setSocialsOrder(t){ie.features={...ie.features,socials:t}},setCollapseWallets(t){ie.features={...ie.features,collapseWallets:t}},setEnableEmbedded(t){ie.enableEmbedded=t},setAllowUnsupportedChain(t){ie.allowUnsupportedChain=t},setManualWCControl(t){ie.manualWCControl=t},setEnableNetworkSwitch(t){ie.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,r])=>{r&&(ie.defaultAccountTypes[e]=r)})},setUniversalProviderConfigOverride(t){ie.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return ie.universalProviderConfigOverride},getSnapshot(){return Xo(ie)}},Nn=Je({message:"",variant:"info",open:!1}),Ni={state:Nn,subscribeKey(t,e){return tr(Nn,t,e)},open(t,e){const{debug:r}=z.state,{shortMessage:n,longMessage:s}=t;r&&(Nn.message=n,Nn.variant=e,Nn.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Nn.open=!1,Nn.message="",Nn.variant="info"}},x1=ue.getAnalyticsUrl(),O1=new ql({baseUrl:x1,clientId:null}),R1=["MODAL_CREATED"],on=Je({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),ze={state:on,subscribe(t){return qt(on,()=>t(on))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=z.state;return{projectId:t,st:e,sv:r||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=re.state.address;if(R1.includes(t.data.event)||typeof window>"u")return;await O1.post({path:"/e",params:ze.getSdkProperties(),body:{eventId:ue.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),on.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===j.HTTP_STATUS_CODES.FORBIDDEN&&!on.reportedErrors.FORBIDDEN&&(Ni.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${$o()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),on.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;on.timestamp=Date.now(),on.data=t,(e=z.state.features)!=null&&e.analytics&&ze._sendAnalyticsEvent(on)}},D1=ue.getApiUrl(),Dt=new ql({baseUrl:D1,clientId:null}),k1="40",Rf="4",$1=20,Oe=Je({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),ye={state:Oe,subscribeKey(t,e){return tr(Oe,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=z.state;return{projectId:t,st:e||"appkit",sv:r||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return z.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Dt.baseUrl}/getWalletImage/${t}`,r=await Dt.getBlob({path:e,params:ye._getSdkProperties()});Or.setWalletImage(t,URL.createObjectURL(r))},async _fetchNetworkImage(t){const e=`${Dt.baseUrl}/public/getAssetImage/${t}`,r=await Dt.getBlob({path:e,params:ye._getSdkProperties()});Or.setNetworkImage(t,URL.createObjectURL(r))},async _fetchConnectorImage(t){const e=`${Dt.baseUrl}/public/getAssetImage/${t}`,r=await Dt.getBlob({path:e,params:ye._getSdkProperties()});Or.setConnectorImage(t,URL.createObjectURL(r))},async _fetchCurrencyImage(t){const e=`${Dt.baseUrl}/public/getCurrencyImage/${t}`,r=await Dt.getBlob({path:e,params:ye._getSdkProperties()});Or.setCurrencyImage(t,URL.createObjectURL(r))},async _fetchTokenImage(t){const e=`${Dt.baseUrl}/public/getTokenImage/${t}`,r=await Dt.getBlob({path:e,params:ye._getSdkProperties()});Or.setTokenImage(t,URL.createObjectURL(r))},async fetchNetworkImages(){const t=P.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:r})=>r==null?void 0:r.imageId).filter(Boolean).filter(r=>!Lw.getNetworkImageById(r));e&&await Promise.allSettled(e.map(r=>ye._fetchNetworkImage(r)))},async fetchConnectorImages(){const{connectors:t}=pe.state,e=t.map(({imageId:r})=>r).filter(Boolean);await Promise.allSettled(e.map(r=>ye._fetchConnectorImage(r)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>ye._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>ye._fetchTokenImage(e)))},async fetchFeaturedWallets(){const{featuredWalletIds:t}=z.state;if(t!=null&&t.length){const{data:e}=await Dt.get({path:"/getWallets",params:{...ye._getSdkProperties(),page:"1",entries:t!=null&&t.length?String(t.length):Rf,include:t==null?void 0:t.join(",")}});e.sort((n,s)=>t.indexOf(n.id)-t.indexOf(s.id));const r=e.map(n=>n.image_id).filter(Boolean);await Promise.allSettled(r.map(n=>ye._fetchWalletImage(n))),Oe.featured=e,Oe.allFeatured=e}},async fetchRecommendedWallets(){try{Oe.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:r}=z.state,n=[...e??[],...r??[]].filter(Boolean),s=P.getRequestedCaipNetworkIds().join(","),{data:i,count:o}=await Dt.get({path:"/getWallets",params:{...ye._getSdkProperties(),page:"1",chains:s,entries:Rf,include:t==null?void 0:t.join(","),exclude:n==null?void 0:n.join(",")}}),a=Z.getRecentWallets(),l=i.map(u=>u.image_id).filter(Boolean),c=a.map(u=>u.image_id).filter(Boolean);await Promise.allSettled([...l,...c].map(u=>ye._fetchWalletImage(u))),Oe.recommended=i,Oe.allRecommended=i,Oe.count=o??0}catch{}finally{Oe.isFetchingRecommendedWallets=!1}},async fetchWallets({page:t}){const{includeWalletIds:e,excludeWalletIds:r,featuredWalletIds:n}=z.state,s=P.getRequestedCaipNetworkIds().join(","),i=[...Oe.recommended.map(({id:c})=>c),...r??[],...n??[]].filter(Boolean),{data:o,count:a}=await Dt.get({path:"/getWallets",params:{...ye._getSdkProperties(),page:String(t),entries:k1,chains:s,include:e==null?void 0:e.join(","),exclude:i.join(",")}}),l=o.slice(0,$1).map(c=>c.image_id).filter(Boolean);await Promise.allSettled(l.map(c=>ye._fetchWalletImage(c))),Oe.wallets=ue.uniqueBy([...Oe.wallets,...ye._filterOutExtensions(o)],"id"),Oe.count=a>Oe.count?a:Oe.count,Oe.page=t},async initializeExcludedWallets({ids:t}){const e=P.getRequestedCaipNetworkIds().join(","),{data:r}=await Dt.get({path:"/getWallets",params:{...ye._getSdkProperties(),page:"1",entries:String(t.length),chains:e,include:t==null?void 0:t.join(",")}});r&&r.forEach(n=>{n!=null&&n.rdns&&Oe.excludedWallets.push({rdns:n.rdns,name:n.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:r,excludeWalletIds:n}=z.state;Oe.search=[];const s=P.getRequestedCaipNetworkIds().join(","),{data:i}=await Dt.get({path:"/getWallets",params:{...ye._getSdkProperties(),page:"1",entries:"100",search:t==null?void 0:t.trim(),badge_type:e,chains:s,include:r==null?void 0:r.join(","),exclude:n==null?void 0:n.join(",")}});ze.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const o=i.map(a=>a.image_id).filter(Boolean);await Promise.allSettled([...o.map(a=>ye._fetchWalletImage(a)),ue.wait(300)]),Oe.search=ye._filterOutExtensions(i)},initPromise(t,e){const r=Oe.promises[t];return r||(Oe.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:r=!0,fetchNetworkImages:n=!0}={}){const s=[t&&ye.initPromise("connectorImages",ye.fetchConnectorImages),e&&ye.initPromise("featuredWallets",ye.fetchFeaturedWallets),r&&ye.initPromise("recommendedWallets",ye.fetchRecommendedWallets),n&&ye.initPromise("networkImages",ye.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=z.state.features)!=null&&t.analytics&&ye.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Dt.get({path:"/getAnalyticsConfig",params:ye._getSdkProperties()});z.setFeatures({analytics:t})}catch{z.setFeatures({analytics:!1})}},setFilterByNamespace(t){if(!t){Oe.featured=Oe.allFeatured,Oe.recommended=Oe.allRecommended;return}const e=P.getRequestedCaipNetworkIds().join(",");Oe.featured=Oe.allFeatured.filter(r=>{var n;return(n=r.chains)==null?void 0:n.some(s=>e.includes(s))}),Oe.recommended=Oe.allRecommended.filter(r=>{var n;return(n=r.chains)==null?void 0:n.some(s=>e.includes(s))})}},Pe=Je({view:"Connect",history:["Connect"],transactionStack:[]}),De={state:Pe,subscribeKey(t,e){return tr(Pe,t,e)},pushTransactionStack(t){Pe.transactionStack.push(t)},popTransactionStack(t){var r,n;const e=Pe.transactionStack.pop();if(e)if(t)this.goBack(),(r=e==null?void 0:e.onCancel)==null||r.call(e);else{if(e.goBack)this.goBack();else if(e.replace){const i=Pe.history.indexOf("ConnectingSiwe");i>0?this.goBackToIndex(i-1):(at.close(),Pe.history=[])}else e.view&&this.reset(e.view);(n=e==null?void 0:e.onSuccess)==null||n.call(e)}},push(t,e){t!==Pe.view&&(Pe.view=t,Pe.history.push(t),Pe.data=e)},reset(t,e){Pe.view=t,Pe.history=[t],Pe.data=e},replace(t,e){Pe.history.at(-1)===t||(Pe.view=t,Pe.history[Pe.history.length-1]=t,Pe.data=e)},goBack(){var e;const t=!P.state.activeCaipAddress&&this.state.view==="ConnectingFarcaster";if(Pe.history.length>1&&!Pe.history.includes("UnsupportedChain")){Pe.history.pop();const[r]=Pe.history.slice(-1);r&&(Pe.view=r)}else at.close();(e=Pe.data)!=null&&e.wallet&&(Pe.data.wallet=void 0),setTimeout(()=>{var r,n,s;if(t){re.setFarcasterUrl(void 0,P.state.activeChain);const i=pe.getAuthConnector();(r=i==null?void 0:i.provider)==null||r.reload();const o=Xo(z.state);(s=(n=i==null?void 0:i.provider)==null?void 0:n.syncDappData)==null||s.call(n,{metadata:o.metadata,sdkVersion:o.sdkVersion,projectId:o.projectId,sdkType:o.sdkType})}},100)},goBackToIndex(t){if(Pe.history.length>1){Pe.history=Pe.history.slice(0,t+1);const[e]=Pe.history.slice(-1);e&&(Pe.view=e)}}},an=Je({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),$t={state:an,subscribe(t){return qt(an,()=>t(an))},setThemeMode(t){an.themeMode=t;try{const e=pe.getAuthConnector();if(e){const r=$t.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:r,w3mThemeVariables:mn(r,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){an.themeVariables={...an.themeVariables,...t};try{const e=pe.getAuthConnector();if(e){const r=$t.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:r,w3mThemeVariables:mn(an.themeVariables,an.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return Xo(an)}},jw={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0},Re=Je({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...jw}}),pe={state:Re,subscribe(t){return qt(Re,()=>{t(Re)})},subscribeKey(t,e){return tr(Re,t,e)},initialize(t){t.forEach(e=>{const r=Z.getConnectedConnectorId(e);r&&this.setConnectorId(r,e)})},setActiveConnector(t){t&&(Re.activeConnector=Os(t))},setConnectors(t){t.filter(r=>!Re.allConnectors.some(n=>n.id===r.id&&this.getConnectorName(n.name)===this.getConnectorName(r.name)&&n.chain===r.chain)).forEach(r=>{r.type!=="MULTI_CHAIN"&&Re.allConnectors.push(Os(r))}),Re.connectors=this.mergeMultiChainConnectors(Re.allConnectors)},removeAdapter(t){Re.allConnectors=Re.allConnectors.filter(e=>e.chain!==t),Re.connectors=this.mergeMultiChainConnectors(Re.allConnectors)},mergeMultiChainConnectors(t){const e=this.generateConnectorMapByName(t),r=[];return e.forEach(n=>{const s=n[0],i=(s==null?void 0:s.id)===j.CONNECTOR_ID.AUTH;n.length>1&&s?r.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...n],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&r.push(s)}),r},generateConnectorMapByName(t){const e=new Map;return t.forEach(r=>{const{name:n}=r,s=this.getConnectorName(n);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===r.chain)||i.push(r),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(r=>{e.find(n=>n.chain===r.chain)||e.push(r)}),e},addConnector(t){var e,r,n;if(t.id===j.CONNECTOR_ID.AUTH){const s=t,i=Xo(z.state),o=$t.getSnapshot().themeMode,a=$t.getSnapshot().themeVariables;(r=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||r.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(n=s==null?void 0:s.provider)==null||n.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:mn(a,o)}),this.setConnectors([t])}else this.setConnectors([t])},getAuthConnector(t){var n;const e=t||P.state.activeChain,r=Re.connectors.find(s=>s.id===j.CONNECTOR_ID.AUTH);if(r)return(n=r==null?void 0:r.connectors)!=null&&n.length?r.connectors.find(i=>i.chain===e):r},getAnnouncedConnectorRdns(){return Re.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return Re.allConnectors.find(e=>e.id===t)},getConnector(t,e){return Re.allConnectors.filter(n=>n.chain===P.state.activeChain).find(n=>{var s;return n.explorerId===t||((s=n.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,r=Xo(z.state),n=$t.getSnapshot().themeMode,s=$t.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:r.metadata,sdkVersion:r.sdkVersion,sdkType:r.sdkType,projectId:r.projectId}),e.provider.syncTheme({themeMode:n,themeVariables:s,w3mThemeVariables:mn(s,n)})},getConnectorsByNamespace(t){const e=Re.allConnectors.filter(r=>r.chain===t);return this.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=pe.getConnector(t.id,t.rdns);P.state.activeChain===j.CHAIN.SOLANA&&T1.handleSolanaDeeplinkRedirect((e==null?void 0:e.name)||t.name||""),e?De.push("ConnectingExternal",{connector:e}):De.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?this.getConnectorsByNamespace(t):this.mergeMultiChainConnectors(Re.allConnectors)},setFilterByNamespace(t){Re.filterByNamespace=t,Re.connectors=this.getConnectors(t),ye.setFilterByNamespace(t)},setConnectorId(t,e){t&&(Re.activeConnectorIds={...Re.activeConnectorIds,[e]:t},Z.setConnectedConnectorId(e,t))},removeConnectorId(t){Re.activeConnectorIds={...Re.activeConnectorIds,[t]:void 0},Z.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return Re.activeConnectorIds[t]},isConnected(t){return t?!!Re.activeConnectorIds[t]:Object.values(Re.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){Re.activeConnectorIds={...jw}}};function gc(t,e){return pe.getConnectorId(t)===e}function U1(t){const e=Array.from(P.state.chains.keys());let r=[];return t?(r.push([t,P.state.chains.get(t)]),gc(t,j.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(n=>{n!==t&&gc(n,j.CONNECTOR_ID.WALLET_CONNECT)&&r.push([n,P.state.chains.get(n)])}):gc(t,j.CONNECTOR_ID.AUTH)&&e.forEach(n=>{n!==t&&gc(n,j.CONNECTOR_ID.AUTH)&&r.push([n,P.state.chains.get(n)])})):r=Array.from(P.state.chains.entries()),r}var Er=_A();const pp=hp(Er);var Pu={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var qd=function(t,e){return qd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},qd(t,e)};function M1(t,e){qd(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Wd=function(){return Wd=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Wd.apply(this,arguments)};function F1(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function B1(t,e,r,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,r,i):o(e,r))||i);return s>3&&i&&Object.defineProperty(e,r,i),i}function L1(t,e){return function(r,n){e(r,n,t)}}function j1(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function z1(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})}function H1(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],s=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function q1(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function W1(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Vd(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function zw(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function V1(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(zw(arguments[e]));return t}function G1(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function ta(t){return this instanceof ta?(this.v=t,this):new ta(t)}function K1(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){n[h]&&(s[h]=function(p){return new Promise(function(g,f){i.push([h,p,g,f])>1||a(h,p)})})}function a(h,p){try{l(n[h](p))}catch(g){d(i[0][3],g)}}function l(h){h.value instanceof ta?Promise.resolve(h.value.v).then(c,u):d(i[0][2],h)}function c(h){a("next",h)}function u(h){a("throw",h)}function d(h,p){h(p),i.shift(),i.length&&a(i[0][0],i[0][1])}}function Q1(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,i){e[s]=t[s]?function(o){return(r=!r)?{value:ta(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function Y1(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Vd=="function"?Vd(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,l){o=t[i](o),s(a,l,o.done,o.value)})}}function s(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}}function J1(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Z1(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function X1(t){return t&&t.__esModule?t:{default:t}}function e_(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function t_(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const r_=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Wd},__asyncDelegator:Q1,__asyncGenerator:K1,__asyncValues:Y1,__await:ta,__awaiter:z1,__classPrivateFieldGet:e_,__classPrivateFieldSet:t_,__createBinding:q1,__decorate:B1,__exportStar:W1,__extends:M1,__generator:H1,__importDefault:X1,__importStar:Z1,__makeTemplateObject:J1,__metadata:j1,__param:L1,__read:zw,__rest:F1,__spread:V1,__spreadArrays:G1,__values:Vd},Symbol.toStringTag,{value:"Module"})),Wl=Pw(r_);var xu={},uo={},Df;function n_(){if(Df)return uo;Df=1,Object.defineProperty(uo,"__esModule",{value:!0}),uo.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return uo.delay=t,uo}var as={},Ou={},cs={},kf;function s_(){return kf||(kf=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.ONE_THOUSAND=cs.ONE_HUNDRED=void 0,cs.ONE_HUNDRED=100,cs.ONE_THOUSAND=1e3),cs}var Ru={},$f;function i_(){return $f||($f=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(Ru)),Ru}var Uf;function Hw(){return Uf||(Uf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Wl;e.__exportStar(s_(),t),e.__exportStar(i_(),t)}(Ou)),Ou}var Mf;function o_(){if(Mf)return as;Mf=1,Object.defineProperty(as,"__esModule",{value:!0}),as.fromMiliseconds=as.toMiliseconds=void 0;const t=Hw();function e(n){return n*t.ONE_THOUSAND}as.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return as.fromMiliseconds=r,as}var Ff;function a_(){return Ff||(Ff=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Wl;e.__exportStar(n_(),t),e.__exportStar(o_(),t)}(xu)),xu}var ti={},Bf;function c_(){if(Bf)return ti;Bf=1,Object.defineProperty(ti,"__esModule",{value:!0}),ti.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const s=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:s})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return ti.Watch=t,ti.default=t,ti}var Du={},ho={},Lf;function l_(){if(Lf)return ho;Lf=1,Object.defineProperty(ho,"__esModule",{value:!0}),ho.IWatch=void 0;class t{}return ho.IWatch=t,ho}var jf;function u_(){return jf||(jf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Wl.__exportStar(l_(),t)}(Du)),Du}var zf;function d_(){return zf||(zf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Wl;e.__exportStar(a_(),t),e.__exportStar(c_(),t),e.__exportStar(u_(),t),e.__exportStar(Hw(),t)}(Pu)),Pu}var q=d_();class Ys{}let h_=class extends Ys{constructor(e){super()}};const Hf=q.FIVE_SECONDS,Yi={pulse:"heartbeat_pulse"};let p_=class qw extends h_{constructor(e){super(e),this.events=new Er.EventEmitter,this.interval=Hf,this.interval=(e==null?void 0:e.interval)||Hf}static async init(e){const r=new qw(e);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),q.toMiliseconds(this.interval))}pulse(){this.events.emit(Yi.pulse)}};const f_=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,g_=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,m_=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function y_(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){w_(t);return}return e}function w_(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function mc(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const r=t.trim();if(r.length<=9)switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!m_.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(f_.test(t)||g_.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,y_)}return JSON.parse(t)}catch(n){if(e.strict)throw n;return t}}function b_(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function mt(t,...e){try{return b_(t(...e))}catch(r){return Promise.reject(r)}}function v_(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function E_(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function Lc(t){if(v_(t))return String(t);if(E_(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return Lc(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const Gd="base64:";function A_(t){return typeof t=="string"?t:Gd+I_(t)}function __(t){return typeof t!="string"||!t.startsWith(Gd)?t:C_(t.slice(Gd.length))}function C_(t){return globalThis.Buffer?Et.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function I_(t){return globalThis.Buffer?Et.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Yt(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function S_(...t){return Yt(t.join(":"))}function yc(t){return t=Yt(t),t?t+":":""}function T_(t,e){if(e===void 0)return!0;let r=0,n=t.indexOf(":");for(;n>-1;)r++,n=t.indexOf(":",n+1);return r<=e}function N_(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const P_="memory",x_=()=>{const t=new Map;return{name:P_,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function O_(t={}){const e={mounts:{"":t.driver||x_()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=c=>{for(const u of e.mountpoints)if(c.startsWith(u))return{base:u,relativeKey:c.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:c,driver:e.mounts[""]}},n=(c,u)=>e.mountpoints.filter(d=>d.startsWith(c)||u&&c.startsWith(d)).map(d=>({relativeBase:c.length>d.length?c.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(c,u)=>{if(e.watching){u=Yt(u);for(const d of e.watchListeners)d(c,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const c in e.mounts)e.unwatch[c]=await qf(e.mounts[c],s,c)}},o=async()=>{if(e.watching){for(const c in e.unwatch)await e.unwatch[c]();e.unwatch={},e.watching=!1}},a=(c,u,d)=>{const h=new Map,p=g=>{let f=h.get(g.base);return f||(f={driver:g.driver,base:g.base,items:[]},h.set(g.base,f)),f};for(const g of c){const f=typeof g=="string",y=Yt(f?g:g.key),b=f?void 0:g.value,m=f||!g.options?u:{...u,...g.options},w=r(y);p(w).items.push({key:y,value:b,relativeKey:w.relativeKey,options:m})}return Promise.all([...h.values()].map(g=>d(g))).then(g=>g.flat())},l={hasItem(c,u={}){c=Yt(c);const{relativeKey:d,driver:h}=r(c);return mt(h.hasItem,d,u)},getItem(c,u={}){c=Yt(c);const{relativeKey:d,driver:h}=r(c);return mt(h.getItem,d,u).then(p=>mc(p))},getItems(c,u={}){return a(c,u,d=>d.driver.getItems?mt(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(p=>({key:S_(d.base,p.key),value:mc(p.value)}))):Promise.all(d.items.map(h=>mt(d.driver.getItem,h.relativeKey,h.options).then(p=>({key:h.key,value:mc(p)})))))},getItemRaw(c,u={}){c=Yt(c);const{relativeKey:d,driver:h}=r(c);return h.getItemRaw?mt(h.getItemRaw,d,u):mt(h.getItem,d,u).then(p=>__(p))},async setItem(c,u,d={}){if(u===void 0)return l.removeItem(c);c=Yt(c);const{relativeKey:h,driver:p}=r(c);p.setItem&&(await mt(p.setItem,h,Lc(u),d),p.watch||s("update",c))},async setItems(c,u){await a(c,u,async d=>{if(d.driver.setItems)return mt(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:Lc(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>mt(d.driver.setItem,h.relativeKey,Lc(h.value),h.options)))})},async setItemRaw(c,u,d={}){if(u===void 0)return l.removeItem(c,d);c=Yt(c);const{relativeKey:h,driver:p}=r(c);if(p.setItemRaw)await mt(p.setItemRaw,h,u,d);else if(p.setItem)await mt(p.setItem,h,A_(u),d);else return;p.watch||s("update",c)},async removeItem(c,u={}){typeof u=="boolean"&&(u={removeMeta:u}),c=Yt(c);const{relativeKey:d,driver:h}=r(c);h.removeItem&&(await mt(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await mt(h.removeItem,d+"$",u),h.watch||s("remove",c))},async getMeta(c,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),c=Yt(c);const{relativeKey:d,driver:h}=r(c),p=Object.create(null);if(h.getMeta&&Object.assign(p,await mt(h.getMeta,d,u)),!u.nativeOnly){const g=await mt(h.getItem,d+"$",u).then(f=>mc(f));g&&typeof g=="object"&&(typeof g.atime=="string"&&(g.atime=new Date(g.atime)),typeof g.mtime=="string"&&(g.mtime=new Date(g.mtime)),Object.assign(p,g))}return p},setMeta(c,u,d={}){return this.setItem(c+"$",u,d)},removeMeta(c,u={}){return this.removeItem(c+"$",u)},async getKeys(c,u={}){var y;c=yc(c);const d=n(c,!0);let h=[];const p=[];let g=!0;for(const b of d){(y=b.driver.flags)!=null&&y.maxDepth||(g=!1);const m=await mt(b.driver.getKeys,b.relativeBase,u);for(const w of m){const C=b.mountpoint+Yt(w);h.some(_=>C.startsWith(_))||p.push(C)}h=[b.mountpoint,...h.filter(w=>!w.startsWith(b.mountpoint))]}const f=u.maxDepth!==void 0&&!g;return p.filter(b=>(!f||T_(b,u.maxDepth))&&N_(b,c))},async clear(c,u={}){c=yc(c),await Promise.all(n(c,!1).map(async d=>{if(d.driver.clear)return mt(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(p=>d.driver.removeItem(p,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(c=>Wf(c)))},async watch(c){return await i(),e.watchListeners.push(c),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==c),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(c,u){if(c=yc(c),c&&e.mounts[c])throw new Error(`already mounted at ${c}`);return c&&(e.mountpoints.push(c),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[c]=u,e.watching&&Promise.resolve(qf(u,s,c)).then(d=>{e.unwatch[c]=d}).catch(console.error),l},async unmount(c,u=!0){var d,h;c=yc(c),!(!c||!e.mounts[c])&&(e.watching&&c in e.unwatch&&((h=(d=e.unwatch)[c])==null||h.call(d),delete e.unwatch[c]),u&&await Wf(e.mounts[c]),e.mountpoints=e.mountpoints.filter(p=>p!==c),delete e.mounts[c])},getMount(c=""){c=Yt(c)+":";const u=r(c);return{driver:u.driver,base:u.base}},getMounts(c="",u={}){return c=Yt(c),n(c,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(c,u={})=>l.getKeys(c,u),get:(c,u={})=>l.getItem(c,u),set:(c,u,d={})=>l.setItem(c,u,d),has:(c,u={})=>l.hasItem(c,u),del:(c,u={})=>l.removeItem(c,u),remove:(c,u={})=>l.removeItem(c,u)};return l}function qf(t,e,r){return t.watch?t.watch((n,s)=>e(n,r+s)):()=>{}}async function Wf(t){typeof t.dispose=="function"&&await mt(t.dispose)}function Js(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function Ww(t,e){const r=indexedDB.open(t);r.onupgradeneeded=()=>r.result.createObjectStore(e);const n=Js(r);return(s,i)=>n.then(o=>i(o.transaction(e,s).objectStore(e)))}let ku;function Ka(){return ku||(ku=Ww("keyval-store","keyval")),ku}function Vf(t,e=Ka()){return e("readonly",r=>Js(r.get(t)))}function R_(t,e,r=Ka()){return r("readwrite",n=>(n.put(e,t),Js(n.transaction)))}function D_(t,e=Ka()){return e("readwrite",r=>(r.delete(t),Js(r.transaction)))}function k_(t=Ka()){return t("readwrite",e=>(e.clear(),Js(e.transaction)))}function $_(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Js(t.transaction)}function U_(t=Ka()){return t("readonly",e=>{if(e.getAllKeys)return Js(e.getAllKeys());const r=[];return $_(e,n=>r.push(n.key)).then(()=>r)})}const M_=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),F_=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function Rs(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return F_(t)}catch{return t}}function An(t){return typeof t=="string"?t:M_(t)||""}const B_="idb-keyval";var L_=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",r=s=>e+s;let n;return t.dbName&&t.storeName&&(n=Ww(t.dbName,t.storeName)),{name:B_,options:t,async hasItem(s){return!(typeof await Vf(r(s),n)>"u")},async getItem(s){return await Vf(r(s),n)??null},setItem(s,i){return R_(r(s),i,n)},removeItem(s){return D_(r(s),n)},getKeys(){return U_(n)},clear(){return k_(n)}}};const j_="WALLET_CONNECT_V2_INDEXED_DB",z_="keyvaluestorage";let H_=class{constructor(){this.indexedDb=O_({driver:L_({dbName:j_,storeName:z_})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,An(r))}async removeItem(e){await this.indexedDb.removeItem(e)}};var $u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof ce<"u"?ce:typeof self<"u"?self:{},jc={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof $u<"u"&&$u.localStorage?jc.exports=$u.localStorage:typeof window<"u"&&window.localStorage?jc.exports=window.localStorage:jc.exports=new e})();function q_(t){var e;return[t[0],Rs((e=t[1])!=null?e:"")]}let W_=class{constructor(){this.localStorage=jc.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(q_)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return Rs(r)}async setItem(e,r){this.localStorage.setItem(e,An(r))}async removeItem(e){this.localStorage.removeItem(e)}};const V_="wc_storage_version",Gf=1,G_=async(t,e,r)=>{const n=V_,s=await e.getItem(n);if(s&&s>=Gf){r(e);return}const i=await t.getKeys();if(!i.length){r(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const l=a.toLowerCase();if(l.includes("wc@")||l.includes("walletconnect")||l.includes("wc_")||l.includes("wallet_connect")){const c=await t.getItem(a);await e.setItem(a,c),o.push(a)}}await e.setItem(n,Gf),r(e),K_(t,o)},K_=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})};let Q_=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new W_;this.storage=e;try{const r=new H_;G_(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}};var Uu,Kf;function Y_(){if(Kf)return Uu;Kf=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}Uu=e;function e(r,n,s){var i=s&&s.stringify||t,o=1;if(typeof r=="object"&&r!==null){var a=n.length+o;if(a===1)return r;var l=new Array(a);l[0]=i(r);for(var c=1;c<a;c++)l[c]=i(n[c]);return l.join(" ")}if(typeof r!="string")return r;var u=n.length;if(u===0)return r;for(var d="",h=1-o,p=-1,g=r&&r.length||0,f=0;f<g;){if(r.charCodeAt(f)===37&&f+1<g){switch(p=p>-1?p:0,r.charCodeAt(f+1)){case 100:case 102:if(h>=u||n[h]==null)break;p<f&&(d+=r.slice(p,f)),d+=Number(n[h]),p=f+2,f++;break;case 105:if(h>=u||n[h]==null)break;p<f&&(d+=r.slice(p,f)),d+=Math.floor(Number(n[h])),p=f+2,f++;break;case 79:case 111:case 106:if(h>=u||n[h]===void 0)break;p<f&&(d+=r.slice(p,f));var y=typeof n[h];if(y==="string"){d+="'"+n[h]+"'",p=f+2,f++;break}if(y==="function"){d+=n[h].name||"<anonymous>",p=f+2,f++;break}d+=i(n[h]),p=f+2,f++;break;case 115:if(h>=u)break;p<f&&(d+=r.slice(p,f)),d+=String(n[h]),p=f+2,f++;break;case 37:p<f&&(d+=r.slice(p,f)),d+="%",p=f+2,f++,h--;break}++h}++f}return p===-1?r:(p<g&&(d+=r.slice(p)),d)}return Uu}var Mu,Qf;function J_(){if(Qf)return Mu;Qf=1;const t=Y_();Mu=s;const e=_().console||{},r={mapHttpRequest:g,mapHttpResponse:g,wrapRequestSerializer:f,wrapResponseSerializer:f,wrapErrorSerializer:f,req:g,res:g,err:h};function n(v,A){return Array.isArray(v)?v.filter(function(T){return T!=="!stdSerializers.err"}):v===!0?Object.keys(A):!1}function s(v){v=v||{},v.browser=v.browser||{};const A=v.browser.transmit;if(A&&typeof A.send!="function")throw Error("pino: transmit option must have a send function");const N=v.browser.write||e;v.browser.write&&(v.browser.asObject=!0);const T=v.serializers||{},O=n(v.browser.serialize,T);let x=v.browser.serialize;Array.isArray(v.browser.serialize)&&v.browser.serialize.indexOf("!stdSerializers.err")>-1&&(x=!1);const U=["error","fatal","warn","info","debug","trace"];typeof N=="function"&&(N.error=N.fatal=N.warn=N.info=N.debug=N.trace=N),v.enabled===!1&&(v.level="silent");const L=v.level||"info",M=Object.create(N);M.log||(M.log=y),Object.defineProperty(M,"levelVal",{get:S}),Object.defineProperty(M,"level",{get:R,set:$});const I={transmit:A,serialize:O,asObject:v.browser.asObject,levels:U,timestamp:p(v)};M.levels=s.levels,M.level=L,M.setMaxListeners=M.getMaxListeners=M.emit=M.addListener=M.on=M.prependListener=M.once=M.prependOnceListener=M.removeListener=M.removeAllListeners=M.listeners=M.listenerCount=M.eventNames=M.write=M.flush=y,M.serializers=T,M._serialize=O,M._stdErrSerialize=x,M.child=D,A&&(M._logEvent=d());function S(){return this.level==="silent"?1/0:this.levels.values[this.level]}function R(){return this._level}function $(k){if(k!=="silent"&&!this.levels.values[k])throw Error("unknown level "+k);this._level=k,i(I,M,"error","log"),i(I,M,"fatal","error"),i(I,M,"warn","error"),i(I,M,"info","log"),i(I,M,"debug","log"),i(I,M,"trace","log")}function D(k,K){if(!k)throw new Error("missing bindings for child Pino");K=K||{},O&&k.serializers&&(K.serializers=k.serializers);const X=K.serializers;if(O&&X){var se=Object.assign({},T,X),te=v.browser.serialize===!0?Object.keys(se):O;delete k.serializers,l([k],te,se,this._stdErrSerialize)}function he(Ce){this._childLevel=(Ce._childLevel|0)+1,this.error=c(Ce,k,"error"),this.fatal=c(Ce,k,"fatal"),this.warn=c(Ce,k,"warn"),this.info=c(Ce,k,"info"),this.debug=c(Ce,k,"debug"),this.trace=c(Ce,k,"trace"),se&&(this.serializers=se,this._serialize=te),A&&(this._logEvent=d([].concat(Ce._logEvent.bindings,k)))}return he.prototype=this,new he(this)}return M}s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},s.stdSerializers=r,s.stdTimeFunctions=Object.assign({},{nullTime:b,epochTime:m,unixTime:w,isoTime:C});function i(v,A,N,T){const O=Object.getPrototypeOf(A);A[N]=A.levelVal>A.levels.values[N]?y:O[N]?O[N]:e[N]||e[T]||y,o(v,A,N)}function o(v,A,N){!v.transmit&&A[N]===y||(A[N]=function(T){return function(){const x=v.timestamp(),U=new Array(arguments.length),L=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var M=0;M<U.length;M++)U[M]=arguments[M];if(v.serialize&&!v.asObject&&l(U,this._serialize,this.serializers,this._stdErrSerialize),v.asObject?T.call(L,a(this,N,U,x)):T.apply(L,U),v.transmit){const I=v.transmit.level||A.level,S=s.levels.values[I],R=s.levels.values[N];if(R<S)return;u(this,{ts:x,methodLevel:N,methodValue:R,transmitValue:s.levels.values[v.transmit.level||A.level],send:v.transmit.send,val:A.levelVal},U)}}}(A[N]))}function a(v,A,N,T){v._serialize&&l(N,v._serialize,v.serializers,v._stdErrSerialize);const O=N.slice();let x=O[0];const U={};T&&(U.time=T),U.level=s.levels.values[A];let L=(v._childLevel|0)+1;if(L<1&&(L=1),x!==null&&typeof x=="object"){for(;L--&&typeof O[0]=="object";)Object.assign(U,O.shift());x=O.length?t(O.shift(),O):void 0}else typeof x=="string"&&(x=t(O.shift(),O));return x!==void 0&&(U.msg=x),U}function l(v,A,N,T){for(const O in v)if(T&&v[O]instanceof Error)v[O]=s.stdSerializers.err(v[O]);else if(typeof v[O]=="object"&&!Array.isArray(v[O]))for(const x in v[O])A&&A.indexOf(x)>-1&&x in N&&(v[O][x]=N[x](v[O][x]))}function c(v,A,N){return function(){const T=new Array(1+arguments.length);T[0]=A;for(var O=1;O<T.length;O++)T[O]=arguments[O-1];return v[N].apply(this,T)}}function u(v,A,N){const T=A.send,O=A.ts,x=A.methodLevel,U=A.methodValue,L=A.val,M=v._logEvent.bindings;l(N,v._serialize||Object.keys(v.serializers),v.serializers,v._stdErrSerialize===void 0?!0:v._stdErrSerialize),v._logEvent.ts=O,v._logEvent.messages=N.filter(function(I){return M.indexOf(I)===-1}),v._logEvent.level.label=x,v._logEvent.level.value=U,T(x,v._logEvent,L),v._logEvent=d(M)}function d(v){return{ts:0,messages:[],bindings:v||[],level:{label:"",value:0}}}function h(v){const A={type:v.constructor.name,msg:v.message,stack:v.stack};for(const N in v)A[N]===void 0&&(A[N]=v[N]);return A}function p(v){return typeof v.timestamp=="function"?v.timestamp:v.timestamp===!1?b:m}function g(){return{}}function f(v){return v}function y(){}function b(){return!1}function m(){return Date.now()}function w(){return Math.round(Date.now()/1e3)}function C(){return new Date(Date.now()).toISOString()}function _(){function v(A){return typeof A<"u"&&A}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return v(self)||v(window)||v(this)||{}}}return Mu}var vi=J_();const Qa=hp(vi),Z_={level:"info"},Ya="custom_context",fp=1e3*1024;let X_=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},Yf=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const r=new X_(e);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let r=this.head;for(;r!==null;)e.push(r.value),r=r.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const r=e.value;return e=e.next,{done:!1,value:r}}}}},Vw=class{constructor(e,r=fp){this.level=e??"error",this.levelValue=vi.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new Yf(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,r){r===vi.levels.values.error?console.error(e):r===vi.levels.values.warn?console.warn(e):r===vi.levels.values.debug?console.debug(e):r===vi.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(An({timestamp:new Date().toISOString(),log:e}));const r=typeof e=="string"?JSON.parse(e).level:e.level;r>=this.levelValue&&this.forwardToConsole(e,r)}getLogs(){return this.logs}clearLogs(){this.logs=new Yf(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const r=this.getLogArray();return r.push(An({extraMetadata:e})),new Blob(r,{type:"application/json"})}},eC=class{constructor(e,r=fp){this.baseChunkLogger=new Vw(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const r=URL.createObjectURL(this.logsToBlob(e)),n=document.createElement("a");n.href=r,n.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}},tC=class{constructor(e,r=fp){this.baseChunkLogger=new Vw(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var rC=Object.defineProperty,nC=Object.defineProperties,sC=Object.getOwnPropertyDescriptors,Jf=Object.getOwnPropertySymbols,iC=Object.prototype.hasOwnProperty,oC=Object.prototype.propertyIsEnumerable,Zf=(t,e,r)=>e in t?rC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,sl=(t,e)=>{for(var r in e||(e={}))iC.call(e,r)&&Zf(t,r,e[r]);if(Jf)for(var r of Jf(e))oC.call(e,r)&&Zf(t,r,e[r]);return t},il=(t,e)=>nC(t,sC(e));function Ji(t){return il(sl({},t),{level:(t==null?void 0:t.level)||Z_.level})}function aC(t,e=Ya){return t[e]||""}function cC(t,e,r=Ya){return t[r]=e,t}function rr(t,e=Ya){let r="";return typeof t.bindings>"u"?r=aC(t,e):r=t.bindings().context||"",r}function lC(t,e,r=Ya){const n=rr(t,r);return n.trim()?`${n}/${e}`:e}function Bt(t,e,r=Ya){const n=lC(t,e,r),s=t.child({context:n});return cC(s,n,r)}function uC(t){var e,r;const n=new eC((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Qa(il(sl({},t.opts),{level:"trace",browser:il(sl({},(r=t.opts)==null?void 0:r.browser),{write:s=>n.write(s)})})),chunkLoggerController:n}}function dC(t){var e;const r=new tC((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Qa(il(sl({},t.opts),{level:"trace"}),r),chunkLoggerController:r}}function gp(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?uC(t):dC(t)}var hC=Object.defineProperty,pC=(t,e,r)=>e in t?hC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Xf=(t,e,r)=>pC(t,typeof e!="symbol"?e+"":e,r);let fC=class extends Ys{constructor(e){super(),this.opts=e,Xf(this,"protocol","wc"),Xf(this,"version",2)}};var gC=Object.defineProperty,mC=(t,e,r)=>e in t?gC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,yC=(t,e,r)=>mC(t,e+"",r);let wC=class extends Ys{constructor(e,r){super(),this.core=e,this.logger=r,yC(this,"records",new Map)}},bC=class{constructor(e,r){this.logger=e,this.core=r}},vC=class extends Ys{constructor(e,r){super(),this.relayer=e,this.logger=r}},EC=class extends Ys{constructor(e){super()}},AC=class{constructor(e,r,n,s){this.core=e,this.logger=r,this.name=n}},_C=class extends Ys{constructor(e,r){super(),this.relayer=e,this.logger=r}},CC=class extends Ys{constructor(e,r){super(),this.core=e,this.logger=r}},IC=class{constructor(e,r,n){this.core=e,this.logger=r,this.store=n}},SC=class{constructor(e,r){this.projectId=e,this.logger=r}},TC=class{constructor(e,r,n){this.core=e,this.logger=r,this.telemetryEnabled=n}};var NC=Object.defineProperty,PC=(t,e,r)=>e in t?NC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,eg=(t,e,r)=>PC(t,typeof e!="symbol"?e+"":e,r);let xC=class{constructor(e){this.opts=e,eg(this,"protocol","wc"),eg(this,"version",2)}},OC=class{constructor(e){this.client=e}};function RC(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Gw(t,...e){if(!RC(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function tg(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function DC(t,e){Gw(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const ri=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Fu=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function kC(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Kw(t){return typeof t=="string"&&(t=kC(t)),Gw(t),t}let $C=class{clone(){return this._cloneInto()}};function UC(t){const e=n=>t().update(Kw(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Qw(t=32){if(ri&&typeof ri.getRandomValues=="function")return ri.getRandomValues(new Uint8Array(t));if(ri&&typeof ri.randomBytes=="function")return ri.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function MC(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),l=n?4:0,c=n?0:4;t.setUint32(e+l,o,n),t.setUint32(e+c,a,n)}let FC=class extends $C{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Fu(this.buffer)}update(e){tg(this);const{view:r,buffer:n,blockLen:s}=this;e=Kw(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const l=Fu(e);for(;s<=i-o;o+=s)this.process(l,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){tg(this),DC(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;MC(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=Fu(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<c;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}};const wc=BigInt(2**32-1),Kd=BigInt(32);function Yw(t,e=!1){return e?{h:Number(t&wc),l:Number(t>>Kd&wc)}:{h:Number(t>>Kd&wc)|0,l:Number(t&wc)|0}}function BC(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=Yw(t[s],e);[r[s],n[s]]=[i,o]}return[r,n]}const LC=(t,e)=>BigInt(t>>>0)<<Kd|BigInt(e>>>0),jC=(t,e,r)=>t>>>r,zC=(t,e,r)=>t<<32-r|e>>>r,HC=(t,e,r)=>t>>>r|e<<32-r,qC=(t,e,r)=>t<<32-r|e>>>r,WC=(t,e,r)=>t<<64-r|e>>>r-32,VC=(t,e,r)=>t>>>r-32|e<<64-r,GC=(t,e)=>e,KC=(t,e)=>t,QC=(t,e,r)=>t<<r|e>>>32-r,YC=(t,e,r)=>e<<r|t>>>32-r,JC=(t,e,r)=>e<<r-32|t>>>64-r,ZC=(t,e,r)=>t<<r-32|e>>>64-r;function XC(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}const eI=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),tI=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,rI=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),nI=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,sI=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),iI=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,me={fromBig:Yw,split:BC,toBig:LC,shrSH:jC,shrSL:zC,rotrSH:HC,rotrSL:qC,rotrBH:WC,rotrBL:VC,rotr32H:GC,rotr32L:KC,rotlSH:QC,rotlSL:YC,rotlBH:JC,rotlBL:ZC,add:XC,add3L:eI,add3H:tI,add4L:rI,add4H:nI,add5H:iI,add5L:sI},[oI,aI]=me.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Pn=new Uint32Array(80),xn=new Uint32Array(80);let cI=class extends FC{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:l,Eh:c,El:u,Fh:d,Fl:h,Gh:p,Gl:g,Hh:f,Hl:y}=this;return[e,r,n,s,i,o,a,l,c,u,d,h,p,g,f,y]}set(e,r,n,s,i,o,a,l,c,u,d,h,p,g,f,y){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=p|0,this.Gl=g|0,this.Hh=f|0,this.Hl=y|0}process(e,r){for(let w=0;w<16;w++,r+=4)Pn[w]=e.getUint32(r),xn[w]=e.getUint32(r+=4);for(let w=16;w<80;w++){const C=Pn[w-15]|0,_=xn[w-15]|0,v=me.rotrSH(C,_,1)^me.rotrSH(C,_,8)^me.shrSH(C,_,7),A=me.rotrSL(C,_,1)^me.rotrSL(C,_,8)^me.shrSL(C,_,7),N=Pn[w-2]|0,T=xn[w-2]|0,O=me.rotrSH(N,T,19)^me.rotrBH(N,T,61)^me.shrSH(N,T,6),x=me.rotrSL(N,T,19)^me.rotrBL(N,T,61)^me.shrSL(N,T,6),U=me.add4L(A,x,xn[w-7],xn[w-16]),L=me.add4H(U,v,O,Pn[w-7],Pn[w-16]);Pn[w]=L|0,xn[w]=U|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:l,Dh:c,Dl:u,Eh:d,El:h,Fh:p,Fl:g,Gh:f,Gl:y,Hh:b,Hl:m}=this;for(let w=0;w<80;w++){const C=me.rotrSH(d,h,14)^me.rotrSH(d,h,18)^me.rotrBH(d,h,41),_=me.rotrSL(d,h,14)^me.rotrSL(d,h,18)^me.rotrBL(d,h,41),v=d&p^~d&f,A=h&g^~h&y,N=me.add5L(m,_,A,aI[w],xn[w]),T=me.add5H(N,b,C,v,oI[w],Pn[w]),O=N|0,x=me.rotrSH(n,s,28)^me.rotrBH(n,s,34)^me.rotrBH(n,s,39),U=me.rotrSL(n,s,28)^me.rotrBL(n,s,34)^me.rotrBL(n,s,39),L=n&i^n&a^i&a,M=s&o^s&l^o&l;b=f|0,m=y|0,f=p|0,y=g|0,p=d|0,g=h|0,{h:d,l:h}=me.add(c|0,u|0,T|0,O|0),c=a|0,u=l|0,a=i|0,l=o|0,i=n|0,o=s|0;const I=me.add3L(O,U,M);n=me.add3H(I,T,x,L),s=I|0}({h:n,l:s}=me.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=me.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l}=me.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:u}=me.add(this.Dh|0,this.Dl|0,c|0,u|0),{h:d,l:h}=me.add(this.Eh|0,this.El|0,d|0,h|0),{h:p,l:g}=me.add(this.Fh|0,this.Fl|0,p|0,g|0),{h:f,l:y}=me.add(this.Gh|0,this.Gl|0,f|0,y|0),{h:b,l:m}=me.add(this.Hh|0,this.Hl|0,b|0,m|0),this.set(n,s,i,o,a,l,c,u,d,h,p,g,f,y,b,m)}roundClean(){Pn.fill(0),xn.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const lI=UC(()=>new cI);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mp=BigInt(0),Jw=BigInt(1),uI=BigInt(2);function yp(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function wp(t){if(!yp(t))throw new Error("Uint8Array expected")}function Bu(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const dI=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function bp(t){wp(t);let e="";for(let r=0;r<t.length;r++)e+=dI[t[r]];return e}function Zw(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?mp:BigInt("0x"+t)}const cn={_0:48,_9:57,A:65,F:70,a:97,f:102};function rg(t){if(t>=cn._0&&t<=cn._9)return t-cn._0;if(t>=cn.A&&t<=cn.F)return t-(cn.A-10);if(t>=cn.a&&t<=cn.f)return t-(cn.a-10)}function Xw(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){const o=rg(t.charCodeAt(i)),a=rg(t.charCodeAt(i+1));if(o===void 0||a===void 0){const l=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+i)}n[s]=o*16+a}return n}function hI(t){return Zw(bp(t))}function zc(t){return wp(t),Zw(bp(Uint8Array.from(t).reverse()))}function eb(t,e){return Xw(t.toString(16).padStart(e*2,"0"))}function Qd(t,e){return eb(t,e).reverse()}function ln(t,e,r){let n;if(typeof e=="string")try{n=Xw(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(yp(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(t+" of length "+r+" expected, got "+s);return n}function ng(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];wp(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}const Lu=t=>typeof t=="bigint"&&mp<=t;function pI(t,e,r){return Lu(t)&&Lu(e)&&Lu(r)&&e<=t&&t<r}function po(t,e,r,n){if(!pI(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function fI(t){let e;for(e=0;t>mp;t>>=Jw,e+=1);return e}const gI=t=>(uI<<BigInt(t-1))-Jw,mI={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||yp(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function vp(t,e,r={}){const n=(s,i,o)=>{const a=mI[i];if(typeof a!="function")throw new Error("invalid validator function");const l=t[s];if(!(o&&l===void 0)&&!a(l,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+l)};for(const[s,i]of Object.entries(e))n(s,i,!1);for(const[s,i]of Object.entries(r))n(s,i,!0);return t}function sg(t){const e=new WeakMap;return(r,...n)=>{const s=e.get(r);if(s!==void 0)return s;const i=t(r,...n);return e.set(r,i),i}}const vt=BigInt(0),nt=BigInt(1),ms=BigInt(2),yI=BigInt(3),Yd=BigInt(4),ig=BigInt(5),og=BigInt(8);function dt(t,e){const r=t%e;return r>=vt?r:e+r}function wI(t,e,r){if(e<vt)throw new Error("invalid exponent, negatives unsupported");if(r<=vt)throw new Error("invalid modulus");if(r===nt)return vt;let n=nt;for(;e>vt;)e&nt&&(n=n*t%r),t=t*t%r,e>>=nt;return n}function Lr(t,e,r){let n=t;for(;e-- >vt;)n*=n,n%=r;return n}function ag(t,e){if(t===vt)throw new Error("invert: expected non-zero number");if(e<=vt)throw new Error("invert: expected positive modulus, got "+e);let r=dt(t,e),n=e,s=vt,i=nt;for(;r!==vt;){const o=n/r,a=n%r,l=s-i*o;n=r,r=a,s=i,i=l}if(n!==nt)throw new Error("invert: does not exist");return dt(s,e)}function bI(t){const e=(t-nt)/ms;let r,n,s;for(r=t-nt,n=0;r%ms===vt;r/=ms,n++);for(s=ms;s<t&&wI(s,e,t)!==t-nt;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(t+nt)/Yd;return function(a,l){const c=a.pow(l,o);if(!a.eql(a.sqr(c),l))throw new Error("Cannot find square root");return c}}const i=(r+nt)/ms;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let l=n,c=o.pow(o.mul(o.ONE,s),r),u=o.pow(a,i),d=o.pow(a,r);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let g=o.sqr(d);h<l&&!o.eql(g,o.ONE);h++)g=o.sqr(g);const p=o.pow(c,nt<<BigInt(l-h-1));c=o.sqr(p),u=o.mul(u,p),d=o.mul(d,c),l=h}return u}}function vI(t){if(t%Yd===yI){const e=(t+nt)/Yd;return function(r,n){const s=r.pow(n,e);if(!r.eql(r.sqr(s),n))throw new Error("Cannot find square root");return s}}if(t%og===ig){const e=(t-ig)/og;return function(r,n){const s=r.mul(n,ms),i=r.pow(s,e),o=r.mul(n,i),a=r.mul(r.mul(o,ms),i),l=r.mul(o,r.sub(a,r.ONE));if(!r.eql(r.sqr(l),n))throw new Error("Cannot find square root");return l}}return bI(t)}const EI=(t,e)=>(dt(t,e)&nt)===nt,AI=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function _I(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=AI.reduce((n,s)=>(n[s]="function",n),e);return vp(t,r)}function CI(t,e,r){if(r<vt)throw new Error("invalid exponent, negatives unsupported");if(r===vt)return t.ONE;if(r===nt)return e;let n=t.ONE,s=e;for(;r>vt;)r&nt&&(n=t.mul(n,s)),s=t.sqr(s),r>>=nt;return n}function II(t,e){const r=new Array(e.length),n=e.reduce((i,o,a)=>t.is0(o)?i:(r[a]=i,t.mul(i,o)),t.ONE),s=t.inv(n);return e.reduceRight((i,o,a)=>t.is0(o)?i:(r[a]=t.mul(i,r[a]),t.mul(i,o)),s),r}function tb(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function rb(t,e,r=!1,n={}){if(t<=vt)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=tb(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:s,BYTES:i,MASK:gI(s),ZERO:vt,ONE:nt,create:l=>dt(l,t),isValid:l=>{if(typeof l!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof l);return vt<=l&&l<t},is0:l=>l===vt,isOdd:l=>(l&nt)===nt,neg:l=>dt(-l,t),eql:(l,c)=>l===c,sqr:l=>dt(l*l,t),add:(l,c)=>dt(l+c,t),sub:(l,c)=>dt(l-c,t),mul:(l,c)=>dt(l*c,t),pow:(l,c)=>CI(a,l,c),div:(l,c)=>dt(l*ag(c,t),t),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>ag(l,t),sqrt:n.sqrt||(l=>(o||(o=vI(t)),o(a,l))),invertBatch:l=>II(a,l),cmov:(l,c,u)=>u?c:l,toBytes:l=>r?Qd(l,i):eb(l,i),fromBytes:l=>{if(l.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+l.length);return r?zc(l):hI(l)}});return Object.freeze(a)}const cg=BigInt(0),bc=BigInt(1);function ju(t,e){const r=e.negate();return t?r:e}function nb(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function zu(t,e){nb(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function SI(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function TI(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const Hu=new WeakMap,sb=new WeakMap;function qu(t){return sb.get(t)||1}function NI(t,e){return{constTimeNegate:ju,hasPrecomputes(r){return qu(r)!==1},unsafeLadder(r,n,s=t.ZERO){let i=r;for(;n>cg;)n&bc&&(s=s.add(i)),i=i.double(),n>>=bc;return s},precomputeWindow(r,n){const{windows:s,windowSize:i}=zu(n,e),o=[];let a=r,l=a;for(let c=0;c<s;c++){l=a,o.push(l);for(let u=1;u<i;u++)l=l.add(a),o.push(l);a=l.double()}return o},wNAF(r,n,s){const{windows:i,windowSize:o}=zu(r,e);let a=t.ZERO,l=t.BASE;const c=BigInt(2**r-1),u=2**r,d=BigInt(r);for(let h=0;h<i;h++){const p=h*o;let g=Number(s&c);s>>=d,g>o&&(g-=u,s+=bc);const f=p,y=p+Math.abs(g)-1,b=h%2!==0,m=g<0;g===0?l=l.add(ju(b,n[f])):a=a.add(ju(m,n[y]))}return{p:a,f:l}},wNAFUnsafe(r,n,s,i=t.ZERO){const{windows:o,windowSize:a}=zu(r,e),l=BigInt(2**r-1),c=2**r,u=BigInt(r);for(let d=0;d<o;d++){const h=d*a;if(s===cg)break;let p=Number(s&l);if(s>>=u,p>a&&(p-=c,s+=bc),p===0)continue;let g=n[h+Math.abs(p)-1];p<0&&(g=g.negate()),i=i.add(g)}return i},getPrecomputes(r,n,s){let i=Hu.get(n);return i||(i=this.precomputeWindow(n,r),r!==1&&Hu.set(n,s(i))),i},wNAFCached(r,n,s){const i=qu(r);return this.wNAF(i,this.getPrecomputes(i,r,s),n)},wNAFCachedUnsafe(r,n,s,i){const o=qu(r);return o===1?this.unsafeLadder(r,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,r,s),n,i)},setWindowSize(r,n){nb(n,e),sb.set(r,n),Hu.delete(r)}}}function PI(t,e,r,n){if(SI(r,t),TI(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=fI(BigInt(r.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,l=new Array(a+1).fill(s),c=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=c;d>=0;d-=o){l.fill(s);for(let p=0;p<n.length;p++){const g=n[p],f=Number(g>>BigInt(d)&BigInt(a));l[f]=l[f].add(r[p])}let h=s;for(let p=l.length-1,g=s;p>0;p--)g=g.add(l[p]),h=h.add(g);if(u=u.add(h),d!==0)for(let p=0;p<o;p++)u=u.double()}return u}function xI(t){return _I(t.Fp),vp(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...tb(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Sr=BigInt(0),Vt=BigInt(1),vc=BigInt(2),OI=BigInt(8),RI={zip215:!0};function DI(t){const e=xI(t);return vp(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function kI(t){const e=DI(t),{Fp:r,n,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:l}=e,c=vc<<BigInt(a*8)-Vt,u=r.create,d=rb(e.n,e.nBitLength),h=e.uvRatio||((I,S)=>{try{return{isValid:!0,value:r.sqrt(I*r.inv(S))}}catch{return{isValid:!1,value:Sr}}}),p=e.adjustScalarBytes||(I=>I),g=e.domain||((I,S,R)=>{if(Bu("phflag",R),S.length||R)throw new Error("Contexts/pre-hash are not supported");return I});function f(I,S){po("coordinate "+I,S,Sr,c)}function y(I){if(!(I instanceof w))throw new Error("ExtendedPoint expected")}const b=sg((I,S)=>{const{ex:R,ey:$,ez:D}=I,k=I.is0();S==null&&(S=k?OI:r.inv(D));const K=u(R*S),X=u($*S),se=u(D*S);if(k)return{x:Sr,y:Vt};if(se!==Vt)throw new Error("invZ was invalid");return{x:K,y:X}}),m=sg(I=>{const{a:S,d:R}=e;if(I.is0())throw new Error("bad point: ZERO");const{ex:$,ey:D,ez:k,et:K}=I,X=u($*$),se=u(D*D),te=u(k*k),he=u(te*te),Ce=u(X*S),Xe=u(te*u(Ce+se)),rt=u(he+u(R*u(X*se)));if(Xe!==rt)throw new Error("bad point: equation left != right (1)");const Ge=u($*D),hr=u(k*K);if(Ge!==hr)throw new Error("bad point: equation left != right (2)");return!0});class w{constructor(S,R,$,D){this.ex=S,this.ey=R,this.ez=$,this.et=D,f("x",S),f("y",R),f("z",$),f("t",D),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(S){if(S instanceof w)throw new Error("extended point not allowed");const{x:R,y:$}=S||{};return f("x",R),f("y",$),new w(R,$,Vt,u(R*$))}static normalizeZ(S){const R=r.invertBatch(S.map($=>$.ez));return S.map(($,D)=>$.toAffine(R[D])).map(w.fromAffine)}static msm(S,R){return PI(w,d,S,R)}_setWindowSize(S){v.setWindowSize(this,S)}assertValidity(){m(this)}equals(S){y(S);const{ex:R,ey:$,ez:D}=this,{ex:k,ey:K,ez:X}=S,se=u(R*X),te=u(k*D),he=u($*X),Ce=u(K*D);return se===te&&he===Ce}is0(){return this.equals(w.ZERO)}negate(){return new w(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:S}=e,{ex:R,ey:$,ez:D}=this,k=u(R*R),K=u($*$),X=u(vc*u(D*D)),se=u(S*k),te=R+$,he=u(u(te*te)-k-K),Ce=se+K,Xe=Ce-X,rt=se-K,Ge=u(he*Xe),hr=u(Ce*rt),Ir=u(he*rt),os=u(Xe*Ce);return new w(Ge,hr,os,Ir)}add(S){y(S);const{a:R,d:$}=e,{ex:D,ey:k,ez:K,et:X}=this,{ex:se,ey:te,ez:he,et:Ce}=S;if(R===BigInt(-1)){const Ef=u((k-D)*(te+se)),Af=u((k+D)*(te-se)),Cu=u(Af-Ef);if(Cu===Sr)return this.double();const _f=u(K*vc*Ce),Cf=u(X*vc*he),If=Cf+_f,Sf=Af+Ef,Tf=Cf-_f,bA=u(If*Cu),vA=u(Sf*Tf),EA=u(If*Tf),AA=u(Cu*Sf);return new w(bA,vA,AA,EA)}const Xe=u(D*se),rt=u(k*te),Ge=u(X*$*Ce),hr=u(K*he),Ir=u((D+k)*(se+te)-Xe-rt),os=hr-Ge,pc=hr+Ge,ei=u(rt-R*Xe),_u=u(Ir*os),mA=u(pc*ei),yA=u(Ir*ei),wA=u(os*pc);return new w(_u,mA,wA,yA)}subtract(S){return this.add(S.negate())}wNAF(S){return v.wNAFCached(this,S,w.normalizeZ)}multiply(S){const R=S;po("scalar",R,Vt,n);const{p:$,f:D}=this.wNAF(R);return w.normalizeZ([$,D])[0]}multiplyUnsafe(S,R=w.ZERO){const $=S;return po("scalar",$,Sr,n),$===Sr?_:this.is0()||$===Vt?this:v.wNAFCachedUnsafe(this,$,w.normalizeZ,R)}isSmallOrder(){return this.multiplyUnsafe(l).is0()}isTorsionFree(){return v.unsafeLadder(this,n).is0()}toAffine(S){return b(this,S)}clearCofactor(){const{h:S}=e;return S===Vt?this:this.multiplyUnsafe(S)}static fromHex(S,R=!1){const{d:$,a:D}=e,k=r.BYTES;S=ln("pointHex",S,k),Bu("zip215",R);const K=S.slice(),X=S[k-1];K[k-1]=X&-129;const se=zc(K),te=R?c:r.ORDER;po("pointHex.y",se,Sr,te);const he=u(se*se),Ce=u(he-Vt),Xe=u($*he-D);let{isValid:rt,value:Ge}=h(Ce,Xe);if(!rt)throw new Error("Point.fromHex: invalid y coordinate");const hr=(Ge&Vt)===Vt,Ir=(X&128)!==0;if(!R&&Ge===Sr&&Ir)throw new Error("Point.fromHex: x=0 and x_0=1");return Ir!==hr&&(Ge=u(-Ge)),w.fromAffine({x:Ge,y:se})}static fromPrivateKey(S){return T(S).point}toRawBytes(){const{x:S,y:R}=this.toAffine(),$=Qd(R,r.BYTES);return $[$.length-1]|=S&Vt?128:0,$}toHex(){return bp(this.toRawBytes())}}w.BASE=new w(e.Gx,e.Gy,Vt,u(e.Gx*e.Gy)),w.ZERO=new w(Sr,Vt,Vt,Sr);const{BASE:C,ZERO:_}=w,v=NI(w,a*8);function A(I){return dt(I,n)}function N(I){return A(zc(I))}function T(I){const S=r.BYTES;I=ln("private key",I,S);const R=ln("hashed private key",i(I),2*S),$=p(R.slice(0,S)),D=R.slice(S,2*S),k=N($),K=C.multiply(k),X=K.toRawBytes();return{head:$,prefix:D,scalar:k,point:K,pointBytes:X}}function O(I){return T(I).pointBytes}function x(I=new Uint8Array,...S){const R=ng(...S);return N(i(g(R,ln("context",I),!!s)))}function U(I,S,R={}){I=ln("message",I),s&&(I=s(I));const{prefix:$,scalar:D,pointBytes:k}=T(S),K=x(R.context,$,I),X=C.multiply(K).toRawBytes(),se=x(R.context,X,k,I),te=A(K+se*D);po("signature.s",te,Sr,n);const he=ng(X,Qd(te,r.BYTES));return ln("result",he,r.BYTES*2)}const L=RI;function M(I,S,R,$=L){const{context:D,zip215:k}=$,K=r.BYTES;I=ln("signature",I,2*K),S=ln("message",S),R=ln("publicKey",R,K),k!==void 0&&Bu("zip215",k),s&&(S=s(S));const X=zc(I.slice(K,2*K));let se,te,he;try{se=w.fromHex(R,k),te=w.fromHex(I.slice(0,K),k),he=C.multiplyUnsafe(X)}catch{return!1}if(!k&&se.isSmallOrder())return!1;const Ce=x(D,te.toRawBytes(),se.toRawBytes(),S);return te.add(se.multiplyUnsafe(Ce)).subtract(he).clearCofactor().equals(w.ZERO)}return C._setWindowSize(8),{CURVE:e,getPublicKey:O,sign:U,verify:M,ExtendedPoint:w,utils:{getExtendedPublicKey:T,randomPrivateKey:()=>o(r.BYTES),precompute(I=8,S=w.BASE){return S._setWindowSize(I),S.multiply(BigInt(3)),S}}}}BigInt(0),BigInt(1);const Ep=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),lg=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const $I=BigInt(1),ug=BigInt(2);BigInt(3);const UI=BigInt(5),MI=BigInt(8);function FI(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),s=BigInt(80),i=Ep,o=t*t%i*t%i,a=Lr(o,ug,i)*o%i,l=Lr(a,$I,i)*t%i,c=Lr(l,UI,i)*l%i,u=Lr(c,e,i)*c%i,d=Lr(u,r,i)*u%i,h=Lr(d,n,i)*d%i,p=Lr(h,s,i)*h%i,g=Lr(p,s,i)*h%i,f=Lr(g,e,i)*c%i;return{pow_p_5_8:Lr(f,ug,i)*t%i,b2:o}}function BI(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function LI(t,e){const r=Ep,n=dt(e*e*e,r),s=dt(n*n*e,r),i=FI(t*s).pow_p_5_8;let o=dt(t*n*i,r);const a=dt(e*o*o,r),l=o,c=dt(o*lg,r),u=a===t,d=a===dt(-t,r),h=a===dt(-t*lg,r);return u&&(o=l),(d||h)&&(o=c),EI(o,r)&&(o=dt(-o,r)),{isValid:u||d,value:o}}const jI=rb(Ep,void 0,!0),zI={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:jI,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:MI,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:lI,randomBytes:Qw,adjustScalarBytes:BI,uvRatio:LI},ib=kI(zI),HI="EdDSA",qI="JWT",ol=".",Vl="base64url",ob="utf8",ab="utf8",WI=":",VI="did",GI="key",dg="base58btc",KI="z",QI="K36",YI=32;function Ap(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function cb(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Ap(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function lb(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const r=cb(e);let n=0;for(const s of t)r.set(s,n),n+=s.length;return Ap(r)}function JI(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,l=t.charAt(0),c=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var f=0,y=0,b=0,m=g.length;b!==m&&g[b]===0;)b++,f++;for(var w=(m-b)*u+1>>>0,C=new Uint8Array(w);b!==m;){for(var _=g[b],v=0,A=w-1;(_!==0||v<y)&&A!==-1;A--,v++)_+=256*C[A]>>>0,C[A]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");y=v,b++}for(var N=w-y;N!==w&&C[N]===0;)N++;for(var T=l.repeat(f);N<w;++N)T+=t.charAt(C[N]);return T}function h(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var f=0;if(g[f]!==" "){for(var y=0,b=0;g[f]===l;)y++,f++;for(var m=(g.length-f)*c+1>>>0,w=new Uint8Array(m);g[f];){var C=r[g.charCodeAt(f)];if(C===255)return;for(var _=0,v=m-1;(C!==0||_<b)&&v!==-1;v--,_++)C+=a*w[v]>>>0,w[v]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");b=_,f++}if(g[f]!==" "){for(var A=m-b;A!==m&&w[A]===0;)A++;for(var N=new Uint8Array(y+(m-A)),T=y;A!==m;)N[T++]=w[A++];return N}}}function p(g){var f=h(g);if(f)return f;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:p}}var ZI=JI,XI=ZI;const ub=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},eS=t=>new TextEncoder().encode(t),tS=t=>new TextDecoder().decode(t);let rS=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},nS=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return db(this,e)}},sS=class{constructor(e){this.decoders=e}or(e){return db(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const db=(t,e)=>new sS({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let iS=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new rS(e,r,n),this.decoder=new nS(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const Gl=({name:t,prefix:e,encode:r,decode:n})=>new iS(t,e,r,n),Ja=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=XI(r,e);return Gl({prefix:t,name:e,encode:n,decode:i=>ub(s(i))})},oS=(t,e,r,n)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,l=0,c=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);l=l<<r|d,a+=r,a>=8&&(a-=8,o[c++]=255&l>>a)}if(a>=r||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return o},aS=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let l=0;l<t.length;++l)for(a=a<<8|t[l],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},xt=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Gl({prefix:e,name:t,encode(s){return aS(s,n,r)},decode(s){return oS(s,n,r,t)}}),cS=Gl({prefix:"\0",name:"identity",encode:t=>tS(t),decode:t=>eS(t)});var lS=Object.freeze({__proto__:null,identity:cS});const uS=xt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var dS=Object.freeze({__proto__:null,base2:uS});const hS=xt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var pS=Object.freeze({__proto__:null,base8:hS});const fS=Ja({prefix:"9",name:"base10",alphabet:"0123456789"});var gS=Object.freeze({__proto__:null,base10:fS});const mS=xt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),yS=xt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var wS=Object.freeze({__proto__:null,base16:mS,base16upper:yS});const bS=xt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),vS=xt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ES=xt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),AS=xt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),_S=xt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),CS=xt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),IS=xt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),SS=xt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),TS=xt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var NS=Object.freeze({__proto__:null,base32:bS,base32upper:vS,base32pad:ES,base32padupper:AS,base32hex:_S,base32hexupper:CS,base32hexpad:IS,base32hexpadupper:SS,base32z:TS});const PS=Ja({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),xS=Ja({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var OS=Object.freeze({__proto__:null,base36:PS,base36upper:xS});const RS=Ja({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),DS=Ja({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var kS=Object.freeze({__proto__:null,base58btc:RS,base58flickr:DS});const $S=xt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),US=xt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),MS=xt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),FS=xt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var BS=Object.freeze({__proto__:null,base64:$S,base64pad:US,base64url:MS,base64urlpad:FS});const hb=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),LS=hb.reduce((t,e,r)=>(t[r]=e,t),[]),jS=hb.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function zS(t){return t.reduce((e,r)=>(e+=LS[r],e),"")}function HS(t){const e=[];for(const r of t){const n=jS[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const qS=Gl({prefix:"🚀",name:"base256emoji",encode:zS,decode:HS});var WS=Object.freeze({__proto__:null,base256emoji:qS}),VS=pb,hg=128,GS=-128,KS=Math.pow(2,31);function pb(t,e,r){e=e||[],r=r||0;for(var n=r;t>=KS;)e[r++]=t&255|hg,t/=128;for(;t&GS;)e[r++]=t&255|hg,t>>>=7;return e[r]=t|0,pb.bytes=r-n+1,e}var QS=Jd,YS=128,pg=127;function Jd(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw Jd.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&pg)<<s:(o&pg)*Math.pow(2,s),s+=7}while(o>=YS);return Jd.bytes=i-n,r}var JS=Math.pow(2,7),ZS=Math.pow(2,14),XS=Math.pow(2,21),eT=Math.pow(2,28),tT=Math.pow(2,35),rT=Math.pow(2,42),nT=Math.pow(2,49),sT=Math.pow(2,56),iT=Math.pow(2,63),oT=function(t){return t<JS?1:t<ZS?2:t<XS?3:t<eT?4:t<tT?5:t<rT?6:t<nT?7:t<sT?8:t<iT?9:10},aT={encode:VS,decode:QS,encodingLength:oT},fb=aT;const fg=(t,e,r=0)=>(fb.encode(t,e,r),e),gg=t=>fb.encodingLength(t),Zd=(t,e)=>{const r=e.byteLength,n=gg(t),s=n+gg(r),i=new Uint8Array(s+r);return fg(t,i,0),fg(r,i,n),i.set(e,s),new cT(t,r,e,i)};let cT=class{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}};const gb=({name:t,code:e,encode:r})=>new lT(t,e,r);let lT=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Zd(this.code,r):r.then(n=>Zd(this.code,n))}else throw Error("Unknown type, must be binary type")}};const mb=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),uT=gb({name:"sha2-256",code:18,encode:mb("SHA-256")}),dT=gb({name:"sha2-512",code:19,encode:mb("SHA-512")});var hT=Object.freeze({__proto__:null,sha256:uT,sha512:dT});const yb=0,pT="identity",wb=ub,fT=t=>Zd(yb,wb(t)),gT={code:yb,name:pT,encode:wb,digest:fT};var mT=Object.freeze({__proto__:null,identity:gT});new TextEncoder,new TextDecoder;const mg={...lS,...dS,...pS,...gS,...wS,...NS,...OS,...kS,...BS,...WS};({...hT,...mT});function bb(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const yg=bb("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Wu=bb("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=cb(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),vb={utf8:yg,"utf-8":yg,hex:mg.base16,latin1:Wu,ascii:Wu,binary:Wu,...mg};function Kl(t,e="utf8"){const r=vb[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function Zi(t,e="utf8"){const r=vb[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Ap(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function wg(t){return Rs(Kl(Zi(t,Vl),ob))}function al(t){return Kl(Zi(An(t),ob),Vl)}function Eb(t){const e=Zi(QI,dg),r=KI+Kl(lb([e,t]),dg);return[VI,GI,r].join(WI)}function yT(t){return Kl(t,Vl)}function wT(t){return Zi(t,Vl)}function bT(t){return Zi([al(t.header),al(t.payload)].join(ol),ab)}function vT(t){return[al(t.header),al(t.payload),yT(t.signature)].join(ol)}function Xd(t){const e=t.split(ol),r=wg(e[0]),n=wg(e[1]),s=wT(e[2]),i=Zi(e.slice(0,2).join(ol),ab);return{header:r,payload:n,signature:s,data:i}}function bg(t=Qw(YI)){const e=ib.getPublicKey(t);return{secretKey:lb([t,e]),publicKey:e}}async function ET(t,e,r,n,s=q.fromMiliseconds(Date.now())){const i={alg:HI,typ:qI},o=Eb(n.publicKey),a=s+r,l={iss:o,sub:t,aud:e,iat:s,exp:a},c=bT({header:i,payload:l}),u=ib.sign(c,n.secretKey.slice(0,32));return vT({header:i,payload:l,signature:u})}var vg=function(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},AT=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),_T=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=Ut.platform}return t}(),CT=function(){function t(e,r,n,s){this.name=e,this.version=r,this.os=n,this.bot=s,this.type="bot-device"}return t}(),IT=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),ST=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),TT=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,NT=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Eg=3,PT=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",TT]],Ag=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function xT(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new ST:typeof navigator<"u"?RT(navigator.userAgent):kT()}function OT(t){return t!==""&&PT.reduce(function(e,r){var n=r[0],s=r[1];if(e)return e;var i=s.exec(t);return!!i&&[n,i]},!1)}function RT(t){var e=OT(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new IT;var s=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);s?s.length<Eg&&(s=vg(vg([],s,!0),$T(Eg-s.length),!0)):s=[];var i=s.join("."),o=DT(t),a=NT.exec(t);return a&&a[1]?new CT(r,i,o,a[1]):new AT(r,i,o)}function DT(t){for(var e=0,r=Ag.length;e<r;e++){var n=Ag[e],s=n[0],i=n[1],o=i.exec(t);if(o)return s}return null}function kT(){var t=typeof Ut<"u"&&Ut.version;return t?new _T(Ut.version.slice(1)):null}function $T(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var Fe={},_g;function Ab(){if(_g)return Fe;_g=1,Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.getLocalStorage=Fe.getLocalStorageOrThrow=Fe.getCrypto=Fe.getCryptoOrThrow=Fe.getLocation=Fe.getLocationOrThrow=Fe.getNavigator=Fe.getNavigatorOrThrow=Fe.getDocument=Fe.getDocumentOrThrow=Fe.getFromWindowOrThrow=Fe.getFromWindow=void 0;function t(h){let p;return typeof window<"u"&&typeof window[h]<"u"&&(p=window[h]),p}Fe.getFromWindow=t;function e(h){const p=t(h);if(!p)throw new Error(`${h} is not defined in Window`);return p}Fe.getFromWindowOrThrow=e;function r(){return e("document")}Fe.getDocumentOrThrow=r;function n(){return t("document")}Fe.getDocument=n;function s(){return e("navigator")}Fe.getNavigatorOrThrow=s;function i(){return t("navigator")}Fe.getNavigator=i;function o(){return e("location")}Fe.getLocationOrThrow=o;function a(){return t("location")}Fe.getLocation=a;function l(){return e("crypto")}Fe.getCryptoOrThrow=l;function c(){return t("crypto")}Fe.getCrypto=c;function u(){return e("localStorage")}Fe.getLocalStorageOrThrow=u;function d(){return t("localStorage")}return Fe.getLocalStorage=d,Fe}var Ds=Ab(),fo={},Cg;function UT(){if(Cg)return fo;Cg=1,Object.defineProperty(fo,"__esModule",{value:!0}),fo.getWindowMetadata=void 0;const t=Ab();function e(){let r,n;try{r=t.getDocumentOrThrow(),n=t.getLocationOrThrow()}catch{return null}function s(){const p=r.getElementsByTagName("link"),g=[];for(let f=0;f<p.length;f++){const y=p[f],b=y.getAttribute("rel");if(b&&b.toLowerCase().indexOf("icon")>-1){const m=y.getAttribute("href");if(m)if(m.toLowerCase().indexOf("https:")===-1&&m.toLowerCase().indexOf("http:")===-1&&m.indexOf("//")!==0){let w=n.protocol+"//"+n.host;if(m.indexOf("/")===0)w+=m;else{const C=n.pathname.split("/");C.pop();const _=C.join("/");w+=_+"/"+m}g.push(w)}else if(m.indexOf("//")===0){const w=n.protocol+m;g.push(w)}else g.push(m)}}return g}function i(...p){const g=r.getElementsByTagName("meta");for(let f=0;f<g.length;f++){const y=g[f],b=["itemprop","property","name"].map(m=>y.getAttribute(m)).filter(m=>m?p.includes(m):!1);if(b.length&&b){const m=y.getAttribute("content");if(m)return m}}return""}function o(){let p=i("name","og:site_name","og:title","twitter:title");return p||(p=r.title),p}function a(){return i("description","og:description","twitter:description","keywords")}const l=o(),c=a(),u=n.origin,d=s();return{description:c,url:u,icons:d,name:l}}return fo.getWindowMetadata=e,fo}var MT=UT();const FT="1.0.8";let Ar=class eh extends Error{constructor(e,r={}){var o;const n=r.cause instanceof eh?r.cause.details:(o=r.cause)!=null&&o.message?r.cause.message:r.details,s=r.cause instanceof eh&&r.cause.docsPath||r.docsPath,i=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...n?[`Details: ${n}`]:[],`Version: abitype@${FT}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),r.cause&&(this.cause=r.cause),this.details=n,this.docsPath=s,this.metaMessages=r.metaMessages,this.shortMessage=e}};function In(t,e){const r=t.exec(e);return r==null?void 0:r.groups}const _b=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Cb=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,Ib=/^\(.+?\).*?$/,Ig=/^tuple(?<array>(\[(\d*)\])*)$/;function th(t){let e=t.type;if(Ig.test(t.type)&&"components"in t){e="(";const r=t.components.length;for(let s=0;s<r;s++){const i=t.components[s];e+=th(i),s<r-1&&(e+=", ")}const n=In(Ig,t.type);return e+=`)${(n==null?void 0:n.array)??""}`,th({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function go(t){let e="";const r=t.length;for(let n=0;n<r;n++){const s=t[n];e+=th(s),n!==r-1&&(e+=", ")}return e}function BT(t){var e;return t.type==="function"?`function ${t.name}(${go(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${go(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${go(t.inputs)})`:t.type==="error"?`error ${t.name}(${go(t.inputs)})`:t.type==="constructor"?`constructor(${go(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const Sb=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function LT(t){return Sb.test(t)}function jT(t){return In(Sb,t)}const Tb=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function zT(t){return Tb.test(t)}function HT(t){return In(Tb,t)}const Nb=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function qT(t){return Nb.test(t)}function WT(t){return In(Nb,t)}const Pb=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function xb(t){return Pb.test(t)}function VT(t){return In(Pb,t)}const Ob=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function GT(t){return Ob.test(t)}function KT(t){return In(Ob,t)}const Rb=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function QT(t){return Rb.test(t)}function YT(t){return In(Rb,t)}const JT=/^receive\(\) external payable$/;function ZT(t){return JT.test(t)}const XT=new Set(["indexed"]),rh=new Set(["calldata","memory","storage"]);class eN extends Ar{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class tN extends Ar{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class rN extends Ar{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class nN extends Ar{constructor({param:e,name:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${r}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class sN extends Ar{constructor({param:e,type:r,modifier:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${n}" not allowed${r?` in "${r}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class iN extends Ar{constructor({param:e,type:r,modifier:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${n}" not allowed${r?` in "${r}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${n}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class oN extends Ar{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class Xi extends Ar{constructor({signature:e,type:r}){super(`Invalid ${r} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class aN extends Ar{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class cN extends Ar{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class lN extends Ar{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class uN extends Ar{constructor({current:e,depth:r}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${r>0?"opening":"closing"} parentheses.`],details:`Depth "${r}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function dN(t,e,r){let n="";if(r)for(const s of Object.entries(r)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;n+=`(${s[0]}{${i}})`}return e?`${e}:${t}${n}`:t}const Vu=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function hN(t,e={}){if(qT(t))return pN(t,e);if(zT(t))return fN(t,e);if(LT(t))return gN(t,e);if(GT(t))return mN(t,e);if(QT(t))return yN(t);if(ZT(t))return{type:"receive",stateMutability:"payable"};throw new aN({signature:t})}function pN(t,e={}){const r=WT(t);if(!r)throw new Xi({signature:t,type:"function"});const n=Rr(r.parameters),s=[],i=n.length;for(let a=0;a<i;a++)s.push(ks(n[a],{modifiers:rh,structs:e,type:"function"}));const o=[];if(r.returns){const a=Rr(r.returns),l=a.length;for(let c=0;c<l;c++)o.push(ks(a[c],{modifiers:rh,structs:e,type:"function"}))}return{name:r.name,type:"function",stateMutability:r.stateMutability??"nonpayable",inputs:s,outputs:o}}function fN(t,e={}){const r=HT(t);if(!r)throw new Xi({signature:t,type:"event"});const n=Rr(r.parameters),s=[],i=n.length;for(let o=0;o<i;o++)s.push(ks(n[o],{modifiers:XT,structs:e,type:"event"}));return{name:r.name,type:"event",inputs:s}}function gN(t,e={}){const r=jT(t);if(!r)throw new Xi({signature:t,type:"error"});const n=Rr(r.parameters),s=[],i=n.length;for(let o=0;o<i;o++)s.push(ks(n[o],{structs:e,type:"error"}));return{name:r.name,type:"error",inputs:s}}function mN(t,e={}){const r=KT(t);if(!r)throw new Xi({signature:t,type:"constructor"});const n=Rr(r.parameters),s=[],i=n.length;for(let o=0;o<i;o++)s.push(ks(n[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:r.stateMutability??"nonpayable",inputs:s}}function yN(t){const e=YT(t);if(!e)throw new Xi({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const wN=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,bN=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,vN=/^u?int$/;function ks(t,e){var d,h;const r=dN(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(Vu.has(r))return Vu.get(r);const n=Ib.test(t),s=In(n?bN:wN,t);if(!s)throw new rN({param:t});if(s.name&&AN(s.name))throw new nN({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let l,c={};if(n){l="tuple";const p=Rr(s.type),g=[],f=p.length;for(let y=0;y<f;y++)g.push(ks(p[y],{structs:a}));c={components:g}}else if(s.type in a)l="tuple",c={components:a[s.type]};else if(vN.test(s.type))l=`${s.type}256`;else if(l=s.type,(e==null?void 0:e.type)!=="struct"&&!Db(l))throw new tN({type:l});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new sN({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(rh.has(s.modifier)&&!_N(l,!!s.array))throw new iN({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${l}${s.array??""}`,...i,...o,...c};return Vu.set(r,u),u}function Rr(t,e=[],r="",n=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return n===0?Rr(a,[...e,r.trim()]):Rr(a,e,`${r}${o}`,n);case"(":return Rr(a,e,`${r}${o}`,n+1);case")":return Rr(a,e,`${r}${o}`,n-1);default:return Rr(a,e,`${r}${o}`,n)}}if(r==="")return e;if(n!==0)throw new uN({current:r,depth:n});return e.push(r.trim()),e}function Db(t){return t==="address"||t==="bool"||t==="function"||t==="string"||_b.test(t)||Cb.test(t)}const EN=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function AN(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||_b.test(t)||Cb.test(t)||EN.test(t)}function _N(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function CN(t){const e={},r=t.length;for(let o=0;o<r;o++){const a=t[o];if(!xb(a))continue;const l=VT(a);if(!l)throw new Xi({signature:a,type:"struct"});const c=l.properties.split(";"),u=[],d=c.length;for(let h=0;h<d;h++){const g=c[h].trim();if(!g)continue;const f=ks(g,{type:"struct"});u.push(f)}if(!u.length)throw new cN({signature:a});e[l.name]=u}const n={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,l]=s[o];n[a]=kb(l,e)}return n}const IN=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function kb(t,e,r=new Set){const n=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(Ib.test(o.type))n.push(o);else{const l=In(IN,o.type);if(!(l!=null&&l.type))throw new oN({abiParameter:o});const{array:c,type:u}=l;if(u in e){if(r.has(u))throw new lN({type:u});n.push({...o,type:`tuple${c??""}`,components:kb(e[u]??[],e,new Set([...r,u]))})}else if(Db(u))n.push(o);else throw new eN({type:u})}}return n}function $b(t){const e=CN(t),r=[],n=t.length;for(let s=0;s<n;s++){const i=t[s];xb(i)||r.push(hN(i,e))}return r}function ra(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Sg(t){return ra(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const Ub="2.23.2";let mo={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${Ub}`},Ql=class nh extends Error{constructor(e,r={}){var a;const n=(()=>{var l;return r.cause instanceof nh?r.cause.details:(l=r.cause)!=null&&l.message?r.cause.message:r.details})(),s=r.cause instanceof nh&&r.cause.docsPath||r.docsPath,i=(a=mo.getDocsUrl)==null?void 0:a.call(mo,{...r,docsPath:s}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...n?[`Details: ${n}`]:[],...mo.version?[`Version: ${mo.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=s,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=Ub}walk(e){return Mb(this,e)}};function Mb(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?Mb(t.cause,e):e?null:t}let Fb=class extends Ql{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}};function eo(t,{dir:e,size:r=32}={}){return typeof t=="string"?SN(t,{dir:e,size:r}):TN(t,{dir:e,size:r})}function SN(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new Fb({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function TN(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new Fb({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let s=0;s<r;s++){const i=e==="right";n[i?s:r-s-1]=t[i?s:t.length-s-1]}return n}let NN=class extends Ql{constructor({max:e,min:r,signed:n,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}},PN=class extends Ql{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function to(t,{size:e}){if(Sg(t)>e)throw new PN({givenSize:Sg(t),maxSize:e})}function sh(t,e={}){const{signed:r}=e;e.size&&to(t,{size:e.size});const n=BigInt(t);if(!r)return n;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return n<=i?n:n-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function xN(t,e={}){return Number(sh(t,e))}const ON=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ih(t,e={}){return typeof t=="number"||typeof t=="bigint"?Lb(t,e):typeof t=="string"?kN(t,e):typeof t=="boolean"?RN(t,e):Bb(t,e)}function RN(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(to(r,{size:e.size}),eo(r,{size:e.size})):r}function Bb(t,e={}){let r="";for(let s=0;s<t.length;s++)r+=ON[t[s]];const n=`0x${r}`;return typeof e.size=="number"?(to(n,{size:e.size}),eo(n,{dir:"right",size:e.size})):n}function Lb(t,e={}){const{signed:r,size:n}=e,s=BigInt(t);let i;n?r?i=(1n<<BigInt(n)*8n-1n)-1n:i=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&r?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new NN({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:r,size:n,value:`${t}${l}`})}const a=`0x${(r&&s<0?(1n<<BigInt(n*8))+BigInt(s):s).toString(16)}`;return n?eo(a,{size:n}):a}const DN=new TextEncoder;function kN(t,e={}){const r=DN.encode(t);return Bb(r,e)}const $N=new TextEncoder;function UN(t,e={}){return typeof t=="number"||typeof t=="bigint"?FN(t,e):typeof t=="boolean"?MN(t,e):ra(t)?jb(t,e):zb(t,e)}function MN(t,e={}){const r=new Uint8Array(1);return r[0]=Number(t),typeof e.size=="number"?(to(r,{size:e.size}),eo(r,{size:e.size})):r}const un={zero:48,nine:57,A:65,F:70,a:97,f:102};function Tg(t){if(t>=un.zero&&t<=un.nine)return t-un.zero;if(t>=un.A&&t<=un.F)return t-(un.A-10);if(t>=un.a&&t<=un.f)return t-(un.a-10)}function jb(t,e={}){let r=t;e.size&&(to(r,{size:e.size}),r=eo(r,{dir:"right",size:e.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const s=n.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const l=Tg(n.charCodeAt(a++)),c=Tg(n.charCodeAt(a++));if(l===void 0||c===void 0)throw new Ql(`Invalid byte sequence ("${n[a-2]}${n[a-1]}" in "${n}").`);i[o]=l*16+c}return i}function FN(t,e){const r=Lb(t,e);return jb(r)}function zb(t,e={}){const r=$N.encode(t);return typeof e.size=="number"?(to(r,{size:e.size}),eo(r,{dir:"right",size:e.size})):r}function Hb(t,e){const r=e||"hex",n=xw(ra(t,{strict:!1})?UN(t):t);return r==="bytes"?n:ih(n)}let BN=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}};const Gu=new BN(8192);function LN(t,e){if(Gu.has(`${t}.${e}`))return Gu.get(`${t}.${e}`);const r=t.substring(2).toLowerCase(),n=Hb(zb(r),"bytes"),s=r.split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(n[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return Gu.set(`${t}.${e}`,i),i}function jN(t){const e=Hb(`0x${t.substring(4)}`).substring(26);return LN(`0x${e}`)}async function zN({hash:t,signature:e}){const r=ra(t)?t:ih(t),{secp256k1:n}=await Zt(async()=>{const{secp256k1:o}=await import("./secp256k1-kO8RdEKQ.js");return{secp256k1:o}},__vite__mapDeps([0,1,2]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:c,s:u,v:d,yParity:h}=e,p=Number(h??d),g=Ng(p);return new n.Signature(sh(c),sh(u)).addRecoveryBit(g)}const o=ra(e)?e:ih(e),a=xN(`0x${o.slice(130)}`),l=Ng(a);return n.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(l)})().recoverPublicKey(r.substring(2)).toHex(!1)}`}function Ng(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function HN({hash:t,signature:e}){return jN(await zN({hash:t,signature:e}))}function qN(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let c=0;c<e.length;c++)e[c]=255;for(let c=0;c<t.length;c++){const u=t.charAt(c),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=c}const r=t.length,n=t.charAt(0),s=Math.log(r)/Math.log(256),i=Math.log(256)/Math.log(r);function o(c){if(c instanceof Uint8Array||(ArrayBuffer.isView(c)?c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength):Array.isArray(c)&&(c=Uint8Array.from(c))),!(c instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(c.length===0)return"";let u=0,d=0,h=0;const p=c.length;for(;h!==p&&c[h]===0;)h++,u++;const g=(p-h)*i+1>>>0,f=new Uint8Array(g);for(;h!==p;){let m=c[h],w=0;for(let C=g-1;(m!==0||w<d)&&C!==-1;C--,w++)m+=256*f[C]>>>0,f[C]=m%r>>>0,m=m/r>>>0;if(m!==0)throw new Error("Non-zero carry");d=w,h++}let y=g-d;for(;y!==g&&f[y]===0;)y++;let b=n.repeat(u);for(;y<g;++y)b+=t.charAt(f[y]);return b}function a(c){if(typeof c!="string")throw new TypeError("Expected String");if(c.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;c[u]===n;)d++,u++;const p=(c.length-u)*s+1>>>0,g=new Uint8Array(p);for(;u<c.length;){const m=c.charCodeAt(u);if(m>255)return;let w=e[m];if(w===255)return;let C=0;for(let _=p-1;(w!==0||C<h)&&_!==-1;_--,C++)w+=r*g[_]>>>0,g[_]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");h=C,u++}let f=p-h;for(;f!==p&&g[f]===0;)f++;const y=new Uint8Array(d+(p-f));let b=d;for(;f!==p;)y[b++]=g[f++];return y}function l(c){const u=a(c);if(u)return u;throw new Error("Non-base"+r+" character")}return{encode:o,decodeUnsafe:a,decode:l}}var WN="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const VN=qN(WN);function qb(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function Ku(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const r=qb(e);let n=0;for(const s of t)r.set(s,n),n+=s.length;return r}function GN(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,l=t.charAt(0),c=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var f=0,y=0,b=0,m=g.length;b!==m&&g[b]===0;)b++,f++;for(var w=(m-b)*u+1>>>0,C=new Uint8Array(w);b!==m;){for(var _=g[b],v=0,A=w-1;(_!==0||v<y)&&A!==-1;A--,v++)_+=256*C[A]>>>0,C[A]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");y=v,b++}for(var N=w-y;N!==w&&C[N]===0;)N++;for(var T=l.repeat(f);N<w;++N)T+=t.charAt(C[N]);return T}function h(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var f=0;if(g[f]!==" "){for(var y=0,b=0;g[f]===l;)y++,f++;for(var m=(g.length-f)*c+1>>>0,w=new Uint8Array(m);g[f];){var C=r[g.charCodeAt(f)];if(C===255)return;for(var _=0,v=m-1;(C!==0||_<b)&&v!==-1;v--,_++)C+=a*w[v]>>>0,w[v]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");b=_,f++}if(g[f]!==" "){for(var A=m-b;A!==m&&w[A]===0;)A++;for(var N=new Uint8Array(y+(m-A)),T=y;A!==m;)N[T++]=w[A++];return N}}}function p(g){var f=h(g);if(f)return f;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:p}}var KN=GN,QN=KN;const YN=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},JN=t=>new TextEncoder().encode(t),ZN=t=>new TextDecoder().decode(t);class XN{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class e2{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Wb(this,e)}}class t2{constructor(e){this.decoders=e}or(e){return Wb(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Wb=(t,e)=>new t2({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class r2{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new XN(e,r,n),this.decoder=new e2(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Yl=({name:t,prefix:e,encode:r,decode:n})=>new r2(t,e,r,n),Za=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=QN(r,e);return Yl({prefix:t,name:e,encode:n,decode:i=>YN(s(i))})},n2=(t,e,r,n)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,l=0,c=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);l=l<<r|d,a+=r,a>=8&&(a-=8,o[c++]=255&l>>a)}if(a>=r||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return o},s2=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let l=0;l<t.length;++l)for(a=a<<8|t[l],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},Ot=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Yl({prefix:e,name:t,encode(s){return s2(s,n,r)},decode(s){return n2(s,n,r,t)}}),i2=Yl({prefix:"\0",name:"identity",encode:t=>ZN(t),decode:t=>JN(t)}),o2=Object.freeze(Object.defineProperty({__proto__:null,identity:i2},Symbol.toStringTag,{value:"Module"})),a2=Ot({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),c2=Object.freeze(Object.defineProperty({__proto__:null,base2:a2},Symbol.toStringTag,{value:"Module"})),l2=Ot({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),u2=Object.freeze(Object.defineProperty({__proto__:null,base8:l2},Symbol.toStringTag,{value:"Module"})),d2=Za({prefix:"9",name:"base10",alphabet:"0123456789"}),h2=Object.freeze(Object.defineProperty({__proto__:null,base10:d2},Symbol.toStringTag,{value:"Module"})),p2=Ot({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),f2=Ot({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),g2=Object.freeze(Object.defineProperty({__proto__:null,base16:p2,base16upper:f2},Symbol.toStringTag,{value:"Module"})),m2=Ot({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),y2=Ot({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),w2=Ot({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),b2=Ot({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),v2=Ot({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),E2=Ot({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),A2=Ot({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),_2=Ot({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),C2=Ot({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),I2=Object.freeze(Object.defineProperty({__proto__:null,base32:m2,base32hex:v2,base32hexpad:A2,base32hexpadupper:_2,base32hexupper:E2,base32pad:w2,base32padupper:b2,base32upper:y2,base32z:C2},Symbol.toStringTag,{value:"Module"})),S2=Za({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),T2=Za({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),N2=Object.freeze(Object.defineProperty({__proto__:null,base36:S2,base36upper:T2},Symbol.toStringTag,{value:"Module"})),P2=Za({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),x2=Za({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),O2=Object.freeze(Object.defineProperty({__proto__:null,base58btc:P2,base58flickr:x2},Symbol.toStringTag,{value:"Module"})),R2=Ot({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),D2=Ot({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),k2=Ot({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),$2=Ot({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),U2=Object.freeze(Object.defineProperty({__proto__:null,base64:R2,base64pad:D2,base64url:k2,base64urlpad:$2},Symbol.toStringTag,{value:"Module"})),Vb=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),M2=Vb.reduce((t,e,r)=>(t[r]=e,t),[]),F2=Vb.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function B2(t){return t.reduce((e,r)=>(e+=M2[r],e),"")}function L2(t){const e=[];for(const r of t){const n=F2[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const j2=Yl({prefix:"🚀",name:"base256emoji",encode:B2,decode:L2}),z2=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:j2},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Pg={...o2,...c2,...u2,...h2,...g2,...I2,...N2,...O2,...U2,...z2};function Gb(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const xg=Gb("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Qu=Gb("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=qb(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Kb={utf8:xg,"utf-8":xg,hex:Pg.base16,latin1:Qu,ascii:Qu,binary:Qu,...Pg};function br(t,e="utf8"){const r=Kb[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}function zt(t,e="utf8"){const r=Kb[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var H2=CA();const q2={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var W2={};const V2=":";function Pi(t){const[e,r]=t.split(V2);return{namespace:e,reference:r}}function Qb(t,e){return t.includes(":")?[t]:e.chains||[]}const G2="ReactNative",ur={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},K2="js";function cl(){return typeof Ut<"u"&&typeof Ut.versions<"u"&&typeof Ut.versions.node<"u"}function ss(){return!Ds.getDocument()&&!!Ds.getNavigator()&&navigator.product===G2}function Q2(){return ss()&&typeof ce<"u"&&typeof(ce==null?void 0:ce.Platform)<"u"&&(ce==null?void 0:ce.Platform.OS)==="android"}function Y2(){return ss()&&typeof ce<"u"&&typeof(ce==null?void 0:ce.Platform)<"u"&&(ce==null?void 0:ce.Platform.OS)==="ios"}function Xa(){return!cl()&&!!Ds.getNavigator()&&!!Ds.getDocument()}function ec(){return ss()?ur.reactNative:cl()?ur.node:Xa()?ur.browser:ur.unknown}function Og(){var t;try{return ss()&&typeof ce<"u"&&typeof(ce==null?void 0:ce.Application)<"u"?(t=ce.Application)==null?void 0:t.applicationId:void 0}catch{return}}function J2(t,e){const r=new URLSearchParams(t);for(const n of Object.keys(e).sort())if(e.hasOwnProperty(n)){const s=e[n];s!==void 0&&r.set(n,s)}return r.toString()}function Yb(){return MT.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function Z2(){if(ec()===ur.reactNative&&typeof ce<"u"&&typeof(ce==null?void 0:ce.Platform)<"u"){const{OS:r,Version:n}=ce.Platform;return[r,n].join("-")}const t=xT();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function X2(){var t;const e=ec();return e===ur.browser?[e,((t=Ds.getLocation())==null?void 0:t.host)||"unknown"].join(":"):e}function Jb(t,e,r){const n=Z2(),s=X2();return[[t,e].join("-"),[K2,r].join("-"),n,s].join("/")}function eP({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:l}){const c=r.split("?"),u=Jb(t,e,n),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:l||void 0,bundleId:a||void 0},h=J2(c[1]||"",d);return c[0]+"?"+h}function bs(t,e){return t.filter(r=>e.includes(r)).length===t.length}function oh(t){return Object.fromEntries(t.entries())}function ah(t){return new Map(Object.entries(t))}function ps(t=q.FIVE_MINUTES,e){const r=q.toMiliseconds(t||q.FIVE_MINUTES);let n,s,i,o;return{resolve:a=>{i&&n&&(clearTimeout(i),n(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,l)=>{if(o)return a(o);i=setTimeout(()=>{const c=new Error(e);o=Promise.reject(c),l(c)},r),n=a,s=l})}}function Ln(t,e,r){return new Promise(async(n,s)=>{const i=setTimeout(()=>s(new Error(r)),e);try{const o=await t;n(o)}catch(o){s(o)}clearTimeout(i)})}function Zb(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function tP(t){return Zb("topic",t)}function rP(t){return Zb("id",t)}function Xb(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function lt(t,e){return q.fromMiliseconds(Date.now()+q.toMiliseconds(t))}function $n(t){return Date.now()>=q.toMiliseconds(t)}function xe(t,e){return`${t}${e?`:${e}`:""}`}function Hc(t=[],e=[]){return[...new Set([...t,...e])]}async function nP({id:t,topic:e,wcDeepLink:r}){var n;try{if(!r)return;const s=typeof r=="string"?JSON.parse(r):r,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=sP(i,t,e),a=ec();if(a===ur.browser){if(!((n=Ds.getDocument())!=null&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}iP(o)}else a===ur.reactNative&&typeof(ce==null?void 0:ce.Linking)<"u"&&await ce.Linking.openURL(o)}catch(s){console.error(s)}}function sP(t,e,r){const n=`requestId=${e}&sessionTopic=${r}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${lP(n,!0)}`}else s=`${s}/wc?${n}`;return s}function iP(t){let e="_self";cP()?e="_top":(aP()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function oP(t,e){let r="";try{if(Xa()&&(r=localStorage.getItem(e),r))return r;r=await t.getItem(e)}catch(n){console.error(n)}return r}function Rg(t,e){if(!t.includes(e))return null;const r=t.split(/([&,?,=])/),n=r.indexOf(e);return r[n+2]}function Dg(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function _p(){return typeof Ut<"u"&&W2.IS_VITEST==="true"}function aP(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function cP(){try{return window.self!==window.top}catch{return!1}}function lP(t,e=!1){const r=Et.from(t).toString("base64");return e?r.replace(/[=]/g,""):r}function e0(t){return Et.from(t,"base64").toString("utf-8")}function uP(t){return new Promise(e=>setTimeout(e,t))}function na(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function dP(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Jl(t,...e){if(!dP(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Cp(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");na(t.outputLen),na(t.blockLen)}function Ui(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function t0(t,e){Jl(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Ec=BigInt(2**32-1),kg=BigInt(32);function hP(t,e=!1){return e?{h:Number(t&Ec),l:Number(t>>kg&Ec)}:{h:Number(t>>kg&Ec)|0,l:Number(t&Ec)|0}}function pP(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=hP(t[s],e);[r[s],n[s]]=[i,o]}return[r,n]}const fP=(t,e,r)=>t<<r|e>>>32-r,gP=(t,e,r)=>e<<r|t>>>32-r,mP=(t,e,r)=>e<<r-32|t>>>64-r,yP=(t,e,r)=>t<<r-32|e>>>64-r,ni=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function wP(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Yu(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function jr(t,e){return t<<32-e|t>>>e}const $g=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function bP(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function Ug(t){for(let e=0;e<t.length;e++)t[e]=bP(t[e])}function vP(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Mi(t){return typeof t=="string"&&(t=vP(t)),Jl(t),t}let Ip=class{clone(){return this._cloneInto()}};function r0(t){const e=n=>t().update(Mi(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function tc(t=32){if(ni&&typeof ni.getRandomValues=="function")return ni.getRandomValues(new Uint8Array(t));if(ni&&typeof ni.randomBytes=="function")return ni.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const n0=[],s0=[],i0=[],EP=BigInt(0),yo=BigInt(1),AP=BigInt(2),_P=BigInt(7),CP=BigInt(256),IP=BigInt(113);for(let t=0,e=yo,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],n0.push(2*(5*n+r)),s0.push((t+1)*(t+2)/2%64);let s=EP;for(let i=0;i<7;i++)e=(e<<yo^(e>>_P)*IP)%CP,e&AP&&(s^=yo<<(yo<<BigInt(i))-yo);i0.push(s)}const[SP,TP]=pP(i0,!0),Mg=(t,e,r)=>r>32?mP(t,e,r):fP(t,e,r),Fg=(t,e,r)=>r>32?yP(t,e,r):gP(t,e,r);function NP(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,c=r[l],u=r[l+1],d=Mg(c,u,1)^r[a],h=Fg(c,u,1)^r[a+1];for(let p=0;p<50;p+=10)t[o+p]^=d,t[o+p+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=s0[o],l=Mg(s,i,a),c=Fg(s,i,a),u=n0[o];s=t[u],i=t[u+1],t[u]=l,t[u+1]=c}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=SP[n],t[1]^=TP[n]}r.fill(0)}let PP=class o0 extends Ip{constructor(e,r,n,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,na(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=wP(this.state)}keccak(){$g||Ug(this.state32),NP(this.state32,this.rounds),$g||Ug(this.state32),this.posOut=0,this.pos=0}update(e){Ui(this);const{blockLen:r,state:n}=this;e=Mi(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:s}=this;e[n]^=r,(r&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Ui(this,!1),Jl(e),this.finish();const r=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(r.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return na(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(t0(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new o0(r,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const xP=(t,e,r)=>r0(()=>new PP(e,t,r)),OP=xP(1,136,256/8),RP="https://rpc.walletconnect.org/v1";function a0(t){const e=`Ethereum Signed Message:
${t.length}`,r=new TextEncoder().encode(e+t);return"0x"+Et.from(OP(r)).toString("hex")}async function DP(t,e,r,n,s,i){switch(r.t){case"eip191":return await kP(t,e,r.s);case"eip1271":return await $P(t,e,r.s,n,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}async function kP(t,e,r){return(await HN({hash:a0(e),signature:r})).toLowerCase()===t.toLowerCase()}async function $P(t,e,r,n,s,i){const o=Pi(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const a="0x1626ba7e",l="0000000000000000000000000000000000000000000000000000000000000040",c="0000000000000000000000000000000000000000000000000000000000000041",u=r.substring(2),d=a0(e).substring(2),h=a+d+l+c+u,p=await fetch(`${i||RP}/?chainId=${n}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:UP(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:g}=await p.json();return g?g.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function UP(){return Date.now()+Math.floor(Math.random()*1e3)}function MP(t){const e=atob(t),r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);const n=r[0];if(n===0)throw new Error("No signatures found");const s=1+n*64;if(r.length<s)throw new Error("Transaction data too short for claimed signature count");if(r.length<100)throw new Error("Transaction too short");const i=Et.from(t,"base64").slice(1,65);return VN.encode(i)}var FP=Object.defineProperty,BP=Object.defineProperties,LP=Object.getOwnPropertyDescriptors,Bg=Object.getOwnPropertySymbols,jP=Object.prototype.hasOwnProperty,zP=Object.prototype.propertyIsEnumerable,Lg=(t,e,r)=>e in t?FP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,HP=(t,e)=>{for(var r in e||(e={}))jP.call(e,r)&&Lg(t,r,e[r]);if(Bg)for(var r of Bg(e))zP.call(e,r)&&Lg(t,r,e[r]);return t},qP=(t,e)=>BP(t,LP(e));const WP="did:pkh:",Sp=t=>t==null?void 0:t.split(":"),VP=t=>{const e=t&&Sp(t);if(e)return t.includes(WP)?e[3]:e[1]},ch=t=>{const e=t&&Sp(t);if(e)return e[2]+":"+e[3]},ll=t=>{const e=t&&Sp(t);if(e)return e.pop()};async function jg(t){const{cacao:e,projectId:r}=t,{s:n,p:s}=e,i=c0(s,s.iss),o=ll(s.iss);return await DP(o,i,n,ch(s.iss),r)}const c0=(t,e)=>{const r=`${t.domain} wants you to sign in with your Ethereum account:`,n=ll(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${VP(e)}`,l=`Nonce: ${t.nonce}`,c=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,p=t.resources?`Resources:${t.resources.map(f=>`
- ${f}`).join("")}`:void 0,g=qc(t.resources);if(g){const f=sa(g);s=tx(s,f)}return[r,n,"",s,"",i,o,a,l,c,u,d,h,p].filter(f=>f!=null).join(`
`)};function GP(t){return Et.from(JSON.stringify(t)).toString("base64")}function KP(t){return JSON.parse(Et.from(t,"base64").toString("utf-8"))}function $s(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(r=>{const n=t.att[r];if(Array.isArray(n))throw new Error(`Resource must be an object: ${r}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(n).forEach(s=>{const i=n[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function QP(t,e,r,n={}){return r==null||r.sort((s,i)=>s.localeCompare(i)),{att:{[t]:YP(e,r,n)}}}function YP(t,e,r={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const n=e.map(s=>({[`${t}/${s}`]:[r]}));return Object.assign({},...n)}function l0(t){return $s(t),`urn:recap:${GP(t).replace(/=/g,"")}`}function sa(t){const e=KP(t.replace("urn:recap:",""));return $s(e),e}function JP(t,e,r){const n=QP(t,e,r);return l0(n)}function ZP(t){return t&&t.includes("urn:recap:")}function XP(t,e){const r=sa(t),n=sa(e),s=ex(r,n);return l0(s)}function ex(t,e){$s(t),$s(e);const r=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),n={att:{}};return r.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,l)=>a.localeCompare(l)).forEach(a=>{var l,c;n.att[s]=qP(HP({},n.att[s]),{[a]:((l=t.att[s])==null?void 0:l[a])||((c=e.att[s])==null?void 0:c[a])})})}),n}function tx(t="",e){$s(e);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;const n=[];let s=0;Object.keys(e.att).forEach(a=>{const l=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));l.sort((d,h)=>d.action.localeCompare(h.action));const c={};l.forEach(d=>{c[d.ability]||(c[d.ability]=[]),c[d.ability].push(d.action)});const u=Object.keys(c).map(d=>(s++,`(${s}) '${d}': '${c[d].join("', '")}' for '${a}'.`));n.push(u.join(", ").replace(".,","."))});const i=n.join(" "),o=`${r}${i}`;return`${t?t+" ":""}${o}`}function zg(t){var e;const r=sa(t);$s(r);const n=(e=r.att)==null?void 0:e.eip155;return n?Object.keys(n).map(s=>s.split("/")[1]):[]}function Hg(t){const e=sa(t);$s(e);const r=[];return Object.values(e.att).forEach(n=>{Object.values(n).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&r.push(s[0].chains)})}),[...new Set(r.flat())]}function qc(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return ZP(e)?e:void 0}function Ju(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function u0(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function cr(t,...e){if(!u0(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function qg(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function rx(t,e){cr(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function Wg(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const qn=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),nx=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),sx=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!sx)throw new Error("Non little-endian hardware is not supported");function ix(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function lh(t){if(typeof t=="string")t=ix(t);else if(u0(t))t=uh(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function ox(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function ax(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}const cx=(t,e)=>{function r(n,...s){if(cr(n),t.nonceLength!==void 0){const c=s[0];if(!c)throw new Error("nonce / iv required");t.varSizeNonce?cr(c):cr(c,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&cr(s[1]);const o=e(n,...s),a=(c,u)=>{if(u!==void 0){if(c!==2)throw new Error("cipher output not supported");cr(u)}};let l=!1;return{encrypt(c,u){if(l)throw new Error("cannot encrypt() twice with same key + nonce");return l=!0,cr(c),a(o.encrypt.length,u),o.encrypt(c,u)},decrypt(c,u){if(cr(c),i&&c.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(c,u)}}}return Object.assign(r,t),r};function Vg(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(r&&!lx(e))throw new Error("invalid output, must be aligned");return e}function Gg(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i);t.setUint32(e+4,o,n),t.setUint32(e+0,a,n)}function lx(t){return t.byteOffset%4===0}function uh(t){return Uint8Array.from(t)}function Fi(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const d0=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),ux=d0("expand 16-byte k"),dx=d0("expand 32-byte k"),hx=qn(ux),px=qn(dx);function Ie(t,e){return t<<e|t>>>32-e}function dh(t){return t.byteOffset%4===0}const Ac=64,fx=16,h0=2**32-1,Kg=new Uint32Array;function gx(t,e,r,n,s,i,o,a){const l=s.length,c=new Uint8Array(Ac),u=qn(c),d=dh(s)&&dh(i),h=d?qn(s):Kg,p=d?qn(i):Kg;for(let g=0;g<l;o++){if(t(e,r,n,u,o,a),o>=h0)throw new Error("arx: counter overflow");const f=Math.min(Ac,l-g);if(d&&f===Ac){const y=g/4;if(g%4!==0)throw new Error("arx: invalid block position");for(let b=0,m;b<fx;b++)m=y+b,p[m]=h[m]^u[b];g+=Ac;continue}for(let y=0,b;y<f;y++)b=g+y,i[b]=s[b]^c[y];g+=f}}function mx(t,e){const{allowShortKeys:r,extendNonceFn:n,counterLength:s,counterRight:i,rounds:o}=ox({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return Ju(s),Ju(o),Wg(i),Wg(r),(a,l,c,u,d=0)=>{cr(a),cr(l),cr(c);const h=c.length;if(u===void 0&&(u=new Uint8Array(h)),cr(u),Ju(d),d<0||d>=h0)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const p=[];let g=a.length,f,y;if(g===32)p.push(f=uh(a)),y=px;else if(g===16&&r)f=new Uint8Array(32),f.set(a),f.set(a,16),y=hx,p.push(f);else throw new Error(`arx: invalid 32-byte key, got length=${g}`);dh(l)||p.push(l=uh(l));const b=qn(f);if(n){if(l.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(y,b,qn(l.subarray(0,16)),b),l=l.subarray(16)}const m=16-s;if(m!==l.length)throw new Error(`arx: nonce must be ${m} or 16 bytes`);if(m!==12){const C=new Uint8Array(12);C.set(l,i?0:12-l.length),l=C,p.push(l)}const w=qn(l);return gx(t,y,b,w,c,u,d,o),Fi(...p),u}}const _t=(t,e)=>t[e++]&255|(t[e++]&255)<<8;let yx=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=lh(e),cr(e,32);const r=_t(e,0),n=_t(e,2),s=_t(e,4),i=_t(e,6),o=_t(e,8),a=_t(e,10),l=_t(e,12),c=_t(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|l<<5)&8065,this.r[8]=(l>>>8|c<<8)&8191,this.r[9]=c>>>5&127;for(let u=0;u<8;u++)this.pad[u]=_t(e,16+2*u)}process(e,r,n=!1){const s=n?0:2048,{h:i,r:o}=this,a=o[0],l=o[1],c=o[2],u=o[3],d=o[4],h=o[5],p=o[6],g=o[7],f=o[8],y=o[9],b=_t(e,r+0),m=_t(e,r+2),w=_t(e,r+4),C=_t(e,r+6),_=_t(e,r+8),v=_t(e,r+10),A=_t(e,r+12),N=_t(e,r+14);let T=i[0]+(b&8191),O=i[1]+((b>>>13|m<<3)&8191),x=i[2]+((m>>>10|w<<6)&8191),U=i[3]+((w>>>7|C<<9)&8191),L=i[4]+((C>>>4|_<<12)&8191),M=i[5]+(_>>>1&8191),I=i[6]+((_>>>14|v<<2)&8191),S=i[7]+((v>>>11|A<<5)&8191),R=i[8]+((A>>>8|N<<8)&8191),$=i[9]+(N>>>5|s),D=0,k=D+T*a+O*(5*y)+x*(5*f)+U*(5*g)+L*(5*p);D=k>>>13,k&=8191,k+=M*(5*h)+I*(5*d)+S*(5*u)+R*(5*c)+$*(5*l),D+=k>>>13,k&=8191;let K=D+T*l+O*a+x*(5*y)+U*(5*f)+L*(5*g);D=K>>>13,K&=8191,K+=M*(5*p)+I*(5*h)+S*(5*d)+R*(5*u)+$*(5*c),D+=K>>>13,K&=8191;let X=D+T*c+O*l+x*a+U*(5*y)+L*(5*f);D=X>>>13,X&=8191,X+=M*(5*g)+I*(5*p)+S*(5*h)+R*(5*d)+$*(5*u),D+=X>>>13,X&=8191;let se=D+T*u+O*c+x*l+U*a+L*(5*y);D=se>>>13,se&=8191,se+=M*(5*f)+I*(5*g)+S*(5*p)+R*(5*h)+$*(5*d),D+=se>>>13,se&=8191;let te=D+T*d+O*u+x*c+U*l+L*a;D=te>>>13,te&=8191,te+=M*(5*y)+I*(5*f)+S*(5*g)+R*(5*p)+$*(5*h),D+=te>>>13,te&=8191;let he=D+T*h+O*d+x*u+U*c+L*l;D=he>>>13,he&=8191,he+=M*a+I*(5*y)+S*(5*f)+R*(5*g)+$*(5*p),D+=he>>>13,he&=8191;let Ce=D+T*p+O*h+x*d+U*u+L*c;D=Ce>>>13,Ce&=8191,Ce+=M*l+I*a+S*(5*y)+R*(5*f)+$*(5*g),D+=Ce>>>13,Ce&=8191;let Xe=D+T*g+O*p+x*h+U*d+L*u;D=Xe>>>13,Xe&=8191,Xe+=M*c+I*l+S*a+R*(5*y)+$*(5*f),D+=Xe>>>13,Xe&=8191;let rt=D+T*f+O*g+x*p+U*h+L*d;D=rt>>>13,rt&=8191,rt+=M*u+I*c+S*l+R*a+$*(5*y),D+=rt>>>13,rt&=8191;let Ge=D+T*y+O*f+x*g+U*p+L*h;D=Ge>>>13,Ge&=8191,Ge+=M*d+I*u+S*c+R*l+$*a,D+=Ge>>>13,Ge&=8191,D=(D<<2)+D|0,D=D+k|0,k=D&8191,D=D>>>13,K+=D,i[0]=k,i[1]=K,i[2]=X,i[3]=se,i[4]=te,i[5]=he,i[6]=Ce,i[7]=Xe,i[8]=rt,i[9]=Ge}finalize(){const{h:e,pad:r}=this,n=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,n[0]=e[0]+5,s=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+s,s=n[a]>>>13,n[a]&=8191;n[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)n[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535;Fi(n)}update(e){qg(this);const{buffer:r,blockLen:n}=this;e=lh(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);if(o===n){for(;n<=s-i;i+=n)this.process(e,i);continue}r.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){Fi(this.h,this.r,this.buffer,this.pad)}digestInto(e){qg(this),rx(e,this),this.finished=!0;const{buffer:r,h:n}=this;let{pos:s}=this;if(s){for(r[s++]=1;s<16;s++)r[s]=0;this.process(r,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=n[o]>>>0,e[i++]=n[o]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}};function wx(t){const e=(n,s)=>t(s).update(lh(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}const bx=wx(t=>new yx(t));function vx(t,e,r,n,s,i=20){let o=t[0],a=t[1],l=t[2],c=t[3],u=e[0],d=e[1],h=e[2],p=e[3],g=e[4],f=e[5],y=e[6],b=e[7],m=s,w=r[0],C=r[1],_=r[2],v=o,A=a,N=l,T=c,O=u,x=d,U=h,L=p,M=g,I=f,S=y,R=b,$=m,D=w,k=C,K=_;for(let se=0;se<i;se+=2)v=v+O|0,$=Ie($^v,16),M=M+$|0,O=Ie(O^M,12),v=v+O|0,$=Ie($^v,8),M=M+$|0,O=Ie(O^M,7),A=A+x|0,D=Ie(D^A,16),I=I+D|0,x=Ie(x^I,12),A=A+x|0,D=Ie(D^A,8),I=I+D|0,x=Ie(x^I,7),N=N+U|0,k=Ie(k^N,16),S=S+k|0,U=Ie(U^S,12),N=N+U|0,k=Ie(k^N,8),S=S+k|0,U=Ie(U^S,7),T=T+L|0,K=Ie(K^T,16),R=R+K|0,L=Ie(L^R,12),T=T+L|0,K=Ie(K^T,8),R=R+K|0,L=Ie(L^R,7),v=v+x|0,K=Ie(K^v,16),S=S+K|0,x=Ie(x^S,12),v=v+x|0,K=Ie(K^v,8),S=S+K|0,x=Ie(x^S,7),A=A+U|0,$=Ie($^A,16),R=R+$|0,U=Ie(U^R,12),A=A+U|0,$=Ie($^A,8),R=R+$|0,U=Ie(U^R,7),N=N+L|0,D=Ie(D^N,16),M=M+D|0,L=Ie(L^M,12),N=N+L|0,D=Ie(D^N,8),M=M+D|0,L=Ie(L^M,7),T=T+O|0,k=Ie(k^T,16),I=I+k|0,O=Ie(O^I,12),T=T+O|0,k=Ie(k^T,8),I=I+k|0,O=Ie(O^I,7);let X=0;n[X++]=o+v|0,n[X++]=a+A|0,n[X++]=l+N|0,n[X++]=c+T|0,n[X++]=u+O|0,n[X++]=d+x|0,n[X++]=h+U|0,n[X++]=p+L|0,n[X++]=g+M|0,n[X++]=f+I|0,n[X++]=y+S|0,n[X++]=b+R|0,n[X++]=m+$|0,n[X++]=w+D|0,n[X++]=C+k|0,n[X++]=_+K|0}const Ex=mx(vx,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Ax=new Uint8Array(16),Qg=(t,e)=>{t.update(e);const r=e.length%16;r&&t.update(Ax.subarray(r))},_x=new Uint8Array(32);function Yg(t,e,r,n,s){const i=t(e,r,_x),o=bx.create(i);s&&Qg(o,s),Qg(o,n);const a=new Uint8Array(16),l=nx(a);Gg(l,0,BigInt(s?s.length:0),!0),Gg(l,8,BigInt(n.length),!0),o.update(a);const c=o.digest();return Fi(i,a),c}const Cx=t=>(e,r,n)=>({encrypt(s,i){const o=s.length;i=Vg(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,r,a,a,1);const l=Yg(t,e,r,a,n);return i.set(l,o),Fi(l),i},decrypt(s,i){i=Vg(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),l=Yg(t,e,r,o,n);if(!ax(a,l))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,r,i,i,1),Fi(l),i}}),p0=cx({blockSize:64,nonceLength:12,tagLength:16},Cx(Ex));let f0=class extends Ip{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,Cp(e);const n=Mi(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Ui(this),this.iHash.update(e),this}digestInto(e){Ui(this),Jl(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Tp=(t,e,r)=>new f0(t,e).update(r).digest();Tp.create=(t,e)=>new f0(t,e);function Ix(t,e,r){return Cp(t),r===void 0&&(r=new Uint8Array(t.outputLen)),Tp(t,Mi(r),Mi(e))}const Zu=new Uint8Array([0]),Jg=new Uint8Array;function Sx(t,e,r,n=32){if(Cp(t),na(n),n>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(n/t.outputLen);r===void 0&&(r=Jg);const i=new Uint8Array(s*t.outputLen),o=Tp.create(t,e),a=o._cloneInto(),l=new Uint8Array(o.outputLen);for(let c=0;c<s;c++)Zu[0]=c+1,a.update(c===0?Jg:l).update(r).update(Zu).digestInto(l),i.set(l,t.outputLen*c),o._cloneInto(a);return o.destroy(),a.destroy(),l.fill(0),Zu.fill(0),i.slice(0,n)}const Tx=(t,e,r,n,s)=>Sx(t,Ix(t,e,r),n,s);function Nx(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),l=n?4:0,c=n?0:4;t.setUint32(e+l,o,n),t.setUint32(e+c,a,n)}function Px(t,e,r){return t&e^~t&r}function xx(t,e,r){return t&e^t&r^e&r}class Ox extends Ip{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Yu(this.buffer)}update(e){Ui(this);const{view:r,buffer:n,blockLen:s}=this;e=Mi(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const l=Yu(e);for(;s<=i-o;o+=s)this.process(l,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ui(this),t0(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;Nx(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=Yu(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<c;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}}const Rx=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),On=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Rn=new Uint32Array(64);let Dx=class extends Ox{constructor(){super(64,32,8,!1),this.A=On[0]|0,this.B=On[1]|0,this.C=On[2]|0,this.D=On[3]|0,this.E=On[4]|0,this.F=On[5]|0,this.G=On[6]|0,this.H=On[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:l}=this;return[e,r,n,s,i,o,a,l]}set(e,r,n,s,i,o,a,l){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,r){for(let d=0;d<16;d++,r+=4)Rn[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const h=Rn[d-15],p=Rn[d-2],g=jr(h,7)^jr(h,18)^h>>>3,f=jr(p,17)^jr(p,19)^p>>>10;Rn[d]=f+Rn[d-7]+g+Rn[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:l,G:c,H:u}=this;for(let d=0;d<64;d++){const h=jr(a,6)^jr(a,11)^jr(a,25),p=u+h+Px(a,l,c)+Rx[d]+Rn[d]|0,g=(jr(n,2)^jr(n,13)^jr(n,22))+xx(n,s,i)|0;u=c,c=l,l=a,a=o+p|0,o=i,i=s,s=n,n=p+g|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(n,s,i,o,a,l,c,u)}roundClean(){Rn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Zl=r0(()=>new Dx);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const g0=BigInt(0);function Np(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function m0(t){if(!Np(t))throw new Error("Uint8Array expected")}const kx=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function $x(t){m0(t);let e="";for(let r=0;r<t.length;r++)e+=kx[t[r]];return e}function Ux(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?g0:BigInt("0x"+t)}const dn={_0:48,_9:57,A:65,F:70,a:97,f:102};function Zg(t){if(t>=dn._0&&t<=dn._9)return t-dn._0;if(t>=dn.A&&t<=dn.F)return t-(dn.A-10);if(t>=dn.a&&t<=dn.f)return t-(dn.a-10)}function y0(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){const o=Zg(t.charCodeAt(i)),a=Zg(t.charCodeAt(i+1));if(o===void 0||a===void 0){const l=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+i)}n[s]=o*16+a}return n}function Xg(t){return m0(t),Ux($x(Uint8Array.from(t).reverse()))}function Mx(t,e){return y0(t.toString(16).padStart(e*2,"0"))}function Fx(t,e){return Mx(t,e).reverse()}function em(t,e,r){let n;if(typeof e=="string")try{n=y0(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Np(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(t+" of length "+r+" expected, got "+s);return n}const Xu=t=>typeof t=="bigint"&&g0<=t;function Bx(t,e,r){return Xu(t)&&Xu(e)&&Xu(r)&&e<=t&&t<r}function tm(t,e,r,n){if(!Bx(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}const Lx={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Np(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function jx(t,e,r={}){const n=(s,i,o)=>{const a=Lx[i];if(typeof a!="function")throw new Error("invalid validator function");const l=t[s];if(!(o&&l===void 0)&&!a(l,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+l)};for(const[s,i]of Object.entries(e))n(s,i,!1);for(const[s,i]of Object.entries(r))n(s,i,!0);return t}const Ii=BigInt(0),_c=BigInt(1);function w0(t,e){const r=t%e;return r>=Ii?r:e+r}function zx(t,e,r){if(e<Ii)throw new Error("invalid exponent, negatives unsupported");if(r<=Ii)throw new Error("invalid modulus");if(r===_c)return Ii;let n=_c;for(;e>Ii;)e&_c&&(n=n*t%r),t=t*t%r,e>>=_c;return n}function xr(t,e,r){let n=t;for(;e-- >Ii;)n*=n,n%=r;return n}BigInt(0),BigInt(1),BigInt(0),BigInt(1),BigInt(2),BigInt(8);const si=BigInt(0),ed=BigInt(1);function Hx(t){return jx(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function qx(t){const e=Hx(t),{P:r}=e,n=m=>w0(m,r),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(m=>m),l=e.powPminus2||(m=>zx(m,r-BigInt(2),r));function c(m,w,C){const _=n(m*(w-C));return w=n(w-_),C=n(C+_),[w,C]}const u=(e.a-BigInt(2))/BigInt(4);function d(m,w){tm("u",m,si,r),tm("scalar",w,si,r);const C=w,_=m;let v=ed,A=si,N=m,T=ed,O=si,x;for(let L=BigInt(s-1);L>=si;L--){const M=C>>L&ed;O^=M,x=c(O,v,N),v=x[0],N=x[1],x=c(O,A,T),A=x[0],T=x[1],O=M;const I=v+A,S=n(I*I),R=v-A,$=n(R*R),D=S-$,k=N+T,K=N-T,X=n(K*I),se=n(k*R),te=X+se,he=X-se;N=n(te*te),T=n(_*n(he*he)),v=n(S*$),A=n(D*(S+n(u*D)))}x=c(O,v,N),v=x[0],N=x[1],x=c(O,A,T),A=x[0],T=x[1];const U=l(A);return n(v*U)}function h(m){return Fx(n(m),i)}function p(m){const w=em("u coordinate",m,i);return o===32&&(w[31]&=127),Xg(w)}function g(m){const w=em("scalar",m),C=w.length;if(C!==i&&C!==o){let _=""+i+" or "+o;throw new Error("invalid scalar, expected "+_+" bytes, got "+C)}return Xg(a(w))}function f(m,w){const C=p(w),_=g(m),v=d(C,_);if(v===si)throw new Error("invalid private or public key received");return h(v)}const y=h(e.Gu);function b(m){return f(m,y)}return{scalarMult:f,scalarMultBase:b,getSharedSecret:(m,w)=>f(m,w),getPublicKey:m=>b(m),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:y}}const hh=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const Wx=BigInt(1),rm=BigInt(2),Vx=BigInt(3),Gx=BigInt(5);BigInt(8);function Kx(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),s=BigInt(80),i=hh,o=t*t%i*t%i,a=xr(o,rm,i)*o%i,l=xr(a,Wx,i)*t%i,c=xr(l,Gx,i)*l%i,u=xr(c,e,i)*c%i,d=xr(u,r,i)*u%i,h=xr(d,n,i)*d%i,p=xr(h,s,i)*h%i,g=xr(p,s,i)*h%i,f=xr(g,e,i)*c%i;return{pow_p_5_8:xr(f,rm,i)*t%i,b2:o}}function Qx(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const ph=qx({P:hh,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=hh,{pow_p_5_8:r,b2:n}=Kx(t);return w0(xr(r,Vx,e)*n,e)},adjustScalarBytes:Qx,randomBytes:tc}),b0="base10",Mt="base16",jn="base64pad",wo="base64url",rc="utf8",v0=0,yn=1,nc=2,Yx=0,nm=1,Lo=12,Pp=32;function Jx(){const t=ph.utils.randomPrivateKey(),e=ph.getPublicKey(t);return{privateKey:zt(t,Mt),publicKey:zt(e,Mt)}}function fh(){const t=tc(Pp);return zt(t,Mt)}function Zx(t,e){const r=ph.getSharedSecret(br(t,Mt),br(e,Mt)),n=Tx(Zl,r,void 0,void 0,Pp);return zt(n,Mt)}function Wc(t){const e=Zl(br(t,Mt));return zt(e,Mt)}function Qr(t){const e=Zl(br(t,rc));return zt(e,Mt)}function E0(t){return br(`${t}`,b0)}function Us(t){return Number(zt(t,b0))}function Xx(t){const e=E0(typeof t.type<"u"?t.type:v0);if(Us(e)===yn&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?br(t.senderPublicKey,Mt):void 0,n=typeof t.iv<"u"?br(t.iv,Mt):tc(Lo),s=br(t.symKey,Mt),i=p0(s,n).encrypt(br(t.message,rc));return A0({type:e,sealed:i,iv:n,senderPublicKey:r,encoding:t.encoding})}function eO(t){const e=br(t.symKey,Mt),{sealed:r,iv:n}=ia(t),s=p0(e,n).decrypt(r);if(s===null)throw new Error("Failed to decrypt");return zt(s,rc)}function tO(t,e){const r=E0(nc),n=tc(Lo),s=br(t,rc);return A0({type:r,sealed:s,iv:n,encoding:e})}function rO(t,e){const{sealed:r}=ia({encoded:t,encoding:e});return zt(r,rc)}function A0(t){const{encoding:e=jn}=t;if(Us(t.type)===nc)return zt(Ku([t.type,t.sealed]),e);if(Us(t.type)===yn){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return zt(Ku([t.type,t.senderPublicKey,t.iv,t.sealed]),e)}return zt(Ku([t.type,t.iv,t.sealed]),e)}function ia(t){const{encoded:e,encoding:r=jn}=t,n=br(e,r),s=n.slice(Yx,nm),i=nm;if(Us(s)===yn){const c=i+Pp,u=c+Lo,d=n.slice(i,c),h=n.slice(c,u),p=n.slice(u);return{type:s,sealed:p,iv:h,senderPublicKey:d}}if(Us(s)===nc){const c=n.slice(i),u=tc(Lo);return{type:s,sealed:c,iv:u}}const o=i+Lo,a=n.slice(i,o),l=n.slice(o);return{type:s,sealed:l,iv:a}}function nO(t,e){const r=ia({encoded:t,encoding:e==null?void 0:e.encoding});return _0({type:Us(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?zt(r.senderPublicKey,Mt):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function _0(t){const e=(t==null?void 0:t.type)||v0;if(e===yn){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function sm(t){return t.type===yn&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function im(t){return t.type===nc}function sO(t){return new H2.ec("p256").keyFromPublic({x:Et.from(t.x,"base64").toString("hex"),y:Et.from(t.y,"base64").toString("hex")},"hex")}function iO(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");const r=e.length%4;return r>0&&(e+="=".repeat(4-r)),e}function oO(t){return Et.from(iO(t),"base64")}function aO(t,e){const[r,n,s]=t.split("."),i=oO(s);if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32).toString("hex"),a=i.slice(32,64).toString("hex"),l=`${r}.${n}`,c=Zl(l),u=sO(e),d=zt(c,Mt);if(!u.verify(d,{r:o,s:a}))throw new Error("Invalid signature");return Xd(t).payload}const cO="irn";function ul(t){return(t==null?void 0:t.relay)||{protocol:cO}}function Uo(t){const e=q2[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function lO(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(n)){const i=s.replace(n,""),o=t[s];r[i]=o}}),r}function om(t){if(!t.includes("wc:")){const c=e0(t);c!=null&&c.includes("wc:")&&(t=c)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),s=t.substring(e+1,r).split("@"),i=typeof r<"u"?t.substring(r):"",o=new URLSearchParams(i),a={};o.forEach((c,u)=>{a[u]=c});const l=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:n,topic:uO(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:lO(a),methods:l,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function uO(t){return t.startsWith("//")?t.substring(2):t}function dO(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(s=>{const i=s,o=r+e+i;t[i]&&(n[o]=t[i])}),n}function am(t){const e=new URLSearchParams,r=dO(t.relay);Object.keys(r).sort().forEach(s=>{e.set(s,r[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const n=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${n}`}function Cc(t,e,r){return`${t}?wc_ev=${r}&topic=${e}`}function ro(t){const e=[];return t.forEach(r=>{const[n,s]=r.split(":");e.push(`${n}:${s}`)}),e}function hO(t){const e=[];return Object.values(t).forEach(r=>{e.push(...ro(r.accounts))}),e}function pO(t,e){const r=[];return Object.values(t).forEach(n=>{ro(n.accounts).includes(e)&&r.push(...n.methods)}),r}function fO(t,e){const r=[];return Object.values(t).forEach(n=>{ro(n.accounts).includes(e)&&r.push(...n.events)}),r}function xp(t){return t.includes(":")}function Mo(t){return xp(t)?t.split(":")[0]:t}function gO(t){const e={};return t==null||t.forEach(r=>{var n;const[s,i]=r.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(r),(n=e[s].chains)==null||n.push(`${s}:${i}`)}),e}function cm(t,e){e=e.map(n=>n.replace("did:pkh:",""));const r=gO(e);for(const[n,s]of Object.entries(r))s.methods?s.methods=Hc(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return r}const mO={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},yO={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function W(t,e){const{message:r,code:n}=yO[t];return{message:e?`${r} ${e}`:r,code:n}}function Ue(t,e){const{message:r,code:n}=mO[t];return{message:e?`${r} ${e}`:r,code:n}}function Ms(t,e){return!!Array.isArray(t)}function oa(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Tt(t){return typeof t>"u"}function it(t,e){return e&&Tt(t)?!0:typeof t=="string"&&!!t.trim().length}function Op(t,e){return e&&Tt(t)?!0:typeof t=="number"&&!isNaN(t)}function wO(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),s=Object.keys(r);let i=!0;return bs(s,n)?(n.forEach(o=>{const{accounts:a,methods:l,events:c}=t.namespaces[o],u=ro(a),d=r[o];(!bs(Qb(o,d),u)||!bs(d.methods,l)||!bs(d.events,c))&&(i=!1)}),i):!1}function dl(t){return it(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function bO(t){if(it(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&dl(r)}}return!1}function vO(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(it(t,!1)){if(e(t))return!0;const r=e0(t);return e(r)}}catch{}return!1}function EO(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function AO(t){return t==null?void 0:t.topic}function _O(t,e){let r=null;return it(t==null?void 0:t.publicKey,!1)||(r=W("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function lm(t){let e=!0;return Ms(t)?t.length&&(e=t.every(r=>it(r,!1))):e=!1,e}function CO(t,e,r){let n=null;return Ms(e)&&e.length?e.forEach(s=>{n||dl(s)||(n=Ue("UNSUPPORTED_CHAINS",`${r}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):dl(t)||(n=Ue("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function IO(t,e,r){let n=null;return Object.entries(t).forEach(([s,i])=>{if(n)return;const o=CO(s,Qb(s,i),`${e} ${r}`);o&&(n=o)}),n}function SO(t,e){let r=null;return Ms(t)?t.forEach(n=>{r||bO(n)||(r=Ue("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=Ue("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function TO(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const s=SO(n==null?void 0:n.accounts,`${e} namespace`);s&&(r=s)}),r}function NO(t,e){let r=null;return lm(t==null?void 0:t.methods)?lm(t==null?void 0:t.events)||(r=Ue("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=Ue("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function C0(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const s=NO(n,`${e}, namespace`);s&&(r=s)}),r}function PO(t,e,r){let n=null;if(t&&oa(t)){const s=C0(t,e);s&&(n=s);const i=IO(t,e,r);i&&(n=i)}else n=W("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function td(t,e){let r=null;if(t&&oa(t)){const n=C0(t,e);n&&(r=n);const s=TO(t,e);s&&(r=s)}else r=W("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function I0(t){return it(t.protocol,!0)}function xO(t,e){let r=!1;return t?t&&Ms(t)&&t.length&&t.forEach(n=>{r=I0(n)}):r=!0,r}function OO(t){return typeof t=="number"}function Jt(t){return typeof t<"u"&&typeof t!==null}function RO(t){return!(!t||typeof t!="object"||!t.code||!Op(t.code,!1)||!t.message||!it(t.message,!1))}function DO(t){return!(Tt(t)||!it(t.method,!1))}function kO(t){return!(Tt(t)||Tt(t.result)&&Tt(t.error)||!Op(t.id,!1)||!it(t.jsonrpc,!1))}function $O(t){return!(Tt(t)||!it(t.name,!1))}function um(t,e){return!(!dl(e)||!hO(t).includes(e))}function UO(t,e,r){return it(r,!1)?pO(t,e).includes(r):!1}function MO(t,e,r){return it(r,!1)?fO(t,e).includes(r):!1}function dm(t,e,r){let n=null;const s=FO(t),i=BO(e),o=Object.keys(s),a=Object.keys(i),l=hm(Object.keys(t)),c=hm(Object.keys(e)),u=l.filter(d=>!c.includes(d));return u.length&&(n=W("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),bs(o,a)||(n=W("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||n)return;const h=ro(e[d].accounts);h.includes(d)||(n=W("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{n||(bs(s[d].methods,i[d].methods)?bs(s[d].events,i[d].events)||(n=W("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${d}`)):n=W("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${d}`))}),n}function FO(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(s=>{e[s]={methods:t[r].methods,events:t[r].events}})}),e}function hm(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function BO(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=ro(t[r].accounts);n==null||n.forEach(s=>{e[s]={accounts:t[r].accounts.filter(i=>i.includes(`${s}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function LO(t,e){return Op(t,!1)&&t<=e.max&&t>=e.min}function pm(){const t=ec();return new Promise(e=>{switch(t){case ur.browser:e(jO());break;case ur.reactNative:e(zO());break;case ur.node:e(HO());break;default:e(!0)}})}function jO(){return Xa()&&(navigator==null?void 0:navigator.onLine)}async function zO(){if(ss()&&typeof ce<"u"&&ce!=null&&ce.NetInfo){const t=await(ce==null?void 0:ce.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function HO(){return!0}function qO(t){switch(ec()){case ur.browser:WO(t);break;case ur.reactNative:VO(t);break}}function WO(t){!ss()&&Xa()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function VO(t){var e;ss()&&typeof ce<"u"&&ce!=null&&ce.NetInfo&&((e=ce)==null||e.NetInfo.addEventListener(r=>t(r==null?void 0:r.isConnected)))}const rd={};class bo{static get(e){return rd[e]}static set(e,r){rd[e]=r}static delete(e){delete rd[e]}}const GO="PARSE_ERROR",KO="INVALID_REQUEST",QO="METHOD_NOT_FOUND",YO="INVALID_PARAMS",S0="INTERNAL_ERROR",Rp="SERVER_ERROR",JO=[-32700,-32600,-32601,-32602,-32603],jo={[GO]:{code:-32700,message:"Parse error"},[KO]:{code:-32600,message:"Invalid Request"},[QO]:{code:-32601,message:"Method not found"},[YO]:{code:-32602,message:"Invalid params"},[S0]:{code:-32603,message:"Internal error"},[Rp]:{code:-32e3,message:"Server error"}},T0=Rp;function ZO(t){return JO.includes(t)}function fm(t){return Object.keys(jo).includes(t)?jo[t]:jo[T0]}function XO(t){const e=Object.values(jo).find(r=>r.code===t);return e||jo[T0]}function N0(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var nd={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var gh=function(t,e){return gh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},gh(t,e)};function eR(t,e){gh(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var mh=function(){return mh=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},mh.apply(this,arguments)};function tR(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function rR(t,e,r,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,r,i):o(e,r))||i);return s>3&&i&&Object.defineProperty(e,r,i),i}function nR(t,e){return function(r,n){e(r,n,t)}}function sR(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function iR(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})}function oR(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],s=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function aR(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function cR(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function yh(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function P0(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function lR(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(P0(arguments[e]));return t}function uR(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function aa(t){return this instanceof aa?(this.v=t,this):new aa(t)}function dR(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){n[h]&&(s[h]=function(p){return new Promise(function(g,f){i.push([h,p,g,f])>1||a(h,p)})})}function a(h,p){try{l(n[h](p))}catch(g){d(i[0][3],g)}}function l(h){h.value instanceof aa?Promise.resolve(h.value.v).then(c,u):d(i[0][2],h)}function c(h){a("next",h)}function u(h){a("throw",h)}function d(h,p){h(p),i.shift(),i.length&&a(i[0][0],i[0][1])}}function hR(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,i){e[s]=t[s]?function(o){return(r=!r)?{value:aa(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function pR(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof yh=="function"?yh(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,l){o=t[i](o),s(a,l,o.done,o.value)})}}function s(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}}function fR(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function gR(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function mR(t){return t&&t.__esModule?t:{default:t}}function yR(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function wR(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const bR=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return mh},__asyncDelegator:hR,__asyncGenerator:dR,__asyncValues:pR,__await:aa,__awaiter:iR,__classPrivateFieldGet:yR,__classPrivateFieldSet:wR,__createBinding:aR,__decorate:rR,__exportStar:cR,__extends:eR,__generator:oR,__importDefault:mR,__importStar:gR,__makeTemplateObject:fR,__metadata:sR,__param:nR,__read:P0,__rest:tR,__spread:lR,__spreadArrays:uR,__values:yh},Symbol.toStringTag,{value:"Module"})),vR=Pw(bR);var hn={},gm;function ER(){if(gm)return hn;gm=1,Object.defineProperty(hn,"__esModule",{value:!0}),hn.isBrowserCryptoAvailable=hn.getSubtleCrypto=hn.getBrowerCrypto=void 0;function t(){return(Kr===null||Kr===void 0?void 0:Kr.crypto)||(Kr===null||Kr===void 0?void 0:Kr.msCrypto)||{}}hn.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}hn.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return hn.isBrowserCryptoAvailable=r,hn}var pn={},mm;function AR(){if(mm)return pn;mm=1,Object.defineProperty(pn,"__esModule",{value:!0}),pn.isBrowser=pn.isNode=pn.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}pn.isReactNative=t;function e(){return typeof Ut<"u"&&typeof Ut.versions<"u"&&typeof Ut.versions.node<"u"}pn.isNode=e;function r(){return!t()&&!e()}return pn.isBrowser=r,pn}var ym;function _R(){return ym||(ym=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=vR;e.__exportStar(ER(),t),e.__exportStar(AR(),t)}(nd)),nd}var CR=_R();function Vr(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function vs(t=6){return BigInt(Vr(t))}function zn(t,e,r){return{id:r||Vr(),jsonrpc:"2.0",method:t,params:e}}function Xl(t,e){return{id:t,jsonrpc:"2.0",result:e}}function eu(t,e,r){return{id:t,jsonrpc:"2.0",error:IR(e)}}function IR(t,e){return typeof t>"u"?fm(S0):(typeof t=="string"&&(t=Object.assign(Object.assign({},fm(Rp)),{message:t})),ZO(t.code)&&(t=XO(t.code)),t)}let SR=class{},TR=class extends SR{constructor(){super()}},NR=class extends TR{constructor(e){super()}};const PR="^https?:",xR="^wss?:";function OR(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function x0(t,e){const r=OR(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function wm(t){return x0(t,PR)}function bm(t){return x0(t,xR)}function RR(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function O0(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Dp(t){return O0(t)&&"method"in t}function tu(t){return O0(t)&&(Gr(t)||wr(t))}function Gr(t){return"result"in t}function wr(t){return"error"in t}let _r=class extends NR{constructor(e){super(e),this.events=new Er.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(zn(e.method,e.params||[],e.id||vs().toString()),r)}async requestStrict(e,r){return new Promise(async(n,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{wr(i)?s(i.error):n(i.result)});try{await this.connection.send(e,r)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),tu(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const DR=()=>typeof WebSocket<"u"?WebSocket:typeof ce<"u"&&typeof ce.WebSocket<"u"?ce.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),kR=()=>typeof WebSocket<"u"||typeof ce<"u"&&typeof ce.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",vm=t=>t.split("?")[0],Em=10,$R=DR();let UR=class{constructor(e){if(this.url=e,this.events=new Er.EventEmitter,this.registering=!1,!bm(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(An(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!bm(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const s=CR.isReactNative()?void 0:{rejectUnauthorized:!RR(e)},i=new $R(e,[],s);kR()?i.onerror=o=>{const a=o;n(this.emitError(a.error))}:i.on("error",o=>{n(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),r(i)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Rs(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),s=n.message||n.toString(),i=eu(e,s);this.events.emit("payload",i)}parseError(e,r=this.url){return N0(e,vm(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Em&&this.events.setMaxListeners(Em)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${vm(this.url)}`));return this.events.emit("register_error",r),r}};const R0="wc",D0=2,wh="core",Zr=`${R0}@2:${wh}:`,MR={logger:"error"},FR={database:":memory:"},BR="crypto",Am="client_ed25519_seed",LR=q.ONE_DAY,jR="keychain",zR="0.3",HR="messages",qR="0.3",_m=q.SIX_HOURS,WR="publisher",k0="irn",VR="error",$0="wss://relay.walletconnect.org",GR="relayer",yt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},KR="_subscription",pr={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},QR=.1,bh="2.19.1",Ke={link_mode:"link_mode",relay:"relay"},Vc={inbound:"inbound",outbound:"outbound"},YR="0.3",JR="WALLETCONNECT_CLIENT_ID",Cm="WALLETCONNECT_LINK_MODE_APPS",ar={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},ZR="subscription",XR="0.3",e3="pairing",t3="0.3",vo={wc_pairingDelete:{req:{ttl:q.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:q.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:q.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:q.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:q.ONE_DAY,prompt:!1,tag:0},res:{ttl:q.ONE_DAY,prompt:!1,tag:0}}},ys={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Tr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},r3="history",n3="0.3",s3="expirer",yr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},i3="0.3",o3="verify-api",a3="https://verify.walletconnect.com",U0="https://verify.walletconnect.org",zo=U0,c3=`${zo}/v3`,l3=[a3,U0],u3="echo",d3="https://echo.walletconnect.com",Wr={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},gn={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Nr={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},ls={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},us={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Eo={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},h3=.1,p3="event-client",f3=86400,g3="https://pulse.walletconnect.org/batch";function m3(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,l=t.charAt(0),c=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var f=0,y=0,b=0,m=g.length;b!==m&&g[b]===0;)b++,f++;for(var w=(m-b)*u+1>>>0,C=new Uint8Array(w);b!==m;){for(var _=g[b],v=0,A=w-1;(_!==0||v<y)&&A!==-1;A--,v++)_+=256*C[A]>>>0,C[A]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");y=v,b++}for(var N=w-y;N!==w&&C[N]===0;)N++;for(var T=l.repeat(f);N<w;++N)T+=t.charAt(C[N]);return T}function h(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var f=0;if(g[f]!==" "){for(var y=0,b=0;g[f]===l;)y++,f++;for(var m=(g.length-f)*c+1>>>0,w=new Uint8Array(m);g[f];){var C=r[g.charCodeAt(f)];if(C===255)return;for(var _=0,v=m-1;(C!==0||_<b)&&v!==-1;v--,_++)C+=a*w[v]>>>0,w[v]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");b=_,f++}if(g[f]!==" "){for(var A=m-b;A!==m&&w[A]===0;)A++;for(var N=new Uint8Array(y+(m-A)),T=y;A!==m;)N[T++]=w[A++];return N}}}function p(g){var f=h(g);if(f)return f;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:p}}var y3=m3,w3=y3;const M0=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},b3=t=>new TextEncoder().encode(t),v3=t=>new TextDecoder().decode(t);class E3{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class A3{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return F0(this,e)}}class _3{constructor(e){this.decoders=e}or(e){return F0(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const F0=(t,e)=>new _3({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class C3{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new E3(e,r,n),this.decoder=new A3(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ru=({name:t,prefix:e,encode:r,decode:n})=>new C3(t,e,r,n),sc=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=w3(r,e);return ru({prefix:t,name:e,encode:n,decode:i=>M0(s(i))})},I3=(t,e,r,n)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,l=0,c=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);l=l<<r|d,a+=r,a>=8&&(a-=8,o[c++]=255&l>>a)}if(a>=r||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return o},S3=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let l=0;l<t.length;++l)for(a=a<<8|t[l],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},Rt=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>ru({prefix:e,name:t,encode(s){return S3(s,n,r)},decode(s){return I3(s,n,r,t)}}),T3=ru({prefix:"\0",name:"identity",encode:t=>v3(t),decode:t=>b3(t)});var N3=Object.freeze({__proto__:null,identity:T3});const P3=Rt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var x3=Object.freeze({__proto__:null,base2:P3});const O3=Rt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var R3=Object.freeze({__proto__:null,base8:O3});const D3=sc({prefix:"9",name:"base10",alphabet:"0123456789"});var k3=Object.freeze({__proto__:null,base10:D3});const $3=Rt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),U3=Rt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var M3=Object.freeze({__proto__:null,base16:$3,base16upper:U3});const F3=Rt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),B3=Rt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),L3=Rt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),j3=Rt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),z3=Rt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),H3=Rt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),q3=Rt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),W3=Rt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),V3=Rt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var G3=Object.freeze({__proto__:null,base32:F3,base32upper:B3,base32pad:L3,base32padupper:j3,base32hex:z3,base32hexupper:H3,base32hexpad:q3,base32hexpadupper:W3,base32z:V3});const K3=sc({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Q3=sc({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Y3=Object.freeze({__proto__:null,base36:K3,base36upper:Q3});const J3=sc({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Z3=sc({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var X3=Object.freeze({__proto__:null,base58btc:J3,base58flickr:Z3});const eD=Rt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),tD=Rt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),rD=Rt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),nD=Rt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var sD=Object.freeze({__proto__:null,base64:eD,base64pad:tD,base64url:rD,base64urlpad:nD});const B0=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),iD=B0.reduce((t,e,r)=>(t[r]=e,t),[]),oD=B0.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function aD(t){return t.reduce((e,r)=>(e+=iD[r],e),"")}function cD(t){const e=[];for(const r of t){const n=oD[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const lD=ru({prefix:"🚀",name:"base256emoji",encode:aD,decode:cD});var uD=Object.freeze({__proto__:null,base256emoji:lD}),dD=L0,Im=128,hD=-128,pD=Math.pow(2,31);function L0(t,e,r){e=e||[],r=r||0;for(var n=r;t>=pD;)e[r++]=t&255|Im,t/=128;for(;t&hD;)e[r++]=t&255|Im,t>>>=7;return e[r]=t|0,L0.bytes=r-n+1,e}var fD=vh,gD=128,Sm=127;function vh(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw vh.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&Sm)<<s:(o&Sm)*Math.pow(2,s),s+=7}while(o>=gD);return vh.bytes=i-n,r}var mD=Math.pow(2,7),yD=Math.pow(2,14),wD=Math.pow(2,21),bD=Math.pow(2,28),vD=Math.pow(2,35),ED=Math.pow(2,42),AD=Math.pow(2,49),_D=Math.pow(2,56),CD=Math.pow(2,63),ID=function(t){return t<mD?1:t<yD?2:t<wD?3:t<bD?4:t<vD?5:t<ED?6:t<AD?7:t<_D?8:t<CD?9:10},SD={encode:dD,decode:fD,encodingLength:ID},j0=SD;const Tm=(t,e,r=0)=>(j0.encode(t,e,r),e),Nm=t=>j0.encodingLength(t),Eh=(t,e)=>{const r=e.byteLength,n=Nm(t),s=n+Nm(r),i=new Uint8Array(s+r);return Tm(t,i,0),Tm(r,i,n),i.set(e,s),new TD(t,r,e,i)};class TD{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}}const z0=({name:t,code:e,encode:r})=>new ND(t,e,r);class ND{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Eh(this.code,r):r.then(n=>Eh(this.code,n))}else throw Error("Unknown type, must be binary type")}}const H0=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),PD=z0({name:"sha2-256",code:18,encode:H0("SHA-256")}),xD=z0({name:"sha2-512",code:19,encode:H0("SHA-512")});var OD=Object.freeze({__proto__:null,sha256:PD,sha512:xD});const q0=0,RD="identity",W0=M0,DD=t=>Eh(q0,W0(t)),kD={code:q0,name:RD,encode:W0,digest:DD};var $D=Object.freeze({__proto__:null,identity:kD});new TextEncoder,new TextDecoder;const Pm={...N3,...x3,...R3,...k3,...M3,...G3,...Y3,...X3,...sD,...uD};({...OD,...$D});function UD(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function V0(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const xm=V0("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),sd=V0("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=UD(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),MD={utf8:xm,"utf-8":xm,hex:Pm.base16,latin1:sd,ascii:sd,binary:sd,...Pm};function FD(t,e="utf8"){const r=MD[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}var BD=Object.defineProperty,LD=(t,e,r)=>e in t?BD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,zr=(t,e,r)=>LD(t,typeof e!="symbol"?e+"":e,r);class jD{constructor(e,r){this.core=e,this.logger=r,zr(this,"keychain",new Map),zr(this,"name",jR),zr(this,"version",zR),zr(this,"initialized",!1),zr(this,"storagePrefix",Zr),zr(this,"init",async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}}),zr(this,"has",n=>(this.isInitialized(),this.keychain.has(n))),zr(this,"set",async(n,s)=>{this.isInitialized(),this.keychain.set(n,s),await this.persist()}),zr(this,"get",n=>{this.isInitialized();const s=this.keychain.get(n);if(typeof s>"u"){const{message:i}=W("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(i)}return s}),zr(this,"del",async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()}),this.core=e,this.logger=Bt(r,this.name)}get context(){return rr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,oh(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?ah(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=W("NOT_INITIALIZED",this.name);throw new Error(e)}}}var zD=Object.defineProperty,HD=(t,e,r)=>e in t?zD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ct=(t,e,r)=>HD(t,typeof e!="symbol"?e+"":e,r);class qD{constructor(e,r,n){this.core=e,this.logger=r,Ct(this,"name",BR),Ct(this,"keychain"),Ct(this,"randomSessionIdentifier",fh()),Ct(this,"initialized",!1),Ct(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Ct(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Ct(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=bg(s);return Eb(i.publicKey)}),Ct(this,"generateKeyPair",()=>{this.isInitialized();const s=Jx();return this.setPrivateKey(s.publicKey,s.privateKey)}),Ct(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=bg(i),a=this.randomSessionIdentifier;return await ET(a,s,LR,o)}),Ct(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),l=Zx(a,i);return this.setSymKey(l,o)}),Ct(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||Wc(s);return await this.keychain.set(o,s),o}),Ct(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Ct(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Ct(this,"encode",async(s,i,o)=>{this.isInitialized();const a=_0(o),l=An(i);if(im(a))return tO(l,o==null?void 0:o.encoding);if(sm(a)){const h=a.senderPublicKey,p=a.receiverPublicKey;s=await this.generateSharedKey(h,p)}const c=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return Xx({type:u,symKey:c,message:l,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),Ct(this,"decode",async(s,i,o)=>{this.isInitialized();const a=nO(i,o);if(im(a)){const l=rO(i,o==null?void 0:o.encoding);return Rs(l)}if(sm(a)){const l=a.receiverPublicKey,c=a.senderPublicKey;s=await this.generateSharedKey(l,c)}try{const l=this.getSymKey(s),c=eO({symKey:l,encoded:i,encoding:o==null?void 0:o.encoding});return Rs(c)}catch(l){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(l)}}),Ct(this,"getPayloadType",(s,i=jn)=>{const o=ia({encoded:s,encoding:i});return Us(o.type)}),Ct(this,"getPayloadSenderPublicKey",(s,i=jn)=>{const o=ia({encoded:s,encoding:i});return o.senderPublicKey?zt(o.senderPublicKey,Mt):void 0}),this.core=e,this.logger=Bt(r,this.name),this.keychain=n||new jD(this.core,this.logger)}get context(){return rr(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Am)}catch{e=fh(),await this.keychain.set(Am,e)}return FD(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=W("NOT_INITIALIZED",this.name);throw new Error(e)}}}var WD=Object.defineProperty,VD=Object.defineProperties,GD=Object.getOwnPropertyDescriptors,Om=Object.getOwnPropertySymbols,KD=Object.prototype.hasOwnProperty,QD=Object.prototype.propertyIsEnumerable,Ah=(t,e,r)=>e in t?WD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,YD=(t,e)=>{for(var r in e||(e={}))KD.call(e,r)&&Ah(t,r,e[r]);if(Om)for(var r of Om(e))QD.call(e,r)&&Ah(t,r,e[r]);return t},JD=(t,e)=>VD(t,GD(e)),ir=(t,e,r)=>Ah(t,typeof e!="symbol"?e+"":e,r);class ZD extends bC{constructor(e,r){super(e,r),this.logger=e,this.core=r,ir(this,"messages",new Map),ir(this,"messagesWithoutClientAck",new Map),ir(this,"name",HR),ir(this,"version",qR),ir(this,"initialized",!1),ir(this,"storagePrefix",Zr),ir(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}}),ir(this,"set",async(n,s,i)=>{this.isInitialized();const o=Qr(s);let a=this.messages.get(n);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(n,a),i===Vc.inbound){const l=this.messagesWithoutClientAck.get(n)||{};this.messagesWithoutClientAck.set(n,JD(YD({},l),{[o]:s}))}return await this.persist(),o}),ir(this,"get",n=>{this.isInitialized();let s=this.messages.get(n);return typeof s>"u"&&(s={}),s}),ir(this,"getWithoutAck",n=>{this.isInitialized();const s={};for(const i of n){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),ir(this,"has",(n,s)=>{this.isInitialized();const i=this.get(n),o=Qr(s);return typeof i[o]<"u"}),ir(this,"ack",async(n,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(n);if(typeof i>"u")return;const o=Qr(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(n):this.messagesWithoutClientAck.set(n,i),await this.persist()}),ir(this,"del",async n=>{this.isInitialized(),this.messages.delete(n),this.messagesWithoutClientAck.delete(n),await this.persist()}),this.logger=Bt(e,this.name),this.core=r}get context(){return rr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,oh(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,oh(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?ah(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?ah(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=W("NOT_INITIALIZED",this.name);throw new Error(e)}}}var XD=Object.defineProperty,ek=Object.defineProperties,tk=Object.getOwnPropertyDescriptors,Rm=Object.getOwnPropertySymbols,rk=Object.prototype.hasOwnProperty,nk=Object.prototype.propertyIsEnumerable,_h=(t,e,r)=>e in t?XD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ic=(t,e)=>{for(var r in e||(e={}))rk.call(e,r)&&_h(t,r,e[r]);if(Rm)for(var r of Rm(e))nk.call(e,r)&&_h(t,r,e[r]);return t},id=(t,e)=>ek(t,tk(e)),Pr=(t,e,r)=>_h(t,typeof e!="symbol"?e+"":e,r);class sk extends vC{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,Pr(this,"events",new Er.EventEmitter),Pr(this,"name",WR),Pr(this,"queue",new Map),Pr(this,"publishTimeout",q.toMiliseconds(q.ONE_MINUTE)),Pr(this,"initialPublishTimeout",q.toMiliseconds(q.ONE_SECOND*15)),Pr(this,"needsTransportRestart",!1),Pr(this,"publish",async(n,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||_m,l=ul(i),c=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||vs().toString(),h={topic:n,message:s,opts:{ttl:a,relay:l,prompt:c,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},p=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const g=new Promise(async f=>{const y=({id:m})=>{h.opts.id===m&&(this.removeRequestFromQueue(m),this.relayer.events.removeListener(yt.publish,y),f(h))};this.relayer.events.on(yt.publish,y);const b=Ln(new Promise((m,w)=>{this.rpcPublish({topic:n,message:s,ttl:a,prompt:c,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(m).catch(C=>{this.logger.warn(C,C==null?void 0:C.message),w(C)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await b,this.events.removeListener(yt.publish,y)}catch(m){this.queue.set(d,id(Ic({},h),{attempt:1})),this.logger.warn(m,m==null?void 0:m.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:n,message:s,opts:i}}),await Ln(g,this.publishTimeout,p)}catch(g){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(g),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw g}finally{this.queue.delete(d)}}),Pr(this,"on",(n,s)=>{this.events.on(n,s)}),Pr(this,"once",(n,s)=>{this.events.once(n,s)}),Pr(this,"off",(n,s)=>{this.events.off(n,s)}),Pr(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.relayer=e,this.logger=Bt(r,this.name),this.registerEventListeners()}get context(){return rr(this.logger)}async rpcPublish(e){var r,n,s,i;const{topic:o,message:a,ttl:l=_m,prompt:c,tag:u,id:d,attestation:h,tvf:p}=e,g={method:Uo(ul().protocol).publish,params:Ic({topic:o,message:a,ttl:l,prompt:c,tag:u,attestation:h},p),id:d};Tt((r=g.params)==null?void 0:r.prompt)&&((n=g.params)==null||delete n.prompt),Tt((s=g.params)==null?void 0:s.tag)&&((i=g.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:g});const f=await this.relayer.request(g);return this.relayer.events.emit(yt.publish,e),this.logger.debug("Successfully Published Payload"),f}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,r)=>{const n=e.attempt+1;this.queue.set(r,id(Ic({},e),{attempt:n}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${n}`),await this.rpcPublish(id(Ic({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Yi.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(yt.connection_stalled);return}this.checkQueue()}),this.relayer.on(yt.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var ik=Object.defineProperty,ok=(t,e,r)=>e in t?ik(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ii=(t,e,r)=>ok(t,typeof e!="symbol"?e+"":e,r);class ak{constructor(){ii(this,"map",new Map),ii(this,"set",(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])}),ii(this,"get",e=>this.map.get(e)||[]),ii(this,"exists",(e,r)=>this.get(e).includes(r)),ii(this,"delete",(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const s=n.filter(i=>i!==r);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),ii(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var ck=Object.defineProperty,lk=Object.defineProperties,uk=Object.getOwnPropertyDescriptors,Dm=Object.getOwnPropertySymbols,dk=Object.prototype.hasOwnProperty,hk=Object.prototype.propertyIsEnumerable,Ch=(t,e,r)=>e in t?ck(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ao=(t,e)=>{for(var r in e||(e={}))dk.call(e,r)&&Ch(t,r,e[r]);if(Dm)for(var r of Dm(e))hk.call(e,r)&&Ch(t,r,e[r]);return t},od=(t,e)=>lk(t,uk(e)),Be=(t,e,r)=>Ch(t,typeof e!="symbol"?e+"":e,r);class pk extends _C{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,Be(this,"subscriptions",new Map),Be(this,"topicMap",new ak),Be(this,"events",new Er.EventEmitter),Be(this,"name",ZR),Be(this,"version",XR),Be(this,"pending",new Map),Be(this,"cached",[]),Be(this,"initialized",!1),Be(this,"storagePrefix",Zr),Be(this,"subscribeTimeout",q.toMiliseconds(q.ONE_MINUTE)),Be(this,"initialSubscribeTimeout",q.toMiliseconds(q.ONE_SECOND*15)),Be(this,"clientId"),Be(this,"batchSubscribeTopicsLimit",500),Be(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Be(this,"subscribe",async(n,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:s}});try{const i=ul(s),o={topic:n,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(n,o);const a=await this.rpcSubscribe(n,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),Be(this,"unsubscribe",async(n,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(n,s.id,s):await this.unsubscribeByTopic(n,s)}),Be(this,"isSubscribed",n=>new Promise(s=>{s(this.topicMap.topics.includes(n))})),Be(this,"isKnownTopic",n=>new Promise(s=>{s(this.topicMap.topics.includes(n)||this.pending.has(n)||this.cached.some(i=>i.topic===n))})),Be(this,"on",(n,s)=>{this.events.on(n,s)}),Be(this,"once",(n,s)=>{this.events.once(n,s)}),Be(this,"off",(n,s)=>{this.events.off(n,s)}),Be(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),Be(this,"start",async()=>{await this.onConnect()}),Be(this,"stop",async()=>{await this.onDisconnect()}),Be(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Be(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const n=[];this.pending.forEach(s=>{n.push(s)}),await this.batchSubscribe(n)}),Be(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Yi.pulse,async()=>{await this.checkPending()}),this.events.on(ar.created,async n=>{const s=ar.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:n}),await this.persist()}),this.events.on(ar.deleted,async n=>{const s=ar.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:n}),await this.persist()})}),this.relayer=e,this.logger=Bt(r,this.name),this.clientId=""}get context(){return rr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async s=>await this.unsubscribeById(e,s,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const s=ul(n);await this.restartToComplete({topic:e,id:r,relay:s}),await this.rpcUnsubscribe(e,r,s);const i=Ue("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,r,n){var s;(!n||(n==null?void 0:n.transportType)===Ke.relay)&&await this.restartToComplete({topic:e,id:e,relay:r});const i={method:Uo(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((n==null?void 0:n.transportType)===Ke.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},q.toMiliseconds(q.ONE_SECOND)),a;const l=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(ar.created,d),u(h.id))};this.events.on(ar.created,d);try{const h=await Ln(new Promise((p,g)=>{this.relayer.request(i).catch(f=>{this.logger.warn(f,f==null?void 0:f.message),g(f)}).then(p)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(ar.created,d),u(h)}catch{}}),c=await Ln(l,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!c&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return c?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(yt.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:Uo(r.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await Ln(new Promise(s=>{this.relayer.request(n).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(yt.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const r=e[0].relay,n={method:Uo(r.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let s;try{s=await await Ln(new Promise((i,o)=>{this.relayer.request(n).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(yt.connection_stalled)}return s}rpcUnsubscribe(e,r,n){const s={method:Uo(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,r){this.setSubscription(e,od(Ao({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,Ao({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,Ao({},r)),this.topicMap.set(r.topic,e),this.events.emit(ar.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=W("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(ar.deleted,od(Ao({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(ar.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<r;n++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(ar.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=W("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async r=>od(Ao({},r),{id:await this.getSubscriptionId(r.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await uP(q.toMiliseconds(q.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=W("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Qr(e+await this.getClientId())}}var fk=Object.defineProperty,km=Object.getOwnPropertySymbols,gk=Object.prototype.hasOwnProperty,mk=Object.prototype.propertyIsEnumerable,Ih=(t,e,r)=>e in t?fk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,$m=(t,e)=>{for(var r in e||(e={}))gk.call(e,r)&&Ih(t,r,e[r]);if(km)for(var r of km(e))mk.call(e,r)&&Ih(t,r,e[r]);return t},Se=(t,e,r)=>Ih(t,typeof e!="symbol"?e+"":e,r);class yk extends EC{constructor(e){super(e),Se(this,"protocol","wc"),Se(this,"version",2),Se(this,"core"),Se(this,"logger"),Se(this,"events",new Er.EventEmitter),Se(this,"provider"),Se(this,"messages"),Se(this,"subscriber"),Se(this,"publisher"),Se(this,"name",GR),Se(this,"transportExplicitlyClosed",!1),Se(this,"initialized",!1),Se(this,"connectionAttemptInProgress",!1),Se(this,"relayUrl"),Se(this,"projectId"),Se(this,"packageName"),Se(this,"bundleId"),Se(this,"hasExperiencedNetworkDisruption",!1),Se(this,"pingTimeout"),Se(this,"heartBeatTimeout",q.toMiliseconds(q.THIRTY_SECONDS+q.FIVE_SECONDS)),Se(this,"reconnectTimeout"),Se(this,"connectPromise"),Se(this,"reconnectInProgress",!1),Se(this,"requestsInFlight",[]),Se(this,"connectTimeout",q.toMiliseconds(q.ONE_SECOND*15)),Se(this,"request",async r=>{var n,s;this.logger.debug("Publishing Request Payload");const i=r.id||vs().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:r.method,topic:(n=r.params)==null?void 0:n.topic},"relayer.request - publishing...");const o=`${i}:${((s=r.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(l=>l!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),Se(this,"resetPingTimeout",()=>{cl()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,n,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(n=(r=this.provider)==null?void 0:r.connection)==null?void 0:n.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),Se(this,"onPayloadHandler",r=>{this.onProviderPayload(r),this.resetPingTimeout()}),Se(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(yt.connect)}),Se(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),Se(this,"onProviderErrorHandler",r=>{this.logger.fatal(`Fatal socket error: ${r.message}`),this.events.emit(yt.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Se(this,"registerProviderListeners",()=>{this.provider.on(pr.payload,this.onPayloadHandler),this.provider.on(pr.connect,this.onConnectHandler),this.provider.on(pr.disconnect,this.onDisconnectHandler),this.provider.on(pr.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Bt(e.logger,this.name):Qa(Ji({level:e.logger||VR})),this.messages=new ZD(this.logger,e.core),this.subscriber=new pk(this,this.logger),this.publisher=new sk(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||$0,this.projectId=e.projectId,Q2()?this.packageName=Og():Y2()&&(this.bundleId=Og()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return rr(this.logger)}get connected(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===1||!1}get connecting(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now(),transportType:Ke.relay},Vc.outbound)}async subscribe(e,r){var n,s,i;this.isInitialized(),(!(r!=null&&r.transportType)||(r==null?void 0:r.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((n=r==null?void 0:r.internal)==null?void 0:n.throwOnFailedPublish)>"u"?!0:(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",l;const c=u=>{u.topic===e&&(this.subscriber.off(ar.created,c),l())};return await Promise.all([new Promise(u=>{l=u,this.subscriber.on(ar.created,c)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,$m({internal:{throwOnFailedPublish:o}},r)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Ln(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(r,n)=>{await this.connect(e).then(r).catch(n).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await pm())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=e.sort((n,s)=>n.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${r.length} message events sorted`);for(const n of r)try{await this.onMessageEvent(n)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(e,r){const{topic:n}=e;if(!r.sessionExists){const s=lt(q.FIVE_MINUTES),i={topic:n,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(n,i)}this.events.emit(yt.message,e),await this.recordMessageEvent(e,Vc.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let r=1;for(;r<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${r}...`),await this.createProvider(),await new Promise(async(n,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(pr.disconnect,i),await Ln(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(pr.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const l=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(pr.disconnect,l),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(pr.disconnect,l)})}),this.hasExperiencedNetworkDisruption=!1,n()})}catch(n){await this.subscriber.stop();const s=n;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${r}`);break}await new Promise(n=>setTimeout(n,q.toMiliseconds(r*1))),r++}}startPingTimeout(){var e,r,n,s,i;if(cl())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((i=(s=(n=this.provider)==null?void 0:n.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new _r(new UR(eP({sdkVersion:bh,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,r){const{topic:n,message:s}=e;await this.messages.set(n,s,r)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isKnownTopic(r))return this.logger.warn(`Ignoring message for unknown topic ${r}`),!0;const s=this.messages.has(r,n);return s&&this.logger.warn(`Ignoring duplicate message: ${n}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Dp(e)){if(!e.method.endsWith(KR))return;const r=e.params,{topic:n,message:s,publishedAt:i,attestation:o}=r.data,a={topic:n,message:s,publishedAt:i,transportType:Ke.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace($m({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else tu(e)&&this.events.emit(yt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,Vc.inbound),this.events.emit(yt.message,e))}async acknowledgePayload(e){const r=Xl(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(pr.payload,this.onPayloadHandler),this.provider.off(pr.connect,this.onConnectHandler),this.provider.off(pr.disconnect,this.onDisconnectHandler),this.provider.off(pr.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await pm();qO(async r=>{e!==r&&(e=r,r?await this.transportOpen().catch(n=>this.logger.error(n,n==null?void 0:n.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(yt.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},q.toMiliseconds(QR)))))}isInitialized(){if(!this.initialized){const{message:e}=W("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&await this.connect()}}function wk(){}function Um(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function Mm(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Fm(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const bk="[object RegExp]",vk="[object String]",Ek="[object Number]",Ak="[object Boolean]",Bm="[object Arguments]",_k="[object Symbol]",Ck="[object Date]",Ik="[object Map]",Sk="[object Set]",Tk="[object Array]",Nk="[object Function]",Pk="[object ArrayBuffer]",ad="[object Object]",xk="[object Error]",Ok="[object DataView]",Rk="[object Uint8Array]",Dk="[object Uint8ClampedArray]",kk="[object Uint16Array]",$k="[object Uint32Array]",Uk="[object BigUint64Array]",Mk="[object Int8Array]",Fk="[object Int16Array]",Bk="[object Int32Array]",Lk="[object BigInt64Array]",jk="[object Float32Array]",zk="[object Float64Array]";function Hk(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function qk(t,e,r){return Fo(t,e,void 0,void 0,void 0,void 0,r)}function Fo(t,e,r,n,s,i,o){const a=o(t,e,r,n,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return Ho(t,e,i,o)}return Ho(t,e,i,o)}function Ho(t,e,r,n){if(Object.is(t,e))return!0;let s=Fm(t),i=Fm(e);if(s===Bm&&(s=ad),i===Bm&&(i=ad),s!==i)return!1;switch(s){case vk:return t.toString()===e.toString();case Ek:{const l=t.valueOf(),c=e.valueOf();return Hk(l,c)}case Ak:case Ck:case _k:return Object.is(t.valueOf(),e.valueOf());case bk:return t.source===e.source&&t.flags===e.flags;case Nk:return t===e}r=r??new Map;const o=r.get(t),a=r.get(e);if(o!=null&&a!=null)return o===e;r.set(t,e),r.set(e,t);try{switch(s){case Ik:{if(t.size!==e.size)return!1;for(const[l,c]of t.entries())if(!e.has(l)||!Fo(c,e.get(l),l,t,e,r,n))return!1;return!0}case Sk:{if(t.size!==e.size)return!1;const l=Array.from(t.values()),c=Array.from(e.values());for(let u=0;u<l.length;u++){const d=l[u],h=c.findIndex(p=>Fo(d,p,void 0,t,e,r,n));if(h===-1)return!1;c.splice(h,1)}return!0}case Tk:case Rk:case Dk:case kk:case $k:case Uk:case Mk:case Fk:case Bk:case Lk:case jk:case zk:{if(typeof Et<"u"&&Et.isBuffer(t)!==Et.isBuffer(e)||t.length!==e.length)return!1;for(let l=0;l<t.length;l++)if(!Fo(t[l],e[l],l,t,e,r,n))return!1;return!0}case Pk:return t.byteLength!==e.byteLength?!1:Ho(new Uint8Array(t),new Uint8Array(e),r,n);case Ok:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:Ho(new Uint8Array(t),new Uint8Array(e),r,n);case xk:return t.name===e.name&&t.message===e.message;case ad:{if(!(Ho(t.constructor,e.constructor,r,n)||Um(t)&&Um(e)))return!1;const l=[...Object.keys(t),...Mm(t)],c=[...Object.keys(e),...Mm(e)];if(l.length!==c.length)return!1;for(let u=0;u<l.length;u++){const d=l[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const p=e[d];if(!Fo(h,p,d,t,e,r,n))return!1}return!0}default:return!1}}finally{r.delete(t),r.delete(e)}}function Wk(t,e){return qk(t,e,wk)}var Vk=Object.defineProperty,Lm=Object.getOwnPropertySymbols,Gk=Object.prototype.hasOwnProperty,Kk=Object.prototype.propertyIsEnumerable,Sh=(t,e,r)=>e in t?Vk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,jm=(t,e)=>{for(var r in e||(e={}))Gk.call(e,r)&&Sh(t,r,e[r]);if(Lm)for(var r of Lm(e))Kk.call(e,r)&&Sh(t,r,e[r]);return t},Gt=(t,e,r)=>Sh(t,typeof e!="symbol"?e+"":e,r);class Zs extends AC{constructor(e,r,n,s=Zr,i=void 0){super(e,r,n,s),this.core=e,this.logger=r,this.name=n,Gt(this,"map",new Map),Gt(this,"version",YR),Gt(this,"cached",[]),Gt(this,"initialized",!1),Gt(this,"getKey"),Gt(this,"storagePrefix",Zr),Gt(this,"recentlyDeleted",[]),Gt(this,"recentlyDeletedLimit",200),Gt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Tt(o)?this.map.set(this.getKey(o),o):EO(o)?this.map.set(o.id,o):AO(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Gt(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Gt(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Gt(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(l=>Wk(a[l],o[l]))):this.values)),Gt(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const l=jm(jm({},this.getData(o)),a);this.map.set(o,l),await this.persist()}),Gt(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Bt(r,this.name),this.storagePrefix=s,this.getKey=i}get context(){return rr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){const{message:s}=W("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:n}=W("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=W("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=W("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Qk=Object.defineProperty,Yk=(t,e,r)=>e in t?Qk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ee=(t,e,r)=>Yk(t,typeof e!="symbol"?e+"":e,r);class Jk{constructor(e,r){this.core=e,this.logger=r,Ee(this,"name",e3),Ee(this,"version",t3),Ee(this,"events",new pp),Ee(this,"pairings"),Ee(this,"initialized",!1),Ee(this,"storagePrefix",Zr),Ee(this,"ignoredPayloadTypes",[yn]),Ee(this,"registeredMethods",[]),Ee(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Ee(this,"register",({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]}),Ee(this,"create",async n=>{this.isInitialized();const s=fh(),i=await this.core.crypto.setSymKey(s),o=lt(q.FIVE_MINUTES),a={protocol:k0},l={topic:i,expiry:o,relay:a,active:!1,methods:n==null?void 0:n.methods},c=am({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:n==null?void 0:n.methods});return this.events.emit(ys.create,l),this.core.expirer.set(i,o),await this.pairings.set(i,l),await this.core.relayer.subscribe(i,{transportType:n==null?void 0:n.transportType}),{topic:i,uri:c}}),Ee(this,"pair",async n=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:n==null?void 0:n.uri,trace:[Wr.pairing_started]}});this.isValidPair(n,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:l,methods:c}=om(n.uri);s.props.properties.topic=i,s.addTrace(Wr.pairing_uri_validation_success),s.addTrace(Wr.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(Wr.existing_pairing),u.active)throw s.setError(gn.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(Wr.pairing_not_expired)}const d=l||lt(q.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:c};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(Wr.store_new_pairing),n.activatePairing&&await this.activate({topic:i}),this.events.emit(ys.create,h),s.addTrace(Wr.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(Wr.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(gn.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(p){throw s.setError(gn.subscribe_pairing_topic_failure),p}return s.addTrace(Wr.subscribe_pairing_topic_success),h}),Ee(this,"activate",async({topic:n})=>{this.isInitialized();const s=lt(q.FIVE_MINUTES);this.core.expirer.set(n,s),await this.pairings.update(n,{active:!0,expiry:s})}),Ee(this,"ping",async n=>{this.isInitialized(),await this.isValidPing(n),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=n;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:l}=ps();this.events.once(xe("pairing_ping",i),({error:c})=>{c?l(c):a()}),await o()}}),Ee(this,"updateExpiry",async({topic:n,expiry:s})=>{this.isInitialized(),await this.pairings.update(n,{expiry:s})}),Ee(this,"updateMetadata",async({topic:n,metadata:s})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:s})}),Ee(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Ee(this,"disconnect",async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:s}=n;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Ue("USER_DISCONNECTED")),await this.deletePairing(s))}),Ee(this,"formatUriFromPairing",n=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=n,l=this.core.crypto.keychain.get(s);return am({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:l,relay:i,expiryTimestamp:o,methods:a})}),Ee(this,"sendRequest",async(n,s,i)=>{const o=zn(s,i),a=await this.core.crypto.encode(n,o),l=vo[s].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,l),o.id}),Ee(this,"sendResult",async(n,s,i)=>{const o=Xl(n,i),a=await this.core.crypto.encode(s,o),l=(await this.core.history.get(s,n)).request.method,c=vo[l].res;await this.core.relayer.publish(s,a,c),await this.core.history.resolve(o)}),Ee(this,"sendError",async(n,s,i)=>{const o=eu(n,i),a=await this.core.crypto.encode(s,o),l=(await this.core.history.get(s,n)).request.method,c=vo[l]?vo[l].res:vo.unregistered_method.res;await this.core.relayer.publish(s,a,c),await this.core.history.resolve(o)}),Ee(this,"deletePairing",async(n,s)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,Ue("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),s?Promise.resolve():this.core.expirer.del(n)])}),Ee(this,"cleanup",async()=>{const n=this.pairings.getAll().filter(s=>$n(s.expiry));await Promise.all(n.map(s=>this.deletePairing(s.topic)))}),Ee(this,"onRelayEventRequest",async n=>{const{topic:s,payload:i}=n;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),Ee(this,"onRelayEventResponse",async n=>{const{topic:s,payload:i}=n,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),Ee(this,"onPairingPingRequest",async(n,s)=>{const{id:i}=s;try{this.isValidPing({topic:n}),await this.sendResult(i,n,!0),this.events.emit(ys.ping,{id:i,topic:n})}catch(o){await this.sendError(i,n,o),this.logger.error(o)}}),Ee(this,"onPairingPingResponse",(n,s)=>{const{id:i}=s;setTimeout(()=>{Gr(s)?this.events.emit(xe("pairing_ping",i),{}):wr(s)&&this.events.emit(xe("pairing_ping",i),{error:s.error})},500)}),Ee(this,"onPairingDeleteRequest",async(n,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(ys.delete,{id:i,topic:n})}catch(o){await this.sendError(i,n,o),this.logger.error(o)}}),Ee(this,"onUnknownRpcMethodRequest",async(n,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=Ue("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,n,a),this.logger.error(a)}catch(a){await this.sendError(i,n,a),this.logger.error(a)}}),Ee(this,"onUnknownRpcMethodResponse",n=>{this.registeredMethods.includes(n)||this.logger.error(Ue("WC_METHOD_UNSUPPORTED",n))}),Ee(this,"isValidPair",(n,s)=>{var i;if(!Jt(n)){const{message:a}=W("MISSING_OR_INVALID",`pair() params: ${n}`);throw s.setError(gn.malformed_pairing_uri),new Error(a)}if(!vO(n.uri)){const{message:a}=W("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw s.setError(gn.malformed_pairing_uri),new Error(a)}const o=om(n==null?void 0:n.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=W("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(gn.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=W("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(gn.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&q.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(gn.pairing_expired);const{message:a}=W("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Ee(this,"isValidPing",async n=>{if(!Jt(n)){const{message:i}=W("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(i)}const{topic:s}=n;await this.isValidPairingTopic(s)}),Ee(this,"isValidDisconnect",async n=>{if(!Jt(n)){const{message:i}=W("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(i)}const{topic:s}=n;await this.isValidPairingTopic(s)}),Ee(this,"isValidPairingTopic",async n=>{if(!it(n,!1)){const{message:s}=W("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(s)}if(!this.pairings.keys.includes(n)){const{message:s}=W("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(s)}if($n(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:s}=W("EXPIRED",`pairing topic: ${n}`);throw new Error(s)}}),this.core=e,this.logger=Bt(r,this.name),this.pairings=new Zs(this.core,this.logger,this.name,this.storagePrefix)}get context(){return rr(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=W("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(yt.message,async e=>{const{topic:r,message:n,transportType:s}=e;if(this.pairings.keys.includes(r)&&s!==Ke.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))try{const i=await this.core.crypto.decode(r,n);Dp(i)?(this.core.history.set(r,i),await this.onRelayEventRequest({topic:r,payload:i})):tu(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.core.history.delete(r,i.id)),await this.core.relayer.messages.ack(r,n)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(yr.expired,async e=>{const{topic:r}=Xb(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(ys.expire,{topic:r}))})}}var Zk=Object.defineProperty,Xk=(t,e,r)=>e in t?Zk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,It=(t,e,r)=>Xk(t,typeof e!="symbol"?e+"":e,r);class e5 extends wC{constructor(e,r){super(e,r),this.core=e,this.logger=r,It(this,"records",new Map),It(this,"events",new Er.EventEmitter),It(this,"name",r3),It(this,"version",n3),It(this,"cached",[]),It(this,"initialized",!1),It(this,"storagePrefix",Zr),It(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),It(this,"set",(n,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:n,request:{method:s.method,params:s.params||null},chainId:i,expiry:lt(q.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Tr.created,o)}),It(this,"resolve",async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const s=await this.getRecord(n.id);typeof s.response>"u"&&(s.response=wr(n)?{error:n.error}:{result:n.result},this.records.set(s.id,s),this.persist(),this.events.emit(Tr.updated,s))}),It(this,"get",async(n,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:s}),await this.getRecord(s))),It(this,"delete",(n,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===n){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(Tr.deleted,i)}}),this.persist()}),It(this,"exists",async(n,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===n:!1)),It(this,"on",(n,s)=>{this.events.on(n,s)}),It(this,"once",(n,s)=>{this.events.once(n,s)}),It(this,"off",(n,s)=>{this.events.off(n,s)}),It(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.logger=Bt(r,this.name)}get context(){return rr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:zn(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=W("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Tr.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=W("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Tr.created,e=>{const r=Tr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(Tr.updated,e=>{const r=Tr.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(Tr.deleted,e=>{const r=Tr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(Yi.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{q.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(Tr.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=W("NOT_INITIALIZED",this.name);throw new Error(e)}}}var t5=Object.defineProperty,r5=(t,e,r)=>e in t?t5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,kt=(t,e,r)=>r5(t,typeof e!="symbol"?e+"":e,r);class n5 extends CC{constructor(e,r){super(e,r),this.core=e,this.logger=r,kt(this,"expirations",new Map),kt(this,"events",new Er.EventEmitter),kt(this,"name",s3),kt(this,"version",i3),kt(this,"cached",[]),kt(this,"initialized",!1),kt(this,"storagePrefix",Zr),kt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),kt(this,"has",n=>{try{const s=this.formatTarget(n);return typeof this.getExpiration(s)<"u"}catch{return!1}}),kt(this,"set",(n,s)=>{this.isInitialized();const i=this.formatTarget(n),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(yr.created,{target:i,expiration:o})}),kt(this,"get",n=>{this.isInitialized();const s=this.formatTarget(n);return this.getExpiration(s)}),kt(this,"del",n=>{if(this.isInitialized(),this.has(n)){const s=this.formatTarget(n),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(yr.deleted,{target:s,expiration:i})}}),kt(this,"on",(n,s)=>{this.events.on(n,s)}),kt(this,"once",(n,s)=>{this.events.once(n,s)}),kt(this,"off",(n,s)=>{this.events.off(n,s)}),kt(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.logger=Bt(r,this.name)}get context(){return rr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return tP(e);if(typeof e=="number")return rP(e);const{message:r}=W("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(yr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=W("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=W("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;q.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(yr.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Yi.pulse,()=>this.checkExpirations()),this.events.on(yr.created,e=>{const r=yr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(yr.expired,e=>{const r=yr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(yr.deleted,e=>{const r=yr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=W("NOT_INITIALIZED",this.name);throw new Error(e)}}}var s5=Object.defineProperty,i5=(t,e,r)=>e in t?s5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,st=(t,e,r)=>i5(t,typeof e!="symbol"?e+"":e,r);class o5 extends IC{constructor(e,r,n){super(e,r,n),this.core=e,this.logger=r,this.store=n,st(this,"name",o3),st(this,"abortController"),st(this,"isDevEnv"),st(this,"verifyUrlV3",c3),st(this,"storagePrefix",Zr),st(this,"version",D0),st(this,"publicKey"),st(this,"fetchPromise"),st(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&q.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),st(this,"register",async s=>{if(!Xa()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,l=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const c=Ds.getDocument(),u=this.startAbortTimer(q.ONE_SECOND*5),d=await new Promise((h,p)=>{const g=()=>{window.removeEventListener("message",y),c.body.removeChild(f),p("attestation aborted")};this.abortController.signal.addEventListener("abort",g);const f=c.createElement("iframe");f.src=l,f.style.display="none",f.addEventListener("error",g,{signal:this.abortController.signal});const y=b=>{if(b.data&&typeof b.data=="string")try{const m=JSON.parse(b.data);if(m.type==="verify_attestation"){if(Xd(m.attestation).payload.id!==o)return;clearInterval(u),c.body.removeChild(f),this.abortController.signal.removeEventListener("abort",g),window.removeEventListener("message",y),h(m.attestation===null?"":m.attestation)}}catch(m){this.logger.warn(m)}};c.body.appendChild(f),window.addEventListener("message",y,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(c){this.logger.warn(c)}return""}),st(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(Xd(i).payload.id!==a)return;const c=await this.isValidJwtAttestation(i);if(c){if(!c.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return c}}if(!o)return;const l=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,l)}),st(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(q.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),st(this,"getVerifyUrl",s=>{let i=s||zo;return l3.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${zo}`),i=zo),i}),st(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(q.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),st(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),st(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),st(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),st(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),st(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),st(this,"validateAttestation",(s,i)=>{const o=aO(s,i.publicKey),a={hasExpired:q.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Bt(r,this.name),this.abortController=new AbortController,this.isDevEnv=_p(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return rr(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),q.toMiliseconds(e))}}var a5=Object.defineProperty,c5=(t,e,r)=>e in t?a5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,zm=(t,e,r)=>c5(t,typeof e!="symbol"?e+"":e,r);class l5 extends SC{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,zm(this,"context",u3),zm(this,"registerDeviceToken",async n=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=n,l=`${d3}/${this.projectId}/clients`;await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=Bt(r,this.context)}}var u5=Object.defineProperty,Hm=Object.getOwnPropertySymbols,d5=Object.prototype.hasOwnProperty,h5=Object.prototype.propertyIsEnumerable,Th=(t,e,r)=>e in t?u5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_o=(t,e)=>{for(var r in e||(e={}))d5.call(e,r)&&Th(t,r,e[r]);if(Hm)for(var r of Hm(e))h5.call(e,r)&&Th(t,r,e[r]);return t},ft=(t,e,r)=>Th(t,typeof e!="symbol"?e+"":e,r);class p5 extends TC{constructor(e,r,n=!0){super(e,r,n),this.core=e,this.logger=r,ft(this,"context",p3),ft(this,"storagePrefix",Zr),ft(this,"storageVersion",h3),ft(this,"events",new Map),ft(this,"shouldPersist",!1),ft(this,"init",async()=>{if(!_p())try{const s={eventId:Dg(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:Jb(this.core.relayer.protocol,this.core.relayer.version,bh)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),ft(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:l}}=s,c=Dg(),u=this.core.projectId||"",d=Date.now(),h=_o({eventId:c,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:l}},bundleId:u,domain:this.getAppDomain()},this.setMethods(c));return this.telemetryEnabled&&(this.events.set(c,h),this.shouldPersist=!0),h}),ft(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(l=>l.props.properties.topic===o);if(a)return _o(_o({},a),this.setMethods(a.eventId))}),ft(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),ft(this,"setEventListeners",()=>{this.core.heartbeat.on(Yi.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{q.fromMiliseconds(Date.now())-q.fromMiliseconds(s.timestamp)>f3&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),ft(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),ft(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),ft(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),ft(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),ft(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,_o(_o({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),ft(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),ft(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${g3}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${bh}${i}`,{method:"POST",body:JSON.stringify(s)})}),ft(this,"getAppDomain",()=>Yb().url),this.logger=Bt(r,this.context),this.telemetryEnabled=n,n?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var f5=Object.defineProperty,qm=Object.getOwnPropertySymbols,g5=Object.prototype.hasOwnProperty,m5=Object.prototype.propertyIsEnumerable,Nh=(t,e,r)=>e in t?f5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Wm=(t,e)=>{for(var r in e||(e={}))g5.call(e,r)&&Nh(t,r,e[r]);if(qm)for(var r of qm(e))m5.call(e,r)&&Nh(t,r,e[r]);return t},qe=(t,e,r)=>Nh(t,typeof e!="symbol"?e+"":e,r);let y5=class G0 extends fC{constructor(e){var r;super(e),qe(this,"protocol",R0),qe(this,"version",D0),qe(this,"name",wh),qe(this,"relayUrl"),qe(this,"projectId"),qe(this,"customStoragePrefix"),qe(this,"events",new Er.EventEmitter),qe(this,"logger"),qe(this,"heartbeat"),qe(this,"relayer"),qe(this,"crypto"),qe(this,"storage"),qe(this,"history"),qe(this,"expirer"),qe(this,"pairing"),qe(this,"verify"),qe(this,"echoClient"),qe(this,"linkModeSupportedApps"),qe(this,"eventClient"),qe(this,"initialized",!1),qe(this,"logChunkController"),qe(this,"on",(o,a)=>this.events.on(o,a)),qe(this,"once",(o,a)=>this.events.once(o,a)),qe(this,"off",(o,a)=>this.events.off(o,a)),qe(this,"removeListener",(o,a)=>this.events.removeListener(o,a)),qe(this,"dispatchEnvelope",({topic:o,message:a,sessionExists:l})=>{if(!o||!a)return;const c={topic:o,message:a,publishedAt:Date.now(),transportType:Ke.link_mode};this.relayer.onLinkMessageEvent(c,{sessionExists:l})}),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||$0,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const n=Ji({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:MR.logger,name:wh}),{logger:s,chunkLoggerController:i}=gp({opts:n,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=i,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var o,a;(o=this.logChunkController)!=null&&o.downloadLogsBlobInBrowser&&((a=this.logChunkController)==null||a.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Bt(s,this.name),this.heartbeat=new p_,this.crypto=new qD(this,this.logger,e==null?void 0:e.keychain),this.history=new e5(this,this.logger),this.expirer=new n5(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new Q_(Wm(Wm({},FR),e==null?void 0:e.storageOptions)),this.relayer=new yk({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Jk(this,this.logger),this.verify=new o5(this,this.logger,this.storage),this.echoClient=new l5(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new p5(this,this.logger,e==null?void 0:e.telemetryEnabled)}static async init(e){const r=new G0(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(JR,n),r}get context(){return rr(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(Cm,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(Cm)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}};const w5=y5,K0="wc",Q0=2,Y0="client",kp=`${K0}@${Q0}:${Y0}:`,cd={name:Y0,logger:"error"},Vm="WALLETCONNECT_DEEPLINK_CHOICE",b5="proposal",Gm="Proposal expired",v5="session",oi=q.SEVEN_DAYS,E5="engine",gt={wc_sessionPropose:{req:{ttl:q.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:q.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:q.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:q.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:q.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:q.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:q.ONE_DAY,prompt:!1,tag:1104},res:{ttl:q.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:q.ONE_DAY,prompt:!1,tag:1106},res:{ttl:q.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:q.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:q.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:q.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:q.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:q.ONE_DAY,prompt:!1,tag:1112},res:{ttl:q.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:q.ONE_DAY,prompt:!1,tag:1114},res:{ttl:q.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:q.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:q.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:q.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:q.FIVE_MINUTES,prompt:!1,tag:1119}}},ld={min:q.FIVE_MINUTES,max:q.SEVEN_DAYS},Hr={idle:"IDLE",active:"ACTIVE"},Km={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},A5="request",_5=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],C5="wc",I5="auth",S5="authKeys",T5="pairingTopics",N5="requests",nu=`${C5}@${1.5}:${I5}:`,Gc=`${nu}:PUB_KEY`;var P5=Object.defineProperty,x5=Object.defineProperties,O5=Object.getOwnPropertyDescriptors,Qm=Object.getOwnPropertySymbols,R5=Object.prototype.hasOwnProperty,D5=Object.prototype.propertyIsEnumerable,Ph=(t,e,r)=>e in t?P5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Le=(t,e)=>{for(var r in e||(e={}))R5.call(e,r)&&Ph(t,r,e[r]);if(Qm)for(var r of Qm(e))D5.call(e,r)&&Ph(t,r,e[r]);return t},Lt=(t,e)=>x5(t,O5(e)),B=(t,e,r)=>Ph(t,typeof e!="symbol"?e+"":e,r);class k5 extends OC{constructor(e){super(e),B(this,"name",E5),B(this,"events",new pp),B(this,"initialized",!1),B(this,"requestQueue",{state:Hr.idle,queue:[]}),B(this,"sessionRequestQueue",{state:Hr.idle,queue:[]}),B(this,"requestQueueDelay",q.ONE_SECOND),B(this,"expectedPairingMethodMap",new Map),B(this,"recentlyDeletedMap",new Map),B(this,"recentlyDeletedLimit",200),B(this,"relayMessageCache",[]),B(this,"pendingSessions",new Map),B(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(gt)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},q.toMiliseconds(this.requestQueueDelay)))}),B(this,"connect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const n=Lt(Le({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:l,relays:c}=n;let u=s,d,h=!1;try{if(u){const v=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=v.active}}catch(v){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),v}if(!u||!h){const{topic:v,uri:A}=await this.client.core.pairing.create();u=v,d=A}if(!u){const{message:v}=W("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(v)}const p=await this.client.core.crypto.generateKeyPair(),g=gt.wc_sessionPropose.req.ttl||q.FIVE_MINUTES,f=lt(g),y=Lt(Le(Le({requiredNamespaces:i,optionalNamespaces:o,relays:c??[{protocol:k0}],proposer:{publicKey:p,metadata:this.client.metadata},expiryTimestamp:f,pairingTopic:u},a&&{sessionProperties:a}),l&&{scopedProperties:l}),{id:Vr()}),b=xe("session_connect",y.id),{reject:m,resolve:w,done:C}=ps(g,Gm),_=({id:v})=>{v===y.id&&(this.client.events.off("proposal_expire",_),this.pendingSessions.delete(y.id),this.events.emit(b,{error:{message:Gm,code:0}}))};return this.client.events.on("proposal_expire",_),this.events.once(b,({error:v,session:A})=>{this.client.events.off("proposal_expire",_),v?m(v):A&&w(A)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:y,throwOnFailedPublish:!0,clientRpcId:y.id}),await this.setProposal(y.id,y),{uri:d,approval:C}}),B(this,"pair",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(n){throw this.client.logger.error("pair() failed"),n}}),B(this,"approve",async r=>{var n,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(n=r==null?void 0:r.id)==null?void 0:n.toString(),trace:[Nr.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(T){throw o.setError(ls.no_internet_connection),T}try{await this.isValidProposalId(r==null?void 0:r.id)}catch(T){throw this.client.logger.error(`approve() -> proposal.get(${r==null?void 0:r.id}) failed`),o.setError(ls.proposal_not_found),T}try{await this.isValidApprove(r)}catch(T){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(ls.session_approve_namespace_validation_failure),T}const{id:a,relayProtocol:l,namespaces:c,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r,p=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:g,proposer:f,requiredNamespaces:y,optionalNamespaces:b}=p;let m=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:g});m||(m=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:Nr.session_approve_started,properties:{topic:g,trace:[Nr.session_approve_started,Nr.session_namespaces_validation_success]}}));const w=await this.client.core.crypto.generateKeyPair(),C=f.publicKey,_=await this.client.core.crypto.generateSharedKey(w,C),v=Le(Le(Le({relay:{protocol:l??"irn"},namespaces:c,controller:{publicKey:w,metadata:this.client.metadata},expiry:lt(oi)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),A=Ke.relay;m.addTrace(Nr.subscribing_session_topic);try{await this.client.core.relayer.subscribe(_,{transportType:A})}catch(T){throw m.setError(ls.subscribe_session_topic_failure),T}m.addTrace(Nr.subscribe_session_topic_success);const N=Lt(Le({},v),{topic:_,requiredNamespaces:y,optionalNamespaces:b,pairingTopic:g,acknowledged:!1,self:v.controller,peer:{publicKey:f.publicKey,metadata:f.metadata},controller:w,transportType:Ke.relay});await this.client.session.set(_,N),m.addTrace(Nr.store_session);try{m.addTrace(Nr.publishing_session_settle),await this.sendRequest({topic:_,method:"wc_sessionSettle",params:v,throwOnFailedPublish:!0}).catch(T=>{throw m==null||m.setError(ls.session_settle_publish_failure),T}),m.addTrace(Nr.session_settle_publish_success),m.addTrace(Nr.publishing_session_approve),await this.sendResult({id:a,topic:g,result:{relay:{protocol:l??"irn"},responderPublicKey:w},throwOnFailedPublish:!0}).catch(T=>{throw m==null||m.setError(ls.session_approve_publish_failure),T}),m.addTrace(Nr.session_approve_publish_success)}catch(T){throw this.client.logger.error(T),this.client.session.delete(_,Ue("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(_),T}return this.client.core.eventClient.deleteEvent({eventId:m.eventId}),await this.client.core.pairing.updateMetadata({topic:g,metadata:f.metadata}),await this.client.proposal.delete(a,Ue("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:g}),await this.setExpiry(_,lt(oi)),{topic:_,acknowledged:()=>Promise.resolve(this.client.session.get(_))}}),B(this,"reject",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:n,reason:s}=r;let i;try{i=this.client.proposal.get(n).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`),o}i&&(await this.sendError({id:n,topic:i,error:s,rpcOpts:gt.wc_sessionPropose.reject}),await this.client.proposal.delete(n,Ue("USER_DISCONNECTED")))}),B(this,"update",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:n,namespaces:s}=r,{done:i,resolve:o,reject:a}=ps(),l=Vr(),c=vs().toString(),u=this.client.session.get(n).namespaces;return this.events.once(xe("session_update",l),({error:d})=>{d?a(d):o()}),await this.client.session.update(n,{namespaces:s}),await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:l,relayRpcId:c}).catch(d=>{this.client.logger.error(d),this.client.session.update(n,{namespaces:u}),a(d)}),{acknowledged:i}}),B(this,"extend",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(l){throw this.client.logger.error("extend() -> isValidExtend() failed"),l}const{topic:n}=r,s=Vr(),{done:i,resolve:o,reject:a}=ps();return this.events.once(xe("session_extend",s),({error:l})=>{l?a(l):o()}),await this.setExpiry(n,lt(oi)),this.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(l=>{a(l)}),{acknowledged:i}}),B(this,"request",async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(b){throw this.client.logger.error("request() -> isValidRequest() failed"),b}const{chainId:n,request:s,topic:i,expiry:o=gt.wc_sessionRequest.req.ttl}=r,a=this.client.session.get(i);(a==null?void 0:a.transportType)===Ke.relay&&await this.confirmOnlineStateOrThrow();const l=Vr(),c=vs().toString(),{done:u,resolve:d,reject:h}=ps(o,"Request expired. Please try again.");this.events.once(xe("session_request",l),({error:b,result:m})=>{b?h(b):d(m)});const p="wc_sessionRequest",g=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(g)return await this.sendRequest({clientRpcId:l,relayRpcId:c,topic:i,method:p,params:{request:Lt(Le({},s),{expiryTimestamp:lt(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0,appLink:g}).catch(b=>h(b)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:n,id:l}),await u();const f={request:Lt(Le({},s),{expiryTimestamp:lt(o)}),chainId:n},y=this.shouldSetTVF(p,f);return await Promise.all([new Promise(async b=>{await this.sendRequest(Le({clientRpcId:l,relayRpcId:c,topic:i,method:p,params:f,expiry:o,throwOnFailedPublish:!0},y&&{tvf:this.getTVFParams(l,f)})).catch(m=>h(m)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:n,id:l}),b()}),new Promise(async b=>{var m;if(!((m=a.sessionConfig)!=null&&m.disableDeepLink)){const w=await oP(this.client.core.storage,Vm);await nP({id:l,topic:i,wcDeepLink:w})}b()}),u()]).then(b=>b[2])}),B(this,"respond",async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:s}=r,{id:i}=s,o=this.client.session.get(n);o.transportType===Ke.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Gr(s)?await this.sendResult({id:i,topic:n,result:s.result,throwOnFailedPublish:!0,appLink:a}):wr(s)&&await this.sendError({id:i,topic:n,error:s.error,appLink:a}),this.cleanupAfterResponse(r)}),B(this,"ping",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:n}=r;if(this.client.session.keys.includes(n)){const s=Vr(),i=vs().toString(),{done:o,resolve:a,reject:l}=ps();this.events.once(xe("session_ping",s),({error:c})=>{c?l(c):a()}),await Promise.all([this.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(n)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:n}))}),B(this,"emit",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);const{topic:n,event:s,chainId:i}=r,o=vs().toString(),a=Vr();await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),B(this,"disconnect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:Ue("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:s}=W("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(s)}}),B(this,"find",r=>(this.isInitialized(),this.client.session.getAll().filter(n=>wO(n,r)))),B(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),B(this,"authenticate",async(r,n)=>{var s;this.isInitialized(),this.isValidAuthenticate(r);const i=n&&this.client.core.linkModeSupportedApps.includes(n)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?Ke.link_mode:Ke.relay;o===Ke.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:l="",uri:c,domain:u,nonce:d,type:h,exp:p,nbf:g,methods:f=[],expiry:y}=r,b=[...r.resources||[]],{topic:m,uri:w}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:m,uri:w}});const C=await this.client.core.crypto.generateKeyPair(),_=Wc(C);if(await Promise.all([this.client.auth.authKeys.set(Gc,{responseTopic:_,publicKey:C}),this.client.auth.pairingTopics.set(_,{topic:_,pairingTopic:m})]),await this.client.core.relayer.subscribe(_,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${m}`),f.length>0){const{namespace:D}=Pi(a[0]);let k=JP(D,"request",f);qc(b)&&(k=XP(k,b.pop())),b.push(k)}const v=y&&y>gt.wc_sessionAuthenticate.req.ttl?y:gt.wc_sessionAuthenticate.req.ttl,A={authPayload:{type:h??"caip122",chains:a,statement:l,aud:c,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:p,nbf:g,resources:b},requester:{publicKey:C,metadata:this.client.metadata},expiryTimestamp:lt(v)},N={eip155:{chains:a,methods:[...new Set(["personal_sign",...f])],events:["chainChanged","accountsChanged"]}},T={requiredNamespaces:{},optionalNamespaces:N,relays:[{protocol:"irn"}],pairingTopic:m,proposer:{publicKey:C,metadata:this.client.metadata},expiryTimestamp:lt(gt.wc_sessionPropose.req.ttl),id:Vr()},{done:O,resolve:x,reject:U}=ps(v,"Request expired"),L=Vr(),M=xe("session_connect",T.id),I=xe("session_request",L),S=async({error:D,session:k})=>{this.events.off(I,R),D?U(D):k&&x({session:k})},R=async D=>{var k,K,X;if(await this.deletePendingAuthRequest(L,{message:"fulfilled",code:0}),D.error){const Ge=Ue("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return D.error.code===Ge.code?void 0:(this.events.off(M,S),U(D.error.message))}await this.deleteProposal(T.id),this.events.off(M,S);const{cacaos:se,responder:te}=D.result,he=[],Ce=[];for(const Ge of se){await jg({cacao:Ge,projectId:this.client.core.projectId})||(this.client.logger.error(Ge,"Signature verification failed"),U(Ue("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:hr}=Ge,Ir=qc(hr.resources),os=[ch(hr.iss)],pc=ll(hr.iss);if(Ir){const ei=zg(Ir),_u=Hg(Ir);he.push(...ei),os.push(..._u)}for(const ei of os)Ce.push(`${ei}:${pc}`)}const Xe=await this.client.core.crypto.generateSharedKey(C,te.publicKey);let rt;he.length>0&&(rt={topic:Xe,acknowledged:!0,self:{publicKey:C,metadata:this.client.metadata},peer:te,controller:te.publicKey,expiry:lt(oi),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:m,namespaces:cm([...new Set(he)],[...new Set(Ce)]),transportType:o},await this.client.core.relayer.subscribe(Xe,{transportType:o}),await this.client.session.set(Xe,rt),m&&await this.client.core.pairing.updateMetadata({topic:m,metadata:te.metadata}),rt=this.client.session.get(Xe)),(k=this.client.metadata.redirect)!=null&&k.linkMode&&(K=te.metadata.redirect)!=null&&K.linkMode&&(X=te.metadata.redirect)!=null&&X.universal&&n&&(this.client.core.addLinkModeSupportedApp(te.metadata.redirect.universal),this.client.session.update(Xe,{transportType:Ke.link_mode})),x({auths:se,session:rt})};this.events.once(M,S),this.events.once(I,R);let $;try{if(i){const D=zn("wc_sessionAuthenticate",A,L);this.client.core.history.set(m,D);const k=await this.client.core.crypto.encode("",D,{type:nc,encoding:wo});$=Cc(n,m,k)}else await Promise.all([this.sendRequest({topic:m,method:"wc_sessionAuthenticate",params:A,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:L}),this.sendRequest({topic:m,method:"wc_sessionPropose",params:T,expiry:gt.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:T.id})])}catch(D){throw this.events.off(M,S),this.events.off(I,R),D}return await this.setProposal(T.id,T),await this.setAuthRequest(L,{request:Lt(Le({},A),{verifyContext:{}}),pairingTopic:m,transportType:o}),{uri:$??w,response:O}}),B(this,"approveSessionAuthenticate",async r=>{const{id:n,auths:s}=r,i=this.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:[us.authenticated_session_approve_started]}});try{this.isInitialized()}catch(y){throw i.setError(Eo.no_internet_connection),y}const o=this.getPendingAuthRequest(n);if(!o)throw i.setError(Eo.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${n}`);const a=o.transportType||Ke.relay;a===Ke.relay&&await this.confirmOnlineStateOrThrow();const l=o.requester.publicKey,c=await this.client.core.crypto.generateKeyPair(),u=Wc(l),d={type:yn,receiverPublicKey:l,senderPublicKey:c},h=[],p=[];for(const y of s){if(!await jg({cacao:y,projectId:this.client.core.projectId})){i.setError(Eo.invalid_cacao);const _=Ue("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:n,topic:u,error:_,encodeOpts:d}),new Error(_.message)}i.addTrace(us.cacaos_verified);const{p:b}=y,m=qc(b.resources),w=[ch(b.iss)],C=ll(b.iss);if(m){const _=zg(m),v=Hg(m);h.push(..._),w.push(...v)}for(const _ of w)p.push(`${_}:${C}`)}const g=await this.client.core.crypto.generateSharedKey(c,l);i.addTrace(us.create_authenticated_session_topic);let f;if((h==null?void 0:h.length)>0){f={topic:g,acknowledged:!0,self:{publicKey:c,metadata:this.client.metadata},peer:{publicKey:l,metadata:o.requester.metadata},controller:l,expiry:lt(oi),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:cm([...new Set(h)],[...new Set(p)]),transportType:a},i.addTrace(us.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(g,{transportType:a})}catch(y){throw i.setError(Eo.subscribe_authenticated_session_topic_failure),y}i.addTrace(us.subscribe_authenticated_session_topic_success),await this.client.session.set(g,f),i.addTrace(us.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(us.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:n,result:{cacaos:s,responder:{publicKey:c,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(y){throw i.setError(Eo.authenticated_session_approve_publish_failure),y}return await this.client.auth.requests.delete(n,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:f}}),B(this,"rejectSessionAuthenticate",async r=>{this.isInitialized();const{id:n,reason:s}=r,i=this.getPendingAuthRequest(n);if(!i)throw new Error(`Could not find pending auth request with id ${n}`);i.transportType===Ke.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),l=Wc(o),c={type:yn,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:n,topic:l,error:s,encodeOpts:c,rpcOpts:gt.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(n,{message:"rejected",code:0}),await this.client.proposal.delete(n,Ue("USER_DISCONNECTED"))}),B(this,"formatAuthMessage",r=>{this.isInitialized();const{request:n,iss:s}=r;return c0(n,s)}),B(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)}),B(this,"cleanupDuplicatePairings",async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&i.topic&&i.topic!==n.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}}),B(this,"deleteSession",async r=>{var n;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=r,{self:l}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Ue("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(l.publicKey)&&await this.client.core.crypto.deleteKeyPair(l.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(Vm).catch(c=>this.client.logger.warn(c)),this.getPendingSessionRequests().forEach(c=>{c.topic===s&&this.deletePendingSessionRequest(c.id,Ue("USER_DISCONNECTED"))}),s===((n=this.sessionRequestQueue.queue[0])==null?void 0:n.topic)&&(this.sessionRequestQueue.state=Hr.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),B(this,"deleteProposal",async(r,n)=>{if(n)try{const s=this.client.proposal.get(r),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(ls.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,Ue("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")}),B(this,"deletePendingSessionRequest",async(r,n,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),s?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==r),s&&(this.sessionRequestQueue.state=Hr.idle,this.client.events.emit("session_request_expire",{id:r}))}),B(this,"deletePendingAuthRequest",async(r,n,s=!1)=>{await Promise.all([this.client.auth.requests.delete(r,n),s?Promise.resolve():this.client.core.expirer.del(r)])}),B(this,"setExpiry",async(r,n)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,n),await this.client.session.update(r,{expiry:n}))}),B(this,"setProposal",async(r,n)=>{this.client.core.expirer.set(r,lt(gt.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,n)}),B(this,"setAuthRequest",async(r,n)=>{const{request:s,pairingTopic:i,transportType:o=Ke.relay}=n;this.client.core.expirer.set(r,s.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:r,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),B(this,"setPendingSessionRequest",async r=>{const{id:n,topic:s,params:i,verifyContext:o}=r,a=i.request.expiryTimestamp||lt(gt.wc_sessionRequest.req.ttl);this.client.core.expirer.set(n,a),await this.client.pendingRequest.set(n,{id:n,topic:s,params:i,verifyContext:o})}),B(this,"sendRequest",async r=>{const{topic:n,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:l,throwOnFailedPublish:c,appLink:u,tvf:d}=r,h=zn(s,i,l);let p;const g=!!u;try{const b=g?wo:jn;p=await this.client.core.crypto.encode(n,h,{encoding:b})}catch(b){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),b}let f;if(_5.includes(s)){const b=Qr(JSON.stringify(h)),m=Qr(p);f=await this.client.core.verify.register({id:m,decryptedId:b})}const y=gt[s].req;if(y.attestation=f,o&&(y.ttl=o),a&&(y.id=a),this.client.core.history.set(n,h),g){const b=Cc(u,n,p);await ce.Linking.openURL(b,this.client.name)}else{const b=gt[s].req;o&&(b.ttl=o),a&&(b.id=a),b.tvf=Lt(Le({},d),{correlationId:h.id}),c?(b.internal=Lt(Le({},b.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,p,b)):this.client.core.relayer.publish(n,p,b).catch(m=>this.client.logger.error(m))}return h.id}),B(this,"sendResult",async r=>{const{id:n,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:l}=r,c=Xl(n,i);let u;const d=l&&typeof(ce==null?void 0:ce.Linking)<"u";try{const g=d?wo:jn;u=await this.client.core.crypto.encode(s,c,Lt(Le({},a||{}),{encoding:g}))}catch(g){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),g}let h,p;try{h=await this.client.core.history.get(s,n);const g=h.request;try{this.shouldSetTVF(g.method,g.params)&&(p=this.getTVFParams(n,g.params,i))}catch(f){this.client.logger.warn("sendResult() -> getTVFParams() failed",f)}}catch(g){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${n}) failed`),g}if(d){const g=Cc(l,s,u);await ce.Linking.openURL(g,this.client.name)}else{const g=h.request.method,f=gt[g].res;f.tvf=Lt(Le({},p),{correlationId:n}),o?(f.internal=Lt(Le({},f.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,f)):this.client.core.relayer.publish(s,u,f).catch(y=>this.client.logger.error(y))}await this.client.core.history.resolve(c)}),B(this,"sendError",async r=>{const{id:n,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:l}=r,c=eu(n,i);let u;const d=l&&typeof(ce==null?void 0:ce.Linking)<"u";try{const p=d?wo:jn;u=await this.client.core.crypto.encode(s,c,Lt(Le({},o||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),p}let h;try{h=await this.client.core.history.get(s,n)}catch(p){throw this.client.logger.error(`sendError() -> history.get(${s}, ${n}) failed`),p}if(d){const p=Cc(l,s,u);await ce.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=a||gt[p].res;this.client.core.relayer.publish(s,u,g)}await this.client.core.history.resolve(c)}),B(this,"cleanup",async()=>{const r=[],n=[];this.client.session.getAll().forEach(s=>{let i=!1;$n(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&r.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{$n(s.expiryTimestamp)&&n.push(s.id)}),await Promise.all([...r.map(s=>this.deleteSession({topic:s})),...n.map(s=>this.deleteProposal(s))])}),B(this,"onProviderMessageEvent",async r=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(r):await this.onRelayMessage(r)}),B(this,"onRelayEventRequest",async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()}),B(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Hr.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Hr.active;const r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=Hr.idle}),B(this,"processRequest",async r=>{const{topic:n,payload:s,attestation:i,transportType:o,encryptedId:a}=r,l=s.method;if(!this.shouldIgnorePairingRequest({topic:n,requestMethod:l}))switch(l){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:n,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(n,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(n,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(n,s);case"wc_sessionPing":return await this.onSessionPingRequest(n,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(n,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:n,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(n,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:n,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${l}`)}}),B(this,"onRelayEventResponse",async r=>{const{topic:n,payload:s,transportType:i}=r,o=(await this.client.core.history.get(n,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,s);case"wc_sessionExtend":return this.onSessionExtendResponse(n,s);case"wc_sessionPing":return this.onSessionPingResponse(n,s);case"wc_sessionRequest":return this.onSessionRequestResponse(n,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(n,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),B(this,"onRelayEventUnknownPayload",r=>{const{topic:n}=r,{message:s}=W("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),B(this,"shouldIgnorePairingRequest",r=>{const{topic:n,requestMethod:s}=r,i=this.expectedPairingMethodMap.get(n);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),B(this,"onSessionProposeRequest",async r=>{const{topic:n,payload:s,attestation:i,encryptedId:o}=r,{params:a,id:l}=s;try{const c=this.client.core.eventClient.getEvent({topic:n});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),c==null||c.setError(gn.proposal_listener_not_found)),this.isValidConnect(Le({},s.params));const u=a.expiryTimestamp||lt(gt.wc_sessionPropose.req.ttl),d=Le({id:l,pairingTopic:n,expiryTimestamp:u},a);await this.setProposal(l,d);const h=await this.getVerifyContext({attestationId:i,hash:Qr(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});c==null||c.addTrace(Wr.emit_session_proposal),this.client.events.emit("session_proposal",{id:l,params:d,verifyContext:h})}catch(c){await this.sendError({id:l,topic:n,error:c,rpcOpts:gt.wc_sessionPropose.autoReject}),this.client.logger.error(c)}}),B(this,"onSessionProposeResponse",async(r,n,s)=>{const{id:i}=n;if(Gr(n)){const{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const l=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:l});const c=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:c});const u=await this.client.core.crypto.generateSharedKey(l,c);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:r,proposalId:i,publicKey:l});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:r})}else if(wr(n)){await this.client.proposal.delete(i,Ue("USER_DISCONNECTED"));const o=xe("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:n.error})}}),B(this,"onSessionSettleRequest",async(r,n)=>{const{id:s,params:i}=n;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:l,namespaces:c,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n.params,p=[...this.pendingSessions.values()].find(y=>y.sessionTopic===r);if(!p)return this.client.logger.error(`Pending session not found for topic ${r}`);const g=this.client.proposal.get(p.proposalId),f=Lt(Le(Le(Le({topic:r,relay:o,expiry:l,namespaces:c,acknowledged:!0,pairingTopic:p.pairingTopic,requiredNamespaces:g.requiredNamespaces,optionalNamespaces:g.optionalNamespaces,controller:a.publicKey,self:{publicKey:p.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:Ke.relay});await this.client.session.set(f.topic,f),await this.setExpiry(f.topic,f.expiry),await this.client.core.pairing.updateMetadata({topic:p.pairingTopic,metadata:f.peer.metadata}),this.client.events.emit("session_connect",{session:f}),this.events.emit(xe("session_connect",p.proposalId),{session:f}),this.pendingSessions.delete(p.proposalId),this.deleteProposal(p.proposalId,!1),this.cleanupDuplicatePairings(f),await this.sendResult({id:n.id,topic:r,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),B(this,"onSessionSettleResponse",async(r,n)=>{const{id:s}=n;Gr(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(xe("session_approve",s),{})):wr(n)&&(await this.client.session.delete(r,Ue("USER_DISCONNECTED")),this.events.emit(xe("session_approve",s),{error:n.error}))}),B(this,"onSessionUpdateRequest",async(r,n)=>{const{params:s,id:i}=n;try{const o=`${r}_session_update`,a=bo.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:r,error:Ue("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Le({topic:r},s));try{bo.set(o,i),await this.client.session.update(r,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0})}catch(l){throw bo.delete(o),l}this.client.events.emit("session_update",{id:i,topic:r,params:s})}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),B(this,"isRequestOutOfSync",(r,n)=>n.toString().slice(0,-3)<r.toString().slice(0,-3)),B(this,"onSessionUpdateResponse",(r,n)=>{const{id:s}=n,i=xe("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Gr(n)?this.events.emit(xe("session_update",s),{}):wr(n)&&this.events.emit(xe("session_update",s),{error:n.error})}),B(this,"onSessionExtendRequest",async(r,n)=>{const{id:s}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,lt(oi)),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:r})}catch(i){await this.sendError({id:s,topic:r,error:i}),this.client.logger.error(i)}}),B(this,"onSessionExtendResponse",(r,n)=>{const{id:s}=n,i=xe("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Gr(n)?this.events.emit(xe("session_extend",s),{}):wr(n)&&this.events.emit(xe("session_extend",s),{error:n.error})}),B(this,"onSessionPingRequest",async(r,n)=>{const{id:s}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:r})}catch(i){await this.sendError({id:s,topic:r,error:i}),this.client.logger.error(i)}}),B(this,"onSessionPingResponse",(r,n)=>{const{id:s}=n,i=xe("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Gr(n)?this.events.emit(xe("session_ping",s),{}):wr(n)&&this.events.emit(xe("session_ping",s),{error:n.error})},500)}),B(this,"onSessionDeleteRequest",async(r,n)=>{const{id:s}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(yt.publish,async()=>{i(await this.deleteSession({topic:r,id:s}))})}),this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:Ue("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),B(this,"onSessionRequest",async r=>{var n,s,i;const{topic:o,payload:a,attestation:l,encryptedId:c,transportType:u}=r,{id:d,params:h}=a;try{await this.isValidRequest(Le({topic:o},h));const p=this.client.session.get(o),g=await this.getVerifyContext({attestationId:l,hash:Qr(JSON.stringify(zn("wc_sessionRequest",h,d))),encryptedId:c,metadata:p.peer.metadata,transportType:u}),f={id:d,topic:o,params:h,verifyContext:g};await this.setPendingSessionRequest(f),u===Ke.link_mode&&(n=p.peer.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp((s=p.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(f):(this.addSessionRequestToSessionRequestQueue(f),this.processSessionRequestQueue())}catch(p){await this.sendError({id:d,topic:o,error:p}),this.client.logger.error(p)}}),B(this,"onSessionRequestResponse",(r,n)=>{const{id:s}=n,i=xe("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Gr(n)?this.events.emit(xe("session_request",s),{result:n.result}):wr(n)&&this.events.emit(xe("session_request",s),{error:n.error})}),B(this,"onSessionEventRequest",async(r,n)=>{const{id:s,params:i}=n;try{const o=`${r}_session_event_${i.event.name}`,a=bo.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Le({topic:r},i)),this.client.events.emit("session_event",{id:s,topic:r,params:i}),bo.set(o,s)}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),B(this,"onSessionAuthenticateResponse",(r,n)=>{const{id:s}=n;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:n}),Gr(n)?this.events.emit(xe("session_request",s),{result:n.result}):wr(n)&&this.events.emit(xe("session_request",s),{error:n.error})}),B(this,"onSessionAuthenticateRequest",async r=>{var n;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:l}=r;try{const{requester:c,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:Qr(JSON.stringify(i)),encryptedId:a,metadata:c.metadata,transportType:l}),p={requester:c,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:p,pairingTopic:s,transportType:l}),l===Ke.link_mode&&(n=c.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp(c.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(c){this.client.logger.error(c);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,l),p={type:yn,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:c,encodeOpts:p,rpcOpts:gt.wc_sessionAuthenticate.autoReject,appLink:h})}}),B(this,"addSessionRequestToSessionRequestQueue",r=>{this.sessionRequestQueue.queue.push(r)}),B(this,"cleanupAfterResponse",r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Hr.idle,this.processSessionRequestQueue()},q.toMiliseconds(this.requestQueueDelay))}),B(this,"cleanupPendingSentRequestsForTopic",({topic:r,error:n})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===r&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=xe("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(xe("session_request",i.request.id),{error:n})})}),B(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Hr.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Hr.active,this.emitSessionRequest(r)}catch(n){this.client.logger.error(n)}}),B(this,"emitSessionRequest",r=>{this.client.events.emit("session_request",r)}),B(this,"onPairingCreated",r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const n=this.client.proposal.getAll().find(s=>s.pairingTopic===r.topic);n&&this.onSessionProposeRequest({topic:r.topic,payload:zn("wc_sessionPropose",Lt(Le({},n),{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties,scopedProperties:n.scopedProperties}),n.id)})}),B(this,"isValidConnect",async r=>{if(!Jt(r)){const{message:c}=W("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(c)}const{pairingTopic:n,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:l}=r;if(Tt(n)||await this.isValidPairingTopic(n),!xO(l)){const{message:c}=W("MISSING_OR_INVALID",`connect() relays: ${l}`);throw new Error(c)}if(!Tt(s)&&oa(s)!==0&&this.validateNamespaces(s,"requiredNamespaces"),!Tt(i)&&oa(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),Tt(o)||this.validateSessionProps(o,"sessionProperties"),!Tt(a)){this.validateSessionProps(a,"scopedProperties");const c=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>c.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(c)}`)}}),B(this,"validateNamespaces",(r,n)=>{const s=PO(r,"connect()",n);if(s)throw new Error(s.message)}),B(this,"isValidApprove",async r=>{if(!Jt(r))throw new Error(W("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=r;this.checkRecentlyDeleted(n),await this.isValidProposalId(n);const l=this.client.proposal.get(n),c=td(s,"approve()");if(c)throw new Error(c.message);const u=dm(l.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!it(i,!0)){const{message:d}=W("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(Tt(o)||this.validateSessionProps(o,"sessionProperties"),!Tt(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),B(this,"isValidReject",async r=>{if(!Jt(r)){const{message:i}=W("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(i)}const{id:n,reason:s}=r;if(this.checkRecentlyDeleted(n),await this.isValidProposalId(n),!RO(s)){const{message:i}=W("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),B(this,"isValidSessionSettleRequest",r=>{if(!Jt(r)){const{message:c}=W("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(c)}const{relay:n,controller:s,namespaces:i,expiry:o}=r;if(!I0(n)){const{message:c}=W("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(c)}const a=_O(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const l=td(i,"onSessionSettleRequest()");if(l)throw new Error(l.message);if($n(o)){const{message:c}=W("EXPIRED","onSessionSettleRequest()");throw new Error(c)}}),B(this,"isValidUpdate",async r=>{if(!Jt(r)){const{message:l}=W("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(l)}const{topic:n,namespaces:s}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const i=this.client.session.get(n),o=td(s,"update()");if(o)throw new Error(o.message);const a=dm(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),B(this,"isValidExtend",async r=>{if(!Jt(r)){const{message:s}=W("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(s)}const{topic:n}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n)}),B(this,"isValidRequest",async r=>{if(!Jt(r)){const{message:l}=W("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(l)}const{topic:n,request:s,chainId:i,expiry:o}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!um(a,i)){const{message:l}=W("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(l)}if(!DO(s)){const{message:l}=W("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(l)}if(!UO(a,i,s.method)){const{message:l}=W("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(l)}if(o&&!LO(o,ld)){const{message:l}=W("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${ld.min} and ${ld.max}`);throw new Error(l)}}),B(this,"isValidRespond",async r=>{var n;if(!Jt(r)){const{message:o}=W("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(o)}const{topic:s,response:i}=r;try{await this.isValidSessionTopic(s)}catch(o){throw(n=r==null?void 0:r.response)!=null&&n.id&&this.cleanupAfterResponse(r),o}if(!kO(i)){const{message:o}=W("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),B(this,"isValidPing",async r=>{if(!Jt(r)){const{message:s}=W("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(s)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),B(this,"isValidEmit",async r=>{if(!Jt(r)){const{message:a}=W("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:s,chainId:i}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!um(o,i)){const{message:a}=W("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!$O(s)){const{message:a}=W("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!MO(o,i,s.name)){const{message:a}=W("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),B(this,"isValidDisconnect",async r=>{if(!Jt(r)){const{message:s}=W("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(s)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),B(this,"isValidAuthenticate",r=>{const{chains:n,uri:s,domain:i,nonce:o}=r;if(!Array.isArray(n)||n.length===0)throw new Error("chains is required and must be a non-empty array");if(!it(s,!1))throw new Error("uri is required parameter");if(!it(i,!1))throw new Error("domain is required parameter");if(!it(o,!1))throw new Error("nonce is required parameter");if([...new Set(n.map(l=>Pi(l).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Pi(n[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),B(this,"getVerifyContext",async r=>{const{attestationId:n,hash:s,encryptedId:i,metadata:o,transportType:a}=r,l={verified:{verifyUrl:o.verifyUrl||zo,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Ke.link_mode){const u=this.getAppLinkIfEnabled(o,a);return l.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",l}const c=await this.client.core.verify.resolve({attestationId:n,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});c&&(l.verified.origin=c.origin,l.verified.isScam=c.isScam,l.verified.validation=c.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(c){this.client.logger.warn(c)}return this.client.logger.debug(`Verify context: ${JSON.stringify(l)}`),l}),B(this,"validateSessionProps",(r,n)=>{Object.values(r).forEach((s,i)=>{if(s==null){const{message:o}=W("MISSING_OR_INVALID",`${n} must contain an existing value for each key. Received: ${s} for key ${Object.keys(r)[i]}`);throw new Error(o)}})}),B(this,"getPendingAuthRequest",r=>{const n=this.client.auth.requests.get(r);return typeof n=="object"?n:void 0}),B(this,"addToRecentlyDeleted",(r,n)=>{if(this.recentlyDeletedMap.set(r,n),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),B(this,"checkRecentlyDeleted",r=>{const n=this.recentlyDeletedMap.get(r);if(n){const{message:s}=W("MISSING_OR_INVALID",`Record was recently deleted - ${n}: ${r}`);throw new Error(s)}}),B(this,"isLinkModeEnabled",(r,n)=>{var s,i,o,a,l,c,u,d,h;return!r||n!==Ke.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((c=(l=this.client.metadata)==null?void 0:l.redirect)==null?void 0:c.universal)!==""&&((u=r==null?void 0:r.redirect)==null?void 0:u.universal)!==void 0&&((d=r==null?void 0:r.redirect)==null?void 0:d.universal)!==""&&((h=r==null?void 0:r.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof(ce==null?void 0:ce.Linking)<"u"}),B(this,"getAppLinkIfEnabled",(r,n)=>{var s;return this.isLinkModeEnabled(r,n)?(s=r==null?void 0:r.redirect)==null?void 0:s.universal:void 0}),B(this,"handleLinkModeMessage",({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;const n=Rg(r,"topic")||"",s=decodeURIComponent(Rg(r,"wc_ev")||""),i=this.client.session.keys.includes(n);i&&this.client.session.update(n,{transportType:Ke.link_mode}),this.client.core.dispatchEnvelope({topic:n,message:s,sessionExists:i})}),B(this,"registerLinkModeListeners",async()=>{var r;if(_p()||ss()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){const n=ce==null?void 0:ce.Linking;if(typeof n<"u"){n.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await n.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),B(this,"shouldSetTVF",(r,n)=>{if(!n||r!=="wc_sessionRequest")return!1;const{request:s}=n;return Object.keys(Km).includes(s.method)}),B(this,"getTVFParams",(r,n,s)=>{var i,o;try{const a=n.request.method,l=this.extractTxHashesFromResult(a,s);return Lt(Le({correlationId:r,rpcMethods:[a],chainId:n.chainId},this.isValidContractData(n.request.params)&&{contractAddresses:[(o=(i=n.request.params)==null?void 0:i[0])==null?void 0:o.to]}),{txHashes:l})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),B(this,"isValidContractData",r=>{var n;if(!r)return!1;try{const s=(r==null?void 0:r.data)||((n=r==null?void 0:r[0])==null?void 0:n.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),B(this,"extractTxHashesFromResult",(r,n)=>{try{const s=Km[r];if(typeof n=="string")return[n];const i=n[s.key];if(Ms(i))return r==="solana_signAllTransactions"?i.map(o=>MP(o)):i;if(typeof i=="string")return[i]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,r=this.client.core.relayer.messages.getWithoutAck(e);for(const[n,s]of Object.entries(r))for(const i of s)try{await this.onProviderMessageEvent({topic:n,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${n}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=W("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(yt.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:r,message:n,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(Gc)?this.client.auth.authKeys.get(Gc):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(r,n,{receiverPublicKey:o,encoding:i===Ke.link_mode?wo:jn});Dp(a)?(this.client.core.history.set(r,a),await this.onRelayEventRequest({topic:r,payload:a,attestation:s,transportType:i,encryptedId:Qr(n)})):tu(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a,transportType:i}),this.client.core.history.delete(r,a.id)):await this.onRelayEventUnknownPayload({topic:r,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(r,n)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(yr.expired,async e=>{const{topic:r,id:n}=Xb(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,W("EXPIRED"),!0);if(n&&this.client.auth.requests.keys.includes(n))return await this.deletePendingAuthRequest(n,W("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(ys.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(ys.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!it(e,!1)){const{message:r}=W("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=W("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if($n(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=W("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!it(e,!1)){const{message:r}=W("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:r}=W("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if($n(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=W("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=W("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(it(e,!1)){const{message:r}=W("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=W("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!OO(e)){const{message:r}=W("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=W("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if($n(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=W("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class $5 extends Zs{constructor(e,r){super(e,r,b5,kp),this.core=e,this.logger=r}}let U5=class extends Zs{constructor(e,r){super(e,r,v5,kp),this.core=e,this.logger=r}};class M5 extends Zs{constructor(e,r){super(e,r,A5,kp,n=>n.id),this.core=e,this.logger=r}}class F5 extends Zs{constructor(e,r){super(e,r,S5,nu,()=>Gc),this.core=e,this.logger=r}}class B5 extends Zs{constructor(e,r){super(e,r,T5,nu),this.core=e,this.logger=r}}class L5 extends Zs{constructor(e,r){super(e,r,N5,nu,n=>n.id),this.core=e,this.logger=r}}var j5=Object.defineProperty,z5=(t,e,r)=>e in t?j5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ud=(t,e,r)=>z5(t,typeof e!="symbol"?e+"":e,r);class H5{constructor(e,r){this.core=e,this.logger=r,ud(this,"authKeys"),ud(this,"pairingTopics"),ud(this,"requests"),this.authKeys=new F5(this.core,this.logger),this.pairingTopics=new B5(this.core,this.logger),this.requests=new L5(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var q5=Object.defineProperty,W5=(t,e,r)=>e in t?q5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ae=(t,e,r)=>W5(t,typeof e!="symbol"?e+"":e,r);let V5=class J0 extends xC{constructor(e){super(e),Ae(this,"protocol",K0),Ae(this,"version",Q0),Ae(this,"name",cd.name),Ae(this,"metadata"),Ae(this,"core"),Ae(this,"logger"),Ae(this,"events",new Er.EventEmitter),Ae(this,"engine"),Ae(this,"session"),Ae(this,"proposal"),Ae(this,"pendingRequest"),Ae(this,"auth"),Ae(this,"signConfig"),Ae(this,"on",(n,s)=>this.events.on(n,s)),Ae(this,"once",(n,s)=>this.events.once(n,s)),Ae(this,"off",(n,s)=>this.events.off(n,s)),Ae(this,"removeListener",(n,s)=>this.events.removeListener(n,s)),Ae(this,"removeAllListeners",n=>this.events.removeAllListeners(n)),Ae(this,"connect",async n=>{try{return await this.engine.connect(n)}catch(s){throw this.logger.error(s.message),s}}),Ae(this,"pair",async n=>{try{return await this.engine.pair(n)}catch(s){throw this.logger.error(s.message),s}}),Ae(this,"approve",async n=>{try{return await this.engine.approve(n)}catch(s){throw this.logger.error(s.message),s}}),Ae(this,"reject",async n=>{try{return await this.engine.reject(n)}catch(s){throw this.logger.error(s.message),s}}),Ae(this,"update",async n=>{try{return await this.engine.update(n)}catch(s){throw this.logger.error(s.message),s}}),Ae(this,"extend",async n=>{try{return await this.engine.extend(n)}catch(s){throw this.logger.error(s.message),s}}),Ae(this,"request",async n=>{try{return await this.engine.request(n)}catch(s){throw this.logger.error(s.message),s}}),Ae(this,"respond",async n=>{try{return await this.engine.respond(n)}catch(s){throw this.logger.error(s.message),s}}),Ae(this,"ping",async n=>{try{return await this.engine.ping(n)}catch(s){throw this.logger.error(s.message),s}}),Ae(this,"emit",async n=>{try{return await this.engine.emit(n)}catch(s){throw this.logger.error(s.message),s}}),Ae(this,"disconnect",async n=>{try{return await this.engine.disconnect(n)}catch(s){throw this.logger.error(s.message),s}}),Ae(this,"find",n=>{try{return this.engine.find(n)}catch(s){throw this.logger.error(s.message),s}}),Ae(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}}),Ae(this,"authenticate",async(n,s)=>{try{return await this.engine.authenticate(n,s)}catch(i){throw this.logger.error(i.message),i}}),Ae(this,"formatAuthMessage",n=>{try{return this.engine.formatAuthMessage(n)}catch(s){throw this.logger.error(s.message),s}}),Ae(this,"approveSessionAuthenticate",async n=>{try{return await this.engine.approveSessionAuthenticate(n)}catch(s){throw this.logger.error(s.message),s}}),Ae(this,"rejectSessionAuthenticate",async n=>{try{return await this.engine.rejectSessionAuthenticate(n)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||cd.name,this.metadata=(e==null?void 0:e.metadata)||Yb(),this.signConfig=e==null?void 0:e.signConfig;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Qa(Ji({level:(e==null?void 0:e.logger)||cd.logger}));this.core=(e==null?void 0:e.core)||new w5(e),this.logger=Bt(r,this.name),this.session=new U5(this.core,this.logger),this.proposal=new $5(this.core,this.logger),this.pendingRequest=new M5(this.core,this.logger),this.engine=new k5(this),this.auth=new H5(this.core,this.logger)}static async init(e){const r=new J0(e);return await r.initialize(),r}get context(){return rr(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},q.toMiliseconds(q.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var Sc={exports:{}},Ym;function G5(){return Ym||(Ym=1,function(t,e){var r=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Kr<"u"&&Kr,n=function(){function i(){this.fetch=!1,this.DOMException=r.DOMException}return i.prototype=r,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof Kr<"u"&&Kr||{},l={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function c(I){return I&&DataView.prototype.isPrototypeOf(I)}if(l.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(I){return I&&u.indexOf(Object.prototype.toString.call(I))>-1};function h(I){if(typeof I!="string"&&(I=String(I)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(I)||I==="")throw new TypeError('Invalid character in header field name: "'+I+'"');return I.toLowerCase()}function p(I){return typeof I!="string"&&(I=String(I)),I}function g(I){var S={next:function(){var R=I.shift();return{done:R===void 0,value:R}}};return l.iterable&&(S[Symbol.iterator]=function(){return S}),S}function f(I){this.map={},I instanceof f?I.forEach(function(S,R){this.append(R,S)},this):Array.isArray(I)?I.forEach(function(S){if(S.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+S.length);this.append(S[0],S[1])},this):I&&Object.getOwnPropertyNames(I).forEach(function(S){this.append(S,I[S])},this)}f.prototype.append=function(I,S){I=h(I),S=p(S);var R=this.map[I];this.map[I]=R?R+", "+S:S},f.prototype.delete=function(I){delete this.map[h(I)]},f.prototype.get=function(I){return I=h(I),this.has(I)?this.map[I]:null},f.prototype.has=function(I){return this.map.hasOwnProperty(h(I))},f.prototype.set=function(I,S){this.map[h(I)]=p(S)},f.prototype.forEach=function(I,S){for(var R in this.map)this.map.hasOwnProperty(R)&&I.call(S,this.map[R],R,this)},f.prototype.keys=function(){var I=[];return this.forEach(function(S,R){I.push(R)}),g(I)},f.prototype.values=function(){var I=[];return this.forEach(function(S){I.push(S)}),g(I)},f.prototype.entries=function(){var I=[];return this.forEach(function(S,R){I.push([R,S])}),g(I)},l.iterable&&(f.prototype[Symbol.iterator]=f.prototype.entries);function y(I){if(!I._noBody){if(I.bodyUsed)return Promise.reject(new TypeError("Already read"));I.bodyUsed=!0}}function b(I){return new Promise(function(S,R){I.onload=function(){S(I.result)},I.onerror=function(){R(I.error)}})}function m(I){var S=new FileReader,R=b(S);return S.readAsArrayBuffer(I),R}function w(I){var S=new FileReader,R=b(S),$=/charset=([A-Za-z0-9_-]+)/.exec(I.type),D=$?$[1]:"utf-8";return S.readAsText(I,D),R}function C(I){for(var S=new Uint8Array(I),R=new Array(S.length),$=0;$<S.length;$++)R[$]=String.fromCharCode(S[$]);return R.join("")}function _(I){if(I.slice)return I.slice(0);var S=new Uint8Array(I.byteLength);return S.set(new Uint8Array(I)),S.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(I){this.bodyUsed=this.bodyUsed,this._bodyInit=I,I?typeof I=="string"?this._bodyText=I:l.blob&&Blob.prototype.isPrototypeOf(I)?this._bodyBlob=I:l.formData&&FormData.prototype.isPrototypeOf(I)?this._bodyFormData=I:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)?this._bodyText=I.toString():l.arrayBuffer&&l.blob&&c(I)?(this._bodyArrayBuffer=_(I.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(I)||d(I))?this._bodyArrayBuffer=_(I):this._bodyText=I=Object.prototype.toString.call(I):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof I=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var I=y(this);if(I)return I;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var I=y(this);return I||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(l.blob)return this.blob().then(m);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var I=y(this);if(I)return I;if(this._bodyBlob)return w(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(C(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(O)}),this.json=function(){return this.text().then(JSON.parse)},this}var A=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function N(I){var S=I.toUpperCase();return A.indexOf(S)>-1?S:I}function T(I,S){if(!(this instanceof T))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');S=S||{};var R=S.body;if(I instanceof T){if(I.bodyUsed)throw new TypeError("Already read");this.url=I.url,this.credentials=I.credentials,S.headers||(this.headers=new f(I.headers)),this.method=I.method,this.mode=I.mode,this.signal=I.signal,!R&&I._bodyInit!=null&&(R=I._bodyInit,I.bodyUsed=!0)}else this.url=String(I);if(this.credentials=S.credentials||this.credentials||"same-origin",(S.headers||!this.headers)&&(this.headers=new f(S.headers)),this.method=N(S.method||this.method||"GET"),this.mode=S.mode||this.mode||null,this.signal=S.signal||this.signal||function(){if("AbortController"in a){var k=new AbortController;return k.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&R)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(R),(this.method==="GET"||this.method==="HEAD")&&(S.cache==="no-store"||S.cache==="no-cache")){var $=/([?&])_=[^&]*/;if($.test(this.url))this.url=this.url.replace($,"$1_="+new Date().getTime());else{var D=/\?/;this.url+=(D.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}T.prototype.clone=function(){return new T(this,{body:this._bodyInit})};function O(I){var S=new FormData;return I.trim().split("&").forEach(function(R){if(R){var $=R.split("="),D=$.shift().replace(/\+/g," "),k=$.join("=").replace(/\+/g," ");S.append(decodeURIComponent(D),decodeURIComponent(k))}}),S}function x(I){var S=new f,R=I.replace(/\r?\n[\t ]+/g," ");return R.split("\r").map(function($){return $.indexOf(`
`)===0?$.substr(1,$.length):$}).forEach(function($){var D=$.split(":"),k=D.shift().trim();if(k){var K=D.join(":").trim();try{S.append(k,K)}catch(X){console.warn("Response "+X.message)}}}),S}v.call(T.prototype);function U(I,S){if(!(this instanceof U))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(S||(S={}),this.type="default",this.status=S.status===void 0?200:S.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=S.statusText===void 0?"":""+S.statusText,this.headers=new f(S.headers),this.url=S.url||"",this._initBody(I)}v.call(U.prototype),U.prototype.clone=function(){return new U(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},U.error=function(){var I=new U(null,{status:200,statusText:""});return I.ok=!1,I.status=0,I.type="error",I};var L=[301,302,303,307,308];U.redirect=function(I,S){if(L.indexOf(S)===-1)throw new RangeError("Invalid status code");return new U(null,{status:S,headers:{location:I}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(S,R){this.message=S,this.name=R;var $=Error(S);this.stack=$.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function M(I,S){return new Promise(function(R,$){var D=new T(I,S);if(D.signal&&D.signal.aborted)return $(new o.DOMException("Aborted","AbortError"));var k=new XMLHttpRequest;function K(){k.abort()}k.onload=function(){var te={statusText:k.statusText,headers:x(k.getAllResponseHeaders()||"")};D.url.indexOf("file://")===0&&(k.status<200||k.status>599)?te.status=200:te.status=k.status,te.url="responseURL"in k?k.responseURL:te.headers.get("X-Request-URL");var he="response"in k?k.response:k.responseText;setTimeout(function(){R(new U(he,te))},0)},k.onerror=function(){setTimeout(function(){$(new TypeError("Network request failed"))},0)},k.ontimeout=function(){setTimeout(function(){$(new TypeError("Network request timed out"))},0)},k.onabort=function(){setTimeout(function(){$(new o.DOMException("Aborted","AbortError"))},0)};function X(te){try{return te===""&&a.location.href?a.location.href:te}catch{return te}}if(k.open(D.method,X(D.url),!0),D.credentials==="include"?k.withCredentials=!0:D.credentials==="omit"&&(k.withCredentials=!1),"responseType"in k&&(l.blob?k.responseType="blob":l.arrayBuffer&&(k.responseType="arraybuffer")),S&&typeof S.headers=="object"&&!(S.headers instanceof f||a.Headers&&S.headers instanceof a.Headers)){var se=[];Object.getOwnPropertyNames(S.headers).forEach(function(te){se.push(h(te)),k.setRequestHeader(te,p(S.headers[te]))}),D.headers.forEach(function(te,he){se.indexOf(he)===-1&&k.setRequestHeader(he,te)})}else D.headers.forEach(function(te,he){k.setRequestHeader(he,te)});D.signal&&(D.signal.addEventListener("abort",K),k.onreadystatechange=function(){k.readyState===4&&D.signal.removeEventListener("abort",K)}),k.send(typeof D._bodyInit>"u"?null:D._bodyInit)})}return M.polyfill=!0,a.fetch||(a.fetch=M,a.Headers=f,a.Request=T,a.Response=U),o.Headers=f,o.Request=T,o.Response=U,o.fetch=M,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var s=r.fetch?r:n;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e}(Sc,Sc.exports)),Sc.exports}var K5=G5();const Jm=hp(K5);var Q5=Object.defineProperty,Y5=Object.defineProperties,J5=Object.getOwnPropertyDescriptors,Zm=Object.getOwnPropertySymbols,Z5=Object.prototype.hasOwnProperty,X5=Object.prototype.propertyIsEnumerable,Xm=(t,e,r)=>e in t?Q5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ey=(t,e)=>{for(var r in e||(e={}))Z5.call(e,r)&&Xm(t,r,e[r]);if(Zm)for(var r of Zm(e))X5.call(e,r)&&Xm(t,r,e[r]);return t},ty=(t,e)=>Y5(t,J5(e));const e$={Accept:"application/json","Content-Type":"application/json"},t$="POST",ry={headers:e$,method:t$},ny=10;let Fr=class{constructor(e,r=!1){if(this.url=e,this.disableProviderPing=r,this.events=new Er.EventEmitter,this.isAvailable=!1,this.registering=!1,!wm(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const r=An(e),n=await(await Jm(this.url,ty(ey({},ry),{body:r}))).json();this.onPayload({data:n})}catch(r){this.onError(e.id,r)}}async register(e=this.url){if(!wm(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));n()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const r=An({id:1,jsonrpc:"2.0",method:"test",params:[]});await Jm(e,ty(ey({},ry),{body:r}))}this.onOpen()}catch(r){const n=this.parseError(r);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Rs(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),s=n.message||n.toString(),i=eu(e,s);this.events.emit("payload",i)}parseError(e,r=this.url){return N0(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>ny&&this.events.setMaxListeners(ny)}};const sy="error",r$="wss://relay.walletconnect.org",n$="wc",s$="universal_provider",Tc=`${n$}@2:${s$}:`,Z0="https://rpc.walletconnect.org/v1/",Ei="generic",i$=`${Z0}bundler`,Cr={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function o$(){}function $p(t){return t==null||typeof t!="object"&&typeof t!="function"}function Up(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function a$(t){if($p(t))return t;if(Array.isArray(t)||Up(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),r=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new r(t);if(t instanceof RegExp){const n=new r(t);return n.lastIndex=t.lastIndex,n}if(t instanceof DataView)return new r(t.buffer.slice(0));if(t instanceof Error){const n=new r(t.message);return n.stack=t.stack,n.name=t.name,n.cause=t.cause,n}if(typeof File<"u"&&t instanceof File)return new r([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const n=Object.create(e);return Object.assign(n,t)}return t}function iy(t){return typeof t=="object"&&t!==null}function X0(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function ev(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const c$="[object RegExp]",tv="[object String]",rv="[object Number]",nv="[object Boolean]",sv="[object Arguments]",l$="[object Symbol]",u$="[object Date]",d$="[object Map]",h$="[object Set]",p$="[object Array]",f$="[object ArrayBuffer]",g$="[object Object]",m$="[object DataView]",y$="[object Uint8Array]",w$="[object Uint8ClampedArray]",b$="[object Uint16Array]",v$="[object Uint32Array]",E$="[object Int8Array]",A$="[object Int16Array]",_$="[object Int32Array]",C$="[object Float32Array]",I$="[object Float64Array]";function S$(t,e){return Si(t,void 0,t,new Map,e)}function Si(t,e,r,n=new Map,s=void 0){const i=s==null?void 0:s(t,e,r,n);if(i!=null)return i;if($p(t))return t;if(n.has(t))return n.get(t);if(Array.isArray(t)){const o=new Array(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=Si(t[a],a,r,n,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;n.set(t,o);for(const[a,l]of t)o.set(a,Si(l,a,r,n,s));return o}if(t instanceof Set){const o=new Set;n.set(t,o);for(const a of t)o.add(Si(a,void 0,r,n,s));return o}if(typeof Et<"u"&&Et.isBuffer(t))return t.subarray();if(Up(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=Si(t[a],a,r,n,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return n.set(t,o),ws(o,t,r,n,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return n.set(t,o),ws(o,t,r,n,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return n.set(t,o),ws(o,t,r,n,s),o}if(t instanceof Error){const o=new t.constructor;return n.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,ws(o,t,r,n,s),o}if(typeof t=="object"&&T$(t)){const o=Object.create(Object.getPrototypeOf(t));return n.set(t,o),ws(o,t,r,n,s),o}return t}function ws(t,e,r=t,n,s){const i=[...Object.keys(e),...X0(e)];for(let o=0;o<i.length;o++){const a=i[o],l=Object.getOwnPropertyDescriptor(t,a);(l==null||l.writable)&&(t[a]=Si(e[a],a,r,n,s))}}function T$(t){switch(ev(t)){case sv:case p$:case f$:case m$:case nv:case u$:case C$:case I$:case E$:case A$:case _$:case d$:case rv:case g$:case c$:case h$:case tv:case l$:case y$:case w$:case b$:case v$:return!0;default:return!1}}function N$(t,e){return S$(t,(r,n,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case rv:case tv:case nv:{const o=new t.constructor(t==null?void 0:t.valueOf());return ws(o,t),o}case sv:{const o={};return ws(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function oy(t){return N$(t)}function ay(t){return t!==null&&typeof t=="object"&&ev(t)==="[object Arguments]"}function P$(t){return Up(t)}function x$(t){var r;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const n=t[Symbol.toStringTag];return n==null||!((r=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&r.writable)?!1:t.toString()===`[object ${n}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function O$(t,...e){const r=e.slice(0,-1),n=e[e.length-1];let s=t;for(let i=0;i<r.length;i++){const o=r[i];s=xh(s,o,n,new Map)}return s}function xh(t,e,r,n){if($p(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(n.has(e))return a$(n.get(e));if(n.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...X0(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],l=t[o];if(ay(a)&&(a={...a}),ay(l)&&(l={...l}),typeof Et<"u"&&Et.isBuffer(a)&&(a=oy(a)),Array.isArray(a))if(typeof l=="object"&&l!=null){const u=[],d=Reflect.ownKeys(l);for(let h=0;h<d.length;h++){const p=d[h];u[p]=l[p]}l=u}else l=[];const c=r(l,a,o,t,e,n);c!=null?t[o]=c:Array.isArray(a)||iy(l)&&iy(a)?t[o]=xh(l,a,r,n):l==null&&x$(a)?t[o]=xh({},a,r,n):l==null&&P$(a)?t[o]=oy(a):(l===void 0||a!==void 0)&&(t[o]=a)}return t}function R$(t,...e){return O$(t,...e,o$)}var D$=Object.defineProperty,k$=Object.defineProperties,$$=Object.getOwnPropertyDescriptors,cy=Object.getOwnPropertySymbols,U$=Object.prototype.hasOwnProperty,M$=Object.prototype.propertyIsEnumerable,ly=(t,e,r)=>e in t?D$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Nc=(t,e)=>{for(var r in e||(e={}))U$.call(e,r)&&ly(t,r,e[r]);if(cy)for(var r of cy(e))M$.call(e,r)&&ly(t,r,e[r]);return t},F$=(t,e)=>k$(t,$$(e));function dr(t,e,r){var n;const s=Pi(t);return((n=e.rpcMap)==null?void 0:n[s.reference])||`${Z0}?chainId=${s.namespace}:${s.reference}&projectId=${r}`}function Xs(t){return t.includes(":")?t.split(":")[1]:t}function iv(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function B$(t,e){const r=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!r.length)return[];const n=[];return r.forEach(s=>{const i=e.namespaces[s].accounts;n.push(...i)}),n}function dd(t={},e={}){const r=uy(t),n=uy(e);return R$(r,n)}function uy(t){var e,r,n,s;const i={};if(!oa(t))return i;for(const[o,a]of Object.entries(t)){const l=xp(o)?[o]:a.chains,c=a.methods||[],u=a.events||[],d=a.rpcMap||{},h=Mo(o);i[h]=F$(Nc(Nc({},i[h]),a),{chains:Hc(l,(e=i[h])==null?void 0:e.chains),methods:Hc(c,(r=i[h])==null?void 0:r.methods),events:Hc(u,(n=i[h])==null?void 0:n.events),rpcMap:Nc(Nc({},d),(s=i[h])==null?void 0:s.rpcMap)})}return i}function L$(t){return t.includes(":")?t.split(":")[2]:t}function dy(t){const e={};for(const[r,n]of Object.entries(t)){const s=n.methods||[],i=n.events||[],o=n.accounts||[],a=xp(r)?[r]:n.chains?n.chains:iv(n.accounts);e[r]={chains:a,methods:s,events:i,accounts:o}}return e}function hd(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const ov={},Ne=t=>ov[t],pd=(t,e)=>{ov[t]=e};var j$=Object.defineProperty,z$=(t,e,r)=>e in t?j$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ai=(t,e,r)=>z$(t,typeof e!="symbol"?e+"":e,r);class H${constructor(e){ai(this,"name","polkadot"),ai(this,"client"),ai(this,"httpProviders"),ai(this,"events"),ai(this,"namespace"),ai(this,"chainId"),this.namespace=e.namespace,this.events=Ne("events"),this.client=Ne("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Cr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=Xs(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||dr(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new _r(new Fr(n,Ne("disableProviderPing")))}}var q$=Object.defineProperty,W$=Object.defineProperties,V$=Object.getOwnPropertyDescriptors,hy=Object.getOwnPropertySymbols,G$=Object.prototype.hasOwnProperty,K$=Object.prototype.propertyIsEnumerable,Oh=(t,e,r)=>e in t?q$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,py=(t,e)=>{for(var r in e||(e={}))G$.call(e,r)&&Oh(t,r,e[r]);if(hy)for(var r of hy(e))K$.call(e,r)&&Oh(t,r,e[r]);return t},fy=(t,e)=>W$(t,V$(e)),ci=(t,e,r)=>Oh(t,typeof e!="symbol"?e+"":e,r);class Q${constructor(e){ci(this,"name","eip155"),ci(this,"client"),ci(this,"chainId"),ci(this,"namespace"),ci(this,"httpProviders"),ci(this,"events"),this.namespace=e.namespace,this.events=Ne("events"),this.client=Ne("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(parseInt(e),r),this.chainId=parseInt(e),this.events.emit(Cr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const n=r||dr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new _r(new Fr(n,Ne("disableProviderPing")))}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=parseInt(Xs(r));e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}async handleSwitchChain(e){var r,n;let s=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var r,n,s;const i=(n=(r=e.request)==null?void 0:r.params)==null?void 0:n[0];if(!i)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const o=this.client.session.get(e.topic),a=((s=o==null?void 0:o.sessionProperties)==null?void 0:s.capabilities)||{};if(a!=null&&a[i])return a==null?void 0:a[i];const l=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:fy(py({},o.sessionProperties||{}),{capabilities:fy(py({},a||{}),{[i]:l})})})}catch(c){console.warn("Failed to update session with capabilities",c)}return l}async getCallStatus(e){var r,n;const s=this.client.session.get(e.topic),i=(r=s.sessionProperties)==null?void 0:r.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(l){console.warn("Failed to fetch call status from bundler",l,a)}}const o=(n=s.sessionProperties)==null?void 0:n.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,r){var n;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(zn("eth_getUserOperationReceipt",[(n=r.request.params)==null?void 0:n[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,r){return`${i$}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${r}`}}var Y$=Object.defineProperty,J$=(t,e,r)=>e in t?Y$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,li=(t,e,r)=>J$(t,typeof e!="symbol"?e+"":e,r);class Z${constructor(e){li(this,"name","solana"),li(this,"client"),li(this,"httpProviders"),li(this,"events"),li(this,"namespace"),li(this,"chainId"),this.namespace=e.namespace,this.events=Ne("events"),this.client=Ne("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Cr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=Xs(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||dr(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new _r(new Fr(n,Ne("disableProviderPing")))}}var X$=Object.defineProperty,eU=(t,e,r)=>e in t?X$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ui=(t,e,r)=>eU(t,typeof e!="symbol"?e+"":e,r);class tU{constructor(e){ui(this,"name","cosmos"),ui(this,"client"),ui(this,"httpProviders"),ui(this,"events"),ui(this,"namespace"),ui(this,"chainId"),this.namespace=e.namespace,this.events=Ne("events"),this.client=Ne("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Cr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=Xs(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||dr(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new _r(new Fr(n,Ne("disableProviderPing")))}}var rU=Object.defineProperty,nU=(t,e,r)=>e in t?rU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,di=(t,e,r)=>nU(t,typeof e!="symbol"?e+"":e,r);class sU{constructor(e){di(this,"name","algorand"),di(this,"client"),di(this,"httpProviders"),di(this,"events"),di(this,"namespace"),di(this,"chainId"),this.namespace=e.namespace,this.events=Ne("events"),this.client=Ne("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const n=r||dr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.chainId=e,this.events.emit(Cr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||dr(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new _r(new Fr(n,Ne("disableProviderPing")))}}var iU=Object.defineProperty,oU=(t,e,r)=>e in t?iU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,hi=(t,e,r)=>oU(t,typeof e!="symbol"?e+"":e,r);class aU{constructor(e){hi(this,"name","cip34"),hi(this,"client"),hi(this,"httpProviders"),hi(this,"events"),hi(this,"namespace"),hi(this,"chainId"),this.namespace=e.namespace,this.events=Ne("events"),this.client=Ne("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Cr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{const n=this.getCardanoRPCUrl(r),s=Xs(r);e[s]=this.createHttpProvider(s,n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}getCardanoRPCUrl(e){const r=this.namespace.rpcMap;if(r)return r[e]}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||this.getCardanoRPCUrl(e);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new _r(new Fr(n,Ne("disableProviderPing")))}}var cU=Object.defineProperty,lU=(t,e,r)=>e in t?cU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,pi=(t,e,r)=>lU(t,typeof e!="symbol"?e+"":e,r);class uU{constructor(e){pi(this,"name","elrond"),pi(this,"client"),pi(this,"httpProviders"),pi(this,"events"),pi(this,"namespace"),pi(this,"chainId"),this.namespace=e.namespace,this.events=Ne("events"),this.client=Ne("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Cr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=Xs(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||dr(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new _r(new Fr(n,Ne("disableProviderPing")))}}var dU=Object.defineProperty,hU=(t,e,r)=>e in t?dU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,fi=(t,e,r)=>hU(t,typeof e!="symbol"?e+"":e,r);class pU{constructor(e){fi(this,"name","multiversx"),fi(this,"client"),fi(this,"httpProviders"),fi(this,"events"),fi(this,"namespace"),fi(this,"chainId"),this.namespace=e.namespace,this.events=Ne("events"),this.client=Ne("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Cr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=Xs(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||dr(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new _r(new Fr(n,Ne("disableProviderPing")))}}var fU=Object.defineProperty,gU=(t,e,r)=>e in t?fU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,gi=(t,e,r)=>gU(t,typeof e!="symbol"?e+"":e,r);class mU{constructor(e){gi(this,"name","near"),gi(this,"client"),gi(this,"httpProviders"),gi(this,"events"),gi(this,"namespace"),gi(this,"chainId"),this.namespace=e.namespace,this.events=Ne("events"),this.client=Ne("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||dr(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(Cr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||dr(e,this.namespace);return typeof n>"u"?void 0:new _r(new Fr(n,Ne("disableProviderPing")))}}var yU=Object.defineProperty,wU=(t,e,r)=>e in t?yU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mi=(t,e,r)=>wU(t,typeof e!="symbol"?e+"":e,r);class bU{constructor(e){mi(this,"name","tezos"),mi(this,"client"),mi(this,"httpProviders"),mi(this,"events"),mi(this,"namespace"),mi(this,"chainId"),this.namespace=e.namespace,this.events=Ne("events"),this.client=Ne("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||dr(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(Cr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||dr(e,this.namespace);return typeof n>"u"?void 0:new _r(new Fr(n))}}var vU=Object.defineProperty,EU=(t,e,r)=>e in t?vU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,yi=(t,e,r)=>EU(t,typeof e!="symbol"?e+"":e,r);class AU{constructor(e){yi(this,"name",Ei),yi(this,"client"),yi(this,"httpProviders"),yi(this,"events"),yi(this,"namespace"),yi(this,"chainId"),this.namespace=e.namespace,this.events=Ne("events"),this.client=Ne("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Cr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){var e,r;const n={};return(r=(e=this.namespace)==null?void 0:e.accounts)==null||r.forEach(s=>{const i=Pi(s);n[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),n}getHttpProvider(e){const r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||dr(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new _r(new Fr(n,Ne("disableProviderPing")))}}var _U=Object.defineProperty,CU=Object.defineProperties,IU=Object.getOwnPropertyDescriptors,gy=Object.getOwnPropertySymbols,SU=Object.prototype.hasOwnProperty,TU=Object.prototype.propertyIsEnumerable,Rh=(t,e,r)=>e in t?_U(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Pc=(t,e)=>{for(var r in e||(e={}))SU.call(e,r)&&Rh(t,r,e[r]);if(gy)for(var r of gy(e))TU.call(e,r)&&Rh(t,r,e[r]);return t},fd=(t,e)=>CU(t,IU(e)),fr=(t,e,r)=>Rh(t,typeof e!="symbol"?e+"":e,r);let NU=class av{constructor(e){fr(this,"client"),fr(this,"namespaces"),fr(this,"optionalNamespaces"),fr(this,"sessionProperties"),fr(this,"scopedProperties"),fr(this,"events",new pp),fr(this,"rpcProviders",{}),fr(this,"session"),fr(this,"providerOpts"),fr(this,"logger"),fr(this,"uri"),fr(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Qa(Ji({level:(e==null?void 0:e.logger)||sy})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const r=new av(e);return await r.initialize(),r}async request(e,r,n){const[s,i]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Pc({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:n})}sendAsync(e,r,n,s){const i=new Date().getTime();this.request(e,n,s).then(o=>r(null,Xl(i,o))).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Ue("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,r){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:n,response:s}=await this.client.authenticate(e,r);n&&(this.uri=n,this.events.emit("display_uri",n));const i=await s();if(this.session=i.session,this.session){const o=dy(this.session.namespaces);this.namespaces=dd(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){const{uri:r,approval:n}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});r&&(this.uri=r,this.events.emit("display_uri",r));const s=await n();this.session=s;const i=dy(s.namespaces);return this.namespaces=dd(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,r){try{if(!this.session)return;const[n,s]=this.validateChain(e),i=this.getProvider(n);i.name===Ei?i.setDefaultChain(`${n}:${s}`,r):i.setDefaultChain(s,r)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(Ms(r)){for(const n of r)e.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,r;if(this.client=this.providerOpts.client||await V5.init({core:this.providerOpts.core,logger:this.providerOpts.logger||sy,relayUrl:this.providerOpts.relayUrl||r$,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(n){throw this.logger.error("Failed to get session",n),new Error(`The provided session: ${(r=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:r.topic} doesn't exist in the Sign client`)}else{const n=this.client.session.getAll();this.session=n[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>Mo(r)))];pd("client",this.client),pd("events",this.events),pd("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const n=B$(r,this.session),s=iv(n),i=dd(this.namespaces,this.optionalNamespaces),o=fd(Pc({},i[r]),{accounts:n,chains:s});switch(r){case"eip155":this.rpcProviders[r]=new Q$({namespace:o});break;case"algorand":this.rpcProviders[r]=new sU({namespace:o});break;case"solana":this.rpcProviders[r]=new Z$({namespace:o});break;case"cosmos":this.rpcProviders[r]=new tU({namespace:o});break;case"polkadot":this.rpcProviders[r]=new H$({namespace:o});break;case"cip34":this.rpcProviders[r]=new aU({namespace:o});break;case"elrond":this.rpcProviders[r]=new uU({namespace:o});break;case"multiversx":this.rpcProviders[r]=new pU({namespace:o});break;case"near":this.rpcProviders[r]=new mU({namespace:o});break;case"tezos":this.rpcProviders[r]=new bU({namespace:o});break;default:this.rpcProviders[Ei]?this.rpcProviders[Ei].updateNamespace(o):this.rpcProviders[Ei]=new AU({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var r;const{topic:n}=e;n===((r=this.session)==null?void 0:r.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var r;const{params:n,topic:s}=e;if(s!==((r=this.session)==null?void 0:r.topic))return;const{event:i}=n;if(i.name==="accountsChanged"){const o=i.data;o&&Ms(o)&&this.events.emit("accountsChanged",o.map(L$))}else if(i.name==="chainChanged"){const o=n.chainId,a=n.event.data,l=Mo(o),c=hd(o)!==hd(a)?`${l}:${hd(a)}`:o;this.onChainChanged(c)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var n,s;if(e!==((n=this.session)==null?void 0:n.topic))return;const{namespaces:i}=r,o=(s=this.client)==null?void 0:s.session.get(e);this.session=fd(Pc({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{var r;e.topic===((r=this.session)==null?void 0:r.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",fd(Pc({},Ue("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Cr.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Ei]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r,optionalNamespaces:n,sessionProperties:s,scopedProperties:i}=e;r&&Object.keys(r).length&&(this.namespaces=r),n&&Object.keys(n).length&&(this.optionalNamespaces=n),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[r,n]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,n];if(r&&!Object.keys(this.namespaces||{}).map(o=>Mo(o)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&n)return[r,n];const s=Mo(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,r=!1){if(!this.namespaces)return;const[n,s]=this.validateChain(e);s&&(r||this.getProvider(n).setDefaultChain(s),this.namespaces[n]?this.namespaces[n].defaultChain=s:this.namespaces[`${n}:${s}`]?this.namespaces[`${n}:${s}`].defaultChain=s:this.namespaces[`${n}:${s}`]={defaultChain:s},this.events.emit("chainChanged",s),await this.persist("namespaces",this.namespaces))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,r){var n;const s=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.setItem(`${Tc}/${e}${s}`,r)}async getFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";return await this.client.core.storage.getItem(`${Tc}/${e}${n}`)}async deleteFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.removeItem(`${Tc}/${e}${n}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const r=await this.client.core.storage.getKeys();for(const n of r)n.startsWith(Tc)&&await this.client.core.storage.removeItem(n)}catch(r){this.logger.warn("Failed to cleanup storage",r)}}};var Bi={};const PU="https://secure.walletconnect.org/sdk",xU=(typeof Ut<"u"&&typeof Bi<"u"?Bi.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||PU,OU=(typeof Ut<"u"&&typeof Bi<"u"?Bi.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",RU=(typeof Ut<"u"&&typeof Bi<"u"?Bi.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",ee={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},ot={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},fs=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),ct=Je({...fs}),Nt={state:ct,subscribeKey(t,e){return tr(ct,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=ue.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){ct.message=fs.message,ct.variant=fs.variant,ct.svg=fs.svg,ct.open=fs.open,ct.autoClose=fs.autoClose},_showMessage({message:t,svg:e,variant:r="success",autoClose:n=fs.autoClose}){ct.open?(ct.open=!1,setTimeout(()=>{ct.message=t,ct.variant=r,ct.svg=e,ct.open=!0,ct.autoClose=n},150)):(ct.message=t,ct.variant=r,ct.svg=e,ct.open=!0,ct.autoClose=n)}},qo={getSIWX(){return z.state.siwx},async initializeIfEnabled(){var i;const t=z.state.siwx,e=P.getActiveCaipAddress();if(!(t&&e))return;const[r,n,s]=e.split(":");if(P.checkIfSupportedNetwork(r))try{if((await t.getSessions(`${r}:${n}`,s)).length)return;await at.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),ze.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=je._getClient())==null?void 0:i.disconnect().catch(console.error)),De.reset("Connect"),Nt.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=z.state.siwx,e=ue.getPlainAddress(P.getActiveCaipAddress()),r=P.getActiveCaipNetwork(),n=je._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!r)throw new Error("No ActiveCaipNetwork or client found");if(!n)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:r.caipNetworkId,accountAddress:e}),i=s.toString();pe.getConnectorId(r.chainNamespace)===j.CONNECTOR_ID.AUTH&&De.pushTransactionStack({view:null,goBack:!1,replace:!0});const a=await n.signMessage(i);await t.addSession({data:s,message:i,signature:a}),at.close(),ze.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!at.state.open||De.state.view==="ApproveTransaction")&&await at.open({view:"SIWXSignMessage"}),i.isSmartAccount?Nt.showError("This application might not support Smart Accounts"):Nt.showError("Signature declined"),ze.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e))?await je.disconnect():at.close(),De.reset("Connect"),ze.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const t=z.state.siwx,e=ue.getPlainAddress(P.getActiveCaipAddress()),r=P.getActiveCaipNetwork();return t&&e&&r?t.getSessions(r.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const r=De.state.view==="ApproveTransaction",n=De.state.view==="SIWXSignMessage";if(r||n)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:r}){var a,l,c;const n=qo.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!n||s.size!==1||!s.has("eip155"))return!1;const i=await n.createMessage({chainId:((a=P.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:r,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(Nt.showLoading("Authenticating...",{autoClose:!1}),re.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(l=o.session.peer.metadata.icons)==null?void 0:l[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(c=o==null?void 0:o.auths)!=null&&c.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await n.setSessions(u),ze.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:qo.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),ze.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:qo.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{Nt.hide()}}return!0},getSIWXEventProperties(){var t;return{network:((t=P.state.activeCaipNetwork)==null?void 0:t.caipNetworkId)||"",isSmartAccount:re.state.preferredAccountType===ot.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},We=Je({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),DU={state:We,subscribe(t){return qt(We,()=>t(We))},setLastNetworkInView(t){We.lastNetworkInView=t},async fetchTransactions(t,e){var r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");We.loading=!0;try{const n=await ae.fetchTransactions({account:t,cursor:We.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(r=P.state.activeCaipNetwork)==null?void 0:r.caipNetworkId}),s=this.filterSpamTransactions(n.data),i=this.filterByConnectedChain(s),o=[...We.transactions,...i];We.loading=!1,e==="coinbase"?We.coinbaseTransactions=this.groupTransactionsByYearAndMonth(We.coinbaseTransactions,n.data):(We.transactions=o,We.transactionsByYear=this.groupTransactionsByYearAndMonth(We.transactionsByYear,i)),We.empty=o.length===0,We.next=n.next?n.next:void 0}catch{ze.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:z.state.projectId,cursor:We.next,isSmartAccount:re.state.preferredAccountType===ot.ACCOUNT_TYPES.SMART_ACCOUNT}}),Nt.showError("Failed to fetch transactions"),We.loading=!1,We.empty=!0,We.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const r=t;return e.forEach(n=>{const s=new Date(n.metadata.minedAt).getFullYear(),i=new Date(n.metadata.minedAt).getMonth(),o=r[s]??{},l=(o[i]??[]).filter(c=>c.id!==n.id);r[s]={...o,[i]:[...l,n].sort((c,u)=>new Date(u.metadata.minedAt).getTime()-new Date(c.metadata.minedAt).getTime())}}),r},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(n=>{var s;return((s=n.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var n;const e=(n=P.state.activeCaipNetwork)==null?void 0:n.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){We.next=void 0},resetTransactions(){We.transactions=[],We.transactionsByYear={},We.lastNetworkInView=void 0,We.loading=!1,We.empty=!1,We.next=void 0}},Ve=Je({wcError:!1,buffering:!1,status:"disconnected"});let wi;const je={state:Ve,subscribeKey(t,e){return tr(Ve,t,e)},_getClient(){return Ve._client},setClient(t){Ve._client=Os(t)},async connectWalletConnect(){var t,e,r,n;if(ue.isTelegram()||ue.isSafari()&&ue.isIos()){if(wi){await wi,wi=void 0;return}if(!ue.isPairingExpired(Ve==null?void 0:Ve.wcPairingExpiry)){const s=Ve.wcUri;Ve.wcUri=s;return}wi=(e=(t=this._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),this.state.status="connecting",await wi,wi=void 0,Ve.wcPairingExpiry=void 0,this.state.status="connected"}else await((n=(r=this._getClient())==null?void 0:r.connectWalletConnect)==null?void 0:n.call(r))},async connectExternal(t,e,r=!0){var n,s;await((s=(n=this._getClient())==null?void 0:n.connectExternal)==null?void 0:s.call(n,t)),r&&P.setActiveNamespace(e)},async reconnectExternal(t){var r,n;await((n=(r=this._getClient())==null?void 0:r.reconnectExternal)==null?void 0:n.call(r,t));const e=t.chain||P.state.activeChain;e&&pe.setConnectorId(t.id,e)},async setPreferredAccountType(t){var r;at.setLoading(!0,P.state.activeChain);const e=pe.getAuthConnector();e&&(await(e==null?void 0:e.provider.setPreferredAccount(t)),await this.reconnectExternal(e),at.setLoading(!1,P.state.activeChain),ze.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=P.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=this._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var r;return(r=this._getClient())==null?void 0:r.parseUnits(t,e)},formatUnits(t,e){var r;return(r=this._getClient())==null?void 0:r.formatUnits(t,e)},async sendTransaction(t){var e;return(e=this._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=this._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=this._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=this._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=this._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=this._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=this._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=this._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,r;return((r=(e=this._getClient())==null?void 0:e.checkInstalled)==null?void 0:r.call(e,t))||!1},resetWcConnection(){Ve.wcUri=void 0,Ve.wcPairingExpiry=void 0,Ve.wcLinking=void 0,Ve.recentWallet=void 0,Ve.status="disconnected",DU.resetTransactions(),Z.deleteWalletConnectDeepLink()},resetUri(){Ve.wcUri=void 0,Ve.wcPairingExpiry=void 0},finalizeWcConnection(){var r,n;const{wcLinking:t,recentWallet:e}=je.state;t&&Z.setWalletConnectDeepLink(t),e&&Z.setAppKitRecent(e),ze.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((n=(r=De.state.data)==null?void 0:r.wallet)==null?void 0:n.name)||"Unknown"}})},setWcBasic(t){Ve.wcBasic=t},setUri(t){Ve.wcUri=t,Ve.wcPairingExpiry=ue.getPairingExpiry()},setWcLinking(t){Ve.wcLinking=t},setWcError(t){Ve.wcError=t,Ve.buffering=!1},setRecentWallet(t){Ve.recentWallet=t},setBuffering(t){Ve.buffering=t},setStatus(t){Ve.status=t},async disconnect(t){try{at.setLoading(!0,t),await qo.clearSessions(),await P.disconnect(t),at.setLoading(!1,t),pe.setFilterByNamespace(void 0)}catch{throw new Error("Failed to disconnect")}}},Co=Je({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),wn={state:Co,subscribe(t){return qt(Co,()=>t(Co))},set(t){Object.assign(Co,{...Co,...t})}};function Me(t,e,r){const n=t[e.name];if(typeof n=="function")return n;const s=t[r];return typeof s=="function"?s:i=>e(t,i)}function Jn(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new WU(t.type);return`${t.name}(${su(t.inputs,{includeName:e})})`}function su(t,{includeName:e=!1}={}){return t?t.map(r=>kU(r,{includeName:e})).join(e?", ":","):""}function kU(t,{includeName:e}){return t.type.startsWith("tuple")?`(${su(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}function _n(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function pt(t){return _n(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const cv="2.25.0";let Io={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${cv}`};class F extends Error{constructor(e,r={}){var a;const n=(()=>{var l;return r.cause instanceof F?r.cause.details:(l=r.cause)!=null&&l.message?r.cause.message:r.details})(),s=r.cause instanceof F&&r.cause.docsPath||r.docsPath,i=(a=Io.getDocsUrl)==null?void 0:a.call(Io,{...r,docsPath:s}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...n?[`Details: ${n}`]:[],...Io.version?[`Version: ${Io.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=s,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=cv}walk(e){return lv(this,e)}}function lv(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?lv(t.cause,e):e?null:t}class $U extends F{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class my extends F{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class uv extends F{constructor({data:e,params:r,size:n}){super([`Data size of ${n} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${su(r,{includeName:!0})})`,`Data:   ${e} (${n} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=r,this.size=n}}class iu extends F{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class UU extends F{constructor({expectedLength:e,givenLength:r,type:n}){super([`ABI encoding array length mismatch for type ${n}.`,`Expected length: ${e}`,`Given length: ${r}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class MU extends F{constructor({expectedSize:e,value:r}){super(`Size of bytes "${r}" (bytes${pt(r)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class FU extends F{constructor({expectedLength:e,givenLength:r}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${r}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class dv extends F{constructor(e,{docsPath:r}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:r,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class BU extends F{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class hv extends F{constructor(e,{docsPath:r}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:r,name:"AbiEventSignatureNotFoundError"})}}class hl extends F{constructor(e,{docsPath:r}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:r,name:"AbiFunctionNotFoundError"})}}class LU extends F{constructor(e,{docsPath:r}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:r,name:"AbiFunctionOutputsNotFoundError"})}}class jU extends F{constructor(e,r){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Jn(e.abiItem)}\`, and`,`\`${r.type}\` in \`${Jn(r.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class i7 extends F{constructor({expectedSize:e,givenSize:r}){super(`Expected bytes${e}, got bytes${r}.`,{name:"BytesSizeMismatchError"})}}class Dh extends F{constructor({abiItem:e,data:r,params:n,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${su(n,{includeName:!0})})`,`Data:   ${r} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=r,this.params=n,this.size=s}}class pv extends F{constructor({abiItem:e,param:r}){super([`Expected a topic for indexed event parameter${r.name?` "${r.name}"`:""} on event "${Jn(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class zU extends F{constructor(e,{docsPath:r}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:r,name:"InvalidAbiEncodingType"})}}class HU extends F{constructor(e,{docsPath:r}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:r,name:"InvalidAbiDecodingType"})}}class qU extends F{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class WU extends F{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class o7 extends F{constructor(e){super(`Type "${e}" is not supported for packed encoding.`,{name:"UnsupportedPackedAbiType"})}}class fv extends F{constructor({offset:e,position:r,size:n}){super(`Slice ${r==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${n}).`,{name:"SliceOffsetOutOfBoundsError"})}}class gv extends F{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}}class yy extends F{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} is expected to be ${r} ${n} long, but is ${e} ${n} long.`,{name:"InvalidBytesLengthError"})}}function no(t,{dir:e,size:r=32}={}){return typeof t=="string"?Wn(t,{dir:e,size:r}):VU(t,{dir:e,size:r})}function Wn(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new gv({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function VU(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new gv({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let s=0;s<r;s++){const i=e==="right";n[i?s:r-s-1]=t[i?s:t.length-s-1]}return n}class mv extends F{constructor({max:e,min:r,signed:n,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}}class GU extends F{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class KU extends F{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Xr(t,{dir:e="left"}={}){let r=typeof t=="string"?t.replace("0x",""):t,n=0;for(let s=0;s<r.length-1&&r[e==="left"?s:r.length-s-1].toString()==="0";s++)n++;return r=e==="left"?r.slice(n):r.slice(0,r.length-n),typeof t=="string"?(r.length===1&&e==="right"&&(r=`${r}0`),`0x${r.length%2===1?`0${r}`:r}`):r}function Br(t,{size:e}){if(pt(t)>e)throw new KU({givenSize:pt(t),maxSize:e})}function Dr(t,e={}){const{signed:r}=e;e.size&&Br(t,{size:e.size});const n=BigInt(t);if(!r)return n;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return n<=i?n:n-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Zn(t,e={}){return Number(Dr(t,e))}function yv(t,e={}){let r=en(t);return e.size&&(Br(r,{size:e.size}),r=Xr(r,{dir:"right"})),new TextDecoder().decode(r)}const QU=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function le(t,e={}){return typeof t=="number"||typeof t=="bigint"?ve(t,e):typeof t=="string"?ou(t,e):typeof t=="boolean"?wv(t,e):At(t,e)}function wv(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(Br(r,{size:e.size}),no(r,{size:e.size})):r}function At(t,e={}){let r="";for(let s=0;s<t.length;s++)r+=QU[t[s]];const n=`0x${r}`;return typeof e.size=="number"?(Br(n,{size:e.size}),no(n,{dir:"right",size:e.size})):n}function ve(t,e={}){const{signed:r,size:n}=e,s=BigInt(t);let i;n?r?i=(1n<<BigInt(n)*8n-1n)-1n:i=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&r?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new mv({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:r,size:n,value:`${t}${l}`})}const a=`0x${(r&&s<0?(1n<<BigInt(n*8))+BigInt(s):s).toString(16)}`;return n?no(a,{size:n}):a}const YU=new TextEncoder;function ou(t,e={}){const r=YU.encode(t);return At(r,e)}const JU=new TextEncoder;function ic(t,e={}){return typeof t=="number"||typeof t=="bigint"?XU(t,e):typeof t=="boolean"?ZU(t,e):_n(t)?en(t,e):Ns(t,e)}function ZU(t,e={}){const r=new Uint8Array(1);return r[0]=Number(t),typeof e.size=="number"?(Br(r,{size:e.size}),no(r,{size:e.size})):r}const fn={zero:48,nine:57,A:65,F:70,a:97,f:102};function wy(t){if(t>=fn.zero&&t<=fn.nine)return t-fn.zero;if(t>=fn.A&&t<=fn.F)return t-(fn.A-10);if(t>=fn.a&&t<=fn.f)return t-(fn.a-10)}function en(t,e={}){let r=t;e.size&&(Br(r,{size:e.size}),r=no(r,{dir:"right",size:e.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const s=n.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const l=wy(n.charCodeAt(a++)),c=wy(n.charCodeAt(a++));if(l===void 0||c===void 0)throw new F(`Invalid byte sequence ("${n[a-2]}${n[a-1]}" in "${n}").`);i[o]=l*16+c}return i}function XU(t,e){const r=ve(t,e);return en(r)}function Ns(t,e={}){const r=JU.encode(t);return typeof e.size=="number"?(Br(r,{size:e.size}),no(r,{dir:"right",size:e.size})):r}function Xn(t,e){const r=e||"hex",n=xw(_n(t,{strict:!1})?ic(t):t);return r==="bytes"?n:le(n)}const e8=t=>Xn(ic(t));function t8(t){return e8(t)}function r8(t){let e=!0,r="",n=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&n++,a===")"&&n--,!!e){if(n===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&r!==","&&r!==",("&&(r="",e=!1);continue}s+=a,r+=a}}if(!i)throw new F("Unable to normalize signature.");return s}const n8=t=>{const e=typeof t=="string"?t:BT(t);return r8(e)};function bv(t){return t8(n8(t))}const Mp=bv;class er extends F{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class au extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const gd=new au(8192);function cu(t,e){if(gd.has(`${t}.${e}`))return gd.get(`${t}.${e}`);const r=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),n=Xn(Ns(r),"bytes"),s=(e?r.substring(`${e}0x`.length):r).split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(n[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return gd.set(`${t}.${e}`,i),i}function Es(t,e){if(!Pt(t,{strict:!1}))throw new er({address:t});return cu(t,e)}const s8=/^0x[a-fA-F0-9]{40}$/,md=new au(8192);function Pt(t,e){const{strict:r=!0}=e??{},n=`${t}.${r}`;if(md.has(n))return md.get(n);const s=s8.test(t)?t.toLowerCase()===t?!0:r?cu(t)===t:!0:!1;return md.set(n,s),s}function Fs(t){return typeof t[0]=="string"?Sn(t):i8(t)}function i8(t){let e=0;for(const s of t)e+=s.length;const r=new Uint8Array(e);let n=0;for(const s of t)r.set(s,n),n+=s.length;return r}function Sn(t){return`0x${t.reduce((e,r)=>e+r.replace("0x",""),"")}`}function ca(t,e,r,{strict:n}={}){return _n(t,{strict:!1})?o8(t,e,r,{strict:n}):Av(t,e,r,{strict:n})}function vv(t,e){if(typeof e=="number"&&e>0&&e>pt(t)-1)throw new fv({offset:e,position:"start",size:pt(t)})}function Ev(t,e,r){if(typeof e=="number"&&typeof r=="number"&&pt(t)!==r-e)throw new fv({offset:r,position:"end",size:pt(t)})}function Av(t,e,r,{strict:n}={}){vv(t,e);const s=t.slice(e,r);return n&&Ev(s,e,r),s}function o8(t,e,r,{strict:n}={}){vv(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(r??t.length)*2)}`;return n&&Ev(s,e,r),s}const a7=/^(.*)\[([0-9]*)\]$/,c7=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,a8=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function _v(t,e){if(t.length!==e.length)throw new FU({expectedLength:t.length,givenLength:e.length});const r=c8({params:t,values:e}),n=Bp(r);return n.length===0?"0x":n}function c8({params:t,values:e}){const r=[];for(let n=0;n<t.length;n++)r.push(Fp({param:t[n],value:e[n]}));return r}function Fp({param:t,value:e}){const r=Lp(t.type);if(r){const[n,s]=r;return u8(e,{length:n,param:{...t,type:s}})}if(t.type==="tuple")return g8(e,{param:t});if(t.type==="address")return l8(e);if(t.type==="bool")return h8(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const n=t.type.startsWith("int"),[,,s="256"]=a8.exec(t.type)??[];return p8(e,{signed:n,size:Number(s)})}if(t.type.startsWith("bytes"))return d8(e,{param:t});if(t.type==="string")return f8(e);throw new zU(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function Bp(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=pt(a)}const r=[],n=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(r.push(ve(e+s,{size:32})),n.push(a),s+=pt(a)):r.push(a)}return Fs([...r,...n])}function l8(t){if(!Pt(t))throw new er({address:t});return{dynamic:!1,encoded:Wn(t.toLowerCase())}}function u8(t,{length:e,param:r}){const n=e===null;if(!Array.isArray(t))throw new qU(t);if(!n&&t.length!==e)throw new UU({expectedLength:e,givenLength:t.length,type:`${r.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=Fp({param:r,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(n||s){const o=Bp(i);if(n){const a=ve(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?Fs([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:Fs(i.map(({encoded:o})=>o))}}function d8(t,{param:e}){const[,r]=e.type.split("bytes"),n=pt(t);if(!r){let s=t;return n%32!==0&&(s=Wn(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:Fs([Wn(ve(n,{size:32})),s])}}if(n!==Number.parseInt(r))throw new MU({expectedSize:Number.parseInt(r),value:t});return{dynamic:!1,encoded:Wn(t,{dir:"right"})}}function h8(t){if(typeof t!="boolean")throw new F(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Wn(wv(t))}}function p8(t,{signed:e,size:r=256}){if(typeof r=="number"){const n=2n**(BigInt(r)-(e?1n:0n))-1n,s=e?-n-1n:0n;if(t>n||t<s)throw new mv({max:n.toString(),min:s.toString(),signed:e,size:r/8,value:t.toString()})}return{dynamic:!1,encoded:ve(t,{size:32,signed:e})}}function f8(t){const e=ou(t),r=Math.ceil(pt(e)/32),n=[];for(let s=0;s<r;s++)n.push(Wn(ca(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Fs([Wn(ve(pt(e),{size:32})),...n])}}function g8(t,{param:e}){let r=!1;const n=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=Fp({param:i,value:t[o]});n.push(a),a.dynamic&&(r=!0)}return{dynamic:r,encoded:r?Bp(n):Fs(n.map(({encoded:s})=>s))}}function Lp(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const jp=t=>ca(bv(t),0,4);function zp(t){const{abi:e,args:r=[],name:n}=t,s=_n(n,{strict:!1}),i=e.filter(a=>s?a.type==="function"?jp(a)===n:a.type==="event"?Mp(a)===n:!1:"name"in a&&a.name===n);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!r||r.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==r.length)continue;if(r.every((c,u)=>{const d="inputs"in a&&a.inputs[u];return d?kh(c,d):!1})){if(o&&"inputs"in o&&o.inputs){const c=Cv(a.inputs,o.inputs,r);if(c)throw new jU({abiItem:a,type:c[0]},{abiItem:o,type:c[1]})}o=a}}return o||i[0]}function kh(t,e){const r=typeof t,n=e.type;switch(n){case"address":return Pt(t,{strict:!1});case"bool":return r==="boolean";case"function":return r==="string";case"string":return r==="string";default:return n==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>kh(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(n)?r==="number"||r==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(n)?r==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(n)?Array.isArray(t)&&t.every(s=>kh(s,{...e,type:n.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Cv(t,e,r){for(const n in t){const s=t[n],i=e[n];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return Cv(s.components,i.components,r[n]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Pt(r[n],{strict:!1}):o.includes("address")&&o.includes("bytes")?Pt(r[n],{strict:!1}):!1)return o}}function m8(t,{method:e}){var n,s;const r={};return t.transport.type==="fallback"&&((s=(n=t.transport).onResponse)==null||s.call(n,({method:i,response:o,status:a,transport:l})=>{a==="success"&&e===i&&(r[o]=l.request)})),i=>r[i]||t.request}function sn(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}const by="/docs/contract/encodeFunctionData";function y8(t){const{abi:e,args:r,functionName:n}=t;let s=e[0];if(n){const i=zp({abi:e,args:r,name:n});if(!i)throw new hl(n,{docsPath:by});s=i}if(s.type!=="function")throw new hl(void 0,{docsPath:by});return{abi:[s],functionName:jp(Jn(s))}}function so(t){const{args:e}=t,{abi:r,functionName:n}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:y8(t)})(),s=r[0],i=n,o="inputs"in s&&s.inputs?_v(s.inputs,e??[]):void 0;return Sn([i,o??"0x"])}const Iv={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},w8={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},b8={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class vy extends F{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class Sv extends F{constructor({length:e,position:r}){super(`Position \`${r}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class v8 extends F{constructor({count:e,limit:r}){super(`Recursive read limit of \`${r}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const E8={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new v8({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new Sv({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new vy({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new vy({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const r=e??this.position;return this.assertPosition(r+t-1),this.bytes.subarray(r,r+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const r=this.inspectBytes(t);return this.position+=e??t,r},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function Hp(t,{recursiveReadLimit:e=8192}={}){const r=Object.create(E8);return r.bytes=t,r.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),r.positionReadCount=new Map,r.recursiveReadLimit=e,r}function A8(t,e={}){typeof e.size<"u"&&Br(t,{size:e.size});const r=At(t,e);return Dr(r,e)}function _8(t,e={}){let r=t;if(typeof e.size<"u"&&(Br(r,{size:e.size}),r=Xr(r)),r.length>1||r[0]>1)throw new GU(r);return!!r[0]}function bn(t,e={}){typeof e.size<"u"&&Br(t,{size:e.size});const r=At(t,e);return Zn(r,e)}function C8(t,e={}){let r=t;return typeof e.size<"u"&&(Br(r,{size:e.size}),r=Xr(r,{dir:"right"})),new TextDecoder().decode(r)}function lu(t,e){const r=typeof e=="string"?en(e):e,n=Hp(r);if(pt(r)===0&&t.length>0)throw new iu;if(pt(e)&&pt(e)<32)throw new uv({data:typeof e=="string"?e:At(e),params:t,size:pt(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];n.setPosition(s);const[l,c]=xi(n,a,{staticPosition:0});s+=c,i.push(l)}return i}function xi(t,e,{staticPosition:r}){const n=Lp(e.type);if(n){const[s,i]=n;return S8(t,{...e,type:i},{length:s,staticPosition:r})}if(e.type==="tuple")return x8(t,e,{staticPosition:r});if(e.type==="address")return I8(t);if(e.type==="bool")return T8(t);if(e.type.startsWith("bytes"))return N8(t,e,{staticPosition:r});if(e.type.startsWith("uint")||e.type.startsWith("int"))return P8(t,e);if(e.type==="string")return O8(t,{staticPosition:r});throw new HU(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const Ey=32,$h=32;function I8(t){const e=t.readBytes(32);return[cu(At(Av(e,-20))),32]}function S8(t,e,{length:r,staticPosition:n}){if(!r){const o=bn(t.readBytes($h)),a=n+o,l=a+Ey;t.setPosition(a);const c=bn(t.readBytes(Ey)),u=la(e);let d=0;const h=[];for(let p=0;p<c;++p){t.setPosition(l+(u?p*32:d));const[g,f]=xi(t,e,{staticPosition:l});d+=f,h.push(g)}return t.setPosition(n+32),[h,32]}if(la(e)){const o=bn(t.readBytes($h)),a=n+o,l=[];for(let c=0;c<r;++c){t.setPosition(a+c*32);const[u]=xi(t,e,{staticPosition:a});l.push(u)}return t.setPosition(n+32),[l,32]}let s=0;const i=[];for(let o=0;o<r;++o){const[a,l]=xi(t,e,{staticPosition:n+s});s+=l,i.push(a)}return[i,s]}function T8(t){return[_8(t.readBytes(32),{size:32}),32]}function N8(t,e,{staticPosition:r}){const[n,s]=e.type.split("bytes");if(!s){const o=bn(t.readBytes(32));t.setPosition(r+o);const a=bn(t.readBytes(32));if(a===0)return t.setPosition(r+32),["0x",32];const l=t.readBytes(a);return t.setPosition(r+32),[At(l),32]}return[At(t.readBytes(Number.parseInt(s),32)),32]}function P8(t,e){const r=e.type.startsWith("int"),n=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[n>48?A8(s,{signed:r}):bn(s,{signed:r}),32]}function x8(t,e,{staticPosition:r}){const n=e.components.length===0||e.components.some(({name:o})=>!o),s=n?[]:{};let i=0;if(la(e)){const o=bn(t.readBytes($h)),a=r+o;for(let l=0;l<e.components.length;++l){const c=e.components[l];t.setPosition(a+i);const[u,d]=xi(t,c,{staticPosition:a});i+=d,s[n?l:c==null?void 0:c.name]=u}return t.setPosition(r+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[l,c]=xi(t,a,{staticPosition:r});s[n?o:a==null?void 0:a.name]=l,i+=c}return[s,i]}function O8(t,{staticPosition:e}){const r=bn(t.readBytes(32)),n=e+r;t.setPosition(n);const s=bn(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=C8(Xr(i));return t.setPosition(e+32),[o,32]}function la(t){var n;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(n=t.components)==null?void 0:n.some(la);const r=Lp(t.type);return!!(r&&la({...t,type:r[1]}))}function R8(t){const{abi:e,data:r}=t,n=ca(r,0,4);if(n==="0x")throw new iu;const i=[...e||[],w8,b8].find(o=>o.type==="error"&&n===jp(Jn(o)));if(!i)throw new dv(n,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?lu(i.inputs,ca(r,4)):void 0,errorName:i.name}}const vr=(t,e,r)=>JSON.stringify(t,(n,s)=>typeof s=="bigint"?s.toString():s,r);function Tv({abiItem:t,args:e,includeFunctionName:r=!0,includeName:n=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${r?t.name:""}(${t.inputs.map((s,i)=>`${n&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?vr(e[i]):e[i]}`).join(", ")})`}const D8={gwei:9,wei:18},k8={ether:-9,wei:9},$8={ether:-18,gwei:-9};function io(t,e){let r=t.toString();const n=r.startsWith("-");n&&(r=r.slice(1)),r=r.padStart(e,"0");let[s,i]=[r.slice(0,r.length-e),r.slice(r.length-e)];return i=i.replace(/(0+)$/,""),`${n?"-":""}${s||"0"}${i?`.${i}`:""}`}function qp(t,e="wei"){return io(t,D8[e])}function Xt(t,e="wei"){return io(t,k8[e])}class U8 extends F{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class M8 extends F{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function Ay(t){return t.reduce((e,{slot:r,value:n})=>`${e}        ${r}: ${n}
`,"")}function F8(t){return t.reduce((e,{address:r,...n})=>{let s=`${e}    ${r}:
`;return n.nonce&&(s+=`      nonce: ${n.nonce}
`),n.balance&&(s+=`      balance: ${n.balance}
`),n.code&&(s+=`      code: ${n.code}
`),n.state&&(s+=`      state:
`,s+=Ay(n.state)),n.stateDiff&&(s+=`      stateDiff:
`,s+=Ay(n.stateDiff)),s},`  State Override:
`).slice(0,-1)}function oc(t){const e=Object.entries(t).map(([n,s])=>s===void 0||s===!1?null:[n,s]).filter(Boolean),r=e.reduce((n,[s])=>Math.max(n,s.length),0);return e.map(([n,s])=>`  ${`${n}:`.padEnd(r+1)}  ${s}`).join(`
`)}class B8 extends F{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class L8 extends F{constructor({v:e}){super(`Invalid \`v\` value "${e}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}class j8 extends F{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",oc(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class z8 extends F{constructor({storageKey:e}){super(`Size for storage key "${e}" is invalid. Expected 32 bytes. Got ${Math.floor((e.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}class H8 extends F{constructor(e,{account:r,docsPath:n,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:l,maxPriorityFeePerGas:c,nonce:u,to:d,value:h}){var g;const p=oc({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:r==null?void 0:r.address,to:d,value:typeof h<"u"&&`${qp(h)} ${((g=s==null?void 0:s.nativeCurrency)==null?void 0:g.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${Xt(a)} gwei`,maxFeePerGas:typeof l<"u"&&`${Xt(l)} gwei`,maxPriorityFeePerGas:typeof c<"u"&&`${Xt(c)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",p].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class Nv extends F{constructor({blockHash:e,blockNumber:r,blockTag:n,hash:s,index:i}){let o="Transaction";n&&i!==void 0&&(o=`Transaction at block time "${n}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),r&&i!==void 0&&(o=`Transaction at block number "${r}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class Pv extends F{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class q8 extends F{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const W8=t=>t,Wp=t=>t;class V8 extends F{constructor(e,{account:r,docsPath:n,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:l,maxPriorityFeePerGas:c,nonce:u,to:d,value:h,stateOverride:p}){var y;const g=r?sn(r):void 0;let f=oc({from:g==null?void 0:g.address,to:d,value:typeof h<"u"&&`${qp(h)} ${((y=s==null?void 0:s.nativeCurrency)==null?void 0:y.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${Xt(a)} gwei`,maxFeePerGas:typeof l<"u"&&`${Xt(l)} gwei`,maxPriorityFeePerGas:typeof c<"u"&&`${Xt(c)} gwei`,nonce:u});p&&(f+=`
${F8(p)}`),super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",f].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class xv extends F{constructor(e,{abi:r,args:n,contractAddress:s,docsPath:i,functionName:o,sender:a}){const l=zp({abi:r,args:n,name:o}),c=l?Tv({abiItem:l,args:n,includeFunctionName:!1,includeName:!1}):void 0,u=l?Jn(l,{includeName:!0}):void 0,d=oc({address:s&&W8(s),function:u,args:c&&c!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${c}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=r,this.args=n,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class Uh extends F{constructor({abi:e,data:r,functionName:n,message:s}){let i,o,a,l;if(r&&r!=="0x")try{o=R8({abi:e,data:r});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")l=h[0];else if(d==="Panic"){const[p]=h;l=Iv[p]}else{const p=u?Jn(u,{includeName:!0}):void 0,g=u&&h?Tv({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[p?`Error: ${p}`:"",g&&g!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${g}`:""]}}catch(u){i=u}else s&&(l=s);let c;i instanceof dv&&(c=i.signature,a=[`Unable to decode signature "${c}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${c}.`]),super(l&&l!=="execution reverted"||c?[`The contract function "${n}" reverted with the following ${c?"signature":"reason"}:`,l||c].join(`
`):`The contract function "${n}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=r,this.reason=l,this.signature=c}}class G8 extends F{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class K8 extends F{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class Vp extends F{constructor({data:e,message:r}){super(r||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}class Wo extends F{constructor({body:e,cause:r,details:n,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:r,details:n,metaMessages:[i&&`Status: ${i}`,`URL: ${Wp(o)}`,e&&`Request body: ${vr(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class Gp extends F{constructor({body:e,error:r,url:n}){super("RPC Request failed.",{cause:r,details:r.message,metaMessages:[`URL: ${Wp(n)}`,`Request body: ${vr(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=r.code,this.data=r.data}}class _y extends F{constructor({body:e,url:r}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${Wp(r)}`,`Request body: ${vr(e)}`],name:"TimeoutError"})}}const Q8=-1;class nr extends F{constructor(e,{code:r,docsPath:n,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:n,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof Gp?e.code:r??Q8}}class oo extends nr{constructor(e,r){super(e,r),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=r.data}}class ua extends nr{constructor(e){super(e,{code:ua.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(ua,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class da extends nr{constructor(e){super(e,{code:da.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(da,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class ha extends nr{constructor(e,{method:r}={}){super(e,{code:ha.code,name:"MethodNotFoundRpcError",shortMessage:`The method${r?` "${r}"`:""} does not exist / is not available.`})}}Object.defineProperty(ha,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class pa extends nr{constructor(e){super(e,{code:pa.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(pa,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Bs extends nr{constructor(e){super(e,{code:Bs.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Bs,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class fa extends nr{constructor(e){super(e,{code:fa.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(fa,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class ga extends nr{constructor(e){super(e,{code:ga.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(ga,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Vn extends nr{constructor(e){super(e,{code:Vn.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Vn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Li extends nr{constructor(e){super(e,{code:Li.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Li,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class As extends nr{constructor(e,{method:r}={}){super(e,{code:As.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${r?` "${r}"`:""} is not supported.`})}}Object.defineProperty(As,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class ji extends nr{constructor(e){super(e,{code:ji.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(ji,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class ma extends nr{constructor(e){super(e,{code:ma.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(ma,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class ut extends oo{constructor(e){super(e,{code:ut.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(ut,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class ya extends oo{constructor(e){super(e,{code:ya.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(ya,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class wa extends oo{constructor(e,{method:r}={}){super(e,{code:wa.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${r?` " ${r}"`:""}.`})}}Object.defineProperty(wa,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class ba extends oo{constructor(e){super(e,{code:ba.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(ba,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class va extends oo{constructor(e){super(e,{code:va.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(va,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class tn extends oo{constructor(e){super(e,{code:tn.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(tn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Y8 extends nr{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const J8=3;function pl(t,{abi:e,address:r,args:n,docsPath:s,functionName:i,sender:o}){const a=t instanceof Vp?t:t instanceof F?t.walk(g=>"data"in g)||t.walk():{},{code:l,data:c,details:u,message:d,shortMessage:h}=a,p=t instanceof iu?new G8({functionName:i}):[J8,Bs.code].includes(l)&&(c||u||d||h)?new Uh({abi:e,data:typeof c=="object"?c.data:c,functionName:i,message:a instanceof Gp?u:h??d}):t;return new xv(p,{abi:e,args:n,contractAddress:r,docsPath:s,functionName:i,sender:o})}function Z8(t){const e=Xn(`0x${t.substring(4)}`).substring(26);return cu(`0x${e}`)}async function X8({hash:t,signature:e}){const r=_n(t)?t:le(t),{secp256k1:n}=await Zt(async()=>{const{secp256k1:o}=await import("./secp256k1-kO8RdEKQ.js");return{secp256k1:o}},__vite__mapDeps([0,1,2]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:c,s:u,v:d,yParity:h}=e,p=Number(h??d),g=Cy(p);return new n.Signature(Dr(c),Dr(u)).addRecoveryBit(g)}const o=_n(e)?e:le(e),a=Zn(`0x${o.slice(130)}`),l=Cy(a);return n.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(l)})().recoverPublicKey(r.substring(2)).toHex(!1)}`}function Cy(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function e6({hash:t,signature:e}){return Z8(await X8({hash:t,signature:e}))}function es(t,e="hex"){const r=Ov(t),n=Hp(new Uint8Array(r.length));return r.encode(n),e==="hex"?At(n.bytes):n.bytes}function Ov(t){return Array.isArray(t)?t6(t.map(e=>Ov(e))):r6(t)}function t6(t){const e=t.reduce((s,i)=>s+i.length,0),r=Rv(e);return{length:e<=55?1+e:1+r+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+r),r===1?s.pushUint8(e):r===2?s.pushUint16(e):r===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function r6(t){const e=typeof t=="string"?en(t):t,r=Rv(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+r+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+r),r===1?s.pushUint8(e.length):r===2?s.pushUint16(e.length):r===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function Rv(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new F("Length is too large.")}function n6(t){const{chainId:e,nonce:r,to:n}=t,s=t.contractAddress??t.address,i=Xn(Sn(["0x05",es([e?ve(e):"0x",s,r?ve(r):"0x"])]));return n==="bytes"?en(i):i}async function Dv(t){const{authorization:e,signature:r}=t;return e6({hash:n6(e),signature:r??e})}class s6 extends F{constructor(e,{account:r,docsPath:n,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:l,maxPriorityFeePerGas:c,nonce:u,to:d,value:h}){var g;const p=oc({from:r==null?void 0:r.address,to:d,value:typeof h<"u"&&`${qp(h)} ${((g=s==null?void 0:s.nativeCurrency)==null?void 0:g.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${Xt(a)} gwei`,maxFeePerGas:typeof l<"u"&&`${Xt(l)} gwei`,maxPriorityFeePerGas:typeof c<"u"&&`${Xt(c)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",p].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class _s extends F{constructor({cause:e,message:r}={}){var s;const n=(s=r==null?void 0:r.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(_s,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(_s,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class Ls extends F{constructor({cause:e,maxFeePerGas:r}={}){super(`The fee cap (\`maxFeePerGas\`${r?` = ${Xt(r)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(Ls,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class Mh extends F{constructor({cause:e,maxFeePerGas:r}={}){super(`The fee cap (\`maxFeePerGas\`${r?` = ${Xt(r)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(Mh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class Fh extends F{constructor({cause:e,nonce:r}={}){super(`Nonce provided for the transaction ${r?`(${r}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(Fh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class Bh extends F{constructor({cause:e,nonce:r}={}){super([`Nonce provided for the transaction ${r?`(${r}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(Bh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class Lh extends F{constructor({cause:e,nonce:r}={}){super(`Nonce provided for the transaction ${r?`(${r}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(Lh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class jh extends F{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(jh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class zh extends F{constructor({cause:e,gas:r}={}){super(`The amount of gas ${r?`(${r}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(zh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class Hh extends F{constructor({cause:e,gas:r}={}){super(`The amount of gas ${r?`(${r}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(Hh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class qh extends F{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(qh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class Ea extends F{constructor({cause:e,maxPriorityFeePerGas:r,maxFeePerGas:n}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${r?` = ${Xt(r)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${n?` = ${Xt(n)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(Ea,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class uu extends F{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function Kp(t,e){const r=(t.details||"").toLowerCase(),n=t instanceof F?t.walk(s=>(s==null?void 0:s.code)===_s.code):t;return n instanceof F?new _s({cause:t,message:n.details}):_s.nodeMessage.test(r)?new _s({cause:t,message:t.details}):Ls.nodeMessage.test(r)?new Ls({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):Mh.nodeMessage.test(r)?new Mh({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):Fh.nodeMessage.test(r)?new Fh({cause:t,nonce:e==null?void 0:e.nonce}):Bh.nodeMessage.test(r)?new Bh({cause:t,nonce:e==null?void 0:e.nonce}):Lh.nodeMessage.test(r)?new Lh({cause:t,nonce:e==null?void 0:e.nonce}):jh.nodeMessage.test(r)?new jh({cause:t}):zh.nodeMessage.test(r)?new zh({cause:t,gas:e==null?void 0:e.gas}):Hh.nodeMessage.test(r)?new Hh({cause:t,gas:e==null?void 0:e.gas}):qh.nodeMessage.test(r)?new qh({cause:t}):Ea.nodeMessage.test(r)?new Ea({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new uu({cause:t})}function i6(t,{docsPath:e,...r}){const n=(()=>{const s=Kp(t,r);return s instanceof uu?t:s})();return new s6(n,{docsPath:e,...r})}function Qp(t,{format:e}){if(!e)return{};const r={};function n(i){const o=Object.keys(i);for(const a of o)a in t&&(r[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&n(i[a])}const s=e(t||{});return n(s),r}function Yp(t,e){return({exclude:r,format:n})=>({exclude:r,format:s=>{const i=e(s);if(r)for(const o of r)delete i[o];return{...i,...n(s)}},type:t})}const o6={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function Jp(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=a6(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(r=>At(r)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=ve(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=ve(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=ve(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=ve(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=ve(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=ve(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=o6[t.type]),typeof t.value<"u"&&(e.value=ve(t.value)),e}function a6(t){return t.map(e=>({address:e.address,r:e.r?ve(BigInt(e.r)):e.r,s:e.s?ve(BigInt(e.s)):e.s,chainId:ve(e.chainId),nonce:ve(e.nonce),...typeof e.yParity<"u"?{yParity:ve(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:ve(e.v)}:{}}))}function Iy(t){if(!(!t||t.length===0))return t.reduce((e,{slot:r,value:n})=>{if(r.length!==66)throw new yy({size:r.length,targetSize:66,type:"hex"});if(n.length!==66)throw new yy({size:n.length,targetSize:66,type:"hex"});return e[r]=n,e},{})}function c6(t){const{balance:e,nonce:r,state:n,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=ve(e)),r!==void 0&&(o.nonce=ve(r)),n!==void 0&&(o.state=Iy(n)),s!==void 0){if(o.state)throw new M8;o.stateDiff=Iy(s)}return o}function kv(t){if(!t)return;const e={};for(const{address:r,...n}of t){if(!Pt(r,{strict:!1}))throw new er({address:r});if(e[r])throw new U8({address:r});e[r]=c6(n)}return e}const du=2n**256n-1n;function hu(t){const{account:e,gasPrice:r,maxFeePerGas:n,maxPriorityFeePerGas:s,to:i}=t,o=e?sn(e):void 0;if(o&&!Pt(o.address))throw new er({address:o.address});if(i&&!Pt(i))throw new er({address:i});if(typeof r<"u"&&(typeof n<"u"||typeof s<"u"))throw new B8;if(n&&n>du)throw new Ls({maxFeePerGas:n});if(s&&n&&s>n)throw new Ea({maxFeePerGas:n,maxPriorityFeePerGas:s})}class l6 extends F{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class Zp extends F{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class u6 extends F{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${Xt(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class $v extends F{constructor({blockHash:e,blockNumber:r}){let n="Block";e&&(n=`Block at hash "${e}"`),r&&(n=`Block at number "${r}"`),super(`${n} could not be found.`,{name:"BlockNotFoundError"})}}const Uv={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function pu(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?Zn(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?Zn(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?Uv[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=h6(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}const d6=Yp("transaction",pu);function h6(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function Mv(t){const e=(t.transactions??[]).map(r=>typeof r=="string"?r:pu(r));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}const p6=Yp("block",Mv);async function Aa(t,{blockHash:e,blockNumber:r,blockTag:n,includeTransactions:s}={}){var u,d,h;const i=n??"latest",o=s??!1,a=r!==void 0?ve(r):void 0;let l=null;if(e?l=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):l=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!l)throw new $v({blockHash:e,blockNumber:r});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||Mv)(l)}async function Fv(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function f6(t,e){var i,o;const{block:r,chain:n=t.chain,request:s}=e||{};try{const a=((i=n==null?void 0:n.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=n==null?void 0:n.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const c=r||await Me(t,Aa,"getBlock")({}),u=await a({block:c,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const l=await t.request({method:"eth_maxPriorityFeePerGas"});return Dr(l)}catch{const[a,l]=await Promise.all([r?Promise.resolve(r):Me(t,Aa,"getBlock")({}),Me(t,Fv,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new Zp;const c=l-a.baseFeePerGas;return c<0n?0n:c}}async function Sy(t,e){var h,p;const{block:r,chain:n=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var g,f;return typeof((g=n==null?void 0:n.fees)==null?void 0:g.baseFeeMultiplier)=="function"?n.fees.baseFeeMultiplier({block:r,client:t,request:s}):((f=n==null?void 0:n.fees)==null?void 0:f.baseFeeMultiplier)??1.2})();if(o<1)throw new l6;const l=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),c=g=>g*BigInt(Math.ceil(o*l))/BigInt(l),u=r||await Me(t,Aa,"getBlock")({});if(typeof((p=n==null?void 0:n.fees)==null?void 0:p.estimateFeesPerGas)=="function"){const g=await n.fees.estimateFeesPerGas({block:r,client:t,multiply:c,request:s,type:i});if(g!==null)return g}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new Zp;const g=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await f6(t,{block:u,chain:n,request:s}),f=c(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??f+g,maxPriorityFeePerGas:g}}return{gasPrice:(s==null?void 0:s.gasPrice)??c(await Me(t,Fv,"getGasPrice")({}))}}async function g6(t,{address:e,blockTag:r="latest",blockNumber:n}){const s=await t.request({method:"eth_getTransactionCount",params:[e,n?ve(n):r]},{dedupe:!!n});return Zn(s)}function Xp(t){const{kzg:e}=t,r=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),n=typeof t.blobs[0]=="string"?t.blobs.map(i=>en(i)):t.blobs,s=[];for(const i of n)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return r==="bytes"?s:s.map(i=>At(i))}function ef(t){const{kzg:e}=t,r=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),n=typeof t.blobs[0]=="string"?t.blobs.map(o=>en(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>en(o)):t.commitments,i=[];for(let o=0;o<n.length;o++){const a=n[o],l=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,l)))}return r==="bytes"?i:i.map(o=>At(o))}function m6(t,e){return IA(_n(t,{strict:!1})?ic(t):t)}function y6(t){const{commitment:e,version:r=1}=t,n=t.to??(typeof e=="string"?"hex":"bytes"),s=m6(e);return s.set([r],0),n==="bytes"?s:At(s)}function Bv(t){const{commitments:e,version:r}=t,n=t.to??(typeof e[0]=="string"?"hex":"bytes"),s=[];for(const i of e)s.push(y6({commitment:i,to:n,version:r}));return s}const Ty=6,Lv=32,tf=4096,jv=Lv*tf,Ny=jv*Ty-1-1*tf*Ty,zv=1;class w6 extends F{constructor({maxSize:e,size:r}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${r} bytes`],name:"BlobSizeTooLargeError"})}}class Hv extends F{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class b6 extends F{constructor({hash:e,size:r}){super(`Versioned hash "${e}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${r}`],name:"InvalidVersionedHashSizeError"})}}class v6 extends F{constructor({hash:e,version:r}){super(`Versioned hash "${e}" version is invalid.`,{metaMessages:[`Expected: ${zv}`,`Received: ${r}`],name:"InvalidVersionedHashVersionError"})}}function E6(t){const e=t.to??(typeof t.data=="string"?"hex":"bytes"),r=typeof t.data=="string"?en(t.data):t.data,n=pt(r);if(!n)throw new Hv;if(n>Ny)throw new w6({maxSize:Ny,size:n});const s=[];let i=!0,o=0;for(;i;){const a=Hp(new Uint8Array(jv));let l=0;for(;l<tf;){const c=r.slice(o,o+(Lv-1));if(a.pushByte(0),a.pushBytes(c),c.length<31){a.pushByte(128),i=!1;break}l++,o+=31}s.push(a)}return e==="bytes"?s.map(a=>a.bytes):s.map(a=>At(a.bytes))}function qv(t){const{data:e,kzg:r,to:n}=t,s=t.blobs??E6({data:e,to:n}),i=t.commitments??Xp({blobs:s,kzg:r,to:n}),o=t.proofs??ef({blobs:s,commitments:i,kzg:r,to:n}),a=[];for(let l=0;l<s.length;l++)a.push({blob:s[l],commitment:i[l],proof:o[l]});return a}function Wv(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new j8({transaction:t})}async function Vv(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return Zn(e)}const Gv=["blobVersionedHashes","chainId","fees","gas","nonce","type"],Py=new Map;async function rf(t,e){const{account:r=t.account,blobs:n,chain:s,gas:i,kzg:o,nonce:a,nonceManager:l,parameters:c=Gv,type:u}=e,d=r&&sn(r),h={...e,...d?{from:d==null?void 0:d.address}:{}};let p;async function g(){return p||(p=await Me(t,Aa,"getBlock")({blockTag:"latest"}),p)}let f;async function y(){return f||(s?s.id:typeof e.chainId<"u"?e.chainId:(f=await Me(t,Vv,"getChainId")({}),f))}if(c.includes("nonce")&&typeof a>"u"&&d)if(l){const b=await y();h.nonce=await l.consume({address:d.address,chainId:b,client:t})}else h.nonce=await Me(t,g6,"getTransactionCount")({address:d.address,blockTag:"pending"});if((c.includes("blobVersionedHashes")||c.includes("sidecars"))&&n&&o){const b=Xp({blobs:n,kzg:o});if(c.includes("blobVersionedHashes")){const m=Bv({commitments:b,to:"hex"});h.blobVersionedHashes=m}if(c.includes("sidecars")){const m=ef({blobs:n,commitments:b,kzg:o}),w=qv({blobs:n,commitments:b,proofs:m,to:"hex"});h.sidecars=w}}if(c.includes("chainId")&&(h.chainId=await y()),(c.includes("fees")||c.includes("type"))&&typeof u>"u")try{h.type=Wv(h)}catch{let b=Py.get(t.uid);if(typeof b>"u"){const m=await g();b=typeof(m==null?void 0:m.baseFeePerGas)=="bigint",Py.set(t.uid,b)}h.type=b?"eip1559":"legacy"}if(c.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const b=await g(),{maxFeePerGas:m,maxPriorityFeePerGas:w}=await Sy(t,{block:b,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<w)throw new u6({maxPriorityFeePerGas:w});h.maxPriorityFeePerGas=w,h.maxFeePerGas=m}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new Zp;if(typeof e.gasPrice>"u"){const b=await g(),{gasPrice:m}=await Sy(t,{block:b,chain:s,request:h,type:"legacy"});h.gasPrice=m}}return c.includes("gas")&&typeof i>"u"&&(h.gas=await Me(t,Qv,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),hu(h),delete h.parameters,h}async function Kv(t,{address:e,blockNumber:r,blockTag:n="latest"}){const s=r?ve(r):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||n]});return BigInt(i)}async function Qv(t,e){var s,i,o;const{account:r=t.account}=e,n=r?sn(r):void 0;try{let M=function(S){const{block:R,request:$,rpcStateOverride:D}=S;return t.request({method:"eth_estimateGas",params:D?[$,R??"latest",D]:R?[$,R]:[$]})};const{accessList:a,authorizationList:l,blobs:c,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:p,gas:g,gasPrice:f,maxFeePerBlobGas:y,maxFeePerGas:b,maxPriorityFeePerGas:m,nonce:w,value:C,stateOverride:_,...v}=await rf(t,{...e,parameters:(n==null?void 0:n.type)==="local"?void 0:["blobVersionedHashes"]}),N=(d?ve(d):void 0)||h,T=kv(_),O=await(async()=>{if(v.to)return v.to;if(l&&l.length>0)return await Dv({authorization:l[0]}).catch(()=>{throw new F("`to` is required. Could not infer from `authorizationList`")})})();hu(e);const x=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,L=(x||Jp)({...Qp(v,{format:x}),from:n==null?void 0:n.address,accessList:a,authorizationList:l,blobs:c,blobVersionedHashes:u,data:p,gas:g,gasPrice:f,maxFeePerBlobGas:y,maxFeePerGas:b,maxPriorityFeePerGas:m,nonce:w,to:O,value:C});let I=BigInt(await M({block:N,request:L,rpcStateOverride:T}));if(l){const S=await Kv(t,{address:L.from}),R=await Promise.all(l.map(async $=>{const{address:D}=$,k=await M({block:N,request:{authorizationList:void 0,data:p,from:n==null?void 0:n.address,to:D,value:ve(S)},rpcStateOverride:T}).catch(()=>100000n);return 2n*BigInt(k)}));I+=R.reduce(($,D)=>$+D,0n)}return I}catch(a){throw i6(a,{...e,account:n,chain:t.chain})}}function A6(t,e){if(!Pt(t,{strict:!1}))throw new er({address:t});if(!Pt(e,{strict:!1}))throw new er({address:e});return t.toLowerCase()===e.toLowerCase()}const xy="/docs/contract/decodeEventLog";function _6(t){const{abi:e,data:r,strict:n,topics:s}=t,i=n??!0,[o,...a]=s;if(!o)throw new BU({docsPath:xy});const l=e.length===1?e[0]:e.find(f=>f.type==="event"&&o===Mp(Jn(f)));if(!(l&&"name"in l)||l.type!=="event")throw new hv(o,{docsPath:xy});const{name:c,inputs:u}=l,d=u==null?void 0:u.some(f=>!("name"in f&&f.name));let h=d?[]:{};const p=u.filter(f=>"indexed"in f&&f.indexed);for(let f=0;f<p.length;f++){const y=p[f],b=a[f];if(!b)throw new pv({abiItem:l,param:y});h[d?f:y.name||f]=C6({param:y,value:b})}const g=u.filter(f=>!("indexed"in f&&f.indexed));if(g.length>0){if(r&&r!=="0x")try{const f=lu(g,r);if(f)if(d)h=[...h,...f];else for(let y=0;y<g.length;y++)h[g[y].name]=f[y]}catch(f){if(i)throw f instanceof uv||f instanceof Sv?new Dh({abiItem:l,data:r,params:g,size:pt(r)}):f}else if(i)throw new Dh({abiItem:l,data:"0x",params:g,size:0})}return{eventName:c,args:Object.values(h).length>0?h:void 0}}function C6({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(lu([t],e)||[])[0]}function I6(t){const{abi:e,args:r,logs:n,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return n.map(o=>{var a;try{const l=e.find(u=>u.type==="event"&&o.topics[0]===Mp(u));if(!l)return null;const c=_6({...o,abi:[l],strict:s});return i&&!i.includes(c.eventName)||!S6({args:c.args,inputs:l.inputs,matchArgs:r})?null:{...c,...o}}catch(l){let c,u;if(l instanceof hv)return null;if(l instanceof Dh||l instanceof pv){if(s)return null;c=l.abiItem.name,u=(a=l.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:c}}}).filter(Boolean)}function S6(t){const{args:e,inputs:r,matchArgs:n}=t;if(!n)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?A6(o,a):i.type==="string"||i.type==="bytes"?Xn(ic(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(n)?n.every((i,o)=>{if(i==null)return!0;const a=r[o];return a?(Array.isArray(i)?i:[i]).some(c=>s(a,c,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof n=="object"&&!Array.isArray(n)?Object.entries(n).every(([i,o])=>{if(o==null)return!0;const a=r.find(c=>c.name===i);return a?(Array.isArray(o)?o:[o]).some(c=>s(a,c,e[i])):!1}):!1}function Yv(t,{args:e,eventName:r}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...r?{args:e,eventName:r}:{}}}const yd="/docs/contract/decodeFunctionResult";function ac(t){const{abi:e,args:r,functionName:n,data:s}=t;let i=e[0];if(n){const a=zp({abi:e,args:r,name:n});if(!a)throw new hl(n,{docsPath:yd});i=a}if(i.type!=="function")throw new hl(void 0,{docsPath:yd});if(!i.outputs)throw new LU(i.name,{docsPath:yd});const o=lu(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const Wh=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],Jv=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],Zv=[...Jv,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],T6=[...Jv,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],Oy=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],Ry=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],N6="0x82ad56cb",P6="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",x6="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe";class Vh extends F{constructor({blockNumber:e,chain:r,contract:n}){super(`Chain "${r.name}" does not support contract "${n.name}".`,{metaMessages:["This could be due to any of the following:",...e&&n.blockCreated&&n.blockCreated>e?[`- The contract "${n.name}" was not deployed until block ${n.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${n.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class O6 extends F{constructor({chain:e,currentChainId:r}){super(`The current chain of the wallet (id: ${r}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${r}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}}class R6 extends F{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class Xv extends F{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}class fu extends F{constructor({chainId:e}){super(typeof e=="number"?`Chain ID "${e}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}const wd="/docs/contract/encodeDeployData";function eE(t){const{abi:e,args:r,bytecode:n}=t;if(!r||r.length===0)return n;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new $U({docsPath:wd});if(!("inputs"in s))throw new my({docsPath:wd});if(!s.inputs||s.inputs.length===0)throw new my({docsPath:wd});const i=_v(s.inputs,r);return Sn([n,i])}function cc({blockNumber:t,chain:e,contract:r}){var s;const n=(s=e==null?void 0:e.contracts)==null?void 0:s[r];if(!n)throw new Vh({chain:e,contract:{name:r}});if(t&&n.blockCreated&&n.blockCreated>t)throw new Vh({blockNumber:t,chain:e,contract:{name:r,blockCreated:n.blockCreated}});return n.address}function D6(t,{docsPath:e,...r}){const n=(()=>{const s=Kp(t,r);return s instanceof uu?t:s})();return new V8(n,{docsPath:e,...r})}function tE(){let t=()=>{},e=()=>{};return{promise:new Promise((n,s)=>{t=n,e=s}),resolve:t,reject:e}}const bd=new Map;function rE({fn:t,id:e,shouldSplitBatch:r,wait:n=0,sort:s}){const i=async()=>{const u=l();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let p=0;p<u.length;p++){const{resolve:g}=u[p];g==null||g([h[p],h])}}).catch(h=>{for(let p=0;p<u.length;p++){const{reject:g}=u[p];g==null||g(h)}})},o=()=>bd.delete(e),a=()=>l().map(({args:u})=>u),l=()=>bd.get(e)||[],c=u=>bd.set(e,[...l(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:p}=tE();return(r==null?void 0:r([...a(),u]))&&i(),l().length>0?(c({args:u,resolve:h,reject:p}),d):(c({args:u,resolve:h,reject:p}),setTimeout(i,n),d)}}}async function nE(t,e){var x,U,L,M;const{account:r=t.account,batch:n=!!((x=t.batch)!=null&&x.multicall),blockNumber:s,blockTag:i="latest",accessList:o,blobs:a,code:l,data:c,factory:u,factoryData:d,gas:h,gasPrice:p,maxFeePerBlobGas:g,maxFeePerGas:f,maxPriorityFeePerGas:y,nonce:b,to:m,value:w,stateOverride:C,..._}=e,v=r?sn(r):void 0;if(l&&(u||d))throw new F("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(l&&m)throw new F("Cannot provide both `code` & `to` as parameters.");const A=l&&c,N=u&&d&&m&&c,T=A||N,O=A?U6({code:l,data:c}):N?M6({data:c,factory:u,factoryData:d,to:m}):c;try{hu(e);const S=(s?ve(s):void 0)||i,R=kv(C),$=(M=(L=(U=t.chain)==null?void 0:U.formatters)==null?void 0:L.transactionRequest)==null?void 0:M.format,k=($||Jp)({...Qp(_,{format:$}),from:v==null?void 0:v.address,accessList:o,blobs:a,data:O,gas:h,gasPrice:p,maxFeePerBlobGas:g,maxFeePerGas:f,maxPriorityFeePerGas:y,nonce:b,to:T?void 0:m,value:w});if(n&&k6({request:k})&&!R)try{return await $6(t,{...k,blockNumber:s,blockTag:i})}catch(X){if(!(X instanceof Xv)&&!(X instanceof Vh))throw X}const K=await t.request({method:"eth_call",params:R?[k,S,R]:[k,S]});return K==="0x"?{data:void 0}:{data:K}}catch(I){const S=F6(I),{offchainLookup:R,offchainLookupSignature:$}=await Zt(async()=>{const{offchainLookup:D,offchainLookupSignature:k}=await import("./ccip-BhoN9g09.js");return{offchainLookup:D,offchainLookupSignature:k}},__vite__mapDeps([3,2,1]));if(t.ccipRead!==!1&&(S==null?void 0:S.slice(0,10))===$&&m)return{data:await R(t,{data:S,to:m})};throw T&&(S==null?void 0:S.slice(0,10))==="0x101bb98d"?new K8({factory:u}):D6(I,{...e,account:v,chain:t.chain})}}function k6({request:t}){const{data:e,to:r,...n}=t;return!(!e||e.startsWith(N6)||!r||Object.values(n).filter(s=>typeof s<"u").length>0)}async function $6(t,e){var f;const{batchSize:r=1024,wait:n=0}=typeof((f=t.batch)==null?void 0:f.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:l}=e;let c=a;if(!c){if(!t.chain)throw new Xv;c=cc({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(s?ve(s):void 0)||i,{schedule:h}=rE({id:`${t.uid}.${d}`,wait:n,shouldSplitBatch(y){return y.reduce((m,{data:w})=>m+(w.length-2),0)>r*2},fn:async y=>{const b=y.map(C=>({allowFailure:!0,callData:C.data,target:C.to})),m=so({abi:Wh,args:[b],functionName:"aggregate3"}),w=await t.request({method:"eth_call",params:[{data:m,to:c},d]});return ac({abi:Wh,args:[b],functionName:"aggregate3",data:w||"0x"})}}),[{returnData:p,success:g}]=await h({data:o,to:l});if(!g)throw new Vp({data:p});return p==="0x"?{data:void 0}:{data:p}}function U6(t){const{code:e,data:r}=t;return eE({abi:$b(["constructor(bytes, bytes)"]),bytecode:P6,args:[e,r]})}function M6(t){const{data:e,factory:r,factoryData:n,to:s}=t;return eE({abi:$b(["constructor(address, bytes, address, bytes)"]),bytecode:x6,args:[s,e,r,n]})}function F6(t){var r;if(!(t instanceof F))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(r=e.data)==null?void 0:r.data:e.data}async function js(t,e){const{abi:r,address:n,args:s,functionName:i,...o}=e,a=so({abi:r,args:s,functionName:i});try{const{data:l}=await Me(t,nE,"call")({...o,data:a,to:n});return ac({abi:r,args:s,functionName:i,data:l||"0x"})}catch(l){throw pl(l,{abi:r,address:n,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}const vd=new Map,Dy=new Map;let B6=0;function fl(t,e,r){const n=++B6,s=()=>vd.get(t)||[],i=()=>{const u=s();vd.set(t,u.filter(d=>d.id!==n))},o=()=>{const u=s();if(!u.some(h=>h.id===n))return;const d=Dy.get(t);u.length===1&&d&&d(),i()},a=s();if(vd.set(t,[...a,{id:n,fns:e}]),a&&a.length>0)return o;const l={};for(const u in e)l[u]=(...d)=>{var p,g;const h=s();if(h.length!==0)for(const f of h)(g=(p=f.fns)[u])==null||g.call(p,...d)};const c=r(l);return typeof c=="function"&&Dy.set(t,c),o}async function gl(t){return new Promise(e=>setTimeout(e,t))}function sE(t,{emitOnBegin:e,initialWaitTime:r,interval:n}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const l=await(r==null?void 0:r(a))??n;await gl(l);const c=async()=>{s&&(await t({unpoll:i}),await gl(n),c())};c()})(),i}const L6=new Map,j6=new Map;function z6(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),r=e(t,L6),n=e(t,j6);return{clear:()=>{r.clear(),n.clear()},promise:r,response:n}}async function H6(t,{cacheKey:e,cacheTime:r=Number.POSITIVE_INFINITY}){const n=z6(e),s=n.response.get();if(s&&r>0&&new Date().getTime()-s.created.getTime()<r)return s.data;let i=n.promise.get();i||(i=t(),n.promise.set(i));try{const o=await i;return n.response.set({created:new Date,data:o}),o}finally{n.promise.clear()}}const q6=t=>`blockNumber.${t}`;async function W6(t,{cacheTime:e=t.cacheTime}={}){const r=await H6(()=>t.request({method:"eth_blockNumber"}),{cacheKey:q6(t.uid),cacheTime:e});return BigInt(r)}async function V6(t,{filter:e}){const r="strict"in e&&e.strict,n=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof n[0]=="string")return n;const s=n.map(i=>Yv(i));return!("abi"in e)||!e.abi?s:I6({abi:e.abi,logs:s,strict:r})}async function G6(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}class nf extends F{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class Ed extends F{constructor({docsPath:e,metaMessages:r,type:n}){super(`Account type "${n}" is not supported.`,{docsPath:e,metaMessages:r,name:"AccountTypeNotSupportedError"})}}function K6({chain:t,currentChainId:e}){if(!t)throw new R6;if(e!==t.id)throw new O6({chain:t,currentChainId:e})}function Q6(t,{docsPath:e,...r}){const n=(()=>{const s=Kp(t,r);return s instanceof uu?t:s})();return new H8(n,{docsPath:e,...r})}async function Y6(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const Ad=new au(128);async function iE(t,e){var b,m,w,C;const{account:r=t.account,chain:n=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:l,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:p,value:g,...f}=e;if(typeof r>"u")throw new nf({docsPath:"/docs/actions/wallet/sendTransaction"});const y=r?sn(r):null;try{hu(e);const _=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await Dv({authorization:i[0]}).catch(()=>{throw new F("`to` is required. Could not infer from `authorizationList`.")})})();if((y==null?void 0:y.type)==="json-rpc"||y===null){let v;n!==null&&(v=await Me(t,Vv,"getChainId")({}),K6({currentChainId:v,chain:n}));const A=(w=(m=(b=t.chain)==null?void 0:b.formatters)==null?void 0:m.transactionRequest)==null?void 0:w.format,T=(A||Jp)({...Qp(f,{format:A}),accessList:s,authorizationList:i,blobs:o,chainId:v,data:a,from:y==null?void 0:y.address,gas:l,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:p,to:_,value:g}),O=Ad.get(t.uid),x=O?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:x,params:[T]},{retryCount:0})}catch(U){if(O===!1)throw U;const L=U;if(L.name==="InvalidInputRpcError"||L.name==="InvalidParamsRpcError"||L.name==="MethodNotFoundRpcError"||L.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[T]},{retryCount:0}).then(M=>(Ad.set(t.uid,!0),M)).catch(M=>{const I=M;throw I.name==="MethodNotFoundRpcError"||I.name==="MethodNotSupportedRpcError"?(Ad.set(t.uid,!1),L):I});throw L}}if((y==null?void 0:y.type)==="local"){const v=await Me(t,rf,"prepareTransactionRequest")({account:y,accessList:s,authorizationList:i,blobs:o,chain:n,data:a,gas:l,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:p,nonceManager:y.nonceManager,parameters:[...Gv,"sidecars"],value:g,...f,to:_}),A=(C=n==null?void 0:n.serializers)==null?void 0:C.transaction,N=await y.signTransaction(v,{serializer:A});return await Me(t,Y6,"sendRawTransaction")({serializedTransaction:N})}throw(y==null?void 0:y.type)==="smart"?new Ed({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Ed({docsPath:"/docs/actions/wallet/sendTransaction",type:y==null?void 0:y.type})}catch(_){throw _ instanceof Ed?_:Q6(_,{...e,account:y,chain:e.chain||void 0})}}async function J6(t,e){const{abi:r,account:n=t.account,address:s,args:i,dataSuffix:o,functionName:a,...l}=e;if(typeof n>"u")throw new nf({docsPath:"/docs/contract/writeContract"});const c=n?sn(n):null,u=so({abi:r,args:i,functionName:a});try{return await Me(t,iE,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:c,...l})}catch(d){throw pl(d,{abi:r,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:c==null?void 0:c.address})}}const Gh=256;let xc=Gh,Oc;function oE(t=11){if(!Oc||xc+t>Gh*2){Oc="",xc=0;for(let e=0;e<Gh;e++)Oc+=(256+Math.random()*256|0).toString(16).substring(1)}return Oc.substring(xc,xc+++t)}function aE(t){const{batch:e,cacheTime:r=t.pollingInterval??4e3,ccipRead:n,key:s="base",name:i="Base Client",pollingInterval:o=4e3,type:a="base"}=t,l=t.chain,c=t.account?sn(t.account):void 0,{config:u,request:d,value:h}=t.transport({chain:l,pollingInterval:o}),p={...u,...h},g={account:c,batch:e,cacheTime:r,ccipRead:n,chain:l,key:s,name:i,pollingInterval:o,request:d,transport:p,type:a,uid:oE()};function f(y){return b=>{const m=b(y);for(const C in g)delete m[C];const w={...y,...m};return Object.assign(w,{extend:f(w)})}}return Object.assign(g,{extend:f(g)})}const Rc=new au(8192);function Z6(t,{enabled:e=!0,id:r}){if(!e||!r)return t();if(Rc.get(r))return Rc.get(r);const n=t().finally(()=>Rc.delete(r));return Rc.set(r,n),n}function ml(t,{delay:e=100,retryCount:r=2,shouldRetry:n=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const l=async({error:c})=>{const u=typeof e=="function"?e({count:a,error:c}):e;u&&await gl(u),o({count:a+1})};try{const c=await t();s(c)}catch(c){if(a<r&&await n({count:a,error:c}))return l({error:c});i(c)}};o()})}function X6(t,e={}){return async(r,n={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:l}={...e,...n},{method:c}=r;if((d=i==null?void 0:i.exclude)!=null&&d.includes(c))throw new As(new Error("method not supported"),{method:c});if(i!=null&&i.include&&!i.include.includes(c))throw new As(new Error("method not supported"),{method:c});const u=s?ou(`${l}.${vr(r)}`):void 0;return Z6(()=>ml(async()=>{try{return await t(r)}catch(h){const p=h;switch(p.code){case ua.code:throw new ua(p);case da.code:throw new da(p);case ha.code:throw new ha(p,{method:r.method});case pa.code:throw new pa(p);case Bs.code:throw new Bs(p);case fa.code:throw new fa(p);case ga.code:throw new ga(p);case Vn.code:throw new Vn(p);case Li.code:throw new Li(p);case As.code:throw new As(p,{method:r.method});case ji.code:throw new ji(p);case ma.code:throw new ma(p);case ut.code:throw new ut(p);case ya.code:throw new ya(p);case wa.code:throw new wa(p);case ba.code:throw new ba(p);case va.code:throw new va(p);case tn.code:throw new tn(p);case 5e3:throw new ut(p);default:throw h instanceof F?h:new Y8(p)}}},{delay:({count:h,error:p})=>{var g;if(p&&p instanceof Wo){const f=(g=p==null?void 0:p.headers)==null?void 0:g.get("Retry-After");if(f!=null&&f.match(/\d/))return Number.parseInt(f)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>e4(h)}),{enabled:s,id:u})}}function e4(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===ji.code||t.code===Bs.code:t instanceof Wo&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function sf({key:t,methods:e,name:r,request:n,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},l){const c=oE();return{config:{key:t,methods:e,name:r,request:n,retryCount:s,retryDelay:i,timeout:o,type:a},request:X6(n,{methods:e,retryCount:s,retryDelay:i,uid:c}),value:l}}function t4(t,e={}){const{key:r="custom",methods:n,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>sf({key:r,methods:n,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function ky(t,e={}){const{key:r="fallback",name:n="Fallback",rank:s=!1,shouldThrow:i=r4,retryCount:o,retryDelay:a}=e;return({chain:l,pollingInterval:c=4e3,timeout:u,...d})=>{let h=t,p=()=>{};const g=sf({key:r,name:n,async request({method:f,params:y}){let b;const m=async(w=0)=>{const C=h[w]({...d,chain:l,retryCount:0,timeout:u});try{const _=await C.request({method:f,params:y});return p({method:f,params:y,response:_,transport:C,status:"success"}),_}catch(_){if(p({error:_,method:f,params:y,transport:C,status:"error"}),i(_)||w===h.length-1||(b??(b=h.slice(w+1).some(v=>{const{include:A,exclude:N}=v({chain:l}).config.methods||{};return A?A.includes(f):N?!N.includes(f):!0})),!b))throw _;return m(w+1)}};return m()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:f=>p=f,transports:h.map(f=>f({chain:l,retryCount:0}))});if(s){const f=typeof s=="object"?s:{};n4({chain:l,interval:f.interval??c,onTransports:y=>h=y,ping:f.ping,sampleCount:f.sampleCount,timeout:f.timeout,transports:h,weights:f.weights})}return g}}function r4(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===Li.code||t.code===ut.code||_s.nodeMessage.test(t.message)||t.code===5e3))}function n4({chain:t,interval:e=4e3,onTransports:r,ping:n,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:l=.7,latency:c=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async f=>{const y=f({chain:t,retryCount:0,timeout:i}),b=Date.now();let m,w;try{await(n?n({transport:y}):y.request({method:"net_listening"})),w=1}catch{w=0}finally{m=Date.now()}return{latency:m-b,success:w}}));u.push(h),u.length>s&&u.shift();const p=Math.max(...u.map(f=>Math.max(...f.map(({latency:y})=>y)))),g=o.map((f,y)=>{const b=u.map(v=>v[y].latency),w=1-b.reduce((v,A)=>v+A,0)/b.length/p,C=u.map(v=>v[y].success),_=C.reduce((v,A)=>v+A,0)/C.length;return _===0?[0,y]:[c*w+l*_,y]}).sort((f,y)=>y[0]-f[0]);r(g.map(([,f])=>o[f])),await gl(e),d()};d()}class s4 extends F{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function cE(t,{errorInstance:e=new Error("timed out"),timeout:r,signal:n}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;r>0&&(o=setTimeout(()=>{n?a.abort():i(e)},r)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function i4(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const $y=i4();function o4(t,e={}){return{async request(r){var d;const{body:n,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=r,a={...e.fetchOptions??{},...r.fetchOptions??{}},{headers:l,method:c,signal:u}=a;try{const h=await cE(async({signal:g})=>{const f={...a,body:Array.isArray(n)?vr(n.map(w=>({jsonrpc:"2.0",id:w.id??$y.take(),...w}))):vr({jsonrpc:"2.0",id:n.id??$y.take(),...n}),headers:{"Content-Type":"application/json",...l},method:c||"POST",signal:u||(o>0?g:null)},y=new Request(t,f),b=await(s==null?void 0:s(y,f))??{...f,url:t};return await fetch(b.url??t,b)},{errorInstance:new _y({body:n,url:t}),timeout:o,signal:!0});i&&await i(h);let p;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))p=await h.json();else{p=await h.text();try{p=JSON.parse(p||"{}")}catch(g){if(h.ok)throw g;p={error:p}}}if(!h.ok)throw new Wo({body:n,details:vr(p.error)||h.statusText,headers:h.headers,status:h.status,url:t});return p}catch(h){throw h instanceof Wo||h instanceof _y?h:new Wo({body:n,cause:h,url:t})}}}}function _d(t,e={}){const{batch:r,fetchOptions:n,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:l,retryDelay:c,raw:u}=e;return({chain:d,retryCount:h,timeout:p})=>{const{batchSize:g=1e3,wait:f=0}=typeof r=="object"?r:{},y=e.retryCount??h,b=p??e.timeout??1e4,m=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!m)throw new s4;const w=o4(m,{fetchOptions:n,onRequest:a,onResponse:l,timeout:b});return sf({key:s,methods:i,name:o,async request({method:C,params:_}){const v={method:C,params:_},{schedule:A}=rE({id:m,wait:f,shouldSplitBatch(x){return x.length>g},fn:x=>w.request({body:x}),sort:(x,U)=>x.id-U.id}),N=async x=>r?A(x):[await w.request({body:x})],[{error:T,result:O}]=await N(v);if(u)return{error:T,result:O};if(T)throw new Gp({body:v,error:T,url:m});return O},retryCount:y,retryDelay:c,timeout:b,type:"http"},{fetchOptions:n,url:m})}}function of(t,e){var n,s,i,o,a,l;if(!(t instanceof F))return!1;const r=t.walk(c=>c instanceof Uh);return r instanceof Uh?!!(((n=r.data)==null?void 0:n.errorName)==="ResolverNotFound"||((s=r.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=r.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=r.data)==null?void 0:o.errorName)==="ResolverError"||((a=r.data)==null?void 0:a.errorName)==="HttpError"||(l=r.reason)!=null&&l.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&r.reason===Iv[50]):!1}function lE(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return _n(e)?e:null}function Kc(t){let e=new Uint8Array(32).fill(0);if(!t)return At(e);const r=t.split(".");for(let n=r.length-1;n>=0;n-=1){const s=lE(r[n]),i=s?ic(s):Xn(Ns(r[n]),"bytes");e=Xn(Fs([e,i]),"bytes")}return At(e)}function a4(t){return`[${t.slice(2)}]`}function c4(t){const e=new Uint8Array(32).fill(0);return t?lE(t)||Xn(Ns(t)):At(e)}function af(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const r=new Uint8Array(Ns(e).byteLength+2);let n=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=Ns(s[i]);o.byteLength>255&&(o=Ns(a4(c4(s[i])))),r[n]=o.length,r.set(o,n+1),n+=o.length+1}return r.byteLength!==n+1?r.slice(0,n+1):r}async function l4(t,e){const{blockNumber:r,blockTag:n,coinType:s,name:i,gatewayUrls:o,strict:a}=e,{chain:l}=t,c=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!l)throw new Error("client chain not configured. universalResolverAddress is required.");return cc({blockNumber:r,chain:l,contract:"ensUniversalResolver"})})(),u=l==null?void 0:l.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d=so({abi:Ry,functionName:"addr",...s!=null?{args:[Kc(i),BigInt(s)]}:{args:[Kc(i)]}}),h={address:c,abi:Zv,functionName:"resolve",args:[le(af(i)),d],blockNumber:r,blockTag:n},p=Me(t,js,"readContract"),g=o?await p({...h,args:[...h.args,o]}):await p(h);if(g[0]==="0x")return null;const f=ac({abi:Ry,args:s!=null?[Kc(i),BigInt(s)]:void 0,functionName:"addr",data:g[0]});return f==="0x"||Xr(f)==="0x00"?null:f}catch(d){if(a)throw d;if(of(d,"resolve"))return null;throw d}}class u4 extends F{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class So extends F{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class cf extends F{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class d4 extends F{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const h4=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,p4=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,f4=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,g4=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function m4(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const r=e.headers.get("content-type");return r==null?void 0:r.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(r=>{const n=new Image;n.onload=()=>{r(!0)},n.onerror=()=>{r(!1)},n.src=t})}}function Uy(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function uE({uri:t,gatewayUrls:e}){const r=f4.test(t);if(r)return{uri:t,isOnChain:!0,isEncoded:r};const n=Uy(e==null?void 0:e.ipfs,"https://ipfs.io"),s=Uy(e==null?void 0:e.arweave,"https://arweave.net"),i=t.match(h4),{protocol:o,subpath:a,target:l,subtarget:c=""}=(i==null?void 0:i.groups)||{},u=o==="ipns:/"||a==="ipns/",d=o==="ipfs:/"||a==="ipfs/"||p4.test(t);if(t.startsWith("http")&&!u&&!d){let p=t;return e!=null&&e.arweave&&(p=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:p,isOnChain:!1,isEncoded:!1}}if((u||d)&&l)return{uri:`${n}/${u?"ipns":"ipfs"}/${l}${c}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&l)return{uri:`${s}/${l}${c||""}`,isOnChain:!1,isEncoded:!1};let h=t.replace(g4,"");if(h.startsWith("<svg")&&(h=`data:image/svg+xml;base64,${btoa(h)}`),h.startsWith("data:")||h.startsWith("{"))return{uri:h,isOnChain:!0,isEncoded:!1};throw new cf({uri:t})}function dE(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new u4({data:t});return t.image||t.image_url||t.image_data}async function y4({gatewayUrls:t,uri:e}){try{const r=await fetch(e).then(s=>s.json());return await lf({gatewayUrls:t,uri:dE(r)})}catch{throw new cf({uri:e})}}async function lf({gatewayUrls:t,uri:e}){const{uri:r,isOnChain:n}=uE({uri:e,gatewayUrls:t});if(n||await m4(r))return r;throw new cf({uri:e})}function w4(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[r,n,s]=e.split("/"),[i,o]=r.split(":"),[a,l]=n.split(":");if(!i||i.toLowerCase()!=="eip155")throw new So({reason:"Only EIP-155 supported"});if(!o)throw new So({reason:"Chain ID not found"});if(!l)throw new So({reason:"Contract address not found"});if(!s)throw new So({reason:"Token ID not found"});if(!a)throw new So({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o),namespace:a.toLowerCase(),contractAddress:l,tokenID:s}}async function b4(t,{nft:e}){if(e.namespace==="erc721")return js(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return js(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new d4({namespace:e.namespace})}async function v4(t,{gatewayUrls:e,record:r}){return/eip155:/i.test(r)?E4(t,{gatewayUrls:e,record:r}):lf({uri:r,gatewayUrls:e})}async function E4(t,{gatewayUrls:e,record:r}){const n=w4(r),s=await b4(t,{nft:n}),{uri:i,isOnChain:o,isEncoded:a}=uE({uri:s,gatewayUrls:e});if(o&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const c=a?atob(i.replace("data:application/json;base64,","")):i,u=JSON.parse(c);return lf({uri:dE(u),gatewayUrls:e})}let l=n.tokenID;return n.namespace==="erc1155"&&(l=l.replace("0x","").padStart(64,"0")),y4({gatewayUrls:e,uri:i.replace(/(?:0x)?{id}/,l)})}async function A4(t,e){const{blockNumber:r,blockTag:n,key:s,name:i,gatewayUrls:o,strict:a}=e,{chain:l}=t,c=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!l)throw new Error("client chain not configured. universalResolverAddress is required.");return cc({blockNumber:r,chain:l,contract:"ensUniversalResolver"})})(),u=l==null?void 0:l.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d={address:c,abi:Zv,functionName:"resolve",args:[le(af(i)),so({abi:Oy,functionName:"text",args:[Kc(i),s]})],blockNumber:r,blockTag:n},h=Me(t,js,"readContract"),p=o?await h({...d,args:[...d.args,o]}):await h(d);if(p[0]==="0x")return null;const g=ac({abi:Oy,functionName:"text",data:p[0]});return g===""?null:g}catch(d){if(a)throw d;if(of(d,"resolve"))return null;throw d}}async function _4(t,{blockNumber:e,blockTag:r,assetGatewayUrls:n,name:s,gatewayUrls:i,strict:o,universalResolverAddress:a}){const l=await Me(t,A4,"getEnsText")({blockNumber:e,blockTag:r,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:i,strict:o});if(!l)return null;try{return await v4(t,{record:l,gatewayUrls:n})}catch{return null}}async function C4(t,{address:e,blockNumber:r,blockTag:n,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=cc({blockNumber:r,chain:t.chain,contract:"ensUniversalResolver"})}const l=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const c={address:a,abi:T6,functionName:"reverse",args:[le(af(l))],blockNumber:r,blockTag:n},u=Me(t,js,"readContract"),[d,h]=s?await u({...c,args:[...c.args,s]}):await u(c);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(c){if(i)throw c;if(of(c,"reverse"))return null;throw c}}async function I4(t){const e=m8(t,{method:"eth_newPendingTransactionFilter"}),r=await t.request({method:"eth_newPendingTransactionFilter"});return{id:r,request:e(r),type:"transaction"}}function ao(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function S4(t){const{authorizationList:e}=t;if(e)for(const r of e){const{chainId:n}=r,s=r.address;if(!Pt(s))throw new er({address:s});if(n<0)throw new fu({chainId:n})}uf(t)}function T4(t){const{blobVersionedHashes:e}=t;if(e){if(e.length===0)throw new Hv;for(const r of e){const n=pt(r),s=Zn(ca(r,0,1));if(n!==32)throw new b6({hash:r,size:n});if(s!==zv)throw new v6({hash:r,version:s})}}uf(t)}function uf(t){const{chainId:e,maxPriorityFeePerGas:r,maxFeePerGas:n,to:s}=t;if(e<=0)throw new fu({chainId:e});if(s&&!Pt(s))throw new er({address:s});if(n&&n>du)throw new Ls({maxFeePerGas:n});if(r&&n&&r>n)throw new Ea({maxFeePerGas:n,maxPriorityFeePerGas:r})}function N4(t){const{chainId:e,maxPriorityFeePerGas:r,gasPrice:n,maxFeePerGas:s,to:i}=t;if(e<=0)throw new fu({chainId:e});if(i&&!Pt(i))throw new er({address:i});if(r||s)throw new F("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(n&&n>du)throw new Ls({maxFeePerGas:n})}function P4(t){const{chainId:e,maxPriorityFeePerGas:r,gasPrice:n,maxFeePerGas:s,to:i}=t;if(i&&!Pt(i))throw new er({address:i});if(typeof e<"u"&&e<=0)throw new fu({chainId:e});if(r||s)throw new F("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(n&&n>du)throw new Ls({maxFeePerGas:n})}function gu(t){if(!t||t.length===0)return[];const e=[];for(let r=0;r<t.length;r++){const{address:n,storageKeys:s}=t[r];for(let i=0;i<s.length;i++)if(s[i].length-2!==64)throw new z8({storageKey:s[i]});if(!Pt(n,{strict:!1}))throw new er({address:n});e.push([n,s])}return e}function x4(t,e){const r=Wv(t);return r==="eip1559"?D4(t,e):r==="eip2930"?k4(t,e):r==="eip4844"?R4(t,e):r==="eip7702"?O4(t,e):$4(t,e)}function O4(t,e){const{authorizationList:r,chainId:n,gas:s,nonce:i,to:o,value:a,maxFeePerGas:l,maxPriorityFeePerGas:c,accessList:u,data:d}=t;S4(t);const h=gu(u),p=U4(r);return Sn(["0x04",es([le(n),i?le(i):"0x",c?le(c):"0x",l?le(l):"0x",s?le(s):"0x",o??"0x",a?le(a):"0x",d??"0x",h,p,...lc(t,e)])])}function R4(t,e){const{chainId:r,gas:n,nonce:s,to:i,value:o,maxFeePerBlobGas:a,maxFeePerGas:l,maxPriorityFeePerGas:c,accessList:u,data:d}=t;T4(t);let h=t.blobVersionedHashes,p=t.sidecars;if(t.blobs&&(typeof h>"u"||typeof p>"u")){const w=typeof t.blobs[0]=="string"?t.blobs:t.blobs.map(v=>At(v)),C=t.kzg,_=Xp({blobs:w,kzg:C});if(typeof h>"u"&&(h=Bv({commitments:_})),typeof p>"u"){const v=ef({blobs:w,commitments:_,kzg:C});p=qv({blobs:w,commitments:_,proofs:v})}}const g=gu(u),f=[le(r),s?le(s):"0x",c?le(c):"0x",l?le(l):"0x",n?le(n):"0x",i??"0x",o?le(o):"0x",d??"0x",g,a?le(a):"0x",h??[],...lc(t,e)],y=[],b=[],m=[];if(p)for(let w=0;w<p.length;w++){const{blob:C,commitment:_,proof:v}=p[w];y.push(C),b.push(_),m.push(v)}return Sn(["0x03",es(p?[f,y,b,m]:f)])}function D4(t,e){const{chainId:r,gas:n,nonce:s,to:i,value:o,maxFeePerGas:a,maxPriorityFeePerGas:l,accessList:c,data:u}=t;uf(t);const d=gu(c),h=[le(r),s?le(s):"0x",l?le(l):"0x",a?le(a):"0x",n?le(n):"0x",i??"0x",o?le(o):"0x",u??"0x",d,...lc(t,e)];return Sn(["0x02",es(h)])}function k4(t,e){const{chainId:r,gas:n,data:s,nonce:i,to:o,value:a,accessList:l,gasPrice:c}=t;N4(t);const u=gu(l),d=[le(r),i?le(i):"0x",c?le(c):"0x",n?le(n):"0x",o??"0x",a?le(a):"0x",s??"0x",u,...lc(t,e)];return Sn(["0x01",es(d)])}function $4(t,e){const{chainId:r=0,gas:n,data:s,nonce:i,to:o,value:a,gasPrice:l}=t;P4(t);let c=[i?le(i):"0x",l?le(l):"0x",n?le(n):"0x",o??"0x",a?le(a):"0x",s??"0x"];if(e){const u=(()=>{if(e.v>=35n)return(e.v-35n)/2n>0?e.v:27n+(e.v===35n?0n:1n);if(r>0)return BigInt(r*2)+BigInt(35n+e.v-27n);const p=27n+(e.v===27n?0n:1n);if(e.v!==p)throw new L8({v:e.v});return p})(),d=Xr(e.r),h=Xr(e.s);c=[...c,le(u),d==="0x00"?"0x":d,h==="0x00"?"0x":h]}else r>0&&(c=[...c,le(r),"0x","0x"]);return es(c)}function lc(t,e){const r=e??t,{v:n,yParity:s}=r;if(typeof r.r>"u")return[];if(typeof r.s>"u")return[];if(typeof n>"u"&&typeof s>"u")return[];const i=Xr(r.r),o=Xr(r.s);return[typeof s=="number"?s?le(1):"0x":n===0n?"0x":n===1n?le(1):n===27n?"0x":le(1),i==="0x00"?"0x":i,o==="0x00"?"0x":o]}function U4(t){if(!t||t.length===0)return[];const e=[];for(const r of t){const{chainId:n,nonce:s,...i}=r,o=r.address;e.push([n?le(n):"0x",o,s?le(s):"0x",...lc({},i)])}return e}const M4={"0x0":"reverted","0x1":"success"};function hE(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(r=>Yv(r)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Zn(t.transactionIndex):null,status:t.status?M4[t.status]:null,type:t.type?Uv[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}const F4=Yp("transactionReceipt",hE);class B4 extends F{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function L4(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new B4({value:t});let[r,n="0"]=t.split(".");const s=r.startsWith("-");if(s&&(r=r.slice(1)),n=n.replace(/(0+)$/,""),e===0)Math.round(+`.${n}`)===1&&(r=`${BigInt(r)+1n}`),n="";else if(n.length>e){const[i,o,a]=[n.slice(0,e-1),n.slice(e-1,e),n.slice(e)],l=Math.round(+`${o}.${a}`);l>9?n=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):n=`${i}${l}`,n.length>e&&(n=n.slice(1),r=`${BigInt(r)+1n}`),n=n.slice(0,e)}else n=n.padEnd(e,"0");return BigInt(`${s?"-":""}${r}${n}`)}async function pE(t,{blockHash:e,blockNumber:r,blockTag:n,hash:s,index:i}){var u,d,h;const o=n||"latest",a=r!==void 0?ve(r):void 0;let l=null;if(s?l=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?l=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,ve(i)]},{dedupe:!0}):l=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,ve(i)]},{dedupe:!!a}),!l)throw new Nv({blockHash:e,blockNumber:r,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||pu)(l)}async function My(t,{hash:e}){var s,i,o;const r=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!r)throw new Pv({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||hE)(r)}async function j4(t,e){var y;const{allowFailure:r=!0,batchSize:n,blockNumber:s,blockTag:i,multicallAddress:o,stateOverride:a}=e,l=e.contracts,c=n??(typeof((y=t.batch)==null?void 0:y.multicall)=="object"&&t.batch.multicall.batchSize||1024);let u=o;if(!u){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");u=cc({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=[[]];let h=0,p=0;for(let b=0;b<l.length;b++){const{abi:m,address:w,args:C,functionName:_}=l[b];try{const v=so({abi:m,args:C,functionName:_});p+=(v.length-2)/2,c>0&&p>c&&d[h].length>0&&(h++,p=(v.length-2)/2,d[h]=[]),d[h]=[...d[h],{allowFailure:!0,callData:v,target:w}]}catch(v){const A=pl(v,{abi:m,address:w,args:C,docsPath:"/docs/contract/multicall",functionName:_});if(!r)throw A;d[h]=[...d[h],{allowFailure:!0,callData:"0x",target:w}]}}const g=await Promise.allSettled(d.map(b=>Me(t,js,"readContract")({abi:Wh,address:u,args:[b],blockNumber:s,blockTag:i,functionName:"aggregate3",stateOverride:a}))),f=[];for(let b=0;b<g.length;b++){const m=g[b];if(m.status==="rejected"){if(!r)throw m.reason;for(let C=0;C<d[b].length;C++)f.push({status:"failure",error:m.reason,result:void 0});continue}const w=m.value;for(let C=0;C<w.length;C++){const{returnData:_,success:v}=w[C],{callData:A}=d[b][C],{abi:N,address:T,functionName:O,args:x}=l[f.length];try{if(A==="0x")throw new iu;if(!v)throw new Vp({data:_});const U=ac({abi:N,args:x,data:_,functionName:O});f.push(r?{result:U,status:"success"}:U)}catch(U){const L=pl(U,{abi:N,address:T,args:x,docsPath:"/docs/contract/multicall",functionName:O});if(!r)throw L;f.push({error:L,result:void 0,status:"failure"})}}}if(f.length!==l.length)throw new F("multicall results mismatch");return f}function z4(t,{emitOnBegin:e=!1,emitMissed:r=!1,onBlockNumber:n,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="fallback"&&t.transport.transports[0].config.type==="webSocket");let l;return a?(()=>{const d=vr(["watchBlockNumber",t.uid,e,r,o]);return fl(d,{onBlockNumber:n,onError:s},h=>sE(async()=>{var p;try{const g=await Me(t,W6,"getBlockNumber")({cacheTime:0});if(l){if(g===l)return;if(g-l>1&&r)for(let f=l+1n;f<g;f++)h.onBlockNumber(f,l),l=f}(!l||g>l)&&(h.onBlockNumber(g,l),l=g)}catch(g){(p=h.onError)==null||p.call(h,g)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=vr(["watchBlockNumber",t.uid,e,r]);return fl(d,{onBlockNumber:n,onError:s},h=>{let p=!0,g=()=>p=!1;return(async()=>{try{const f=(()=>{if(t.transport.type==="fallback"){const b=t.transport.transports.find(m=>m.config.type==="webSocket");return b?b.value:t.transport}return t.transport})(),{unsubscribe:y}=await f.subscribe({params:["newHeads"],onData(b){var w;if(!p)return;const m=Dr((w=b.result)==null?void 0:w.number);h.onBlockNumber(m,l),l=m},onError(b){var m;(m=h.onError)==null||m.call(h,b)}});g=y,p||g()}catch(f){s==null||s(f)}})(),()=>g()})})()}async function H4(t,{confirmations:e=1,hash:r,onReplaced:n,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:l})=>~~(1<<l)*200,timeout:a=18e4}){const l=vr(["waitForTransactionReceipt",t.uid,r]);let c,u,d,h=!1;const{promise:p,resolve:g,reject:f}=tE(),y=a?setTimeout(()=>f(new q8({hash:r})),a):void 0,b=fl(l,{onReplaced:n,resolve:g,reject:f},m=>{const w=Me(t,z4,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(C){const _=A=>{clearTimeout(y),w(),A(),b()};let v=C;if(!h)try{if(d){if(e>1&&(!d.blockNumber||v-d.blockNumber+1n<e))return;_(()=>m.resolve(d));return}if(c||(h=!0,await ml(async()=>{c=await Me(t,pE,"getTransaction")({hash:r}),c.blockNumber&&(v=c.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await Me(t,My,"getTransactionReceipt")({hash:r}),e>1&&(!d.blockNumber||v-d.blockNumber+1n<e))return;_(()=>m.resolve(d))}catch(A){if(A instanceof Nv||A instanceof Pv){if(!c){h=!1;return}try{u=c,h=!0;const N=await ml(()=>Me(t,Aa,"getBlock")({blockNumber:v,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:x})=>x instanceof $v});h=!1;const T=N.transactions.find(({from:x,nonce:U})=>x===u.from&&U===u.nonce);if(!T||(d=await Me(t,My,"getTransactionReceipt")({hash:T.hash}),e>1&&(!d.blockNumber||v-d.blockNumber+1n<e)))return;let O="replaced";T.to===u.to&&T.value===u.value&&T.input===u.input?O="repriced":T.from===T.to&&T.value===0n&&(O="cancelled"),_(()=>{var x;(x=m.onReplaced)==null||x.call(m,{reason:O,replacedTransaction:u,transaction:T,transactionReceipt:d}),m.resolve(d)})}catch(N){_(()=>m.reject(N))}}else _(()=>m.reject(A))}}})});return p}function q4(t,{batch:e=!0,onError:r,onTransactions:n,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket")?(()=>{const c=vr(["watchPendingTransactions",t.uid,e,i]);return fl(c,{onTransactions:n,onError:r},u=>{let d;const h=sE(async()=>{var p;try{if(!d)try{d=await Me(t,I4,"createPendingTransactionFilter")({});return}catch(f){throw h(),f}const g=await Me(t,V6,"getFilterChanges")({filter:d});if(g.length===0)return;if(e)u.onTransactions(g);else for(const f of g)u.onTransactions([f])}catch(g){(p=u.onError)==null||p.call(u,g)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await Me(t,G6,"uninstallFilter")({filter:d}),h()}})})():(()=>{let c=!0,u=()=>c=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!c)return;const p=h.result;n([p])},onError(h){r==null||r(h)}});u=d,c||u()}catch(d){r==null||r(d)}})(),()=>u()})()}async function W4(t,{account:e=t.account,message:r}){if(!e)throw new nf({docsPath:"/docs/actions/wallet/signMessage"});const n=sn(e);if(n.signMessage)return n.signMessage({message:r});const s=typeof r=="string"?ou(r):r.raw instanceof Uint8Array?le(r.raw):r.raw;return t.request({method:"personal_sign",params:[s,n.address]},{retryCount:0})}const Cd={createBalance(t,e){const r={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:r.name,symbol:r.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:r.value,price:r.price,quantity:{decimals:r.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:r.decimals})},iconUrl:r.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return io(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const r=e[1],n=parseInt(r,10);return isNaN(n)?"0x0":`0x${n.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(r=>this.isValidAsset(r)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},Fy={async getMyTokensWithBalance(t){const e=re.state.address,r=P.state.activeCaipNetwork;if(!e||!r)return[];if(r.chainNamespace==="eip155"){const s=await this.getEIP155Balances(e,r);if(s)return this.filterLowQualityTokens(s)}const n=await ae.getBalance(e,r.caipNetworkId,t);return this.filterLowQualityTokens(n.balances)},async getEIP155Balances(t,e){var r,n;try{const s=Cd.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await je.getCapabilities(t);if(!((n=(r=i==null?void 0:i[s])==null?void 0:r.assetDiscovery)!=null&&n.supported))return null;const o=await je.walletGetAssets({account:t,chainFilter:[s]});return Cd.isWalletGetAssetsResponse(o)?(o[s]||[]).map(l=>Cd.createBalance(l,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:P.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},_e=Je({tokenBalances:[],loading:!1}),By={state:_e,subscribe(t){return qt(_e,()=>t(_e))},subscribeKey(t,e){return tr(_e,t,e)},setToken(t){t&&(_e.token=Os(t))},setTokenAmount(t){_e.sendTokenAmount=t},setReceiverAddress(t){_e.receiverAddress=t},setReceiverProfileImageUrl(t){_e.receiverProfileImageUrl=t},setReceiverProfileName(t){_e.receiverProfileName=t},setGasPrice(t){_e.gasPrice=t},setGasPriceInUsd(t){_e.gasPriceInUSD=t},setNetworkBalanceInUsd(t){_e.networkBalanceInUSD=t},setLoading(t){_e.loading=t},sendToken(){var t;switch((t=P.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":this.sendEvmToken();return;case"solana":this.sendSolanaToken();return;default:throw new Error("Unsupported chain")}},sendEvmToken(){var t,e,r,n,s;(t=this.state.token)!=null&&t.address&&this.state.sendTokenAmount&&this.state.receiverAddress?(ze.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:re.state.preferredAccountType===ot.ACCOUNT_TYPES.SMART_ACCOUNT,token:this.state.token.address,amount:this.state.sendTokenAmount,network:((e=P.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||""}}),this.sendERC20Token({receiverAddress:this.state.receiverAddress,tokenAddress:this.state.token.address,sendTokenAmount:this.state.sendTokenAmount,decimals:this.state.token.quantity.decimals})):this.state.receiverAddress&&this.state.sendTokenAmount&&this.state.gasPrice&&((r=this.state.token)!=null&&r.quantity.decimals)&&(ze.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:re.state.preferredAccountType===ot.ACCOUNT_TYPES.SMART_ACCOUNT,token:(n=this.state.token)==null?void 0:n.symbol,amount:this.state.sendTokenAmount,network:((s=P.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),this.sendNativeToken({receiverAddress:this.state.receiverAddress,sendTokenAmount:this.state.sendTokenAmount,gasPrice:this.state.gasPrice,decimals:this.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;_e.loading=!0;const e=(i=P.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,r=(o=P.state.activeCaipNetwork)==null?void 0:o.chainNamespace,n=P.state.activeCaipAddress,s=n?ue.getPlainAddress(n):void 0;if(_e.lastRetry&&!ue.isAllowedRetry(_e.lastRetry,30*ht.ONE_SEC_MS))return _e.loading=!1,[];try{if(s&&e&&r){const a=await Fy.getMyTokensWithBalance();return _e.tokenBalances=a,_e.lastRetry=void 0,a}}catch(a){_e.lastRetry=Date.now(),t==null||t(a),Nt.showError("Token Balance Unavailable")}finally{_e.loading=!1}return[]},fetchNetworkBalance(){if(_e.tokenBalances.length===0)return;const t=Fy.mapBalancesToSwapTokens(_e.tokenBalances);if(!t)return;const e=t.find(r=>r.address===P.getActiveNetworkTokenAddress());e&&(_e.networkBalanceInUSD=e?fc.multiply(e.quantity.numeric,e.price).toString():"0")},isInsufficientNetworkTokenForGas(t,e){const r=e||"0";return fc.bigNumber(t).eq(0)?!0:fc.bigNumber(fc.bigNumber(r)).gt(t)},hasInsufficientGasFunds(){let t=!0;return re.state.preferredAccountType===ot.ACCOUNT_TYPES.SMART_ACCOUNT?t=!1:_e.networkBalanceInUSD&&(t=this.isInsufficientNetworkTokenForGas(_e.networkBalanceInUSD,_e.gasPriceInUSD)),t},async sendNativeToken(t){var i,o,a,l;De.pushTransactionStack({view:"Account",goBack:!1});const e=t.receiverAddress,r=re.state.address,n=je.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals)),s="0x";try{await je.sendTransaction({chainNamespace:"eip155",to:e,address:r,data:s,value:n??BigInt(0),gasPrice:t.gasPrice}),Nt.showSuccess("Transaction started"),ze.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:re.state.preferredAccountType===ot.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=this.state.token)==null?void 0:i.symbol)||"",amount:t.sendTokenAmount,network:((o=P.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),this.resetSend()}catch(c){console.error("SendController:sendERC20Token - failed to send native token",c);const u=c instanceof Error?c.message:"Unknown error";ze.sendEvent({type:"track",event:"SEND_ERROR",properties:{message:u,isSmartAccount:re.state.preferredAccountType===ot.ACCOUNT_TYPES.SMART_ACCOUNT,token:((a=this.state.token)==null?void 0:a.symbol)||"",amount:t.sendTokenAmount,network:((l=P.state.activeCaipNetwork)==null?void 0:l.caipNetworkId)||""}}),Nt.showError("Something went wrong")}},async sendERC20Token(t){var r,n;De.pushTransactionStack({view:"Account",goBack:!1});const e=je.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));try{if(re.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const s=ue.getPlainAddress(t.tokenAddress);await je.writeContract({fromAddress:re.state.address,tokenAddress:s,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:I1.getERC20Abi(s),chainNamespace:"eip155"}),Nt.showSuccess("Transaction started"),this.resetSend()}}catch(s){console.error("SendController:sendERC20Token - failed to send erc20 token",s);const i=s instanceof Error?s.message:"Unknown error";ze.sendEvent({type:"track",event:"SEND_ERROR",properties:{message:i,isSmartAccount:re.state.preferredAccountType===ot.ACCOUNT_TYPES.SMART_ACCOUNT,token:((r=this.state.token)==null?void 0:r.symbol)||"",amount:t.sendTokenAmount,network:((n=P.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)||""}}),Nt.showError("Something went wrong")}},sendSolanaToken(){if(!this.state.sendTokenAmount||!this.state.receiverAddress){Nt.showError("Please enter a valid amount and receiver address");return}De.pushTransactionStack({view:"Account",goBack:!1}),je.sendTransaction({chainNamespace:"solana",to:this.state.receiverAddress,value:this.state.sendTokenAmount}).then(()=>{this.resetSend(),re.fetchTokenBalance()}).catch(t=>{Nt.showError("Failed to send transaction. Please try again."),console.error("SendController:sendToken - failed to send solana transaction",t)})},resetSend(){_e.token=void 0,_e.sendTokenAmount=void 0,_e.receiverAddress=void 0,_e.receiverProfileImageUrl=void 0,_e.receiverProfileName=void 0,_e.loading=!1,_e.tokenBalances=[]}},Id={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},Dc={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},V=Je({chains:h1(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),P={state:V,subscribe(t){return qt(V,()=>{t(V)})},subscribeKey(t,e){return tr(V,t,e)},subscribeChainProp(t,e,r){let n;return qt(V.chains,()=>{var i;const s=r||V.activeChain;if(s){const o=(i=V.chains.get(s))==null?void 0:i[t];n!==o&&(n=o,e(o))}})},initialize(t,e,r){const{chainId:n,namespace:s}=Z.getActiveNetworkProps(),i=e==null?void 0:e.find(c=>c.id.toString()===(n==null?void 0:n.toString())),a=t.find(c=>(c==null?void 0:c.namespace)===s)||(t==null?void 0:t[0]),l=new Set([...(e==null?void 0:e.map(c=>c.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(V.noAdapters=!0),V.noAdapters||(V.activeChain=a==null?void 0:a.namespace,V.activeCaipNetwork=i,this.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),V.activeChain&&wn.set({activeChain:a==null?void 0:a.namespace})),l.forEach(c=>{const u=e==null?void 0:e.filter(d=>d.chainNamespace===c);P.state.chains.set(c,{namespace:c,networkState:Je({...Dc,caipNetwork:u==null?void 0:u[0]}),accountState:Je(Id),caipNetworks:u??[],...r}),this.setRequestedCaipNetworks(u??[],c)})},removeAdapter(t){var e,r;if(V.activeChain===t){const n=Array.from(V.chains.entries()).find(([s])=>s!==t);if(n){const s=(r=(e=n[1])==null?void 0:e.caipNetworks)==null?void 0:r[0];s&&this.setActiveCaipNetwork(s)}}V.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:r},n){V.chains.set(t.namespace,{namespace:t.namespace,networkState:{...Dc,caipNetwork:n[0]},accountState:Id,caipNetworks:n,connectionControllerClient:r,networkControllerClient:e}),this.setRequestedCaipNetworks((n==null?void 0:n.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var r;const e=V.chains.get(t.chainNamespace);if(e){const n=[...e.caipNetworks||[]];(r=e.caipNetworks)!=null&&r.find(s=>s.id===t.id)||n.push(t),V.chains.set(t.chainNamespace,{...e,caipNetworks:n}),this.setRequestedCaipNetworks(n,t.chainNamespace)}},removeNetwork(t,e){var n,s,i;const r=V.chains.get(t);if(r){const o=((n=V.activeCaipNetwork)==null?void 0:n.id)===e,a=[...((s=r.caipNetworks)==null?void 0:s.filter(l=>l.id!==e))||[]];o&&((i=r==null?void 0:r.caipNetworks)!=null&&i[0])&&this.setActiveCaipNetwork(r.caipNetworks[0]),V.chains.set(t,{...r,caipNetworks:a}),this.setRequestedCaipNetworks(a||[],t)}},setAdapterNetworkState(t,e){const r=V.chains.get(t);r&&(r.networkState={...r.networkState||Dc,...e},V.chains.set(t,r))},setChainAccountData(t,e,r=!0){if(!t)throw new Error("Chain is required to update chain account data");const n=V.chains.get(t);if(n){const s={...n.accountState||Id,...e};V.chains.set(t,{...n,accountState:s}),(V.chains.size===1||V.activeChain===t)&&(e.caipAddress&&(V.activeCaipAddress=e.caipAddress),re.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const r=V.chains.get(t);if(r){const n={...r.networkState||Dc,...e};V.chains.set(t,{...r,networkState:n})}},setAccountProp(t,e,r,n=!0){this.setChainAccountData(r,{[t]:e},n),t==="status"&&e==="disconnected"&&r&&pe.removeConnectorId(r)},setActiveNamespace(t){var n,s;V.activeChain=t;const e=t?V.chains.get(t):void 0,r=(n=e==null?void 0:e.networkState)==null?void 0:n.caipNetwork;r!=null&&r.id&&t&&(V.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,V.activeCaipNetwork=r,this.setChainNetworkData(t,{caipNetwork:r}),Z.setActiveCaipNetworkId(r==null?void 0:r.caipNetworkId),wn.set({activeChain:t,selectedNetworkId:r==null?void 0:r.caipNetworkId}))},setActiveCaipNetwork(t){var n,s,i;if(!t)return;V.activeChain!==t.chainNamespace&&this.setIsSwitchingNamespace(!0);const e=V.chains.get(t.chainNamespace);V.activeChain=t.chainNamespace,V.activeCaipNetwork=t,this.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(n=e==null?void 0:e.accountState)!=null&&n.address?V.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:V.activeCaipAddress=void 0,this.setAccountProp("caipAddress",V.activeCaipAddress,t.chainNamespace),e&&re.replaceState(e.accountState),By.resetSend(),wn.set({activeChain:V.activeChain,selectedNetworkId:(i=V.activeCaipNetwork)==null?void 0:i.caipNetworkId}),Z.setActiveCaipNetworkId(t.caipNetworkId),!this.checkIfSupportedNetwork(t.chainNamespace)&&z.state.enableNetworkSwitch&&!z.state.allowUnsupportedChain&&!je.state.wcBasic&&this.showUnsupportedChainUI()},addCaipNetwork(t){var r;if(!t)return;const e=V.chains.get(t.chainNamespace);e&&((r=e==null?void 0:e.caipNetworks)==null||r.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==P.state.activeChain,r=(s=P.getNetworkData(t))==null?void 0:s.caipNetwork,n=P.getCaipNetworkByNamespace(t,r==null?void 0:r.id);e&&n&&await P.switchActiveNetwork(n)},async switchActiveNetwork(t){var s;const e=P.state.chains.get(P.state.activeChain);!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=V.activeCaipNetwork)==null?void 0:o.id)}))&&De.goBack();const n=this.getNetworkControllerClient(t.chainNamespace);n&&(await n.switchCaipNetwork(t),ze.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}}))},getNetworkControllerClient(t){const e=t||V.activeChain,r=V.chains.get(e);if(!r)throw new Error("Chain adapter not found");if(!r.networkControllerClient)throw new Error("NetworkController client not set");return r.networkControllerClient},getConnectionControllerClient(t){const e=t||V.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const r=V.chains.get(e);if(!(r!=null&&r.connectionControllerClient))throw new Error("ConnectionController client not set");return r.connectionControllerClient},getAccountProp(t,e){var s;let r=V.activeChain;if(e&&(r=e),!r)return;const n=(s=V.chains.get(r))==null?void 0:s.accountState;if(n)return n[t]},getNetworkProp(t,e){var n;const r=(n=V.chains.get(e))==null?void 0:n.networkState;if(r)return r[t]},getRequestedCaipNetworks(t){const e=V.chains.get(t),{approvedCaipNetworkIds:r=[],requestedCaipNetworks:n=[]}=(e==null?void 0:e.networkState)||{};return ue.sortRequestedNetworks(r,n)},getAllRequestedCaipNetworks(){const t=[];return V.chains.forEach(e=>{const r=this.getRequestedCaipNetworks(e.namespace);t.push(...r)}),t},setRequestedCaipNetworks(t,e){this.setAdapterNetworkState(e,{requestedCaipNetworks:t})},getAllApprovedCaipNetworkIds(){const t=[];return V.chains.forEach(e=>{const r=this.getApprovedCaipNetworkIds(e.namespace);t.push(...r)}),t},getActiveCaipNetwork(){return V.activeCaipNetwork},getActiveCaipAddress(){return V.activeCaipAddress},getApprovedCaipNetworkIds(t){var n;const e=V.chains.get(t);return((n=e==null?void 0:e.networkState)==null?void 0:n.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=this.getNetworkControllerClient(),r=await(e==null?void 0:e.getApprovedCaipNetworksData());this.setAdapterNetworkState(t,{approvedCaipNetworkIds:r==null?void 0:r.approvedCaipNetworkIds,supportsAllNetworks:r==null?void 0:r.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const r=e||V.activeCaipNetwork,n=this.getRequestedCaipNetworks(t);return n.length?n==null?void 0:n.some(s=>s.id===(r==null?void 0:r.id)):!0},checkIfSupportedChainId(t){if(!V.activeChain)return!0;const e=this.getRequestedCaipNetworks(V.activeChain);return e==null?void 0:e.some(r=>r.id===t)},setSmartAccountEnabledNetworks(t,e){this.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var n;const t=ea.caipNetworkIdToNumber((n=V.activeCaipNetwork)==null?void 0:n.caipNetworkId),e=V.activeChain;if(!e||!t)return!1;const r=this.getNetworkProp("smartAccountEnabledNetworks",e);return!!(r!=null&&r.includes(Number(t)))},getActiveNetworkTokenAddress(){var n,s;const t=((n=V.activeCaipNetwork)==null?void 0:n.chainNamespace)||"eip155",e=((s=V.activeCaipNetwork)==null?void 0:s.id)||1,r=ht.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${r}`},showUnsupportedChainUI(){at.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=V.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&ht.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){this.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");V.activeCaipAddress=void 0,this.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),pe.removeConnectorId(e)},async disconnect(t){const e=U1(t);try{By.resetSend();const r=await Promise.allSettled(e.map(async([s,i])=>{var o;try{const{caipAddress:a}=this.getAccountData(s)||{};a&&((o=i.connectionControllerClient)!=null&&o.disconnect)&&await i.connectionControllerClient.disconnect(s),this.resetAccount(s),this.resetNetwork(s)}catch(a){throw new Error(`Failed to disconnect chain ${s}: ${a.message}`)}}));je.resetWcConnection();const n=r.filter(s=>s.status==="rejected");if(n.length>0)throw new Error(n.map(s=>s.reason.message).join(", "));Z.deleteConnectedSocialProvider(),t?pe.removeConnectorId(t):pe.resetConnectorIds(),ze.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:t||"all"}})}catch(r){console.error(r.message||"Failed to disconnect chains"),ze.sendEvent({type:"track",event:"DISCONNECT_ERROR",properties:{message:r.message||"Failed to disconnect chains"}})}},setIsSwitchingNamespace(t){V.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var r,n;const t=[];let e;if(V.chains.forEach(s=>{j.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(n=(r=V.chains.get(s))==null?void 0:r.caipNetworks)==null?void 0:n[0]:void 0,e}},getAccountData(t){var e;return t?(e=P.state.chains.get(t))==null?void 0:e.accountState:re.state},getNetworkData(t){var r;const e=t||V.activeChain;if(e)return(r=P.state.chains.get(e))==null?void 0:r.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const r=P.state.chains.get(t),n=(s=r==null?void 0:r.caipNetworks)==null?void 0:s.find(a=>a.id===e);return n||((i=r==null?void 0:r.networkState)==null?void 0:i.caipNetwork)||((o=r==null?void 0:r.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=pe.state.filterByNamespace;return(t?[V.chains.get(t)]:Array.from(V.chains.values())).flatMap(r=>(r==null?void 0:r.caipNetworks)||[]).map(r=>r.caipNetworkId)}},V4={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},fE=ue.getBlockchainApiUrl(),or=Je({clientId:null,api:new ql({baseUrl:fE,clientId:null}),supportedChains:{http:[],ws:[]}}),ae={state:or,async get(t){const{st:e,sv:r}=ae.getSdkProperties(),n=z.state.projectId,s={...t.params||{},st:e,sv:r,projectId:n};return or.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=z.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{or.supportedChains.http.length||await ae.getSupportedNetworks()}catch{return!1}return or.supportedChains.http.includes(t)},async getSupportedNetworks(){const t=await ae.get({path:"v1/supported-chains"});return or.supportedChains=t,t},async fetchIdentity({address:t,caipNetworkId:e}){if(!await ae.isNetworkSupported(e))return{avatar:"",name:""};const n=Z.getIdentityFromCacheForAddress(t);if(n)return n;const s=await ae.get({path:`/v1/identity/${t}`,params:{sender:P.state.activeCaipAddress?ue.getPlainAddress(P.state.activeCaipAddress):void 0}});return Z.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:r,signal:n,cache:s,chainId:i}){var a;return await ae.isNetworkSupported((a=P.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?ae.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:r,chainId:i},signal:n,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:r,to:n,gasPrice:s}){var o;return await ae.isNetworkSupported((o=P.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?ae.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:r,to:n,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var r;return await ae.isNetworkSupported((r=P.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?ae.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var r;return await ae.isNetworkSupported((r=P.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?or.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:z.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var n;return await ae.isNetworkSupported((n=P.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?ae.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:r}=ae.getSdkProperties();if(!await ae.isNetworkSupported((s=P.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return ae.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:r}})},async generateSwapCalldata({amount:t,from:e,to:r,userAddress:n,disableEstimate:s}){var o;if(!await ae.isNetworkSupported((o=P.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return or.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:ht.CONVERT_SLIPPAGE_TOLERANCE},projectId:z.state.projectId,from:e,to:r,userAddress:n,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:r}){var o;const{st:n,sv:s}=ae.getSdkProperties();if(!await ae.isNetworkSupported((o=P.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return ae.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:r,from:t,to:e,st:n,sv:s}})},async getBalance(t,e,r){var c;const{st:n,sv:s}=ae.getSdkProperties();if(!await ae.isNetworkSupported((c=P.state.activeCaipNetwork)==null?void 0:c.caipNetworkId))return Nt.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Z.getBalanceCacheForCaipAddress(o);if(a)return a;const l=await ae.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:r,st:n,sv:s}});return Z.updateBalanceCache({caipAddress:o,balance:l,timestamp:Date.now()}),l},async lookupEnsName(t){var r;return await ae.isNetworkSupported((r=P.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?ae.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var r;return await ae.isNetworkSupported((r=P.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?ae.get({path:`/v1/profile/reverse/${t}`,params:{sender:re.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var r;return await ae.isNetworkSupported((r=P.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?ae.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:r,signature:n}){var i;return await ae.isNetworkSupported((i=P.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?or.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:r,signature:n},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:r,purchaseAmount:n,paymentAmount:s}){var a;return await ae.isNetworkSupported((a=P.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await or.api.post({path:"/v1/generators/onrampurl",params:{projectId:z.state.projectId},body:{destinationWallets:t,defaultNetwork:r,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:n,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await ae.isNetworkSupported((e=P.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await ae.get({path:"/v1/onramp/options"})}catch{return V4}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}){var s;try{return await ae.isNetworkSupported((s=P.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await or.api.post({path:"/v1/onramp/quote",params:{projectId:z.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}}):null}catch{return{coinbaseFee:{amount:r,currency:e.id},networkFee:{amount:r,currency:e.id},paymentSubtotal:{amount:r,currency:e.id},paymentTotal:{amount:r,currency:e.id},purchaseAmount:{amount:r,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var r;return await ae.isNetworkSupported((r=P.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?ae.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,r){var s;return await ae.isNetworkSupported((s=P.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?or.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:z.state.projectId},body:{pci:e,signature:r}}):{success:!1}},setClientId(t){or.clientId=t,or.api=new ql({baseUrl:fE,clientId:t})}},qr=Je({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),re={state:qr,replaceState(t){t&&Object.assign(qr,Os(t))},subscribe(t){return P.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,r){let n;return P.subscribeChainProp("accountState",s=>{if(s){const i=s[t];n!==i&&(n=i,e(i))}},r)},setStatus(t,e){P.setAccountProp("status",t,e)},getCaipAddress(t){return P.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const r=t?ue.getPlainAddress(t):void 0;e===P.state.activeChain&&(P.state.activeCaipAddress=t),P.setAccountProp("caipAddress",t,e),P.setAccountProp("address",r,e)},setBalance(t,e,r){P.setAccountProp("balance",t,r),P.setAccountProp("balanceSymbol",e,r)},setProfileName(t,e){P.setAccountProp("profileName",t,e)},setProfileImage(t,e){P.setAccountProp("profileImage",t,e)},setUser(t,e){P.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){P.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){P.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){P.setAccountProp("currentTab",t,P.state.activeChain)},setTokenBalance(t,e){t&&P.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){P.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){P.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,r){const n=P.getAccountProp("addressLabels",r)||new Map;n.set(t,e),P.setAccountProp("addressLabels",n,r)},removeAddressLabel(t,e){const r=P.getAccountProp("addressLabels",e)||new Map;r.delete(t),P.setAccountProp("addressLabels",r,e)},setConnectedWalletInfo(t,e){P.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){P.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&P.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){P.setAccountProp("socialWindow",t?Os(t):void 0,e)},setFarcasterUrl(t,e){P.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;qr.balanceLoading=!0;const e=(i=P.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,r=(o=P.state.activeCaipNetwork)==null?void 0:o.chainNamespace,n=P.state.activeCaipAddress,s=n?ue.getPlainAddress(n):void 0;if(qr.lastRetry&&!ue.isAllowedRetry(qr.lastRetry,30*ht.ONE_SEC_MS))return qr.balanceLoading=!1,[];try{if(s&&e&&r){const l=(await ae.getBalance(s,e)).balances.filter(c=>c.quantity.decimals!=="0");return this.setTokenBalance(l,r),qr.lastRetry=void 0,qr.balanceLoading=!1,l}}catch(a){qr.lastRetry=Date.now(),t==null||t(a),Nt.showError("Token Balance Unavailable")}finally{qr.balanceLoading=!1}return[]},resetAccount(t){P.resetAccount(t)}},Kt=Je({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),at={state:Kt,subscribe(t){return qt(Kt,()=>t(Kt))},subscribeKey(t,e){return tr(Kt,t,e)},async open(t){var s;const e=re.state.status==="connected";je.state.wcBasic?ye.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await ye.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),t!=null&&t.namespace?(await P.switchActiveNamespace(t.namespace),at.setLoading(!0,t.namespace)):at.setLoading(!0),pe.setFilterByNamespace(t==null?void 0:t.namespace);const r=(s=P.getAccountData(t==null?void 0:t.namespace))==null?void 0:s.caipAddress;P.state.noAdapters&&!r?ue.isMobile()?De.reset("AllWallets"):De.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?De.reset(t.view):r?De.reset("Account"):De.reset("Connect"),Kt.open=!0,wn.set({open:!0}),ze.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!r}})},close(){const t=z.state.enableEmbedded,e=!!P.state.activeCaipAddress;Kt.open&&ze.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Kt.open=!1,at.clearLoading(),t?e?De.replace("Account"):De.push("Connect"):wn.set({open:!1}),je.resetUri()},setLoading(t,e){e&&Kt.loadingNamespaceMap.set(e,t),Kt.loading=t,wn.set({loading:t})},clearLoading(){Kt.loadingNamespaceMap.clear(),Kt.loading=!1},shake(){Kt.shake||(Kt.shake=!0,setTimeout(()=>{Kt.shake=!1},500))}},Ly=2147483648,G4={convertEVMChainIdToCoinType(t){if(t>=Ly)throw new Error("Invalid chainId");return(Ly|t)>>>0}},gr=Je({suggestions:[],loading:!1}),gE={state:gr,subscribe(t){return qt(gr,()=>t(gr))},subscribeKey(t,e){return tr(gr,t,e)},async resolveName(t){var e,r;try{return await ae.lookupEnsName(t)}catch(n){const s=n;throw new Error(((r=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:r.description)||"Error resolving name")}},async isNameRegistered(t){try{return await ae.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{gr.loading=!0,gr.suggestions=[];const e=await ae.getEnsNameSuggestions(t);return gr.suggestions=e.suggestions.map(r=>({...r,name:r.name}))||[],gr.suggestions}catch(e){const r=this.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(r)}finally{gr.loading=!1}},async getNamesForAddress(t){try{if(!P.state.activeCaipNetwork)return[];const r=Z.getEnsFromCacheForAddress(t);if(r)return r;const n=await ae.reverseLookupEnsName({address:t});return Z.updateEnsCache({address:t,ens:n,timestamp:Date.now()}),n}catch(e){const r=this.parseEnsApiError(e,"Error fetching names for address");throw new Error(r)}},async registerName(t){const e=P.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const r=re.state.address,n=pe.getAuthConnector();if(!r||!n)throw new Error("Address or auth connector not found");gr.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});De.pushTransactionStack({view:"RegisterAccountNameSuccess",goBack:!1,replace:!0,onCancel(){gr.loading=!1}});const i=await je.signMessage(s),o=e.id;if(!o)throw new Error("Network not found");const a=G4.convertEVMChainIdToCoinType(Number(o));await ae.registerEnsName({coinType:a,address:r,signature:i,message:s}),re.setProfileName(t,e.chainNamespace),De.replace("RegisterAccountNameSuccess")}catch(s){const i=this.parseEnsApiError(s,`Error registering name ${t}`);throw De.replace("RegisterAccountName"),new Error(i)}finally{gr.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var n,s;const r=t;return((s=(n=r==null?void 0:r.reasons)==null?void 0:n[0])==null?void 0:s.description)||e}},Qe={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},Hn={ConnectorExplorerIds:{[j.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[j.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[j.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[j.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[j.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[Qe.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[Qe.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[Qe.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[Qe.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[Qe.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[Qe.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[Qe.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[Qe.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[Qe.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[Qe.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[Qe.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[j.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[j.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[j.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[j.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[j.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[j.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[j.CONNECTOR_ID.INJECTED]:"Browser Wallet",[j.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[j.CONNECTOR_ID.COINBASE]:"Coinbase",[j.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[j.CONNECTOR_ID.LEDGER]:"Ledger",[j.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[j.CONNECTOR_ID.INJECTED]:"INJECTED",[j.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[j.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[j.CONNECTOR_ID.AUTH]:"AUTH"}},yl={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([r,n])=>{e[`${Qe.EIP155}:${r}`]=n}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())}},Ti={UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${K4()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},SOCIALS_TIMEOUT:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function K4(){return typeof window<"u"}const Q4={createLogger(t,e="error"){const r=Ji({level:e}),{logger:n}=gp({opts:r});return n.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},n}},Y4="rpc.walletconnect.org";function J4(t,e){const r=new URL("https://rpc.walletconnect.org/v1/");return r.searchParams.set("chainId",t),r.searchParams.set("projectId",e),r.toString()}const Sd=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Yr={extendRpcUrlWithProjectId(t,e){let r=!1;try{r=new URL(t).host===Y4}catch{r=!1}if(r){const n=new URL(t);return n.searchParams.has("projectId")||n.searchParams.set("projectId",e),n.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:j.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${j.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,r){var s,i,o;const n=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return Sd.includes(e)?J4(e,r):n||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){var h,p,g,f,y;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,r),l=((f=(g=(p=t==null?void 0:t.rpcUrls)==null?void 0:p.chainDefault)==null?void 0:g.http)==null?void 0:f[0])||o,c=((y=n==null?void 0:n[i])==null?void 0:y.map(b=>b.url))||[],u=[...c,a],d=[...c];return l&&!d.includes(l)&&d.push(l),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:Hn.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){return t.map(s=>Yr.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:n,projectId:r}))},getViemTransport(t,e,r){const n=[];if(r==null||r.forEach(s=>{n.push(_d(s.url,s.config))}),Sd.includes(t.caipNetworkId)){const s=this.getDefaultRpcUrl(t,t.caipNetworkId,e);n.push(_d(s,{fetchOptions:{headers:{"Content-Type":"text/plain"}}}))}return ky(n)},extendWagmiTransports(t,e,r){if(Sd.includes(t.caipNetworkId)){const n=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return ky([r,_d(n)])}return r},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:j.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var l;const e=Z.getActiveCaipNetworkId(),r=P.getAllRequestedCaipNetworks(),n=Array.from(((l=P.state.chains)==null?void 0:l.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?n.includes(s):!1,o=r==null?void 0:r.find(c=>c.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(r==null?void 0:r[0])}},wl={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0},Qt=Je({providers:{...wl},providerIds:{...wl}}),$e={state:Qt,subscribeKey(t,e){return tr(Qt,t,e)},subscribe(t){return qt(Qt,()=>{t(Qt)})},subscribeProviders(t){return qt(Qt.providers,()=>t(Qt.providers))},setProvider(t,e){e&&(Qt.providers[t]=Os(e))},getProvider(t){return Qt.providers[t]},setProviderId(t,e){e&&(Qt.providerIds[t]=e)},getProviderId(t){if(t)return Qt.providerIds[t]},reset(){Qt.providers={...wl},Qt.providerIds={...wl}},resetChain(t){Qt.providers[t]=void 0,Qt.providerIds[t]=void 0}},jy={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},St={set(t,e){lr.isClient&&localStorage.setItem(`${ee.STORAGE_KEY}${t}`,e)},get(t){return lr.isClient?localStorage.getItem(`${ee.STORAGE_KEY}${t}`):null},delete(t,e){lr.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${ee.STORAGE_KEY}${t}`))}},kc=30*1e3,lr={checkIfAllowedToTriggerEmail(){const t=St.get(ee.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<kc){const r=Math.ceil((kc-e)/1e3);throw new Error(`Please try again after ${r} seconds`)}}},getTimeToNextEmailLogin(){const t=St.get(ee.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<kc)return Math.ceil((kc-e)/1e3)}return 0},checkIfRequestExists(t){return ot.NOT_SAFE_RPC_METHODS.includes(t.method)||ot.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(jy.transactionHash))||(t==null?void 0:t.match(jy.signedMessage)))?ee.RPC_RESPONSE_TYPE_TX:ee.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return ot.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var Te;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Te||(Te={}));var Kh;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Kh||(Kh={}));const G=Te.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Mn=t=>{switch(typeof t){case"undefined":return G.undefined;case"string":return G.string;case"number":return isNaN(t)?G.nan:G.number;case"boolean":return G.boolean;case"function":return G.function;case"bigint":return G.bigint;case"symbol":return G.symbol;case"object":return Array.isArray(t)?G.array:t===null?G.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?G.promise:typeof Map<"u"&&t instanceof Map?G.map:typeof Set<"u"&&t instanceof Set?G.set:typeof Date<"u"&&t instanceof Date?G.date:G.object;default:return G.unknown}},H=Te.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Z4=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class $r extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(i){return i.message},n={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let a=n,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(r(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return s(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,Te.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}$r.create=t=>new $r(t);const _a=(t,e)=>{let r;switch(t.code){case H.invalid_type:t.received===G.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case H.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Te.jsonStringifyReplacer)}`;break;case H.unrecognized_keys:r=`Unrecognized key(s) in object: ${Te.joinValues(t.keys,", ")}`;break;case H.invalid_union:r="Invalid input";break;case H.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Te.joinValues(t.options)}`;break;case H.invalid_enum_value:r=`Invalid enum value. Expected ${Te.joinValues(t.options)}, received '${t.received}'`;break;case H.invalid_arguments:r="Invalid function arguments";break;case H.invalid_return_type:r="Invalid function return type";break;case H.invalid_date:r="Invalid date";break;case H.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Te.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case H.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case H.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case H.custom:r="Invalid input";break;case H.invalid_intersection_types:r="Intersection results could not be merged";break;case H.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case H.not_finite:r="Number must be finite";break;default:r=e.defaultError,Te.assertNever(t)}return{message:r}};let mE=_a;function X4(t){mE=t}function bl(){return mE}const vl=t=>{const{data:e,path:r,errorMaps:n,issueData:s}=t,i=[...r,...s.path||[]],o={...s,path:i};let a="";const l=n.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},eM=[];function J(t,e){const r=vl({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,bl(),_a].filter(n=>!!n)});t.common.issues.push(r)}class Ft{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const s of r){if(s.status==="aborted")return de;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const s of r)n.push({key:await s.key,value:await s.value});return Ft.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const s of r){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return de;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(n[i.value]=o.value)}return{status:e.value,value:n}}}const de=Object.freeze({status:"aborted"}),yE=t=>({status:"dirty",value:t}),Wt=t=>({status:"valid",value:t}),Qh=t=>t.status==="aborted",Yh=t=>t.status==="dirty",Ca=t=>t.status==="valid",El=t=>typeof Promise<"u"&&t instanceof Promise;var ne;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ne||(ne={}));class rn{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const zy=(t,e)=>{if(Ca(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new $r(t.common.issues);return this._error=r,this._error}}};function fe(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:n??a.defaultError}:{message:r??a.defaultError},description:s}}class we{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Mn(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Mn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ft,ctx:{common:e.parent.common,data:e.data,parsedType:Mn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(El(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const s={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Mn(e)},i=this._parseSync({data:e,path:s.path,parent:s});return zy(s,i)}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Mn(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(El(s)?s:Promise.resolve(s));return zy(n,i)}refine(e,r){const n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:H.custom,...n(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new Mr({schema:this,typeName:oe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return vn.create(this,this._def)}nullable(){return qs.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ur.create(this,this._def)}promise(){return Hi.create(this,this._def)}or(e){return Na.create([this,e],this._def)}and(e){return Pa.create(this,e,this._def)}transform(e){return new Mr({...fe(this._def),schema:this,typeName:oe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new ka({...fe(this._def),innerType:this,defaultValue:r,typeName:oe.ZodDefault})}brand(){return new bE({typeName:oe.ZodBranded,type:this,...fe(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new Il({...fe(this._def),innerType:this,catchValue:r,typeName:oe.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return uc.create(this,e)}readonly(){return Tl.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const tM=/^c[^\s-]{8,}$/i,rM=/^[a-z][a-z0-9]*$/,nM=/^[0-9A-HJKMNP-TV-Z]{26}$/,sM=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,iM=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,oM="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Td;const aM=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,cM=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,lM=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function uM(t,e){return!!((e==="v4"||!e)&&aM.test(t)||(e==="v6"||!e)&&cM.test(t))}class kr extends we{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==G.string){const i=this._getOrReturnCtx(e);return J(i,{code:H.invalid_type,expected:G.string,received:i.parsedType}),de}const n=new Ft;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),J(s,{code:H.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),J(s,{code:H.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?J(s,{code:H.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&J(s,{code:H.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")iM.test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"email",code:H.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Td||(Td=new RegExp(oM,"u")),Td.test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"emoji",code:H.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")sM.test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"uuid",code:H.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")tM.test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"cuid",code:H.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")rM.test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"cuid2",code:H.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")nM.test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"ulid",code:H.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),J(s,{validation:"url",code:H.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"regex",code:H.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),J(s,{code:H.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),J(s,{code:H.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),J(s,{code:H.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?lM(i).test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{code:H.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="ip"?uM(e.data,i.version)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"ip",code:H.invalid_string,message:i.message}),n.dirty()):Te.assertNever(i);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(s=>e.test(s),{validation:r,code:H.invalid_string,...ne.errToObj(n)})}_addCheck(e){return new kr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ne.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ne.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ne.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ne.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ne.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ne.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ne.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ne.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,...ne.errToObj(e==null?void 0:e.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...ne.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...ne.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...ne.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...ne.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...ne.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...ne.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...ne.errToObj(r)})}nonempty(e){return this.min(1,ne.errToObj(e))}trim(){return new kr({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new kr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new kr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}kr.create=t=>{var e;return new kr({checks:[],typeName:oe.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...fe(t)})};function dM(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class ts extends we{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==G.number){const i=this._getOrReturnCtx(e);return J(i,{code:H.invalid_type,expected:G.number,received:i.parsedType}),de}let n;const s=new Ft;for(const i of this._def.checks)i.kind==="int"?Te.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),J(n,{code:H.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),J(n,{code:H.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),J(n,{code:H.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?dM(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),J(n,{code:H.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),J(n,{code:H.not_finite,message:i.message}),s.dirty()):Te.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ne.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ne.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ne.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ne.toString(r))}setLimit(e,r,n,s){return new ts({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ne.toString(s)}]})}_addCheck(e){return new ts({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ne.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ne.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ne.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ne.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ne.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ne.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:ne.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ne.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ne.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Te.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}ts.create=t=>new ts({checks:[],typeName:oe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...fe(t)});class rs extends we{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==G.bigint){const i=this._getOrReturnCtx(e);return J(i,{code:H.invalid_type,expected:G.bigint,received:i.parsedType}),de}let n;const s=new Ft;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),J(n,{code:H.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),J(n,{code:H.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),J(n,{code:H.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Te.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ne.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ne.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ne.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ne.toString(r))}setLimit(e,r,n,s){return new rs({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ne.toString(s)}]})}_addCheck(e){return new rs({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ne.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ne.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ne.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ne.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ne.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}rs.create=t=>{var e;return new rs({checks:[],typeName:oe.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...fe(t)})};class Ia extends we{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==G.boolean){const n=this._getOrReturnCtx(e);return J(n,{code:H.invalid_type,expected:G.boolean,received:n.parsedType}),de}return Wt(e.data)}}Ia.create=t=>new Ia({typeName:oe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...fe(t)});class zs extends we{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==G.date){const i=this._getOrReturnCtx(e);return J(i,{code:H.invalid_type,expected:G.date,received:i.parsedType}),de}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return J(i,{code:H.invalid_date}),de}const n=new Ft;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),J(s,{code:H.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),J(s,{code:H.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):Te.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new zs({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:ne.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:ne.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}zs.create=t=>new zs({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:oe.ZodDate,...fe(t)});class Al extends we{_parse(e){if(this._getType(e)!==G.symbol){const n=this._getOrReturnCtx(e);return J(n,{code:H.invalid_type,expected:G.symbol,received:n.parsedType}),de}return Wt(e.data)}}Al.create=t=>new Al({typeName:oe.ZodSymbol,...fe(t)});class Sa extends we{_parse(e){if(this._getType(e)!==G.undefined){const n=this._getOrReturnCtx(e);return J(n,{code:H.invalid_type,expected:G.undefined,received:n.parsedType}),de}return Wt(e.data)}}Sa.create=t=>new Sa({typeName:oe.ZodUndefined,...fe(t)});class Ta extends we{_parse(e){if(this._getType(e)!==G.null){const n=this._getOrReturnCtx(e);return J(n,{code:H.invalid_type,expected:G.null,received:n.parsedType}),de}return Wt(e.data)}}Ta.create=t=>new Ta({typeName:oe.ZodNull,...fe(t)});class zi extends we{constructor(){super(...arguments),this._any=!0}_parse(e){return Wt(e.data)}}zi.create=t=>new zi({typeName:oe.ZodAny,...fe(t)});class Ps extends we{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Wt(e.data)}}Ps.create=t=>new Ps({typeName:oe.ZodUnknown,...fe(t)});class Cn extends we{_parse(e){const r=this._getOrReturnCtx(e);return J(r,{code:H.invalid_type,expected:G.never,received:r.parsedType}),de}}Cn.create=t=>new Cn({typeName:oe.ZodNever,...fe(t)});class _l extends we{_parse(e){if(this._getType(e)!==G.undefined){const n=this._getOrReturnCtx(e);return J(n,{code:H.invalid_type,expected:G.void,received:n.parsedType}),de}return Wt(e.data)}}_l.create=t=>new _l({typeName:oe.ZodVoid,...fe(t)});class Ur extends we{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==G.array)return J(r,{code:H.invalid_type,expected:G.array,received:r.parsedType}),de;if(s.exactLength!==null){const o=r.data.length>s.exactLength.value,a=r.data.length<s.exactLength.value;(o||a)&&(J(r,{code:o?H.too_big:H.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(J(r,{code:H.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(J(r,{code:H.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,a)=>s.type._parseAsync(new rn(r,o,r.path,a)))).then(o=>Ft.mergeArray(n,o));const i=[...r.data].map((o,a)=>s.type._parseSync(new rn(r,o,r.path,a)));return Ft.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new Ur({...this._def,minLength:{value:e,message:ne.toString(r)}})}max(e,r){return new Ur({...this._def,maxLength:{value:e,message:ne.toString(r)}})}length(e,r){return new Ur({...this._def,exactLength:{value:e,message:ne.toString(r)}})}nonempty(e){return this.min(1,e)}}Ur.create=(t,e)=>new Ur({type:t,minLength:null,maxLength:null,exactLength:null,typeName:oe.ZodArray,...fe(e)});function Ai(t){if(t instanceof Ze){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=vn.create(Ai(n))}return new Ze({...t._def,shape:()=>e})}else return t instanceof Ur?new Ur({...t._def,type:Ai(t.element)}):t instanceof vn?vn.create(Ai(t.unwrap())):t instanceof qs?qs.create(Ai(t.unwrap())):t instanceof nn?nn.create(t.items.map(e=>Ai(e))):t}class Ze extends we{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=Te.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==G.object){const c=this._getOrReturnCtx(e);return J(c,{code:H.invalid_type,expected:G.object,received:c.parsedType}),de}const{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Cn&&this._def.unknownKeys==="strip"))for(const c in s.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=i[c],d=s.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new rn(s,d,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof Cn){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(c==="strict")a.length>0&&(J(s,{code:H.unrecognized_keys,keys:a}),n.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const d=s.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new rn(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key;c.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return c}).then(c=>Ft.mergeObjectSync(n,c)):Ft.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(e){return ne.errToObj,new Ze({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var s,i,o,a;const l=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(a=ne.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new Ze({...this._def,unknownKeys:"strip"})}passthrough(){return new Ze({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ze({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ze({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:oe.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new Ze({...this._def,catchall:e})}pick(e){const r={};return Te.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new Ze({...this._def,shape:()=>r})}omit(e){const r={};return Te.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new Ze({...this._def,shape:()=>r})}deepPartial(){return Ai(this)}partial(e){const r={};return Te.objectKeys(this.shape).forEach(n=>{const s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}),new Ze({...this._def,shape:()=>r})}required(e){const r={};return Te.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof vn;)i=i._def.innerType;r[n]=i}}),new Ze({...this._def,shape:()=>r})}keyof(){return wE(Te.objectKeys(this.shape))}}Ze.create=(t,e)=>new Ze({shape:()=>t,unknownKeys:"strip",catchall:Cn.create(),typeName:oe.ZodObject,...fe(e)});Ze.strictCreate=(t,e)=>new Ze({shape:()=>t,unknownKeys:"strict",catchall:Cn.create(),typeName:oe.ZodObject,...fe(e)});Ze.lazycreate=(t,e)=>new Ze({shape:t,unknownKeys:"strip",catchall:Cn.create(),typeName:oe.ZodObject,...fe(e)});class Na extends we{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new $r(a.ctx.common.issues));return J(r,{code:H.invalid_union,unionErrors:o}),de}if(r.common.async)return Promise.all(n.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const l of n){const c={...r,common:{...r.common,issues:[]},parent:null},u=l._parseSync({data:r.data,path:r.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(l=>new $r(l));return J(r,{code:H.invalid_union,unionErrors:a}),de}}get options(){return this._def.options}}Na.create=(t,e)=>new Na({options:t,typeName:oe.ZodUnion,...fe(e)});const Qc=t=>t instanceof Oa?Qc(t.schema):t instanceof Mr?Qc(t.innerType()):t instanceof Ra?[t.value]:t instanceof ns?t.options:t instanceof Da?Object.keys(t.enum):t instanceof ka?Qc(t._def.innerType):t instanceof Sa?[void 0]:t instanceof Ta?[null]:null;class mu extends we{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==G.object)return J(r,{code:H.invalid_type,expected:G.object,received:r.parsedType}),de;const n=this.discriminator,s=r.data[n],i=this.optionsMap.get(s);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(J(r,{code:H.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),de)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const s=new Map;for(const i of r){const o=Qc(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new mu({typeName:oe.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...fe(n)})}}function Jh(t,e){const r=Mn(t),n=Mn(e);if(t===e)return{valid:!0,data:t};if(r===G.object&&n===G.object){const s=Te.objectKeys(e),i=Te.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const l=Jh(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(r===G.array&&n===G.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],l=Jh(o,a);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return r===G.date&&n===G.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Pa extends we{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=(i,o)=>{if(Qh(i)||Qh(o))return de;const a=Jh(i.value,o.value);return a.valid?((Yh(i)||Yh(o))&&r.dirty(),{status:r.value,value:a.data}):(J(n,{code:H.invalid_intersection_types}),de)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Pa.create=(t,e,r)=>new Pa({left:t,right:e,typeName:oe.ZodIntersection,...fe(r)});class nn extends we{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==G.array)return J(n,{code:H.invalid_type,expected:G.array,received:n.parsedType}),de;if(n.data.length<this._def.items.length)return J(n,{code:H.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),de;!this._def.rest&&n.data.length>this._def.items.length&&(J(n,{code:H.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new rn(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>Ft.mergeArray(r,o)):Ft.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new nn({...this._def,rest:e})}}nn.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new nn({items:t,typeName:oe.ZodTuple,rest:null,...fe(e)})};class xa extends we{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==G.object)return J(n,{code:H.invalid_type,expected:G.object,received:n.parsedType}),de;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in n.data)s.push({key:i._parse(new rn(n,a,n.path,a)),value:o._parse(new rn(n,n.data[a],n.path,a))});return n.common.async?Ft.mergeObjectAsync(r,s):Ft.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof we?new xa({keyType:e,valueType:r,typeName:oe.ZodRecord,...fe(n)}):new xa({keyType:kr.create(),valueType:e,typeName:oe.ZodRecord,...fe(r)})}}class Cl extends we{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==G.map)return J(n,{code:H.invalid_type,expected:G.map,received:n.parsedType}),de;const s=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([a,l],c)=>({key:s._parse(new rn(n,a,n.path,[c,"key"])),value:i._parse(new rn(n,l,n.path,[c,"value"]))}));if(n.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return de;(c.status==="dirty"||u.status==="dirty")&&r.dirty(),a.set(c.value,u.value)}return{status:r.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return de;(c.status==="dirty"||u.status==="dirty")&&r.dirty(),a.set(c.value,u.value)}return{status:r.value,value:a}}}}Cl.create=(t,e,r)=>new Cl({valueType:e,keyType:t,typeName:oe.ZodMap,...fe(r)});class Hs extends we{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==G.set)return J(n,{code:H.invalid_type,expected:G.set,received:n.parsedType}),de;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(J(n,{code:H.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(J(n,{code:H.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());const i=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return de;u.status==="dirty"&&r.dirty(),c.add(u.value)}return{status:r.value,value:c}}const a=[...n.data.values()].map((l,c)=>i._parse(new rn(n,l,n.path,c)));return n.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,r){return new Hs({...this._def,minSize:{value:e,message:ne.toString(r)}})}max(e,r){return new Hs({...this._def,maxSize:{value:e,message:ne.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}Hs.create=(t,e)=>new Hs({valueType:t,minSize:null,maxSize:null,typeName:oe.ZodSet,...fe(e)});class Oi extends we{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==G.function)return J(r,{code:H.invalid_type,expected:G.function,received:r.parsedType}),de;function n(a,l){return vl({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,bl(),_a].filter(c=>!!c),issueData:{code:H.invalid_arguments,argumentsError:l}})}function s(a,l){return vl({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,bl(),_a].filter(c=>!!c),issueData:{code:H.invalid_return_type,returnTypeError:l}})}const i={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof Hi){const a=this;return Wt(async function(...l){const c=new $r([]),u=await a._def.args.parseAsync(l,i).catch(p=>{throw c.addIssue(n(l,p)),c}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(p=>{throw c.addIssue(s(d,p)),c})})}else{const a=this;return Wt(function(...l){const c=a._def.args.safeParse(l,i);if(!c.success)throw new $r([n(l,c.error)]);const u=Reflect.apply(o,this,c.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new $r([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Oi({...this._def,args:nn.create(e).rest(Ps.create())})}returns(e){return new Oi({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new Oi({args:e||nn.create([]).rest(Ps.create()),returns:r||Ps.create(),typeName:oe.ZodFunction,...fe(n)})}}class Oa extends we{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Oa.create=(t,e)=>new Oa({getter:t,typeName:oe.ZodLazy,...fe(e)});class Ra extends we{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return J(r,{received:r.data,code:H.invalid_literal,expected:this._def.value}),de}return{status:"valid",value:e.data}}get value(){return this._def.value}}Ra.create=(t,e)=>new Ra({value:t,typeName:oe.ZodLiteral,...fe(e)});function wE(t,e){return new ns({values:t,typeName:oe.ZodEnum,...fe(e)})}class ns extends we{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return J(r,{expected:Te.joinValues(n),received:r.parsedType,code:H.invalid_type}),de}if(this._def.values.indexOf(e.data)===-1){const r=this._getOrReturnCtx(e),n=this._def.values;return J(r,{received:r.data,code:H.invalid_enum_value,options:n}),de}return Wt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e){return ns.create(e)}exclude(e){return ns.create(this.options.filter(r=>!e.includes(r)))}}ns.create=wE;class Da extends we{_parse(e){const r=Te.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==G.string&&n.parsedType!==G.number){const s=Te.objectValues(r);return J(n,{expected:Te.joinValues(s),received:n.parsedType,code:H.invalid_type}),de}if(r.indexOf(e.data)===-1){const s=Te.objectValues(r);return J(n,{received:n.data,code:H.invalid_enum_value,options:s}),de}return Wt(e.data)}get enum(){return this._def.values}}Da.create=(t,e)=>new Da({values:t,typeName:oe.ZodNativeEnum,...fe(e)});class Hi extends we{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==G.promise&&r.common.async===!1)return J(r,{code:H.invalid_type,expected:G.promise,received:r.parsedType}),de;const n=r.parsedType===G.promise?r.data:Promise.resolve(r.data);return Wt(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Hi.create=(t,e)=>new Hi({type:t,typeName:oe.ZodPromise,...fe(e)});class Mr extends we{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===oe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{J(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(n.data,i);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:n.path,parent:n})):this._def.schema._parseSync({data:o,path:n.path,parent:n})}if(s.type==="refinement"){const o=a=>{const l=s.refinement(a,i);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?de:(a.status==="dirty"&&r.dirty(),o(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?de:(a.status==="dirty"&&r.dirty(),o(a.value).then(()=>({status:r.value,value:a.value}))))}if(s.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Ca(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>Ca(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:r.value,value:a})):o);Te.assertNever(s)}}Mr.create=(t,e,r)=>new Mr({schema:t,typeName:oe.ZodEffects,effect:e,...fe(r)});Mr.createWithPreprocess=(t,e,r)=>new Mr({schema:e,effect:{type:"preprocess",transform:t},typeName:oe.ZodEffects,...fe(r)});class vn extends we{_parse(e){return this._getType(e)===G.undefined?Wt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}vn.create=(t,e)=>new vn({innerType:t,typeName:oe.ZodOptional,...fe(e)});class qs extends we{_parse(e){return this._getType(e)===G.null?Wt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}qs.create=(t,e)=>new qs({innerType:t,typeName:oe.ZodNullable,...fe(e)});class ka extends we{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===G.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}ka.create=(t,e)=>new ka({innerType:t,typeName:oe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...fe(e)});class Il extends we{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return El(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new $r(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new $r(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Il.create=(t,e)=>new Il({innerType:t,typeName:oe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...fe(e)});class Sl extends we{_parse(e){if(this._getType(e)!==G.nan){const n=this._getOrReturnCtx(e);return J(n,{code:H.invalid_type,expected:G.nan,received:n.parsedType}),de}return{status:"valid",value:e.data}}}Sl.create=t=>new Sl({typeName:oe.ZodNaN,...fe(t)});const hM=Symbol("zod_brand");class bE extends we{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class uc extends we{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?de:i.status==="dirty"?(r.dirty(),yE(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?de:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new uc({in:e,out:r,typeName:oe.ZodPipeline})}}class Tl extends we{_parse(e){const r=this._def.innerType._parse(e);return Ca(r)&&(r.value=Object.freeze(r.value)),r}}Tl.create=(t,e)=>new Tl({innerType:t,typeName:oe.ZodReadonly,...fe(e)});const vE=(t,e={},r)=>t?zi.create().superRefine((n,s)=>{var i,o;if(!t(n)){const a=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,l=(o=(i=a.fatal)!==null&&i!==void 0?i:r)!==null&&o!==void 0?o:!0,c=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...c,fatal:l})}}):zi.create(),pM={object:Ze.lazycreate};var oe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(oe||(oe={}));const fM=(t,e={message:`Input not instance of ${t.name}`})=>vE(r=>r instanceof t,e),EE=kr.create,AE=ts.create,gM=Sl.create,mM=rs.create,_E=Ia.create,yM=zs.create,wM=Al.create,bM=Sa.create,vM=Ta.create,EM=zi.create,AM=Ps.create,_M=Cn.create,CM=_l.create,IM=Ur.create,SM=Ze.create,TM=Ze.strictCreate,NM=Na.create,PM=mu.create,xM=Pa.create,OM=nn.create,RM=xa.create,DM=Cl.create,kM=Hs.create,$M=Oi.create,UM=Oa.create,MM=Ra.create,FM=ns.create,BM=Da.create,LM=Hi.create,Hy=Mr.create,jM=vn.create,zM=qs.create,HM=Mr.createWithPreprocess,qM=uc.create,WM=()=>EE().optional(),VM=()=>AE().optional(),GM=()=>_E().optional(),KM={string:t=>kr.create({...t,coerce:!0}),number:t=>ts.create({...t,coerce:!0}),boolean:t=>Ia.create({...t,coerce:!0}),bigint:t=>rs.create({...t,coerce:!0}),date:t=>zs.create({...t,coerce:!0})},QM=de;var E=Object.freeze({__proto__:null,defaultErrorMap:_a,setErrorMap:X4,getErrorMap:bl,makeIssue:vl,EMPTY_PATH:eM,addIssueToContext:J,ParseStatus:Ft,INVALID:de,DIRTY:yE,OK:Wt,isAborted:Qh,isDirty:Yh,isValid:Ca,isAsync:El,get util(){return Te},get objectUtil(){return Kh},ZodParsedType:G,getParsedType:Mn,ZodType:we,ZodString:kr,ZodNumber:ts,ZodBigInt:rs,ZodBoolean:Ia,ZodDate:zs,ZodSymbol:Al,ZodUndefined:Sa,ZodNull:Ta,ZodAny:zi,ZodUnknown:Ps,ZodNever:Cn,ZodVoid:_l,ZodArray:Ur,ZodObject:Ze,ZodUnion:Na,ZodDiscriminatedUnion:mu,ZodIntersection:Pa,ZodTuple:nn,ZodRecord:xa,ZodMap:Cl,ZodSet:Hs,ZodFunction:Oi,ZodLazy:Oa,ZodLiteral:Ra,ZodEnum:ns,ZodNativeEnum:Da,ZodPromise:Hi,ZodEffects:Mr,ZodTransformer:Mr,ZodOptional:vn,ZodNullable:qs,ZodDefault:ka,ZodCatch:Il,ZodNaN:Sl,BRAND:hM,ZodBranded:bE,ZodPipeline:uc,ZodReadonly:Tl,custom:vE,Schema:we,ZodSchema:we,late:pM,get ZodFirstPartyTypeKind(){return oe},coerce:KM,any:EM,array:IM,bigint:mM,boolean:_E,date:yM,discriminatedUnion:PM,effect:Hy,enum:FM,function:$M,instanceof:fM,intersection:xM,lazy:UM,literal:MM,map:DM,nan:gM,nativeEnum:BM,never:_M,null:vM,nullable:zM,number:AE,object:SM,oboolean:GM,onumber:VM,optional:jM,ostring:WM,pipeline:qM,preprocess:HM,promise:LM,record:RM,set:kM,strictObject:TM,string:EE,symbol:wM,transformer:Hy,tuple:OM,undefined:bM,union:NM,unknown:AM,void:CM,NEVER:QM,ZodIssueCode:H,quotelessJson:Z4,ZodError:$r});const et=E.object({message:E.string()});function Q(t){return E.literal(ee[t])}E.object({accessList:E.array(E.string()),blockHash:E.string().nullable(),blockNumber:E.string().nullable(),chainId:E.string().or(E.number()),from:E.string(),gas:E.string(),hash:E.string(),input:E.string().nullable(),maxFeePerGas:E.string(),maxPriorityFeePerGas:E.string(),nonce:E.string(),r:E.string(),s:E.string(),to:E.string(),transactionIndex:E.string().nullable(),type:E.string(),v:E.string(),value:E.string()});const YM=E.object({chainId:E.string().or(E.number())}),JM=E.object({email:E.string().email()}),ZM=E.object({otp:E.string()}),XM=E.object({uri:E.string()}),eF=E.object({chainId:E.optional(E.string().or(E.number())),preferredAccountType:E.optional(E.string())}),tF=E.object({provider:E.enum(["google","github","apple","facebook","x","discord"])}),rF=E.object({email:E.string().email()}),nF=E.object({otp:E.string()}),sF=E.object({otp:E.string()}),iF=E.object({themeMode:E.optional(E.enum(["light","dark"])),themeVariables:E.optional(E.record(E.string(),E.string().or(E.number()))),w3mThemeVariables:E.optional(E.record(E.string(),E.string()))}),oF=E.object({metadata:E.object({name:E.string(),description:E.string(),url:E.string(),icons:E.array(E.string())}).optional(),sdkVersion:E.string().optional(),sdkType:E.string().optional(),projectId:E.string()}),aF=E.object({type:E.string()}),cF=E.object({action:E.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),lF=E.object({url:E.string()}),uF=E.object({userName:E.string()}),dF=E.object({email:E.string().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),accounts:E.array(E.object({address:E.string(),type:E.enum([ot.ACCOUNT_TYPES.EOA,ot.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:E.string().optional().nullable()}),hF=E.object({action:E.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),pF=E.object({email:E.string().email().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),smartAccountDeployed:E.optional(E.boolean()),accounts:E.array(E.object({address:E.string(),type:E.enum([ot.ACCOUNT_TYPES.EOA,ot.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:E.optional(E.string())}),fF=E.object({uri:E.string()}),gF=E.object({isConnected:E.boolean()}),mF=E.object({chainId:E.string().or(E.number())}),yF=E.object({chainId:E.string().or(E.number())}),wF=E.object({newEmail:E.string().email()}),bF=E.object({smartAccountEnabledNetworks:E.array(E.number())});E.object({address:E.string(),isDeployed:E.boolean()});const vF=E.object({version:E.string().optional()}),EF=E.object({type:E.string(),address:E.string()}),AF=E.any(),_F=E.object({method:E.literal("eth_accounts")}),CF=E.object({method:E.literal("eth_blockNumber")}),IF=E.object({method:E.literal("eth_call"),params:E.array(E.any())}),SF=E.object({method:E.literal("eth_chainId")}),TF=E.object({method:E.literal("eth_estimateGas"),params:E.array(E.any())}),NF=E.object({method:E.literal("eth_feeHistory"),params:E.array(E.any())}),PF=E.object({method:E.literal("eth_gasPrice")}),xF=E.object({method:E.literal("eth_getAccount"),params:E.array(E.any())}),OF=E.object({method:E.literal("eth_getBalance"),params:E.array(E.any())}),RF=E.object({method:E.literal("eth_getBlockByHash"),params:E.array(E.any())}),DF=E.object({method:E.literal("eth_getBlockByNumber"),params:E.array(E.any())}),kF=E.object({method:E.literal("eth_getBlockReceipts"),params:E.array(E.any())}),$F=E.object({method:E.literal("eth_getBlockTransactionCountByHash"),params:E.array(E.any())}),UF=E.object({method:E.literal("eth_getBlockTransactionCountByNumber"),params:E.array(E.any())}),MF=E.object({method:E.literal("eth_getCode"),params:E.array(E.any())}),FF=E.object({method:E.literal("eth_getFilterChanges"),params:E.array(E.any())}),BF=E.object({method:E.literal("eth_getFilterLogs"),params:E.array(E.any())}),LF=E.object({method:E.literal("eth_getLogs"),params:E.array(E.any())}),jF=E.object({method:E.literal("eth_getProof"),params:E.array(E.any())}),zF=E.object({method:E.literal("eth_getStorageAt"),params:E.array(E.any())}),HF=E.object({method:E.literal("eth_getTransactionByBlockHashAndIndex"),params:E.array(E.any())}),qF=E.object({method:E.literal("eth_getTransactionByBlockNumberAndIndex"),params:E.array(E.any())}),WF=E.object({method:E.literal("eth_getTransactionByHash"),params:E.array(E.any())}),VF=E.object({method:E.literal("eth_getTransactionCount"),params:E.array(E.any())}),GF=E.object({method:E.literal("eth_getTransactionReceipt"),params:E.array(E.any())}),KF=E.object({method:E.literal("eth_getUncleCountByBlockHash"),params:E.array(E.any())}),QF=E.object({method:E.literal("eth_getUncleCountByBlockNumber"),params:E.array(E.any())}),YF=E.object({method:E.literal("eth_maxPriorityFeePerGas")}),JF=E.object({method:E.literal("eth_newBlockFilter")}),ZF=E.object({method:E.literal("eth_newFilter"),params:E.array(E.any())}),XF=E.object({method:E.literal("eth_newPendingTransactionFilter")}),eB=E.object({method:E.literal("eth_sendRawTransaction"),params:E.array(E.any())}),tB=E.object({method:E.literal("eth_syncing"),params:E.array(E.any())}),rB=E.object({method:E.literal("eth_uninstallFilter"),params:E.array(E.any())}),qy=E.object({method:E.literal("personal_sign"),params:E.array(E.any())}),nB=E.object({method:E.literal("eth_signTypedData_v4"),params:E.array(E.any())}),sB=E.object({method:E.literal("eth_sendTransaction"),params:E.array(E.any())}),iB=E.object({method:E.literal("solana_signMessage"),params:E.object({message:E.string(),pubkey:E.string()})}),oB=E.object({method:E.literal("solana_signTransaction"),params:E.object({transaction:E.string()})}),aB=E.object({method:E.literal("solana_signAllTransactions"),params:E.object({transactions:E.array(E.string())})}),cB=E.object({method:E.literal("solana_signAndSendTransaction"),params:E.object({transaction:E.string(),options:E.object({skipPreflight:E.boolean().optional(),preflightCommitment:E.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:E.number().optional(),minContextSlot:E.number().optional()}).optional()})}),lB=E.object({method:E.literal("wallet_sendCalls"),params:E.array(E.object({chainId:E.string().or(E.number()).optional(),from:E.string().optional(),version:E.string().optional(),capabilities:E.any().optional(),calls:E.array(E.object({to:E.string().startsWith("0x"),data:E.string().startsWith("0x").optional(),value:E.string().optional()}))}))}),uB=E.object({method:E.literal("wallet_getCallsStatus"),params:E.array(E.string())}),dB=E.object({method:E.literal("wallet_getCapabilities")}),hB=E.object({method:E.literal("wallet_grantPermissions"),params:E.array(E.any())}),pB=E.object({method:E.literal("wallet_revokePermissions"),params:E.any()}),fB=E.object({method:E.literal("wallet_getAssets"),params:E.any()}),Wy=E.object({token:E.string()}),Y=E.object({id:E.string().optional()}),To={appEvent:Y.extend({type:Q("APP_SWITCH_NETWORK"),payload:YM}).or(Y.extend({type:Q("APP_CONNECT_EMAIL"),payload:JM})).or(Y.extend({type:Q("APP_CONNECT_DEVICE")})).or(Y.extend({type:Q("APP_CONNECT_OTP"),payload:ZM})).or(Y.extend({type:Q("APP_CONNECT_SOCIAL"),payload:XM})).or(Y.extend({type:Q("APP_GET_FARCASTER_URI")})).or(Y.extend({type:Q("APP_CONNECT_FARCASTER")})).or(Y.extend({type:Q("APP_GET_USER"),payload:E.optional(eF)})).or(Y.extend({type:Q("APP_GET_SOCIAL_REDIRECT_URI"),payload:tF})).or(Y.extend({type:Q("APP_SIGN_OUT")})).or(Y.extend({type:Q("APP_IS_CONNECTED"),payload:E.optional(Wy)})).or(Y.extend({type:Q("APP_GET_CHAIN_ID")})).or(Y.extend({type:Q("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Y.extend({type:Q("APP_INIT_SMART_ACCOUNT")})).or(Y.extend({type:Q("APP_SET_PREFERRED_ACCOUNT"),payload:aF})).or(Y.extend({type:Q("APP_RPC_REQUEST"),payload:qy.or(fB).or(_F).or(CF).or(IF).or(SF).or(TF).or(NF).or(PF).or(xF).or(OF).or(RF).or(DF).or(kF).or($F).or(UF).or(MF).or(FF).or(BF).or(LF).or(jF).or(zF).or(HF).or(qF).or(WF).or(VF).or(GF).or(KF).or(QF).or(YF).or(JF).or(ZF).or(XF).or(eB).or(tB).or(rB).or(qy).or(nB).or(sB).or(iB).or(oB).or(aB).or(cB).or(uB).or(lB).or(dB).or(hB).or(pB)})).or(Y.extend({type:Q("APP_UPDATE_EMAIL"),payload:rF})).or(Y.extend({type:Q("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:nF})).or(Y.extend({type:Q("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:sF})).or(Y.extend({type:Q("APP_SYNC_THEME"),payload:iF})).or(Y.extend({type:Q("APP_SYNC_DAPP_DATA"),payload:oF})).or(Y.extend({type:Q("APP_RELOAD")})),frameEvent:Y.extend({type:Q("FRAME_SWITCH_NETWORK_ERROR"),payload:et}).or(Y.extend({type:Q("FRAME_SWITCH_NETWORK_SUCCESS"),payload:yF})).or(Y.extend({type:Q("FRAME_CONNECT_EMAIL_SUCCESS"),payload:cF})).or(Y.extend({type:Q("FRAME_CONNECT_EMAIL_ERROR"),payload:et})).or(Y.extend({type:Q("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:lF})).or(Y.extend({type:Q("FRAME_GET_FARCASTER_URI_ERROR"),payload:et})).or(Y.extend({type:Q("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:uF})).or(Y.extend({type:Q("FRAME_CONNECT_FARCASTER_ERROR"),payload:et})).or(Y.extend({type:Q("FRAME_CONNECT_OTP_ERROR"),payload:et})).or(Y.extend({type:Q("FRAME_CONNECT_OTP_SUCCESS")})).or(Y.extend({type:Q("FRAME_CONNECT_DEVICE_ERROR"),payload:et})).or(Y.extend({type:Q("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Y.extend({type:Q("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:dF})).or(Y.extend({type:Q("FRAME_CONNECT_SOCIAL_ERROR"),payload:et})).or(Y.extend({type:Q("FRAME_GET_USER_ERROR"),payload:et})).or(Y.extend({type:Q("FRAME_GET_USER_SUCCESS"),payload:pF})).or(Y.extend({type:Q("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:et})).or(Y.extend({type:Q("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:fF})).or(Y.extend({type:Q("FRAME_SIGN_OUT_ERROR"),payload:et})).or(Y.extend({type:Q("FRAME_SIGN_OUT_SUCCESS")})).or(Y.extend({type:Q("FRAME_IS_CONNECTED_ERROR"),payload:et})).or(Y.extend({type:Q("FRAME_IS_CONNECTED_SUCCESS"),payload:gF})).or(Y.extend({type:Q("FRAME_GET_CHAIN_ID_ERROR"),payload:et})).or(Y.extend({type:Q("FRAME_GET_CHAIN_ID_SUCCESS"),payload:mF})).or(Y.extend({type:Q("FRAME_RPC_REQUEST_ERROR"),payload:et})).or(Y.extend({type:Q("FRAME_RPC_REQUEST_SUCCESS"),payload:AF})).or(Y.extend({type:Q("FRAME_SESSION_UPDATE"),payload:Wy})).or(Y.extend({type:Q("FRAME_UPDATE_EMAIL_ERROR"),payload:et})).or(Y.extend({type:Q("FRAME_UPDATE_EMAIL_SUCCESS"),payload:hF})).or(Y.extend({type:Q("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:et})).or(Y.extend({type:Q("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Y.extend({type:Q("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:et})).or(Y.extend({type:Q("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:wF})).or(Y.extend({type:Q("FRAME_SYNC_THEME_ERROR"),payload:et})).or(Y.extend({type:Q("FRAME_SYNC_THEME_SUCCESS")})).or(Y.extend({type:Q("FRAME_SYNC_DAPP_DATA_ERROR"),payload:et})).or(Y.extend({type:Q("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Y.extend({type:Q("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:bF})).or(Y.extend({type:Q("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:et})).or(Y.extend({type:Q("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:et})).or(Y.extend({type:Q("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:EF})).or(Y.extend({type:Q("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:et})).or(Y.extend({type:Q("FRAME_READY"),payload:vF})).or(Y.extend({type:Q("FRAME_RELOAD_ERROR"),payload:et})).or(Y.extend({type:Q("FRAME_RELOAD_SUCCESS")}))};function Nd(t,e={}){var r;return typeof(e==null?void 0:e.type)=="string"&&((r=e==null?void 0:e.type)==null?void 0:r.includes(t))}class gB{constructor({projectId:e,isAppClient:r=!1,chainId:n="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.rpcUrl=j.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function l({data:c}){if(!Nd(ee.FRAME_EVENT_KEY,c))return;const u=To.frameEvent.parse(c);u.id===i&&(o(u),window.removeEventListener("message",l))}lr.isClient&&(window.addEventListener("message",l),a.addEventListener("abort",()=>{window.removeEventListener("message",l)}))},onFrameEvent:i=>{lr.isClient&&window.addEventListener("message",({data:o})=>{if(!Nd(ee.FRAME_EVENT_KEY,o))return;const a=To.frameEvent.parse(o);i(a)})},onAppEvent:i=>{lr.isClient&&window.addEventListener("message",({data:o})=>{if(!Nd(ee.APP_EVENT_KEY,o))return;const a=To.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(lr.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");To.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(lr.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");To.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),r&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),lr.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${xU}?projectId=${e}&chainId=${n}&version=${RU}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&((a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(r=>({[r]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${r}&projectId=${this.projectId}`,chainId:r}}));return Object.assign({},...e)}}class mB{constructor(e){var i;const r=Ji({level:OU}),{logger:n,chunkLoggerController:s}=gp({opts:r});this.logger=Bt(n,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class yB{constructor({projectId:e,chainId:r,enableLogger:n=!0,onTimeout:s}){this.openRpcRequests=[],n&&(this.w3mLogger=new mB(e)),this.w3mFrame=new gB({projectId:e,isAppClient:!0,chainId:r,enableLogger:n}),this.onTimeout=s,this.getLoginEmailUsed()&&this.w3mFrame.initFrame(),this.initPromise=new Promise(i=>{this.w3mFrame.events.onFrameEvent(o=>{o.type===ee.FRAME_READY&&(this.initPromise=void 0,i())})})}async init(){this.w3mFrame.initFrame(),this.initPromise&&await this.initPromise}getLoginEmailUsed(){return!!St.get(ee.EMAIL_LOGIN_USED_KEY)}getEmail(){return St.get(ee.EMAIL)}getUsername(){return St.get(ee.SOCIAL_USERNAME)}async reload(){var e;try{this.w3mFrame.initFrame(),await this.appEvent({type:ee.APP_RELOAD})}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error reloading iframe"),r}}async connectEmail(e){var r;try{lr.checkIfAllowedToTriggerEmail(),this.w3mFrame.initFrame();const n=await this.appEvent({type:ee.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),n}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error connecting email"),n}}async connectDevice(){var e;try{return this.appEvent({type:ee.APP_CONNECT_DEVICE})}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error connecting device"),r}}async connectOtp(e){var r;try{return this.appEvent({type:ee.APP_CONNECT_OTP,payload:e})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error connecting otp"),n}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const r=await this.appEvent({type:ee.APP_IS_CONNECTED});return r.isConnected||this.deleteAuthLoginCache(),r}catch(r){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:r},"Error checking connection"),r}}async getChainId(){var e;try{const r=await this.appEvent({type:ee.APP_GET_CHAIN_ID});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error getting chain id"),r}}async getSocialRedirectUri(e){var r;try{return this.w3mFrame.initFrame(),this.appEvent({type:ee.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error getting social redirect uri"),n}}async updateEmail(e){var r;try{const n=await this.appEvent({type:ee.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),n}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error updating email"),n}}async updateEmailPrimaryOtp(e){var r;try{return this.appEvent({type:ee.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error updating email primary otp"),n}}async updateEmailSecondaryOtp(e){var r;try{const n=await this.appEvent({type:ee.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(n.newEmail),n}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error updating email secondary otp"),n}}async syncTheme(e){var r;try{return this.appEvent({type:ee.APP_SYNC_THEME,payload:e})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error syncing theme"),n}}async syncDappData(e){var r;try{return this.appEvent({type:ee.APP_SYNC_DAPP_DATA,payload:e})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error syncing dapp data"),n}}async getSmartAccountEnabledNetworks(){var e;try{const r=await this.appEvent({type:ee.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(r.smartAccountEnabledNetworks),r}catch(r){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:r},"Error getting smart account enabled networks"),r}}async setPreferredAccount(e){var r;try{return this.appEvent({type:ee.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error setting preferred account"),n}}async connect(e){var r;try{const n=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:ee.APP_GET_USER,payload:{...e,chainId:n}});return this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error connecting"),n}}async getUser(e){var r;try{const n=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:ee.APP_GET_USER,payload:{...e,chainId:n}});return this.user=s,s}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error connecting"),n}}async connectSocial(e){var r;try{this.w3mFrame.initFrame();const n=await this.appEvent({type:ee.APP_CONNECT_SOCIAL,payload:{uri:e}});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error connecting social"),n}}async getFarcasterUri(){var e;try{return this.w3mFrame.initFrame(),await this.appEvent({type:ee.APP_GET_FARCASTER_URI})}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error getting farcaster uri"),r}}async connectFarcaster(){var e;try{const r=await this.appEvent({type:ee.APP_CONNECT_FARCASTER});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error connecting farcaster"),r}}async switchNetwork(e){var r;try{const n=await this.appEvent({type:ee.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error switching network"),n}}async disconnect(){var e;try{const r=await this.appEvent({type:ee.APP_SIGN_OUT});return this.deleteAuthLoginCache(),r}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error disconnecting"),r}}async request(e){var r,n,s,i;try{if(ot.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(r=this.rpcRequestHandler)==null||r.call(this,e);const o=await this.appEvent({type:ee.APP_RPC_REQUEST,payload:e});return(n=this.rpcSuccessHandler)==null||n.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ee.FRAME_IS_CONNECTED_SUCCESS&&r.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ee.FRAME_IS_CONNECTED_ERROR&&e(),r.type===ee.FRAME_IS_CONNECTED_SUCCESS&&!r.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ee.FRAME_GET_USER_SUCCESS&&e(r.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ee.FRAME_CONNECT_SOCIAL_SUCCESS&&e(r.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ee.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(r.payload):r.type===ee.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:ot.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ee.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(r.payload.smartAccountEnabledNetworks):r.type===ee.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:r,method:n})=>{ot.SAFE_RPC_METHODS.includes(n)||r.abort()}),this.openRpcRequests=[]}catch(r){(e=this.w3mLogger)==null||e.logger.error({error:r},"Error aborting RPC request")}}async appEvent(e){await this.w3mFrame.frameLoadPromise;let r;function n(a){return a.replace("@w3m-app/","")}const s=new AbortController,i=n(e.type);return[ee.APP_CONNECT_EMAIL,ee.APP_CONNECT_DEVICE,ee.APP_CONNECT_OTP,ee.APP_CONNECT_SOCIAL,ee.APP_GET_SOCIAL_REDIRECT_URI].map(n).includes(i)&&(r=setTimeout(()=>{var a;(a=this.onTimeout)==null||a.call(this),s.abort()},3e4)),new Promise((a,l)=>{var d,h,p;const c=Math.random().toString(36).substring(7);if((p=(d=this.w3mLogger)==null?void 0:(h=d.logger).info)==null||p.call(h,{event:e,id:c},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:c}),i==="RPC_REQUEST"){const g=e;this.openRpcRequests=[...this.openRpcRequests,{...g.payload,abortController:s}]}s.signal.addEventListener("abort",()=>{i==="RPC_REQUEST"?l(new Error("Request was aborted")):i!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function u(g,f){var y,b,m;g.id===c&&((b=f==null?void 0:(y=f.logger).info)==null||b.call(y,{framEvent:g,id:c},"Received frame response"),g.type===`@w3m-frame/${i}_SUCCESS`?(r&&clearTimeout(r),"payload"in g&&a(g.payload),a(void 0)):g.type===`@w3m-frame/${i}_ERROR`&&(r&&clearTimeout(r),"payload"in g&&l(new Error(((m=g.payload)==null?void 0:m.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(c,g=>u(g,this.w3mLogger),s.signal)})}setNewLastEmailLoginTime(){St.set(ee.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){St.set(ee.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&St.set(ee.EMAIL,e),St.set(ee.EMAIL_LOGIN_USED_KEY,"true"),St.delete(ee.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){St.delete(ee.EMAIL_LOGIN_USED_KEY),St.delete(ee.EMAIL),St.delete(ee.LAST_USED_CHAIN_KEY),St.delete(ee.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&St.set(ee.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=St.get(ee.LAST_USED_CHAIN_KEY)??void 0,r=Number(e);return isNaN(r)?e:r}persistSmartAccountEnabledNetworks(e){St.set(ee.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}}class Ri{constructor(){}static getInstance({projectId:e,chainId:r,enableLogger:n,onTimeout:s}){return Ri.instance||(Ri.instance=new yB({projectId:e,chainId:r,enableLogger:n,onTimeout:s})),Ri.instance}}var Vy={};const wB={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof Ut<"u"&&typeof Vy<"u"?Vy.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},Zh={filterOutDuplicatesByRDNS(t){const e=z.state.enableEIP6963?pe.state.connectors:[],r=Z.getRecentWallets(),n=e.map(a=>{var l;return(l=a.info)==null?void 0:l.rdns}).filter(Boolean),s=r.map(a=>a.rdns).filter(Boolean),i=n.concat(s);if(i.includes("io.metamask.mobile")&&ue.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=pe.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),r=Z.getRecentWallets(),n=e.map(a=>a.explorerId),s=r.map(a=>a.id),i=n.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=pe.state,r=e.filter(i=>i.type==="ANNOUNCED").reduce((i,o)=>{var a;return(a=o.info)!=null&&a.rdns&&(i[o.info.rdns]=!0),i},{});return t.map(i=>({...i,installed:!!i.rdns&&!!r[i.rdns??""]})).sort((i,o)=>Number(o.installed)-Number(i.installed))},getConnectOrderMethod(t,e){var l;const r=(t==null?void 0:t.connectMethodsOrder)||((l=z.state.features)==null?void 0:l.connectMethodsOrder),n=e||pe.state.connectors;if(r)return r;const{injected:s,announced:i}=Yc.getConnectorsByType(n,ye.state.recommended,ye.state.featured),o=s.filter(Yc.showConnector),a=i.filter(Yc.showConnector);return o.length||a.length?["wallet","email","social"]:wB.DEFAULT_CONNECT_METHOD_ORDER}},Yc={getConnectorsByType(t,e,r){const{customWallets:n}=z.state,s=Z.getRecentWallets(),i=Zh.filterOutDuplicateWallets(e),o=Zh.filterOutDuplicateWallets(r),a=t.filter(d=>d.type==="MULTI_CHAIN"),l=t.filter(d=>d.type==="ANNOUNCED"),c=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:n,recent:s,external:u,multiChain:a,announced:l,injected:c,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,r=!!e&&ye.state.excludedWallets.some(i=>i.rdns===e),n=!!t.name&&ye.state.excludedWallets.some(i=>yl.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(!ue.isMobile()&&t.name==="Browser Wallet"||!e&&!je.checkInstalled()||r||n)||t.type==="ANNOUNCED"&&(r||n))},getIsConnectedWithWC(){return Array.from(P.state.chains.values()).some(r=>pe.getConnectorId(r.namespace)===j.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:r,recent:n,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:l=(c=>(c=z.state.features)==null?void 0:c.connectorTypeOrder)()??[]}){const u=Yc.getIsConnectedWithWC(),p=[{type:"walletConnect",isEnabled:z.state.enableWalletConnect&&!u},{type:"recent",isEnabled:n.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:r&&r.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(b=>b.isEnabled),g=new Set(p.map(b=>b.type)),f=l.filter(b=>g.has(b)).map(b=>({type:b,isEnabled:!0})),y=p.filter(({type:b})=>!f.some(({type:w})=>w===b));return Array.from(new Set([...f,...y].map(({type:b})=>b)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Jc=globalThis,df=Jc.ShadowRoot&&(Jc.ShadyCSS===void 0||Jc.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,CE=Symbol(),Gy=new WeakMap;let bB=class{constructor(e,r,n){if(this._$cssResult$=!0,n!==CE)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(df&&e===void 0){const n=r!==void 0&&r.length===1;n&&(e=Gy.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&Gy.set(r,e))}return e}toString(){return this.cssText}};const vB=t=>new bB(typeof t=="string"?t:t+"",void 0,CE),EB=(t,e)=>{if(df)t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet);else for(const r of e){const n=document.createElement("style"),s=Jc.litNonce;s!==void 0&&n.setAttribute("nonce",s),n.textContent=r.cssText,t.appendChild(n)}},Ky=df?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const n of e.cssRules)r+=n.cssText;return vB(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:AB,defineProperty:_B,getOwnPropertyDescriptor:CB,getOwnPropertyNames:IB,getOwnPropertySymbols:SB,getPrototypeOf:TB}=Object,Gn=globalThis,Qy=Gn.trustedTypes,NB=Qy?Qy.emptyScript:"",Pd=Gn.reactiveElementPolyfillSupport,Vo=(t,e)=>t,Xh={toAttribute(t,e){switch(e){case Boolean:t=t?NB:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},IE=(t,e)=>!AB(t,e),Yy={attribute:!0,type:String,converter:Xh,reflect:!1,hasChanged:IE};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Gn.litPropertyMetadata??(Gn.litPropertyMetadata=new WeakMap);let No=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,r=Yy){if(r.state&&(r.attribute=!1),this._$Ei(),this.elementProperties.set(e,r),!r.noAccessor){const n=Symbol(),s=this.getPropertyDescriptor(e,n,r);s!==void 0&&_B(this.prototype,e,s)}}static getPropertyDescriptor(e,r,n){const{get:s,set:i}=CB(this.prototype,e)??{get(){return this[r]},set(o){this[r]=o}};return{get(){return s==null?void 0:s.call(this)},set(o){const a=s==null?void 0:s.call(this);i.call(this,o),this.requestUpdate(e,a,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??Yy}static _$Ei(){if(this.hasOwnProperty(Vo("elementProperties")))return;const e=TB(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Vo("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Vo("properties"))){const r=this.properties,n=[...IB(r),...SB(r)];for(const s of n)this.createProperty(s,r[s])}const e=this[Symbol.metadata];if(e!==null){const r=litPropertyMetadata.get(e);if(r!==void 0)for(const[n,s]of r)this.elementProperties.set(n,s)}this._$Eh=new Map;for(const[r,n]of this.elementProperties){const s=this._$Eu(r,n);s!==void 0&&this._$Eh.set(s,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const s of n)r.unshift(Ky(s))}else e!==void 0&&r.push(Ky(e));return r}static _$Eu(e,r){const n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(r=>r(this))}addController(e){var r;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((r=e.hostConnected)==null||r.call(e))}removeController(e){var r;(r=this._$EO)==null||r.delete(e)}_$E_(){const e=new Map,r=this.constructor.elementProperties;for(const n of r.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return EB(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(r=>{var n;return(n=r.hostConnected)==null?void 0:n.call(r)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(r=>{var n;return(n=r.hostDisconnected)==null?void 0:n.call(r)})}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$EC(e,r){var i;const n=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,n);if(s!==void 0&&n.reflect===!0){const o=(((i=n.converter)==null?void 0:i.toAttribute)!==void 0?n.converter:Xh).toAttribute(r,n.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,r){var i;const n=this.constructor,s=n._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const o=n.getPropertyOptions(s),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((i=o.converter)==null?void 0:i.fromAttribute)!==void 0?o.converter:Xh;this._$Em=s,this[s]=a.fromAttribute(r,o.type),this._$Em=null}}requestUpdate(e,r,n){if(e!==void 0){if(n??(n=this.constructor.getPropertyOptions(e)),!(n.hasChanged??IE)(this[e],r))return;this.P(e,r,n)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(e,r,n){this._$AL.has(e)||this._$AL.set(e,r),n.reflect===!0&&this._$Em!==e&&(this._$Ej??(this._$Ej=new Set)).add(e)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var n;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s)o.wrapped!==!0||this._$AL.has(i)||this[i]===void 0||this.P(i,this[i],o)}let e=!1;const r=this._$AL;try{e=this.shouldUpdate(r),e?(this.willUpdate(r),(n=this._$EO)==null||n.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(r)):this._$EU()}catch(s){throw e=!1,this._$EU(),s}e&&this._$AE(r)}willUpdate(e){}_$AE(e){var r;(r=this._$EO)==null||r.forEach(n=>{var s;return(s=n.hostUpdated)==null?void 0:s.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Ej&&(this._$Ej=this._$Ej.forEach(r=>this._$EC(r,this[r]))),this._$EU()}updated(e){}firstUpdated(e){}};No.elementStyles=[],No.shadowRootOptions={mode:"open"},No[Vo("elementProperties")]=new Map,No[Vo("finalized")]=new Map,Pd==null||Pd({ReactiveElement:No}),(Gn.reactiveElementVersions??(Gn.reactiveElementVersions=[])).push("2.0.4");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Go=globalThis,Nl=Go.trustedTypes,Jy=Nl?Nl.createPolicy("lit-html",{createHTML:t=>t}):void 0,SE="$lit$",Fn=`lit$${Math.random().toFixed(9).slice(2)}$`,TE="?"+Fn,PB=`<${TE}>`,Ws=document,Pl=()=>Ws.createComment(""),$a=t=>t===null||typeof t!="object"&&typeof t!="function",hf=Array.isArray,xB=t=>hf(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",xd=`[ 	
\f\r]`,Po=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Zy=/-->/g,Xy=/>/g,ds=RegExp(`>|${xd}(?:([^\\s"'>=/]+)(${xd}*=${xd}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),ew=/'/g,tw=/"/g,NE=/^(?:script|style|textarea|title)$/i,Ua=Symbol.for("lit-noChange"),wt=Symbol.for("lit-nothing"),rw=new WeakMap,Cs=Ws.createTreeWalker(Ws,129);function PE(t,e){if(!hf(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Jy!==void 0?Jy.createHTML(e):e}const OB=(t,e)=>{const r=t.length-1,n=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=Po;for(let a=0;a<r;a++){const l=t[a];let c,u,d=-1,h=0;for(;h<l.length&&(o.lastIndex=h,u=o.exec(l),u!==null);)h=o.lastIndex,o===Po?u[1]==="!--"?o=Zy:u[1]!==void 0?o=Xy:u[2]!==void 0?(NE.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=ds):u[3]!==void 0&&(o=ds):o===ds?u[0]===">"?(o=s??Po,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,c=u[1],o=u[3]===void 0?ds:u[3]==='"'?tw:ew):o===tw||o===ew?o=ds:o===Zy||o===Xy?o=Po:(o=ds,s=void 0);const p=o===ds&&t[a+1].startsWith("/>")?" ":"";i+=o===Po?l+PB:d>=0?(n.push(c),l.slice(0,d)+SE+l.slice(d)+Fn+p):l+Fn+(d===-2?a:p)}return[PE(t,i+(t[r]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),n]};let ep=class xE{constructor({strings:e,_$litType$:r},n){let s;this.parts=[];let i=0,o=0;const a=e.length-1,l=this.parts,[c,u]=OB(e,r);if(this.el=xE.createElement(c,n),Cs.currentNode=this.el.content,r===2||r===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=Cs.nextNode())!==null&&l.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(SE)){const h=u[o++],p=s.getAttribute(d).split(Fn),g=/([.?@])?(.*)/.exec(h);l.push({type:1,index:i,name:g[2],strings:p,ctor:g[1]==="."?DB:g[1]==="?"?kB:g[1]==="@"?$B:yu}),s.removeAttribute(d)}else d.startsWith(Fn)&&(l.push({type:6,index:i}),s.removeAttribute(d));if(NE.test(s.tagName)){const d=s.textContent.split(Fn),h=d.length-1;if(h>0){s.textContent=Nl?Nl.emptyScript:"";for(let p=0;p<h;p++)s.append(d[p],Pl()),Cs.nextNode(),l.push({type:2,index:++i});s.append(d[h],Pl())}}}else if(s.nodeType===8)if(s.data===TE)l.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(Fn,d+1))!==-1;)l.push({type:7,index:i}),d+=Fn.length-1}i++}}static createElement(e,r){const n=Ws.createElement("template");return n.innerHTML=e,n}};function qi(t,e,r=t,n){var o,a;if(e===Ua)return e;let s=n!==void 0?(o=r._$Co)==null?void 0:o[n]:r._$Cl;const i=$a(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,r,n)),n!==void 0?(r._$Co??(r._$Co=[]))[n]=s:r._$Cl=s),s!==void 0&&(e=qi(t,s._$AS(t,e.values),s,n)),e}let RB=class{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:r},parts:n}=this._$AD,s=((e==null?void 0:e.creationScope)??Ws).importNode(r,!0);Cs.currentNode=s;let i=Cs.nextNode(),o=0,a=0,l=n[0];for(;l!==void 0;){if(o===l.index){let c;l.type===2?c=new OE(i,i.nextSibling,this,e):l.type===1?c=new l.ctor(i,l.name,l.strings,this,e):l.type===6&&(c=new UB(i,this,e)),this._$AV.push(c),l=n[++a]}o!==(l==null?void 0:l.index)&&(i=Cs.nextNode(),o++)}return Cs.currentNode=Ws,s}p(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}},OE=class RE{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,r,n,s){this.type=2,this._$AH=wt,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=qi(this,e,r),$a(e)?e===wt||e==null||e===""?(this._$AH!==wt&&this._$AR(),this._$AH=wt):e!==this._$AH&&e!==Ua&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):xB(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==wt&&$a(this._$AH)?this._$AA.nextSibling.data=e:this.T(Ws.createTextNode(e)),this._$AH=e}$(e){var i;const{values:r,_$litType$:n}=e,s=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=ep.createElement(PE(n.h,n.h[0]),this.options)),n);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(r);else{const o=new RB(s,this),a=o.u(this.options);o.p(r),this.T(a),this._$AH=o}}_$AC(e){let r=rw.get(e.strings);return r===void 0&&rw.set(e.strings,r=new ep(e)),r}k(e){hf(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,s=0;for(const i of e)s===r.length?r.push(n=new RE(this.O(Pl()),this.O(Pl()),this,this.options)):n=r[s],n._$AI(i),s++;s<r.length&&(this._$AR(n&&n._$AB.nextSibling,s),r.length=s)}_$AR(e=this._$AA.nextSibling,r){var n;for((n=this._$AP)==null?void 0:n.call(this,!1,!0,r);e&&e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var r;this._$AM===void 0&&(this._$Cv=e,(r=this._$AP)==null||r.call(this,e))}},yu=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,r,n,s,i){this.type=1,this._$AH=wt,this._$AN=void 0,this.element=e,this.name=r,this._$AM=s,this.options=i,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=wt}_$AI(e,r=this,n,s){const i=this.strings;let o=!1;if(i===void 0)e=qi(this,e,r,0),o=!$a(e)||e!==this._$AH&&e!==Ua,o&&(this._$AH=e);else{const a=e;let l,c;for(e=i[0],l=0;l<i.length-1;l++)c=qi(this,a[n+l],r,l),c===Ua&&(c=this._$AH[l]),o||(o=!$a(c)||c!==this._$AH[l]),c===wt?e=wt:e!==wt&&(e+=(c??"")+i[l+1]),this._$AH[l]=c}o&&!s&&this.j(e)}j(e){e===wt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},DB=class extends yu{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===wt?void 0:e}},kB=class extends yu{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==wt)}},$B=class extends yu{constructor(e,r,n,s,i){super(e,r,n,s,i),this.type=5}_$AI(e,r=this){if((e=qi(this,e,r,0)??wt)===Ua)return;const n=this._$AH,s=e===wt&&n!==wt||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,i=e!==wt&&(n===wt||s);s&&this.element.removeEventListener(this.name,this,n),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r;typeof this._$AH=="function"?this._$AH.call(((r=this.options)==null?void 0:r.host)??this.element,e):this._$AH.handleEvent(e)}},UB=class{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){qi(this,e)}};const Od=Go.litHtmlPolyfillSupport;Od==null||Od(ep,OE),(Go.litHtmlVersions??(Go.litHtmlVersions=[])).push("3.2.1");/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Zc=globalThis,pf=Zc.ShadowRoot&&(Zc.ShadyCSS===void 0||Zc.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,ff=Symbol(),nw=new WeakMap;let DE=class{constructor(e,r,n){if(this._$cssResult$=!0,n!==ff)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(pf&&e===void 0){const n=r!==void 0&&r.length===1;n&&(e=nw.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&nw.set(r,e))}return e}toString(){return this.cssText}};const mr=t=>new DE(typeof t=="string"?t:t+"",void 0,ff),Di=(t,...e)=>{const r=t.length===1?t[0]:e.reduce((n,s,i)=>n+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new DE(r,t,ff)},MB=(t,e)=>{if(pf)t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet);else for(const r of e){const n=document.createElement("style"),s=Zc.litNonce;s!==void 0&&n.setAttribute("nonce",s),n.textContent=r.cssText,t.appendChild(n)}},sw=pf?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const n of e.cssRules)r+=n.cssText;return mr(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:FB,defineProperty:BB,getOwnPropertyDescriptor:LB,getOwnPropertyNames:jB,getOwnPropertySymbols:zB,getPrototypeOf:HB}=Object,Kn=globalThis,iw=Kn.trustedTypes,qB=iw?iw.emptyScript:"",Rd=Kn.reactiveElementPolyfillSupport,Ko=(t,e)=>t,tp={toAttribute(t,e){switch(e){case Boolean:t=t?qB:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},kE=(t,e)=>!FB(t,e),ow={attribute:!0,type:String,converter:tp,reflect:!1,hasChanged:kE};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Kn.litPropertyMetadata??(Kn.litPropertyMetadata=new WeakMap);let _i=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,r=ow){if(r.state&&(r.attribute=!1),this._$Ei(),this.elementProperties.set(e,r),!r.noAccessor){const n=Symbol(),s=this.getPropertyDescriptor(e,n,r);s!==void 0&&BB(this.prototype,e,s)}}static getPropertyDescriptor(e,r,n){const{get:s,set:i}=LB(this.prototype,e)??{get(){return this[r]},set(o){this[r]=o}};return{get(){return s==null?void 0:s.call(this)},set(o){const a=s==null?void 0:s.call(this);i.call(this,o),this.requestUpdate(e,a,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??ow}static _$Ei(){if(this.hasOwnProperty(Ko("elementProperties")))return;const e=HB(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Ko("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Ko("properties"))){const r=this.properties,n=[...jB(r),...zB(r)];for(const s of n)this.createProperty(s,r[s])}const e=this[Symbol.metadata];if(e!==null){const r=litPropertyMetadata.get(e);if(r!==void 0)for(const[n,s]of r)this.elementProperties.set(n,s)}this._$Eh=new Map;for(const[r,n]of this.elementProperties){const s=this._$Eu(r,n);s!==void 0&&this._$Eh.set(s,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const s of n)r.unshift(sw(s))}else e!==void 0&&r.push(sw(e));return r}static _$Eu(e,r){const n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(r=>r(this))}addController(e){var r;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((r=e.hostConnected)==null||r.call(e))}removeController(e){var r;(r=this._$EO)==null||r.delete(e)}_$E_(){const e=new Map,r=this.constructor.elementProperties;for(const n of r.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return MB(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(r=>{var n;return(n=r.hostConnected)==null?void 0:n.call(r)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(r=>{var n;return(n=r.hostDisconnected)==null?void 0:n.call(r)})}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$EC(e,r){var i;const n=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,n);if(s!==void 0&&n.reflect===!0){const o=(((i=n.converter)==null?void 0:i.toAttribute)!==void 0?n.converter:tp).toAttribute(r,n.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,r){var i;const n=this.constructor,s=n._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const o=n.getPropertyOptions(s),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((i=o.converter)==null?void 0:i.fromAttribute)!==void 0?o.converter:tp;this._$Em=s,this[s]=a.fromAttribute(r,o.type),this._$Em=null}}requestUpdate(e,r,n){if(e!==void 0){if(n??(n=this.constructor.getPropertyOptions(e)),!(n.hasChanged??kE)(this[e],r))return;this.P(e,r,n)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(e,r,n){this._$AL.has(e)||this._$AL.set(e,r),n.reflect===!0&&this._$Em!==e&&(this._$Ej??(this._$Ej=new Set)).add(e)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var n;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s)o.wrapped!==!0||this._$AL.has(i)||this[i]===void 0||this.P(i,this[i],o)}let e=!1;const r=this._$AL;try{e=this.shouldUpdate(r),e?(this.willUpdate(r),(n=this._$EO)==null||n.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(r)):this._$EU()}catch(s){throw e=!1,this._$EU(),s}e&&this._$AE(r)}willUpdate(e){}_$AE(e){var r;(r=this._$EO)==null||r.forEach(n=>{var s;return(s=n.hostUpdated)==null?void 0:s.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Ej&&(this._$Ej=this._$Ej.forEach(r=>this._$EC(r,this[r]))),this._$EU()}updated(e){}firstUpdated(e){}};_i.elementStyles=[],_i.shadowRootOptions={mode:"open"},_i[Ko("elementProperties")]=new Map,_i[Ko("finalized")]=new Map,Rd==null||Rd({ReactiveElement:_i}),(Kn.reactiveElementVersions??(Kn.reactiveElementVersions=[])).push("2.0.4");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Qo=globalThis,xl=Qo.trustedTypes,aw=xl?xl.createPolicy("lit-html",{createHTML:t=>t}):void 0,$E="$lit$",Bn=`lit$${Math.random().toFixed(9).slice(2)}$`,UE="?"+Bn,WB=`<${UE}>`,Vs=document,Ma=()=>Vs.createComment(""),Fa=t=>t===null||typeof t!="object"&&typeof t!="function",gf=Array.isArray,VB=t=>gf(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",Dd=`[ 	
\f\r]`,xo=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,cw=/-->/g,lw=/>/g,hs=RegExp(`>|${Dd}(?:([^\\s"'>=/]+)(${Dd}*=${Dd}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),uw=/'/g,dw=/"/g,ME=/^(?:script|style|textarea|title)$/i,FE=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),b7=FE(1),v7=FE(2),Wi=Symbol.for("lit-noChange"),bt=Symbol.for("lit-nothing"),hw=new WeakMap,Is=Vs.createTreeWalker(Vs,129);function BE(t,e){if(!gf(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return aw!==void 0?aw.createHTML(e):e}const GB=(t,e)=>{const r=t.length-1,n=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=xo;for(let a=0;a<r;a++){const l=t[a];let c,u,d=-1,h=0;for(;h<l.length&&(o.lastIndex=h,u=o.exec(l),u!==null);)h=o.lastIndex,o===xo?u[1]==="!--"?o=cw:u[1]!==void 0?o=lw:u[2]!==void 0?(ME.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=hs):u[3]!==void 0&&(o=hs):o===hs?u[0]===">"?(o=s??xo,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,c=u[1],o=u[3]===void 0?hs:u[3]==='"'?dw:uw):o===dw||o===uw?o=hs:o===cw||o===lw?o=xo:(o=hs,s=void 0);const p=o===hs&&t[a+1].startsWith("/>")?" ":"";i+=o===xo?l+WB:d>=0?(n.push(c),l.slice(0,d)+$E+l.slice(d)+Bn+p):l+Bn+(d===-2?a:p)}return[BE(t,i+(t[r]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),n]};class Ba{constructor({strings:e,_$litType$:r},n){let s;this.parts=[];let i=0,o=0;const a=e.length-1,l=this.parts,[c,u]=GB(e,r);if(this.el=Ba.createElement(c,n),Is.currentNode=this.el.content,r===2||r===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=Is.nextNode())!==null&&l.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith($E)){const h=u[o++],p=s.getAttribute(d).split(Bn),g=/([.?@])?(.*)/.exec(h);l.push({type:1,index:i,name:g[2],strings:p,ctor:g[1]==="."?QB:g[1]==="?"?YB:g[1]==="@"?JB:wu}),s.removeAttribute(d)}else d.startsWith(Bn)&&(l.push({type:6,index:i}),s.removeAttribute(d));if(ME.test(s.tagName)){const d=s.textContent.split(Bn),h=d.length-1;if(h>0){s.textContent=xl?xl.emptyScript:"";for(let p=0;p<h;p++)s.append(d[p],Ma()),Is.nextNode(),l.push({type:2,index:++i});s.append(d[h],Ma())}}}else if(s.nodeType===8)if(s.data===UE)l.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(Bn,d+1))!==-1;)l.push({type:7,index:i}),d+=Bn.length-1}i++}}static createElement(e,r){const n=Vs.createElement("template");return n.innerHTML=e,n}}function Vi(t,e,r=t,n){var o,a;if(e===Wi)return e;let s=n!==void 0?(o=r._$Co)==null?void 0:o[n]:r._$Cl;const i=Fa(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,r,n)),n!==void 0?(r._$Co??(r._$Co=[]))[n]=s:r._$Cl=s),s!==void 0&&(e=Vi(t,s._$AS(t,e.values),s,n)),e}class KB{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:r},parts:n}=this._$AD,s=((e==null?void 0:e.creationScope)??Vs).importNode(r,!0);Is.currentNode=s;let i=Is.nextNode(),o=0,a=0,l=n[0];for(;l!==void 0;){if(o===l.index){let c;l.type===2?c=new dc(i,i.nextSibling,this,e):l.type===1?c=new l.ctor(i,l.name,l.strings,this,e):l.type===6&&(c=new ZB(i,this,e)),this._$AV.push(c),l=n[++a]}o!==(l==null?void 0:l.index)&&(i=Is.nextNode(),o++)}return Is.currentNode=Vs,s}p(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}}class dc{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,r,n,s){this.type=2,this._$AH=bt,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=Vi(this,e,r),Fa(e)?e===bt||e==null||e===""?(this._$AH!==bt&&this._$AR(),this._$AH=bt):e!==this._$AH&&e!==Wi&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):VB(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==bt&&Fa(this._$AH)?this._$AA.nextSibling.data=e:this.T(Vs.createTextNode(e)),this._$AH=e}$(e){var i;const{values:r,_$litType$:n}=e,s=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=Ba.createElement(BE(n.h,n.h[0]),this.options)),n);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(r);else{const o=new KB(s,this),a=o.u(this.options);o.p(r),this.T(a),this._$AH=o}}_$AC(e){let r=hw.get(e.strings);return r===void 0&&hw.set(e.strings,r=new Ba(e)),r}k(e){gf(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,s=0;for(const i of e)s===r.length?r.push(n=new dc(this.O(Ma()),this.O(Ma()),this,this.options)):n=r[s],n._$AI(i),s++;s<r.length&&(this._$AR(n&&n._$AB.nextSibling,s),r.length=s)}_$AR(e=this._$AA.nextSibling,r){var n;for((n=this._$AP)==null?void 0:n.call(this,!1,!0,r);e&&e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var r;this._$AM===void 0&&(this._$Cv=e,(r=this._$AP)==null||r.call(this,e))}}class wu{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,r,n,s,i){this.type=1,this._$AH=bt,this._$AN=void 0,this.element=e,this.name=r,this._$AM=s,this.options=i,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=bt}_$AI(e,r=this,n,s){const i=this.strings;let o=!1;if(i===void 0)e=Vi(this,e,r,0),o=!Fa(e)||e!==this._$AH&&e!==Wi,o&&(this._$AH=e);else{const a=e;let l,c;for(e=i[0],l=0;l<i.length-1;l++)c=Vi(this,a[n+l],r,l),c===Wi&&(c=this._$AH[l]),o||(o=!Fa(c)||c!==this._$AH[l]),c===bt?e=bt:e!==bt&&(e+=(c??"")+i[l+1]),this._$AH[l]=c}o&&!s&&this.j(e)}j(e){e===bt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class QB extends wu{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===bt?void 0:e}}class YB extends wu{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==bt)}}class JB extends wu{constructor(e,r,n,s,i){super(e,r,n,s,i),this.type=5}_$AI(e,r=this){if((e=Vi(this,e,r,0)??bt)===Wi)return;const n=this._$AH,s=e===bt&&n!==bt||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,i=e!==bt&&(n===bt||s);s&&this.element.removeEventListener(this.name,this,n),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r;typeof this._$AH=="function"?this._$AH.call(((r=this.options)==null?void 0:r.host)??this.element,e):this._$AH.handleEvent(e)}}class ZB{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){Vi(this,e)}}const kd=Qo.litHtmlPolyfillSupport;kd==null||kd(Ba,dc),(Qo.litHtmlVersions??(Qo.litHtmlVersions=[])).push("3.2.1");const XB=(t,e,r)=>{const n=(r==null?void 0:r.renderBefore)??e;let s=n._$litPart$;if(s===void 0){const i=(r==null?void 0:r.renderBefore)??null;n._$litPart$=s=new dc(e.insertBefore(Ma(),i),i,void 0,r??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class Xc extends _i{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var r;const e=super.createRenderRoot();return(r=this.renderOptions).renderBefore??(r.renderBefore=e.firstChild),e}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=XB(r,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Wi}}var Nw;Xc._$litElement$=!0,Xc.finalized=!0,(Nw=globalThis.litElementHydrateSupport)==null||Nw.call(globalThis,{LitElement:Xc});const $d=globalThis.litElementPolyfillSupport;$d==null||$d({LitElement:Xc});(globalThis.litElementVersions??(globalThis.litElementVersions=[])).push("4.1.1");let Yo,Qn,Yn;function E7(t,e){Yo=document.createElement("style"),Qn=document.createElement("style"),Yn=document.createElement("style"),Yo.textContent=ki(t).core.cssText,Qn.textContent=ki(t).dark.cssText,Yn.textContent=ki(t).light.cssText,document.head.appendChild(Yo),document.head.appendChild(Qn),document.head.appendChild(Yn),LE(e)}function LE(t){Qn&&Yn&&(t==="light"?(Qn.removeAttribute("media"),Yn.media="enabled"):(Yn.removeAttribute("media"),Qn.media="enabled"))}function eL(t){Yo&&Qn&&Yn&&(Yo.textContent=ki(t).core.cssText,Qn.textContent=ki(t).dark.cssText,Yn.textContent=ki(t).light.cssText)}function ki(t){return{core:Di`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${mr(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${mr((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${mr((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${mr((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${mr((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Di`
      :root {
        --w3m-color-mix: ${mr((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${mr(mn(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${mr(mn(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Di`
      :root {
        --w3m-color-mix: ${mr((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${mr(mn(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${mr(mn(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const A7=Di`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,_7=Di`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,C7=Di`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`;function tL(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let c=0;c<e.length;c++)e[c]=255;for(let c=0;c<t.length;c++){const u=t.charAt(c),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=c}const r=t.length,n=t.charAt(0),s=Math.log(r)/Math.log(256),i=Math.log(256)/Math.log(r);function o(c){if(c instanceof Uint8Array||(ArrayBuffer.isView(c)?c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength):Array.isArray(c)&&(c=Uint8Array.from(c))),!(c instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(c.length===0)return"";let u=0,d=0,h=0;const p=c.length;for(;h!==p&&c[h]===0;)h++,u++;const g=(p-h)*i+1>>>0,f=new Uint8Array(g);for(;h!==p;){let m=c[h],w=0;for(let C=g-1;(m!==0||w<d)&&C!==-1;C--,w++)m+=256*f[C]>>>0,f[C]=m%r>>>0,m=m/r>>>0;if(m!==0)throw new Error("Non-zero carry");d=w,h++}let y=g-d;for(;y!==g&&f[y]===0;)y++;let b=n.repeat(u);for(;y<g;++y)b+=t.charAt(f[y]);return b}function a(c){if(typeof c!="string")throw new TypeError("Expected String");if(c.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;c[u]===n;)d++,u++;const p=(c.length-u)*s+1>>>0,g=new Uint8Array(p);for(;u<c.length;){const m=c.charCodeAt(u);if(m>255)return;let w=e[m];if(w===255)return;let C=0;for(let _=p-1;(w!==0||C<h)&&_!==-1;_--,C++)w+=r*g[_]>>>0,g[_]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");h=C,u++}let f=p-h;for(;f!==p&&g[f]===0;)f++;const y=new Uint8Array(d+(p-f));let b=d;for(;f!==p;)y[b++]=g[f++];return y}function l(c){const u=a(c);if(u)return u;throw new Error("Non-base"+r+" character")}return{encode:o,decodeUnsafe:a,decode:l}}var rL="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const nL=tL(rL),$c={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603},sL={gasPriceOracle:{address:"0x420000000000000000000000000000000000000F"},l1Block:{address:"0x4200000000000000000000000000000000000015"},l2CrossDomainMessenger:{address:"0x4200000000000000000000000000000000000007"},l2Erc721Bridge:{address:"0x4200000000000000000000000000000000000014"},l2StandardBridge:{address:"0x4200000000000000000000000000000000000010"},l2ToL1MessagePasser:{address:"0x4200000000000000000000000000000000000016"}},iL={block:p6({format(t){var r;return{transactions:(r=t.transactions)==null?void 0:r.map(n=>{if(typeof n=="string")return n;const s=pu(n);return s.typeHex==="0x7e"&&(s.isSystemTx=n.isSystemTx,s.mint=n.mint?Dr(n.mint):void 0,s.sourceHash=n.sourceHash,s.type="deposit"),s}),stateRoot:t.stateRoot}}}),transaction:d6({format(t){const e={};return t.type==="0x7e"&&(e.isSystemTx=t.isSystemTx,e.mint=t.mint?Dr(t.mint):void 0,e.sourceHash=t.sourceHash,e.type="deposit"),e}}),transactionReceipt:F4({format(t){return{l1GasPrice:t.l1GasPrice?Dr(t.l1GasPrice):null,l1GasUsed:t.l1GasUsed?Dr(t.l1GasUsed):null,l1Fee:t.l1Fee?Dr(t.l1Fee):null,l1FeeScalar:t.l1FeeScalar?Number(t.l1FeeScalar):null}}})};function oL(t,e){return lL(t)?cL(t):x4(t,e)}const aL={transaction:oL};function cL(t){uL(t);const{sourceHash:e,data:r,from:n,gas:s,isSystemTx:i,mint:o,to:a,value:l}=t,c=[e,n,a??"0x",o?le(o):"0x",l?le(l):"0x",s?le(s):"0x",i?"0x1":"0x",r??"0x"];return Sn(["0x7e",es(c)])}function lL(t){return t.type==="deposit"||typeof t.sourceHash<"u"}function uL(t){const{from:e,to:r}=t;if(e&&!Pt(e))throw new er({address:e});if(r&&!Pt(r))throw new er({address:r})}const Ol={contracts:sL,formatters:iL,serializers:aL},dL=ao({id:42161,name:"Arbitrum One",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Arbiscan",url:"https://arbiscan.io",apiUrl:"https://api.arbiscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7654707}}}),hL=ao({id:421614,name:"Arbitrum Sepolia",nativeCurrency:{name:"Arbitrum Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia-rollup.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Arbiscan",url:"https://sepolia.arbiscan.io",apiUrl:"https://api-sepolia.arbiscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:81930}},testnet:!0}),Oo=1,pL=ao({...Ol,id:8453,name:"Base",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://mainnet.base.org"]}},blockExplorers:{default:{name:"Basescan",url:"https://basescan.org",apiUrl:"https://api.basescan.org/api"}},contracts:{...Ol.contracts,disputeGameFactory:{[Oo]:{address:"0x43edB88C4B80fDD2AdFF2412A7BebF9dF42cB40e"}},l2OutputOracle:{[Oo]:{address:"0x56315b90c40730925ec5485cf004d835058518A0"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:5022},portal:{[Oo]:{address:"0x49048044D57e1C92A77f79988d21Fa8fAF74E97e",blockCreated:17482143}},l1StandardBridge:{[Oo]:{address:"0x3154Cf16ccdb4C6d922629664174b904d80F2C35",blockCreated:17482143}}},sourceId:Oo}),Ro=11155111,fL=ao({...Ol,id:84532,network:"base-sepolia",name:"Base Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.base.org"]}},blockExplorers:{default:{name:"Basescan",url:"https://sepolia.basescan.org",apiUrl:"https://api-sepolia.basescan.org/api"}},contracts:{...Ol.contracts,disputeGameFactory:{[Ro]:{address:"0xd6E6dBf4F7EA0ac412fD8b65ED297e64BB7a06E1"}},l2OutputOracle:{[Ro]:{address:"0x84457ca9D0163FbC4bbfe4Dfbb20ba46e48DF254"}},portal:{[Ro]:{address:"0x49f53e41452c74589e85ca1677426ba426459e85",blockCreated:4446677}},l1StandardBridge:{[Ro]:{address:"0xfd0Bf71F60660E2f608ed56e1659C450eB113120",blockCreated:4446677}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:1059647}},testnet:!0,sourceId:Ro}),jE=ao({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}}),gL=ao({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.drpc.org"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xc8Af999e38273D658BE1b921b88A9Ddf005769cC",blockCreated:5317080}},testnet:!0});function hc(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const pw=hc({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),fw=hc({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});hc({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});hc({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});hc({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const mL={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},bu={getMethodsByChainNamespace(t){return mL[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const r={...t},n=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>n.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>n.add(s)),e.events&&Object.keys(e.events).forEach(s=>n.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&n.add(i)}),n.forEach(s=>{r[s]||(r[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{r[s]&&(r[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{r[s]&&(r[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{r[s]&&(r[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,l]=i.split(":");!a||!l||!r[a]||(r[a].rpcMap||(r[a].rpcMap={}),s.has(a)||(r[a].rpcMap={},s.add(a)),r[a].rpcMap[l]=o)})}return r},createNamespaces(t,e){const r=t.reduce((n,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,l=a.default.http[0];n[o]||(n[o]=this.createDefaultNamespace(o));const c=`${o}:${i}`,u=n[o];switch(u.chains.push(c),c){case pw.caipNetworkId:u.chains.push(pw.deprecatedCaipNetworkId);break;case fw.caipNetworkId:u.chains.push(fw.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&l&&(u.rpcMap[i]=l),n},{});return this.applyNamespaceOverrides(r,e)},resolveReownName:async t=>{var n;const e=await gE.resolveName(t);return((n=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:n.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const r=e.chains||[],n=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...r,...n]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null}};class mf{constructor({provider:e,caipNetworks:r,namespace:n}){this.id=j.CONNECTOR_ID.WALLET_CONNECT,this.name=Hn.ConnectorNamesMap[j.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Hn.ConnectorImageIds[j.CONNECTOR_ID.WALLET_CONNECT],this.caipNetworks=r,this.provider=e,this.chain=n}get chains(){return this.caipNetworks}async connectWalletConnect(){if(!await this.authenticate()){const r=z.state.universalProviderConfigOverride,n=bu.createNamespaces(this.caipNetworks,r);await this.provider.connect({optionalNamespaces:n})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(r=>r.caipNetworkId);return qo.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:yL})}}const yL=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class zE{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,e&&this.construct(e)}construct(e){this.caipNetworks=e.networks,this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.caipNetworks||[]}setAuthProvider(e){this.addConnector({id:j.CONNECTOR_ID.AUTH,type:"AUTH",name:j.CONNECTOR_NAMES.AUTH,provider:e,imageId:Hn.ConnectorImageIds[j.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const r=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(n=>r.has(n.id)?!1:(r.add(n.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,r){re.setStatus(e,r)}on(e,r){var n;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(n=this.eventListeners.get(e))==null||n.add(r)}off(e,r){const n=this.eventListeners.get(e);n&&n.delete(r)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,r){const n=this.eventListeners.get(e);n&&n.forEach(s=>s(r))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:r,providerType:n}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(n==="WALLET_CONNECT"){s.setDefaultChain(r.caipNetworkId);return}if(s&&n==="AUTH"){const i=s;await i.switchNetwork(r.caipNetworkId);const o=await i.getUser({chainId:r.caipNetworkId,preferredAccountType:z.state.defaultAccountTypes[r.chainNamespace]});this.emit("switchNetwork",o)}}getWalletConnectConnector(){const e=this.connectors.find(r=>r instanceof mf);if(!e)throw new Error("WalletConnectConnector not found");return e}}class wL extends zE{setUniversalProvider(e){this.addConnector(new mf({provider:e,caipNetworks:this.caipNetworks||[],namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const r=this.provider,n=((a=(o=(i=(s=r==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(l=>{const[,,c]=l.split(":");return c}).filter((l,c,u)=>u.indexOf(l)===c))||[];return Promise.resolve({accounts:n.map(l=>ue.createAccount(e,l,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,l,c;if(!(e.caipNetwork&&ht.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(re.state.balanceLoading&&e.chainId===((l=P.state.activeCaipNetwork)==null?void 0:l.id))return{balance:re.state.balance||"0.00",symbol:re.state.balanceSymbol||""};const s=(await re.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((c=e.caipNetwork)==null?void 0:c.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,l;const{provider:r,message:n,address:s}=e;if(!r)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=P.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===j.CHAIN.SOLANA?i=(await r.request({method:"solana_signMessage",params:{message:nL.encode(new TextEncoder().encode(n)),pubkey:s}},(a=P.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await r.request({method:"personal_sign",params:[n,s]},(l=P.state.activeCaipNetwork)==null?void 0:l.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async getProfile(){return Promise.resolve({profileImage:"",profileName:""})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}async getEnsAddress(){return Promise.resolve({address:!1})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,l,c;const{caipNetwork:r}=e,n=this.getWalletConnectConnector();if(r.chainNamespace===j.CHAIN.EVM)try{await((s=n.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:le(r.id)}]}))}catch(u){if(u.code===$c.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===$c.ERROR_INVALID_CHAIN_ID||u.code===$c.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===$c.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((c=n.provider)==null?void 0:c.request({method:"wallet_addEthereumChain",params:[{chainId:le(r.id),rpcUrls:[(a=r==null?void 0:r.rpcUrls.chainDefault)==null?void 0:a.http],chainName:r.name,nativeCurrency:r.nativeCurrency,blockExplorerUrls:[(l=r.blockExplorers)==null?void 0:l.default.url]}]}))}catch{throw new Error("Chain is not supported")}}n.provider.setDefaultChain(r.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(n=>n.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}class bL{constructor(e){var r;this.hasSwitchedToPreferredAccountTypeOnConnect=!1,this.chainNamespaces=[],this.reportedAlertErrors={},this.getCaipNetwork=n=>{var s,i;if(n){const o=(s=P.getNetworkData(n))==null?void 0:s.caipNetwork;return o||((i=P.getRequestedCaipNetworks(n).filter(a=>a.chainNamespace===n))==null?void 0:i[0])}return P.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>P.getRequestedCaipNetworks(n),this.getActiveChainNamespace=()=>P.state.activeChain,this.setRequestedCaipNetworks=(n,s)=>{P.setRequestedCaipNetworks(n,s)},this.getApprovedCaipNetworkIds=()=>P.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>P.state.activeChain===n||!n?P.state.activeCaipAddress:P.getAccountProp("caipAddress",n),this.setClientId=n=>{ae.setClientId(n)},this.getProvider=n=>$e.getProvider(n),this.getProviderType=n=>$e.getProviderId(n),this.getPreferredAccountType=()=>re.state.preferredAccountType,this.setCaipAddress=(n,s)=>{re.setCaipAddress(n,s)},this.setBalance=(n,s,i)=>{re.setBalance(n,s,i)},this.setProfileName=(n,s)=>{re.setProfileName(n,s)},this.setProfileImage=(n,s)=>{re.setProfileImage(n,s)},this.setUser=(n,s)=>{re.setUser(n,s),z.state.enableEmbedded&&at.close()},this.resetAccount=n=>{re.resetAccount(n)},this.setCaipNetwork=n=>{P.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,s)=>{P.setChainNetworkData(s,{caipNetwork:n})},this.setAllAccounts=(n,s)=>{re.setAllAccounts(n,s),z.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,s)=>{re.setStatus(n,s),pe.isConnected()?Z.setConnectionStatus("connected"):Z.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>P.getAccountProp("address",n),this.setConnectors=n=>{const s=[...pe.getConnectors(),...n];pe.setConnectors(s)},this.fetchIdentity=n=>ae.fetchIdentity(n),this.getReownName=n=>gE.getNamesForAddress(n),this.getConnectors=()=>pe.getConnectors(),this.getConnectorImage=n=>Lw.getConnectorImage(n),this.setConnectedWalletInfo=(n,s)=>{const i=$e.getProviderId(s),o=n?{...n,type:i}:void 0;re.setConnectedWalletInfo(o,s)},this.getIsConnectedState=()=>!!P.state.activeCaipAddress,this.addAddressLabel=(n,s,i)=>{re.addAddressLabel(n,s,i)},this.removeAddressLabel=(n,s)=>{re.removeAddressLabel(n,s)},this.getAddress=n=>P.state.activeChain===n||!n?re.state.address:P.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>P.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{P.resetNetwork(n)},this.addConnector=n=>{pe.addConnector(n)},this.resetWcConnection=()=>{je.resetWcConnection()},this.setAddressExplorerUrl=(n,s)=>{re.setAddressExplorerUrl(n,s)},this.setSmartAccountDeployed=(n,s)=>{re.setSmartAccountDeployed(n,s)},this.setSmartAccountEnabledNetworks=(n,s)=>{P.setSmartAccountEnabledNetworks(n,s)},this.setPreferredAccountType=(n,s)=>{re.setPreferredAccountType(n,s)},this.setEIP6963Enabled=n=>{z.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=[...new Set((r=this.caipNetworks)==null?void 0:r.map(n=>n.chainNamespace))],this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.initialize(e),this.sendInitializeEvent(e)}async initialize(e){this.initControllers(e),await this.initChainAdapters(),await this.injectModalUi(),await this.syncExistingConnection(),wn.set({initialized:!0})}sendInitializeEvent(e){var n;const{...r}=e;delete r.adapters,ze.sendEvent({type:"track",event:"INITIALIZE",properties:{...r,networks:e.networks.map(s=>s.id),siweConfig:{options:((n=e.siweConfig)==null?void 0:n.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&$t.setThemeMode(e.themeMode),e.themeVariables&&$t.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");P.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const r=this.getDefaultNetwork();r&&P.setActiveCaipNetwork(r)}initializeConnectionController(e){je.setWcBasic(e.basic??!1)}initializeConnectorController(){pe.initialize(this.chainNamespaces)}initializeOptionsController(e){var s;z.setDebug(e.debug!==!1),z.setEnableWalletConnect(e.enableWalletConnect!==!1),z.setEnableWalletGuide(e.enableWalletGuide!==!1),z.setEnableWallets(e.enableWallets!==!1),z.setEIP6963Enabled(e.enableEIP6963!==!1),z.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),z.setEnableAuthLogger(e.enableAuthLogger!==!1),z.setCustomRpcUrls(e.customRpcUrls),z.setSdkVersion(e.sdkVersion),z.setProjectId(e.projectId),z.setEnableEmbedded(e.enableEmbedded),z.setAllWallets(e.allWallets),z.setIncludeWalletIds(e.includeWalletIds),z.setExcludeWalletIds(e.excludeWalletIds),z.setFeaturedWalletIds(e.featuredWalletIds),z.setTokens(e.tokens),z.setTermsConditionsUrl(e.termsConditionsUrl),z.setPrivacyPolicyUrl(e.privacyPolicyUrl),z.setCustomWallets(e.customWallets),z.setFeatures(e.features),z.setAllowUnsupportedChain(e.allowUnsupportedChain),z.setDefaultAccountTypes(e.defaultAccountTypes),z.setUniversalProviderConfigOverride(e.universalProviderConfigOverride);const r=this.getDefaultMetaData();if(!e.metadata&&r&&(e.metadata=r),z.setMetadata(e.metadata),z.setDisableAppend(e.disableAppend),z.setEnableEmbedded(e.enableEmbedded),z.setSIWX(e.siwx),!e.projectId){Ni.open(Ti.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((s=e.adapters)==null?void 0:s.find(i=>i.namespace===j.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");z.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,r,n,s;return typeof window<"u"&&typeof document<"u"?{name:((r=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:r.textContent)||"",description:((n=document.querySelector('meta[property="og:description"]'))==null?void 0:n.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const r=this.getActiveChainNamespace();if(r){const n=Yr.getUnsupportedNetwork(`${r}:${e}`);P.setActiveCaipNetwork(n)}}getDefaultNetwork(){return Yr.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,r){return Yr.extendCaipNetwork(e,{customNetworkImageUrls:r.chainImages,projectId:r.projectId})}extendCaipNetworks(e){return Yr.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const r=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return r?Yr.extendCaipNetwork(r,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=P.state.activeChain,r=this.getAdapter(e),n=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!r)throw new Error("Adapter not found");const s=await r.connectWalletConnect(n);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),Z.setConnectedNamespaces([...P.state.chains.keys()]),this.chainNamespaces.forEach(o=>{pe.setConnectorId(Qe.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:r,type:n,provider:s,chain:i,caipNetwork:o})=>{var p,g,f,y,b,m,w;const a=P.state.activeChain,l=i||a,c=this.getAdapter(l);if(i&&i!==a&&!o){const C=(p=this.caipNetworks)==null?void 0:p.find(_=>_.chainNamespace===i);C&&this.setCaipNetwork(C)}if(!c)throw new Error("Adapter not found");const u=this.getCaipNetwork(l),d=await c.connect({id:e,info:r,type:n,provider:s,chainId:(o==null?void 0:o.id)||(u==null?void 0:u.id),rpcUrl:((y=(f=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:f.http)==null?void 0:y[0])||((w=(m=(b=u==null?void 0:u.rpcUrls)==null?void 0:b.default)==null?void 0:m.http)==null?void 0:w[0])});if(!d)return;Z.addConnectedNamespace(l),this.syncProvider({...d,chainNamespace:l}),await this.syncAccount({...d,chainNamespace:l});const{accounts:h}=await c.getAccounts({namespace:l,id:e});this.setAllAccounts(h,l)},reconnectExternal:async({id:e,info:r,type:n,provider:s})=>{var a;const i=P.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:r,type:n,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),Z.addConnectedNamespace(i))},disconnect:async e=>{const r=e||P.state.activeChain,n=this.getAdapter(r),s=$e.getProvider(r),i=$e.getProviderId(r);await(n==null?void 0:n.disconnect({provider:s,providerType:i})),Z.removeConnectedNamespace(r),$e.resetChain(r),this.setUser(void 0,r),this.setStatus("disconnected",r),this.hasSwitchedToPreferredAccountTypeOnConnect=!1},checkInstalled:e=>e?e.some(r=>{var n;return!!((n=window.ethereum)!=null&&n[String(r)])}):!!window.ethereum,signMessage:async e=>{const r=this.getAdapter(P.state.activeChain),n=await(r==null?void 0:r.signMessage({message:e,address:re.state.address,provider:$e.getProvider(P.state.activeChain)}));return(n==null?void 0:n.signature)||""},sendTransaction:async e=>{if(e.chainNamespace===j.CHAIN.EVM){const r=this.getAdapter(P.state.activeChain),n=$e.getProvider(P.state.activeChain),s=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:n}));return(s==null?void 0:s.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===j.CHAIN.EVM){const r=this.getAdapter(P.state.activeChain),n=$e.getProvider(P.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(r==null?void 0:r.estimateGas({...e,provider:n,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var n;const e=this.getAdapter(P.state.activeChain),r=await(e==null?void 0:e.getProfile({address:re.state.address,chainId:Number((n=this.getCaipNetwork())==null?void 0:n.id)}));return(r==null?void 0:r.profileImage)||!1},getEnsAddress:async e=>{const r=this.getAdapter(P.state.activeChain),n=this.getCaipNetwork();if(!n)return!1;const s=await(r==null?void 0:r.getEnsAddress({name:e,caipNetwork:n}));return(s==null?void 0:s.address)||!1},writeContract:async e=>{const r=this.getAdapter(P.state.activeChain),n=this.getCaipNetwork(),s=this.getCaipAddress(),i=$e.getProvider(P.state.activeChain);if(!n||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(r==null?void 0:r.writeContract({...e,caipNetwork:n,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,r)=>{const n=this.getAdapter(P.state.activeChain);return(n==null?void 0:n.parseUnits({value:e,decimals:r}))??0n},formatUnits:(e,r)=>{const n=this.getAdapter(P.state.activeChain);return(n==null?void 0:n.formatUnits({value:e,decimals:r}))??"0"},getCapabilities:async e=>{const r=this.getAdapter(P.state.activeChain);return await(r==null?void 0:r.getCapabilities(e))},grantPermissions:async e=>{const r=this.getAdapter(P.state.activeChain);return await(r==null?void 0:r.grantPermissions(e))},revokePermissions:async e=>{const r=this.getAdapter(P.state.activeChain);return r!=null&&r.revokePermissions?await r.revokePermissions(e):"0x"},walletGetAssets:async e=>{const r=this.getAdapter(P.state.activeChain);return await(r==null?void 0:r.walletGetAssets(e))??{}}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},je.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var r,n,s,i,o;if($e.getProviderId(P.state.activeChain)===Qe.CONNECTOR_TYPE_WALLET_CONNECT){const a=(n=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:n.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const r=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=$e.getProvider(r),i=$e.getProviderId(r);if(e.chainNamespace===P.state.activeChain){const o=this.getAdapter(r);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===Qe.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(r);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:r})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(r=>{const n=r.chains||[],s=r.accounts.map(i=>{const{chainId:o,chainNamespace:a}=Tn.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...n,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((r,n)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===n);return s?(r[n]=s,r[n].namespace=n,r[n].construct({namespace:n,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.caipNetworks})):r[n]=new wL({namespace:n,networks:this.caipNetworks}),r},{})}async initChainAdapter(e){var r;this.onConnectors(e),this.listenAdapter(e),(r=this.chainAdapters)==null||r[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const r=this.getAdapter(e);r==null||r.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const r=this.getAdapter(e);if(!r)return;const n=Z.getConnectionStatus();n==="connected"?this.setStatus("connecting",e):n==="disconnected"?(Z.clearAddressCache(),this.setStatus(n,e)):this.setStatus(n,e),r.on("switchNetwork",({address:s,chainId:i})=>{var c;const o=(c=this.caipNetworks)==null?void 0:c.find(u=>u.id===i||u.caipNetworkId===i),a=P.state.activeChain===e,l=P.getAccountProp("address",e);if(o){const u=a&&s?s:l;u&&this.syncAccount({address:u,chainId:i,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),r.on("disconnect",this.disconnect.bind(this,e)),r.on("pendingTransactions",()=>{const s=re.state.address,i=P.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),r.on("accountChanged",({address:s,chainId:i})=>{var a,l;const o=P.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=P.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(l=P.state.activeCaipNetwork)==null?void 0:l.id,chainNamespace:e}):this.syncAccountInfo(s,i,e)})}async createUniversalProviderForAdapter(e){var r,n,s;await this.getUniversalProvider(),this.universalProvider&&((s=(n=(r=this.chainAdapters)==null?void 0:r[e])==null?void 0:n.setUniversalProvider)==null||s.call(n,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{const r=pe.getConnectorId(e);switch(this.setStatus("connecting",e),r){case j.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case j.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(r){console.warn("AppKit couldn't sync existing connection",r),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var o,a,l;const r=this.getAdapter(e),n=pe.getConnectorId(e),s=this.getCaipNetwork(e),i=pe.getConnectors(e).find(c=>c.id===n);try{if(!r||!i)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const c=await(r==null?void 0:r.syncConnection({namespace:e,id:i.id,chainId:s.id,rpcUrl:(l=(a=(o=s==null?void 0:s.rpcUrls)==null?void 0:o.default)==null?void 0:a.http)==null?void 0:l[0]}));if(c){const u=await(r==null?void 0:r.getAccounts({namespace:e,id:i.id}));u&&u.accounts.length>0?this.setAllAccounts(u.accounts,e):this.setAllAccounts([ue.createAccount(e,c.address,"eoa")],e),this.syncProvider({...c,chainNamespace:e}),await this.syncAccount({...c,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async r=>{var a,l,c,u,d;const n=this.getAdapter(r),s=((u=(c=(l=(a=this.universalProvider)==null?void 0:a.session)==null?void 0:l.namespaces)==null?void 0:c[r])==null?void 0:u.accounts)||[],i=(d=P.state.activeCaipNetwork)==null?void 0:d.id,o=s.find(h=>{const{chainId:p}=Tn.parseCaipAddress(h);return p===(i==null?void 0:i.toString())})||s[0];if(o){const h=Tn.validateCaipAddress(o),{chainId:p,address:g}=Tn.parseCaipAddress(h);if($e.setProviderId(r,Qe.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&P.state.activeCaipNetwork&&(n==null?void 0:n.namespace)!==j.CHAIN.EVM){const f=n==null?void 0:n.getWalletConnectProvider({caipNetworks:this.caipNetworks,provider:this.universalProvider,activeCaipNetwork:P.state.activeCaipNetwork});$e.setProvider(r,f)}else $e.setProvider(r,this.universalProvider);pe.setConnectorId(j.CONNECTOR_ID.WALLET_CONNECT,r),Z.addConnectedNamespace(r),this.syncWalletConnectAccounts(r),await this.syncAccount({address:g,chainId:p,chainNamespace:r})}else this.setStatus("disconnected",r);await P.setApprovedCaipNetworksData(r)});await Promise.all(e)}syncWalletConnectAccounts(e){var n,s,i,o,a;const r=(a=(o=(i=(s=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(l=>{const{address:c}=Tn.parseCaipAddress(l);return c}).filter((l,c,u)=>u.indexOf(l)===c);r&&this.setAllAccounts(r.map(l=>ue.createAccount(e,l,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:r,id:n,chainNamespace:s}){$e.setProviderId(s,e),$e.setProvider(s,r),pe.setConnectorId(n,s)}async syncAccount(e){var d,h,p,g,f,y;const r=e.chainNamespace===P.state.activeChain,n=P.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=Z.getActiveNetworkProps(),l=i||a,c=((d=P.state.activeCaipNetwork)==null?void 0:d.name)===j.UNSUPPORTED_NETWORK_NAME,u=P.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(c&&!u)&&l){let b=(h=this.caipNetworks)==null?void 0:h.find(C=>C.id.toString()===l.toString()),m=(p=this.caipNetworks)==null?void 0:p.find(C=>C.chainNamespace===o);if(!u&&!b&&!m){const C=this.getApprovedCaipNetworkIds()||[],_=C.find(A=>{var N;return((N=Tn.parseCaipNetworkId(A))==null?void 0:N.chainId)===l.toString()}),v=C.find(A=>{var N;return((N=Tn.parseCaipNetworkId(A))==null?void 0:N.chainNamespace)===o});b=(g=this.caipNetworks)==null?void 0:g.find(A=>A.caipNetworkId===_),m=(f=this.caipNetworks)==null?void 0:f.find(A=>A.caipNetworkId===v||"deprecatedCaipNetworkId"in A&&A.deprecatedCaipNetworkId===v)}const w=b||m;(w==null?void 0:w.chainNamespace)===P.state.activeChain?z.state.enableNetworkSwitch&&!z.state.allowUnsupportedChain&&((y=P.state.activeCaipNetwork)==null?void 0:y.name)===j.UNSUPPORTED_NETWORK_NAME?P.showUnsupportedChainUI():this.setCaipNetwork(w):r||n&&this.setCaipNetworkOfNamespace(n,o),this.syncConnectedWalletInfo(o),yl.isLowerCaseMatch(s,re.state.address)||this.syncAccountInfo(s,w==null?void 0:w.id,o),r?await this.syncBalance({address:s,chainId:w==null?void 0:w.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:n==null?void 0:n.id,chainNamespace:o})}}async syncAccountInfo(e,r,n){const s=this.getCaipAddress(n),i=r||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${n}:${i}:${e}`;this.setCaipAddress(o,n),await this.syncIdentity({address:e,chainId:i,chainNamespace:n})}async syncReownName(e,r){try{const n=await this.getReownName(e);if(n[0]){const s=n[0];this.setProfileName(s.name,r)}else this.setProfileName(null,r)}catch{this.setProfileName(null,r)}}syncConnectedWalletInfo(e){var s;const r=pe.getConnectorId(e),n=$e.getProviderId(e);if(n===Qe.CONNECTOR_TYPE_ANNOUNCED||n===Qe.CONNECTOR_TYPE_INJECTED){if(r){const i=this.getConnectors().find(o=>o.id===r);if(i){const{info:o,name:a,imageUrl:l}=i,c=l||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:c,...o},e)}}}else if(n===Qe.CONNECTOR_TYPE_WALLET_CONNECT){const i=$e.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(r)if(r===j.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===j.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}else this.setConnectedWalletInfo({name:r},e)}async syncBalance(e){!ea.getNetworksByNamespace(this.caipNetworks,e.chainNamespace).find(n=>{var s;return n.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async updateNativeBalance(e,r,n){const s=this.getAdapter(n);if(s){const i=await s.getBalance({address:e,chainId:r,caipNetwork:this.getCaipNetwork(n),tokens:this.options.tokens});this.setBalance(i.balance,i.symbol,n)}}async initializeUniversalAdapter(){var n,s,i,o,a,l,c,u,d,h;const e=Q4.createLogger((p,...g)=>{p&&this.handleAlertError(p),console.error(...g)}),r={projectId:(n=this.options)==null?void 0:n.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(l=this.options)!=null&&l.metadata?(c=this.options)==null?void 0:c.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};z.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await NU.init(r),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{je.setUri(e)}),this.universalProvider.on("connect",je.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),je.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{var s;const r=(s=this.caipNetworks)==null?void 0:s.find(i=>i.id==e),n=this.getCaipNetwork();if(!r){this.setUnsupportedNetwork(e);return}(n==null?void 0:n.id)!==(r==null?void 0:r.id)&&this.setCaipNetwork(r)}),this.universalProvider.on("session_event",e=>{if(bu.isSessionEventData(e)){const{name:r,data:n}=e.params.event;r==="accountsChanged"&&Array.isArray(n)&&ue.isCaipAddress(n[0])&&this.syncAccount(Tn.parseCaipAddress(n[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&ue.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){ze.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const r=Object.entries(Ti.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[n,s]=r??[],{message:i,alertErrorKey:o}=s??{};if(n&&i&&!this.reportedAlertErrors[n]){const a=Ti.ALERT_ERRORS[o];a&&(Ni.open(a,"error"),this.reportedAlertErrors[n]=!0)}}getAdapter(e){var r;if(e)return(r=this.chainAdapters)==null?void 0:r[e]}createAdapter(e){var s;if(!e)return;const r=e.namespace;if(!r)return;this.createClients();const n=e;n.namespace=r,n.construct({namespace:r,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.caipNetworks}),this.chainNamespaces.includes(r)||this.chainNamespaces.push(r),this.chainAdapters&&(this.chainAdapters[r]=n)}async open(e){await this.injectModalUi(),e!=null&&e.uri&&je.setUri(e.uri),await at.open(e)}async close(){await this.injectModalUi(),at.close()}setLoading(e,r){at.setLoading(e,r)}async disconnect(e){await je.disconnect(e)}getError(){return""}getChainId(){var e;return(e=P.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){var n;const r=(n=this.caipNetworks)==null?void 0:n.find(s=>s.id===e.id);if(!r){Ni.open(Ti.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await P.switchActiveNetwork(r)}getWalletProvider(){return P.state.activeChain?$e.state.providers[P.state.activeChain]:null}getWalletProviderType(){return $e.getProviderId(P.state.activeChain)}subscribeProviders(e){return $e.subscribeProviders(e)}getThemeMode(){return $t.state.themeMode}getThemeVariables(){return $t.state.themeVariables}setThemeMode(e){$t.setThemeMode(e),LE($t.state.themeMode)}setTermsConditionsUrl(e){z.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){z.setPrivacyPolicyUrl(e)}setThemeVariables(e){$t.setThemeVariables(e),eL($t.state.themeVariables)}subscribeTheme(e){return $t.subscribe(e)}getWalletInfo(){return re.state.connectedWalletInfo}getAccount(e){const r=pe.getAuthConnector(e),n=P.getAccountData(e);if(n)return{allAccounts:n.allAccounts,caipAddress:n.caipAddress,address:ue.getPlainAddress(n.caipAddress),isConnected:!!n.caipAddress,status:n.status,embeddedWalletInfo:r?{user:n.user,authProvider:n.socialProvider||"email",accountType:n.preferredAccountType,isSmartAccountDeployed:!!n.smartAccountDeployed}:void 0}}subscribeAccount(e,r){const n=()=>{const s=this.getAccount(r);s&&e(s)};r?P.subscribeChainProp("accountState",n,r):P.subscribe(n),pe.subscribe(n)}subscribeNetwork(e){return P.subscribe(({activeCaipNetwork:r})=>{e({caipNetwork:r,chainId:r==null?void 0:r.id,caipNetworkId:r==null?void 0:r.caipNetworkId})})}subscribeWalletInfo(e){return re.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){re.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){P.subscribeKey("activeCaipNetwork",e)}getState(){return wn.state}subscribeState(e){return wn.subscribe(e)}showErrorMessage(e){Nt.showError(e)}showSuccessMessage(e){Nt.showSuccess(e)}getEvent(){return{...ze.state}}subscribeEvents(e){return ze.subscribe(e)}replace(e){De.replace(e)}redirect(e){De.push(e)}popTransactionStack(e){De.popTransactionStack(e)}isOpen(){return at.state.open}isTransactionStackEmpty(){return De.state.transactionStack.length===0}isTransactionShouldReplaceView(){var e;return(e=De.state.transactionStack[De.state.transactionStack.length-1])==null?void 0:e.replace}static getInstance(){return this.instance}updateFeatures(e){z.setFeatures(e)}updateOptions(e){const n={...z.state||{},...e};z.setOptions(n)}setConnectMethodsOrder(e){z.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){z.setWalletFeaturesOrder(e)}setCollapseWallets(e){z.setCollapseWallets(e)}setSocialsOrder(e){z.setSocialsOrder(e)}getConnectMethodsOrder(){return Zh.getConnectOrderMethod(z.state.features,pe.getConnectors())}removeAdapter(e){var i;const r=this.getIsConnectedState(),n=this.getAdapter(e);if(!n||!this.chainAdapters||r)return;const s=(i=this.caipNetworks)==null?void 0:i.filter(o=>o.chainNamespace!==e);P.removeAdapter(e),pe.removeAdapter(e),this.chainNamespaces=this.chainNamespaces.filter(o=>o!==e),this.caipNetworks=s,n.removeAllEventListeners(),Reflect.deleteProperty(this.chainAdapters,e)}addAdapter(e,r){const n=e.namespace;if(!this.connectionControllerClient||!this.networkControllerClient||!this.chainAdapters||!n)return;const s=this.extendCaipNetworks({...this.options,networks:r});this.caipNetworks=[...this.caipNetworks||[],...s],this.createAdapter(e),this.initChainAdapter(n),P.addAdapter(e,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient},s)}addNetwork(e,r){var s;if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const n=this.extendCaipNetwork(r,this.options);P.addNetwork(n),this.caipNetworks&&!((s=this.caipNetworks)!=null&&s.find(i=>i.id===n.id))&&this.caipNetworks.push(n)}removeNetwork(e,r){var i;if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);if(!((i=this.caipNetworks)==null?void 0:i.find(o=>o.id===r)))throw new Error(`Network with ID ${r} not found`);if(!this.caipNetworks)return;const s=this.caipNetworks.filter(o=>o.chainNamespace===e&&o.id!==r);if(!(s!=null&&s.length))throw new Error("Cannot remove last network for a namespace");P.removeNetwork(e,r),this.caipNetworks=[...s]}}let gw=!1;class vL extends bL{setupAuthConnectorListeners(e){e.onRpcRequest(r=>{lr.checkIfRequestExists(r)?lr.checkIfRequestIsSafe(r)||this.handleUnsafeRPCRequest():(this.open(),console.error(ot.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:r.method}),setTimeout(()=>{this.showErrorMessage(ot.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack(!0))}),e.onRpcSuccess((r,n)=>{const s=lr.checkIfRequestIsSafe(n),i=re.state.address,o=P.state.activeCaipNetwork;s||(this.isTransactionStackEmpty()?(this.close(),i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace)):(this.popTransactionStack(),i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace)))}),e.onNotConnected(()=>{const r=P.state.activeChain;pe.getConnectorId(r)===j.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,r),this.setLoading(!1,r))}),e.onConnect(async r=>{var l;const n=P.state.activeChain,s=n===j.CHAIN.EVM?`eip155:${r.chainId}:${r.address}`:`${r.chainId}:${r.address}`;this.setSmartAccountDeployed(!!r.smartAccountDeployed,n);const i=z.state.defaultAccountTypes[n];if(!(!!r.preferredAccountType&&yl.isLowerCaseMatch(r.preferredAccountType,i))&&!this.hasSwitchedToPreferredAccountTypeOnConnect){this.hasSwitchedToPreferredAccountTypeOnConnect=!0;const{success:c}=await je.setPreferredAccountType(i).then(()=>({success:!1})).catch(u=>(console.error("setPreferredAccountType error:",u),{success:!1}));if(c)return}else this.hasSwitchedToPreferredAccountTypeOnConnect=!0;yl.isLowerCaseMatch(r.address,re.state.address)||this.syncIdentity({address:r.address,chainId:r.chainId,chainNamespace:n}),this.setCaipAddress(s,n),this.setUser({...re.state.user||{},email:r.email},n),this.setPreferredAccountType(r.preferredAccountType||i,n);const a=(l=r.accounts)==null?void 0:l.map(c=>ue.createAccount(n,c.address,c.type||z.state.defaultAccountTypes[n]));this.setAllAccounts(a||[ue.createAccount(n,r.address,r.preferredAccountType||i)],n),await e.getSmartAccountEnabledNetworks(),this.setLoading(!1,n)}),e.onSocialConnected(({userName:r})=>{this.setUser({...re.state.user||{},username:r},P.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(r=>{this.setSmartAccountEnabledNetworks(r,P.state.activeChain)}),e.onSetPreferredAccount(({address:r,type:n})=>{r&&this.setPreferredAccountType(n,P.state.activeChain)})}async syncAuthConnector(e,r){var u,d,h,p;const n=j.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if(!n)return;this.setLoading(!0,r);const s=e.getLoginEmailUsed();this.setLoading(s,r),s&&this.setStatus("connecting",r);const i=e.getEmail(),o=e.getUsername();this.setUser({...((u=re.state)==null?void 0:u.user)||{},username:o,email:i},P.state.activeChain),this.setupAuthConnectorListeners(e);const{isConnected:a}=await e.isConnected(),l=$t.getSnapshot(),c=z.getSnapshot();e.syncDappData({metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType}),e.syncTheme({themeMode:l.themeMode,themeVariables:l.themeVariables,w3mThemeVariables:mn(l.themeVariables,l.themeMode)}),r&&n&&(a&&((d=this.connectionControllerClient)!=null&&d.connectExternal)?(await((p=this.connectionControllerClient)==null?void 0:p.connectExternal({id:j.CONNECTOR_ID.AUTH,info:{name:j.CONNECTOR_ID.AUTH},type:Qe.CONNECTOR_TYPE_AUTH,provider:e,chainId:(h=P.state.activeCaipNetwork)==null?void 0:h.id,chain:r})),this.setStatus("connected",r)):pe.getConnectorId(r)===j.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",r),Z.removeConnectedNamespace(r))),this.setLoading(!1,r)}async checkExistingTelegramSocialConnection(e){var r;try{if(!ue.isTelegram())return;const n=Z.getTelegramSocialProvider();if(!n||typeof window>"u"||typeof document>"u")return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;re.setSocialProvider(n,e),await((r=this.authProvider)==null?void 0:r.init());const o=pe.getAuthConnector();n&&o&&(this.setLoading(!0,e),await o.provider.connectSocial(i),await je.connectExternal(o,o.chain),Z.setConnectedSocialProvider(n),Z.removeTelegramSocialProvider(),ze.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:n}}))}catch(n){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",n)}try{const n=new URL(window.location.href);n.searchParams.delete("result_uri"),window.history.replaceState({},document.title,n.toString())}catch(n){console.error("tma social login failed",n)}}createAuthProvider(e){var o,a,l,c,u,d,h,p,g,f,y;if(!j.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const n=((a=(o=this.options)==null?void 0:o.features)==null?void 0:a.email)===void 0?ht.DEFAULT_FEATURES.email:(c=(l=this.options)==null?void 0:l.features)==null?void 0:c.email,s=(d=(u=this.options)==null?void 0:u.features)!=null&&d.socials?((g=(p=(h=this.options)==null?void 0:h.features)==null?void 0:p.socials)==null?void 0:g.length)>0:ht.DEFAULT_FEATURES.socials,i=n||s;!this.authProvider&&((f=this.options)!=null&&f.projectId)&&i&&(this.authProvider=Ri.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(y=this.getCaipNetwork(e))==null?void 0:y.caipNetworkId,onTimeout:()=>{Ni.open(Ti.ALERT_ERRORS.SOCIALS_TIMEOUT,"error")}}),this.subscribeState(b=>{var m;b.open||(m=this.authProvider)==null||m.rejectRpcRequests()}),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var r,n,s;this.createAuthProvider(e),this.authProvider&&((s=(n=(r=this.chainAdapters)==null?void 0:r[e])==null?void 0:n.setAuthProvider)==null||s.call(n,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&ye.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var i,o;if(!e)return;const r=P.state.activeChain,n=e.chainNamespace,s=this.getAddressByChainNamespace(e.chainNamespace);if(e.chainNamespace===P.state.activeChain&&s){const a=this.getAdapter(n),l=$e.getProvider(n),c=$e.getProviderId(n);await(a==null?void 0:a.switchNetwork({caipNetwork:e,provider:l,providerType:c})),this.setCaipNetwork(e)}else{const l=$e.getProviderId(r)===Qe.CONNECTOR_TYPE_AUTH,c=$e.getProviderId(n),u=c===Qe.CONNECTOR_TYPE_AUTH,d=j.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if((l||u)&&d)try{P.state.activeChain=e.chainNamespace,await((o=(i=this.connectionControllerClient)==null?void 0:i.connectExternal)==null?void 0:o.call(i,{id:j.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:n,chainId:e.id,type:Qe.CONNECTOR_TYPE_AUTH,caipNetwork:e})),this.setCaipNetwork(e)}catch{const p=this.getAdapter(n);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:c}))}else c===Qe.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:n}))}}async initChainAdapter(e){await super.initChainAdapter(e),this.createAuthProviderForAdapter(e)}async syncIdentity({address:e,chainId:r,chainNamespace:n}){var o;const s=`${n}:${r}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(n!==j.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,n),this.setProfileImage(null,n);return}try{const{name:a,avatar:l}=await this.fetchIdentity({address:e,caipNetworkId:s});if(this.setProfileName(a,n),this.setProfileImage(l,n),!a){const c=this.getAdapter(n),u=await(c==null?void 0:c.getProfile({address:e,chainId:Number(r)}));u!=null&&u.profileName?(this.setProfileName(u.profileName,n),u.profileImage&&this.setProfileImage(u.profileImage,n)):(await this.syncReownName(e,n),this.setProfileImage(null,n))}}catch{await this.syncReownName(e,n),r!==1&&this.setProfileImage(null,n)}}syncConnectedWalletInfo(e){const r=$e.getProviderId(e);if(r===Qe.CONNECTOR_TYPE_AUTH){const n=this.authProvider;if(n){const s=Z.getConnectedSocialProvider()??"email",i=n.getEmail()??n.getUsername();this.setConnectedWalletInfo({name:r,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(!gw&&ue.isClient()){const e={...ht.DEFAULT_FEATURES,...this.options.features},r=[];if(e&&((e.email||e.socials&&e.socials.length)&&r.push(Zt(()=>import("./embedded-wallet-BDUUyQ4_.js"),__vite__mapDeps([4,5,1,2,6,7,8,9,10,11,12,13]))),e.email&&r.push(Zt(()=>import("./email-B4f2FXJV.js"),__vite__mapDeps([14,5,1,2,13,9,12,8,15,10]))),e.socials&&r.push(Zt(()=>import("./socials-psGRtsKj.js"),__vite__mapDeps([16,5,1,2,17,8,9,18,12,13,19,7,20,21]))),e.swaps&&r.push(Zt(()=>import("./swaps-B2qPRLXd.js"),__vite__mapDeps([22,5,1,2,8,9,23,24,25,7,12,21,10]))),e.send&&r.push(Zt(()=>import("./send-D1DQvNWr.js"),__vite__mapDeps([26,5,1,2,8,9,12,13,25,7,10,27]))),e.receive&&r.push(Zt(()=>import("./receive-CJH8kBg8.js"),__vite__mapDeps([28,5,1,2,29,7,19,20]))),e.onramp&&r.push(Zt(()=>import("./onramp-D3lbo5cP.js"),__vite__mapDeps([30,5,1,2,31,32,21,12,7,9,33,17,8,13,10]))),e.history&&r.push(Zt(()=>import("./transactions-CXG_ZYn9.js"),__vite__mapDeps([34,5,1,2,35,31,32,21,12,13,7])))),await Promise.all([...r,Zt(()=>import("./index-DKc0ceRv.js"),__vite__mapDeps([36,5,1,2,7,9,27,12,37,24,11,33,8,35,31,32,21,13,23,10,15,17,18,6,29,19,20])),Zt(()=>import("./w3m-modal-ClnZSz2-.js"),__vite__mapDeps([38,5,1,2,11,7,12,9,24,37]))]),!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!z.state.disableAppend&&!z.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}gw=!0}}}let Dn;function EL(t){t&&(Dn=t)}function I7(){if(!Dn)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(r){await(Dn==null?void 0:Dn.open(r))}async function e(){await(Dn==null?void 0:Dn.close())}return{open:t,close:e}}const AL="1.7.2";let Uc;function _L(t){return Uc||(Uc=new vL({...t,sdkVersion:ue.generateSdkVersion(t.adapters??[],"react",AL)}),EL(Uc)),Uc}function Ht(t,e,r){const n=t[e.name];if(typeof n=="function")return n;const s=t[r];return typeof s=="function"?s:i=>e(t,i)}const el="2.16.7",CL=()=>`@wagmi/core@${el}`;var HE=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Rl,qE;let is=class rp extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return CL()}constructor(e,r={}){var i;super(),Rl.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const n=r.cause instanceof rp?r.cause.details:(i=r.cause)!=null&&i.message?r.cause.message:r.details,s=r.cause instanceof rp&&r.cause.docsPath||r.docsPath;this.message=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${r.docsSlug?`#${r.docsSlug}`:""}`]:[],...n?[`Details: ${n}`]:[],`Version: ${this.version}`].join(`
`),r.cause&&(this.cause=r.cause),this.details=n,this.docsPath=s,this.metaMessages=r.metaMessages,this.shortMessage=e}walk(e){return HE(this,Rl,"m",qE).call(this,this,e)}};Rl=new WeakSet,qE=function t(e,r){return r!=null&&r(e)?e:e.cause?HE(this,Rl,"m",t).call(this,e.cause,r):e};class La extends is{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class IL extends is{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class SL extends is{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class TL extends is{constructor({address:e,connector:r}){super(`Account "${e}" not found for connector "${r.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class NL extends is{constructor({connectionChainId:e,connectorChainId:r}){super(`The current chain of the connector (id: ${r}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${r}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class PL extends is{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function mw(t,e){var n;let r;if(typeof e.connector=="function"?r=t._internal.connectors.setup(e.connector):r=e.connector,r.uid===t.state.current)throw new IL;try{t.setState(l=>({...l,status:"connecting"})),r.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await r.connect(i),a=o.accounts;return r.emitter.off("connect",t._internal.events.connect),r.emitter.on("change",t._internal.events.change),r.emitter.on("disconnect",t._internal.events.disconnect),await((n=t.storage)==null?void 0:n.setItem("recentConnectorId",r.id)),t.setState(l=>({...l,connections:new Map(l.connections).set(r.uid,{accounts:a,chainId:o.chainId,connector:r}),current:r.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}async function vu(t,e={}){let r;if(e.connector){const{connector:c}=e;if(t.state.status==="reconnecting"&&!c.getAccounts&&!c.getChainId)throw new PL({connector:c});const[u,d]=await Promise.all([c.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),c.getChainId()]);r={accounts:u,chainId:d,connector:c}}else r=t.state.connections.get(t.state.current);if(!r)throw new SL;const n=e.chainId??r.chainId,s=await r.connector.getChainId();if(s!==r.chainId)throw new NL({connectionChainId:r.chainId,connectorChainId:s});const i=r.connector;if(i.getClient)return i.getClient({chainId:n});const o=sn(e.account??r.accounts[0]);if(o&&(o.address=Es(o.address)),e.account&&!r.accounts.some(c=>c.toLowerCase()===o.address.toLowerCase()))throw new TL({address:o.address,connector:i});const a=t.chains.find(c=>c.id===n),l=await r.connector.getProvider({chainId:n});return aE({account:o,chain:a,name:"Connector Client",transport:c=>t4(l)({...c,retryCount:0})})}async function xL(t,e={}){var s,i;let r;if(e.connector)r=e.connector;else{const{connections:o,current:a}=t.state,l=o.get(a);r=l==null?void 0:l.connector}const n=t.state.connections;r&&(await r.disconnect(),r.emitter.off("change",t._internal.events.change),r.emitter.off("disconnect",t._internal.events.disconnect),r.emitter.on("connect",t._internal.events.connect),n.delete(r.uid)),t.setState(o=>{if(n.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=n.values().next().value;return{...o,connections:new Map(n),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function OL(t,e){const{chainId:r,connector:n,...s}=e;let i;e.account?i=e.account:i=(await vu(t,{account:e.account,chainId:r,connector:n})).account;const o=t.getClient({chainId:r});return Ht(o,Qv,"estimateGas")({...s,account:i})}function WE(t){return typeof t=="number"?t:t==="wei"?0:Math.abs($8[t])}function Dl(t){const e=t.state.current,r=t.state.connections.get(e),n=r==null?void 0:r.accounts,s=n==null?void 0:n[0],i=t.chains.find(a=>a.id===(r==null?void 0:r.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:n,chain:i,chainId:r==null?void 0:r.chainId,connector:r==null?void 0:r.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:n,chain:i,chainId:r==null?void 0:r.chainId,connector:r==null?void 0:r.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:n,chain:i,chainId:r==null?void 0:r.chainId,connector:r==null?void 0:r.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function RL(t,e){const{allowFailure:r=!0,chainId:n,contracts:s,...i}=e,o=t.getClient({chainId:n});return Ht(o,j4,"multicall")({allowFailure:r,contracts:s,...i})}function DL(t,e){const{chainId:r,...n}=e,s=t.getClient({chainId:r});return Ht(s,js,"readContract")(n)}async function kL(t,e){var a;const{allowFailure:r=!0,blockNumber:n,blockTag:s,...i}=e,o=e.contracts;try{const l={};for(const[h,p]of o.entries()){const g=p.chainId??t.state.chainId;l[g]||(l[g]=[]),(a=l[g])==null||a.push({contract:p,index:h})}const c=()=>Object.entries(l).map(([h,p])=>RL(t,{...i,allowFailure:r,blockNumber:n,blockTag:s,chainId:Number.parseInt(h),contracts:p.map(({contract:g})=>g)})),u=(await Promise.all(c())).flat(),d=Object.values(l).flatMap(h=>h.map(({index:p})=>p));return u.reduce((h,p,g)=>(h&&(h[d[g]]=p),h),[])}catch(l){if(l instanceof xv)throw l;const c=()=>o.map(u=>DL(t,{...u,blockNumber:n,blockTag:s}));return r?(await Promise.allSettled(c())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(c())}}async function $L(t,e){const{address:r,blockNumber:n,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await yw(t,{balanceAddress:r,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const p=await yw(t,{balanceAddress:r,chainId:i,symbolType:"bytes32",tokenAddress:o}),g=yv(Xr(p.symbol,{dir:"right"}));return{...p,symbol:g}}throw h}const l=t.getClient({chainId:i}),u=await Ht(l,Kv,"getBalance")(n?{address:r,blockNumber:n}:{address:r,blockTag:s}),d=t.chains.find(h=>h.id===i)??l.chain;return{decimals:d.nativeCurrency.decimals,formatted:io(u,WE(a)),symbol:d.nativeCurrency.symbol,value:u}}async function yw(t,e){const{balanceAddress:r,chainId:n,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[l,c,u]=await kL(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[r],chainId:n},{...a,functionName:"decimals",chainId:n},{...a,functionName:"symbol",chainId:n}]}),d=io(l??"0",WE(o??c));return{decimals:c,formatted:d,symbol:u,value:l}}function kl(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let r,n;if(Array.isArray(t)&&Array.isArray(e)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!kl(t[n],e[n]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[n]))return!1;for(n=r;n--!==0;){const i=s[n];if(i&&!kl(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let Mc=[];function bi(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||kl(Mc,e)?Mc:(Mc=e,e)}function UL(t,e){const{chainId:r,...n}=e,s=t.getClient({chainId:r});return Ht(s,l4,"getEnsAddress")(n)}function ML(t,e){const{chainId:r,...n}=e,s=t.getClient({chainId:r});return Ht(s,_4,"getEnsAvatar")(n)}function FL(t,e){const{chainId:r,...n}=e,s=t.getClient({chainId:r});return Ht(s,C4,"getEnsName")(n)}async function BL(t,e){const{account:r,chainId:n,...s}=e,i=r??Dl(t).address,o=t.getClient({chainId:n});return Ht(o,rf,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let Ud=!1;async function LL(t,e={}){var c,u;if(Ud)return[];Ud=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const r=[];if((c=e.connectors)!=null&&c.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,r.push(h)}else r.push(...t.connectors);let n;try{n=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;n&&(s[n]=0);const i=Object.keys(s).length>0?[...r].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):r;let o=!1;const a=[],l=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||l.some(f=>f===h)||!await d.isAuthorized())continue;const g=await d.connect({isReconnecting:!0}).catch(()=>null);g&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(f=>{const y=new Map(o?f.connections:new Map).set(d.uid,{accounts:g.accounts,chainId:g.chainId,connector:d});return{...f,current:o?f.current:d.uid,connections:y}}),a.push({accounts:g.accounts,chainId:g.chainId,connector:d}),l.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),Ud=!1,a}async function jL(t,e){const{account:r,chainId:n,connector:s,...i}=e;let o;return typeof r=="object"&&(r==null?void 0:r.type)==="local"?o=t.getClient({chainId:n}):o=await vu(t,{account:r??void 0,chainId:n,connector:s}),await Ht(o,iE,"sendTransaction")({...i,...r?{account:r}:{},chain:n?{id:n}:null,gas:i.gas??void 0})}async function zL(t,e){const{account:r,connector:n,...s}=e;let i;return typeof r=="object"&&r.type==="local"?i=t.getClient():i=await vu(t,{account:r,connector:n}),Ht(i,W4,"signMessage")({...s,...r?{account:r}:{}})}class Un extends is{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class HL extends is{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function qL(t,e){var o;const{addEthereumChainParameter:r,chainId:n}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new HL({connector:a});return await a.switchChain({addEthereumChainParameter:r,chainId:n})}const i=t.chains.find(a=>a.id===n);if(!i)throw new La;return t.setState(a=>({...a,chainId:n})),i}function WL(t,e){const{onChange:r}=e;return t.subscribe(()=>Dl(t),r,{equalityFn(n,s){const{connector:i,...o}=n,{connector:a,...l}=s;return kl(o,l)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function VL(t,e){const{onChange:r}=e;return t._internal.connectors.subscribe((n,s)=>{r(Object.values(n),s)})}function GL(t,e){const{syncConnectedChain:r=t._internal.syncConnectedChain,...n}=e;let s;const i=l=>{s&&s();const c=t.getClient({chainId:l});return s=Ht(c,q4,"watchPendingTransactions")(n),s},o=i(e.chainId);let a;return r&&!e.chainId&&(a=t.subscribe(({chainId:l})=>l,async l=>i(l))),()=>{o==null||o(),a==null||a()}}async function KL(t,e){const{chainId:r,timeout:n=0,...s}=e,i=t.getClient({chainId:r}),a=await Ht(i,H4,"waitForTransactionReceipt")({...s,timeout:n});if(a.status==="reverted"){const c=await Ht(i,pE,"getTransaction")({hash:a.transactionHash}),d=await Ht(i,nE,"call")({...c,data:c.input,gasPrice:c.type!=="eip1559"?c.gasPrice:void 0,maxFeePerGas:c.type==="eip1559"?c.maxFeePerGas:void 0,maxPriorityFeePerGas:c.type==="eip1559"?c.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?yv(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function QL(t,e){const{account:r,chainId:n,connector:s,...i}=e;let o;return typeof r=="object"&&(r==null?void 0:r.type)==="local"?o=t.getClient({chainId:n}):o=await vu(t,{account:r??void 0,chainId:n,connector:s}),await Ht(o,J6,"writeContract")({...i,...r?{account:r}:{},chain:n?{id:n}:null})}function S7(t){return t}Eu.type="injected";function Eu(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:r}=t;function n(){const l=t.target;if(typeof l=="function"){const c=l();if(c)return c}return typeof l=="object"?l:typeof l=="string"?{...YL[l]??{id:l,name:`${l[0].toUpperCase()}${l.slice(1)}`,provider:`is${l[0].toUpperCase()}${l.slice(1)}`}}:{id:"injected",name:"Injected",provider(c){return c==null?void 0:c.ethereum}}}let s,i,o,a;return l=>({get icon(){return n().icon},get id(){return n().id},get name(){return n().name},get supportsSimulation(){return!0},type:Eu.type,async setup(){const c=await this.getProvider();c!=null&&c.on&&t.target&&(o||(o=this.onConnect.bind(this),c.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),c.on("accountsChanged",s)))},async connect({chainId:c,isReconnecting:u}={}){var p,g,f,y,b,m;const d=await this.getProvider();if(!d)throw new Un;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(y=(f=(g=(p=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:p.caveats)==null?void 0:g[0])==null?void 0:f.value)==null?void 0:y.map(C=>Es(C)),h.length>0&&(h=await this.getAccounts())}catch(w){const C=w;if(C.code===ut.code)throw new ut(C);if(C.code===Vn.code)throw C}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(_=>Es(_))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let w=await this.getChainId();if(c&&w!==c){const C=await this.switchChain({chainId:c}).catch(_=>{if(_.code===ut.code)throw _;return{id:w}});w=(C==null?void 0:C.id)??w}return e&&await((b=l.storage)==null?void 0:b.removeItem(`${this.id}.disconnected`)),t.target||await((m=l.storage)==null?void 0:m.setItem("injected.connected",!0)),{accounts:h,chainId:w}}catch(w){const C=w;throw C.code===ut.code?new ut(C):C.code===Vn.code?new Vn(C):C}},async disconnect(){var u,d;const c=await this.getProvider();if(!c)throw new Un;i&&(c.removeListener("chainChanged",i),i=void 0),a&&(c.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),c.on("connect",o));try{await cE(()=>c.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=l.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=l.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const c=await this.getProvider();if(!c)throw new Un;return(await c.request({method:"eth_accounts"})).map(d=>Es(d))},async getChainId(){const c=await this.getProvider();if(!c)throw new Un;const u=await c.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let c;const u=n();return typeof u.provider=="function"?c=u.provider(window):typeof u.provider=="string"?c=tl(window,u.provider):c=u.provider,c&&!c.removeListener&&("off"in c&&typeof c.off=="function"?c.removeListener=c.off:c.removeListener=()=>{}),c},async isAuthorized(){var c,u;try{if(e&&await((c=l.storage)==null?void 0:c.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=l.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(r!==void 0&&r!==!1){const g=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",g),!!await this.getProvider()),f=typeof r=="number"?r:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(b=>window.addEventListener("ethereum#initialized",()=>b(g()),{once:!0}))]:[],new Promise(b=>setTimeout(()=>b(g()),f))]))return!0}throw new Un}return!!(await ml(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:c,chainId:u}){var g,f,y,b;const d=await this.getProvider();if(!d)throw new Un;const h=l.chains.find(m=>m.id===u);if(!h)throw new tn(new La);const p=new Promise(m=>{const w=C=>{"chainId"in C&&C.chainId===u&&(l.emitter.off("change",w),m())};l.emitter.on("change",w)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:ve(u)}]}).then(async()=>{await this.getChainId()===u&&l.emitter.emit("change",{chainId:u})}),p]),h}catch(m){const w=m;if(w.code===4902||((f=(g=w==null?void 0:w.data)==null?void 0:g.originalError)==null?void 0:f.code)===4902)try{const{default:C,..._}=h.blockExplorers??{};let v;c!=null&&c.blockExplorerUrls?v=c.blockExplorerUrls:C&&(v=[C.url,...Object.values(_).map(T=>T.url)]);let A;(y=c==null?void 0:c.rpcUrls)!=null&&y.length?A=c.rpcUrls:A=[((b=h.rpcUrls.default)==null?void 0:b.http[0])??""];const N={blockExplorerUrls:v,chainId:ve(u),chainName:(c==null?void 0:c.chainName)??h.name,iconUrls:c==null?void 0:c.iconUrls,nativeCurrency:(c==null?void 0:c.nativeCurrency)??h.nativeCurrency,rpcUrls:A};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[N]}).then(async()=>{if(await this.getChainId()===u)l.emitter.emit("change",{chainId:u});else throw new ut(new Error("User rejected switch after adding network."))}),p]),h}catch(C){throw new ut(C)}throw w.code===ut.code?new ut(w):new tn(w)}},async onAccountsChanged(c){var u;if(c.length===0)this.onDisconnect();else if(l.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=l.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else l.emitter.emit("change",{accounts:c.map(d=>Es(d))})},onChainChanged(c){const u=Number(c);l.emitter.emit("change",{chainId:u})},async onConnect(c){const u=await this.getAccounts();if(u.length===0)return;const d=Number(c.chainId);l.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(c){const u=await this.getProvider();c&&c.code===1013&&u&&(await this.getAccounts()).length||(l.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const YL={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:tl(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return tl(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const r=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const n of r)if(e[n])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,r;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(r=t.phantom)==null?void 0:r.ethereum:tl(t,"isPhantom")}}};function tl(t,e){function r(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const n=t.ethereum;if(n!=null&&n.providers)return n.providers.find(s=>r(s));if(n&&r(n))return n}function JL(t){if(typeof window>"u")return;const e=r=>t(r.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function ZL(){const t=new Set;let e=[];const r=()=>JL(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let n=r();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),n==null||n()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),n==null||n(),n=r()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const XL=t=>(e,r,n)=>{const s=n.subscribe;return n.subscribe=(o,a,l)=>{let c=o;if(a){const u=(l==null?void 0:l.equalityFn)||Object.is;let d=o(n.getState());c=h=>{const p=o(h);if(!u(d,p)){const g=d;a(d=p,g)}},l!=null&&l.fireImmediately&&a(d,d)}return s(c)},t(e,r,n)},e9=XL;function t9(t,e){let r;try{r=t()}catch{return}return{getItem:s=>{var i;const o=l=>l===null?null:JSON.parse(l,void 0),a=(i=r.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>r.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>r.removeItem(s)}}const np=t=>e=>{try{const r=t(e);return r instanceof Promise?r:{then(n){return np(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return np(n)(r)}}}},r9=(t,e)=>(r,n,s)=>{let i={storage:t9(()=>localStorage),partialize:f=>f,version:0,merge:(f,y)=>({...y,...f}),...e},o=!1;const a=new Set,l=new Set;let c=i.storage;if(!c)return t((...f)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...f)},n,s);const u=()=>{const f=i.partialize({...n()});return c.setItem(i.name,{state:f,version:i.version})},d=s.setState;s.setState=(f,y)=>{d(f,y),u()};const h=t((...f)=>{r(...f),u()},n,s);s.getInitialState=()=>h;let p;const g=()=>{var f,y;if(!c)return;o=!1,a.forEach(m=>{var w;return m((w=n())!=null?w:h)});const b=((y=i.onRehydrateStorage)==null?void 0:y.call(i,(f=n())!=null?f:h))||void 0;return np(c.getItem.bind(c))(i.name).then(m=>{if(m)if(typeof m.version=="number"&&m.version!==i.version){if(i.migrate)return[!0,i.migrate(m.state,m.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,m.state];return[!1,void 0]}).then(m=>{var w;const[C,_]=m;if(p=i.merge(_,(w=n())!=null?w:h),r(p,!0),C)return u()}).then(()=>{b==null||b(p,void 0),p=n(),o=!0,l.forEach(m=>m(p))}).catch(m=>{b==null||b(void 0,m)})};return s.persist={setOptions:f=>{i={...i,...f},f.storage&&(c=f.storage)},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:f=>(a.add(f),()=>{a.delete(f)}),onFinishHydration:f=>(l.add(f),()=>{l.delete(f)})},i.skipHydration||g(),p||h},n9=r9,ww=t=>{let e;const r=new Set,n=(c,u)=>{const d=typeof c=="function"?c(e):c;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),r.forEach(p=>p(e,h))}},s=()=>e,a={setState:n,getState:s,getInitialState:()=>l,subscribe:c=>(r.add(c),()=>r.delete(c))},l=e=t(n,s,a);return a},Md=t=>t?ww(t):ww;class s9{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new SA})}on(e,r){this._emitter.on(e,r)}once(e,r){this._emitter.once(e,r)}off(e,r){this._emitter.off(e,r)}emit(e,...r){const n=r[0];this._emitter.emit(e,{uid:this.uid,...n})}listenerCount(e){return this._emitter.listenerCount(e)}}function i9(t){return new s9(t)}function o9(t,e){return JSON.parse(t,(r,n)=>{let s=n;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(r,s))??s})}function bw(t,e){return t.slice(0,e).join(".")||"."}function vw(t,e){const{length:r}=t;for(let n=0;n<r;++n)if(t[n]===e)return n+1;return 0}function a9(t,e){const r=typeof t=="function",n=typeof e=="function",s=[],i=[];return function(a,l){if(typeof l=="object")if(s.length){const c=vw(s,this);c===0?s[s.length]=this:(s.splice(c),i.splice(c)),i[i.length]=a;const u=vw(s,l);if(u!==0)return n?e.call(this,a,l,bw(i,u)):`[ref=${bw(i,u)}]`}else s[0]=l,i[0]=a;return r?t.call(this,a,l):l}}function c9(t,e,r,n){return JSON.stringify(t,a9((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},n),r??void 0)}function l9(t){const{deserialize:e=o9,key:r="wagmi",serialize:n=c9,storage:s=VE}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:r,async getItem(o,a){const l=s.getItem(`${r}.${o}`),c=await i(l);return c?e(c)??null:a??null},async setItem(o,a){const l=`${r}.${o}`;a===null?await i(s.removeItem(l)):await i(s.setItem(l,n(a)))},async removeItem(o){await i(s.removeItem(`${r}.${o}`))}}}const VE={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function u9(){const t=typeof window<"u"&&window.localStorage?window.localStorage:VE;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,r){try{t.setItem(e,r)}catch{}}}}const sp=256;let Fc=sp,Bc;function d9(t=11){if(!Bc||Fc+t>sp*2){Bc="",Fc=0;for(let e=0;e<sp;e++)Bc+=(256+Math.random()*256|0).toString(16).substring(1)}return Bc.substring(Fc,Fc+++t)}function h9(t){const{multiInjectedProviderDiscovery:e=!0,storage:r=l9({storage:u9()}),syncConnectedChain:n=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?ZL():void 0,a=Md(()=>i.chains),l=Md(()=>{const _=[],v=new Set;for(const A of i.connectors??[]){const N=c(A);if(_.push(N),!s&&N.rdns){const T=typeof N.rdns=="string"?[N.rdns]:N.rdns;for(const O of T)v.add(O)}}if(!s&&o){const A=o.getProviders();for(const N of A)v.has(N.info.rdns)||_.push(c(u(N)))}return _});function c(_){var N;const v=i9(d9()),A={..._({emitter:v,chains:a.getState(),storage:r,transports:i.transports}),emitter:v,uid:v.uid};return v.on("connect",w),(N=A.setup)==null||N.call(A),A}function u(_){const{info:v}=_,A=_.provider;return Eu({target:{...v,id:v.rdns,provider:A}})}const d=new Map;function h(_={}){const v=_.chainId??y.getState().chainId,A=a.getState().find(T=>T.id===v);if(_.chainId&&!A)throw new La;{const T=d.get(y.getState().chainId);if(T&&!A)return T;if(!A)throw new La}{const T=d.get(v);if(T)return T}let N;if(i.client)N=i.client({chain:A});else{const T=A.id,O=a.getState().map(L=>L.id),x={},U=Object.entries(i);for(const[L,M]of U)if(!(L==="chains"||L==="client"||L==="connectors"||L==="transports"))if(typeof M=="object")if(T in M)x[L]=M[T];else{if(O.some(S=>S in M))continue;x[L]=M}else x[L]=M;N=aE({...x,chain:A,batch:x.batch??{multicall:!0},transport:L=>i.transports[T]({...L,connectors:l})})}return d.set(v,N),N}function p(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let g;const f="0.0.0-canary-";el.startsWith(f)?g=Number.parseInt(el.replace(f,"")):g=Number.parseInt(el.split(".")[0]??"0");const y=Md(e9(r?n9(p,{migrate(_,v){if(v===g)return _;const A=p(),N=b(_,A.chainId);return{...A,chainId:N}},name:"store",partialize(_){return{connections:{__type:"Map",value:Array.from(_.connections.entries()).map(([v,A])=>{const{id:N,name:T,type:O,uid:x}=A.connector;return[v,{...A,connector:{id:N,name:T,type:O,uid:x}}]})},chainId:_.chainId,current:_.current}},merge(_,v){typeof _=="object"&&_&&"status"in _&&delete _.status;const A=b(_,v.chainId);return{...v,..._,chainId:A}},skipHydration:s,storage:r,version:g}):p));y.setState(p());function b(_,v){return _&&typeof _=="object"&&"chainId"in _&&typeof _.chainId=="number"&&a.getState().some(A=>A.id===_.chainId)?_.chainId:v}n&&y.subscribe(({connections:_,current:v})=>{var A;return v?(A=_.get(v))==null?void 0:A.chainId:void 0},_=>{if(a.getState().some(A=>A.id===_))return y.setState(A=>({...A,chainId:_??A.chainId}))}),o==null||o.subscribe(_=>{const v=new Set,A=new Set;for(const T of l.getState())if(v.add(T.id),T.rdns){const O=typeof T.rdns=="string"?[T.rdns]:T.rdns;for(const x of O)A.add(x)}const N=[];for(const T of _){if(A.has(T.info.rdns))continue;const O=c(u(T));v.has(O.id)||N.push(O)}r&&!y.persist.hasHydrated()||l.setState(T=>[...T,...N],!0)});function m(_){y.setState(v=>{const A=v.connections.get(_.uid);return A?{...v,connections:new Map(v.connections).set(_.uid,{accounts:_.accounts??A.accounts,chainId:_.chainId??A.chainId,connector:A.connector})}:v})}function w(_){y.getState().status==="connecting"||y.getState().status==="reconnecting"||y.setState(v=>{const A=l.getState().find(N=>N.uid===_.uid);return A?(A.emitter.listenerCount("connect")&&A.emitter.off("connect",m),A.emitter.listenerCount("change")||A.emitter.on("change",m),A.emitter.listenerCount("disconnect")||A.emitter.on("disconnect",C),{...v,connections:new Map(v.connections).set(_.uid,{accounts:_.accounts,chainId:_.chainId,connector:A}),current:_.uid,status:"connected"}):v})}function C(_){y.setState(v=>{const A=v.connections.get(_.uid);if(A){const T=A.connector;T.emitter.listenerCount("change")&&A.connector.emitter.off("change",m),T.emitter.listenerCount("disconnect")&&A.connector.emitter.off("disconnect",C),T.emitter.listenerCount("connect")||A.connector.emitter.on("connect",w)}if(v.connections.delete(_.uid),v.connections.size===0)return{...v,connections:new Map,current:null,status:"disconnected"};const N=v.connections.values().next().value;return{...v,connections:new Map(v.connections),current:N.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return l.getState()},storage:r,getClient:h,get state(){return y.getState()},setState(_){let v;typeof _=="function"?v=_(y.getState()):v=_;const A=p();typeof v!="object"&&(v=A),Object.keys(A).some(T=>!(T in v))&&(v=A),y.setState(v,!0)},subscribe(_,v,A){return y.subscribe(_,v,A?{...A,fireImmediately:A.emitImmediately}:void 0)},_internal:{mipd:o,store:y,ssr:!!s,syncConnectedChain:n,transports:i.transports,chains:{setState(_){const v=typeof _=="function"?_(a.getState()):_;if(v.length!==0)return a.setState(v,!0)},subscribe(_){return a.subscribe(_)}},connectors:{providerDetailToConnector:u,setup:c,setState(_){return l.setState(typeof _=="function"?_(l.getState()):_,!0)},subscribe(_){return l.subscribe(_)}},events:{change:m,connect:w,disconnect:C}}}}var p9="AEkU4AngDVgB0QKRAQYBOwDqATEAnwDbAIUApABsAOAAbwCRAEYAiQBPAHYAPgA+ACsANwAlAGMAHwAvACsAJQAWAC8AGwAiACIALwAUACsAEQAiAAsAGwARABcAGAA6ACkALAAsADUAFgAsABEAHQAhAA8AGwAdABUAFgAZAA0ADQAXABAAGQAUABIEqgYJAR4UFjfDBdMAsQCuPwFnAKUBA10jAK5/Ly8vLwE/pwUJ6/0HPwbkMQVXBVgAPSs5APa2EQbIwQuUCkEDyJ4zAsUKLwKOoQKG2D+Ob4kCxcsCg/IBH98JAPKtAUECLY0KP48A4wDiChUAF9S5yAwLPZ0EG3cA/QI5GL0P6wkGKekFBIFnDRsHLQCrAGmR76WcfwBbBpMjBukAGwA7DJMAWxVbqfu75wzbIM8IuykDsRQ7APcta6MAoX0YABcEJdcWAR0AuRnNBPoJIEw3CZcJiB4bVllM44NCABMADAAVAA5rVAAhAA4AR+4V2D3zOVjKleYuChAdX01YPewAEwAMABUADmsgXECXAMPrABsAOQzFABsVW6n7Adq4HB0FWwXiAtCfAsSwCkwcpGUUcxptTPUAuw1nAuEACy00iRfJkQKBewETGwC9DWcC4QALLQFIUCWRTAoDLfsFMgnXaRetAddDAEkrEncCMRYhAusnuTdrADnhAfUlAMcOy7UBG2OBALEFAAUAitNJBRvDHwcXAKgn0QGhKy0DmwBnAQoZPu03dAQYFwCqAccCIQDTKxJzOvNQsAWQOncnNUgF+icFWQVYr7gFaTtdQhI6WEGXe5NmX6H4CxMDxQcl8XcjBKNLAlNTAnUbqycBj6OlNVsDRRcEg2EJANEGqz8vIwcpAjldAGsBYR9xAIMdGQCVAUm3ACdpFwGvxQM3LSFDUwFvWQZlAmUA8UkXAykBBQBJQQCrAF0AcwArtQYH8+8ZjX8ACSEAKQCzG0cB0QHbBwsxl3iB6AAKABEANAA9ADgzd3nTwBBfEFwBTQlMbDoVCwKsD6YL5REVDNEqy9PYADSpB+sDUwfrA1MDUwfrB+sDUwfrA1MDUwNTA1McCvAa08AQXw9IBG0FjgWLBNYIgyZJEYEHKAjSVA10HhxHA0UA/CMlSRw7kzMLJUJMDE0DB/w2QmynfTgDRzGrVPWQogPLMk85bAEecRKgACoPcxw1tU5+ekdxoApLT661f0liTmcCvjqoP/gKIQmTb7t3TgY9EBcnoRDzDC8BsQE3DelL1ATtBjcExR95GRUPyZWYCKEt2QzpJt8unYBWI/EqfwXpS/A82QtJUWQPVQthCd86X4FKAx0BCSKHCtkNNQhpEO8KxWcN4RFBBzUD0UmWAKEG/QsNHTEVsSYMYqgLBTlzBvca8guLJqsTJXr4Bc8aHQZJASUa+wDLLuOFrFotXBhPWwX/CyEjwxSkUBwNIUCzeEQaFwcRJaUCjUNsSoNRMh6PIfI8OQ1iLg9ReAfxPAEZSwt9PJpGp0UKEc4+iT1EIkVMKAQxeywrJ4cJyw+BDLV8bgFVCR0JrQxtEy0REzfBCDUHFSmXICcRCB1GkWCWBPObA+8TzQMHBTsJPQcPA7EcKRMqFSUFCYEg0wLvNtEurwKLVnwBEwXHDyEf2xBMR9wO5QiXAmEDfyXnACkVHQATIpcIP18AW4/UUwEuxwjDamgjcANjFONdEW8HjQ5TB6McLxW7HN1wxF4HhgQon6sJVwFxCZUBWwTfCAU1V4ycID1nT4tUGJcgXUE7XfgCLQxhFZtEuYd0AocPZxIXATEBbwc1DP0CcxHpEWcQkQjnhgA1sTP0OiEESyF/IA0KIwNLbMoLIyb1DPRlAZ8SXgMINDl36menYLIgF/kHFTLBQVwh7QuOT8kMmBq9GD5UKhngB7sD7xrvJ+ZBUwX7A58POkkz6gS5C2UIhwk7AEUOnxMH0xhmCm2MzAEthwGzlQNTjX8Ca4sGMwcHAGMHgwV14QAZAqMInwABAMsDUwA1AqkHmQAVAIE9ATkDIysBHeECiwOPCC3HAZErAe8lBBe/DBEA8zNuRgLDrQKAZmaeBdlUAooCRTEBSSEEAUpDTQOrbd0A1wBHBg/bQwERp0bHFt8/AdtrJwDDAPcAATEHAT0ByQHvaQCzAVsLLQmer7EBSeUlAH8AEWcB0wKFANkAMQB77QFPAEkFVfUFzwJLRQENLRQnU10BtwMbAS8BCQB1BseJocUDGwRpB88CEBcV3QLvKgexAyLbE8lCwQK92lEAMhIKNAq1CrQfX/NcLwItbj1MAAofpD7DP0oFTTtPO1Q7TztUO087VDtPO1Q7TztUA5O73rveCmhfQWHnDKIN0ETEOkUT12BNYC4TxC2zFL0VyiVSGTkauCcBJeBVBQ8ALc9mLAgoNHEXuAA7KWSDPWOCHiwKRxzjU41U9C0XAK1LnjOrDagbEUQ8BUN16WImFgoKHgJkfQJiPldJq1c3HAKh8wJolAJmBQKfgDgXBwJmNwJmIgRqBHsDfw8Dfo45AjlzEzl+Oh8fAmwZAjIyOAYCbcMCbarrhi9jQScBYwDaAN0ARgEHlAyJAPoHvgAJsQJ3KwJ2njsCeUc/Ani2GVjXRapG0wJ8OwJ6xAJ9BQJ87AVVBRxH/Eh5XyAAJxFJVEpXERNKyALQ/QLQyEsjA4hLA4fiRMGRLgLynVz/AwOqS8pMKSHLTUhNqwKLOwKK1L0XAxk/YwGzAo4zAo5YPJN9Ao7VAo5YdFGwUzEGUtBUgQKT9wKTCADlABhVGlWrVcwCLBcpkYIy3XhiRTc1ApebAu+uWB2kAFUhApaLApZ4mAClWahaBX1JADcClrEClkpcQFzNApnHAplgXMZdAxUCnJc5vjqZApwSAp+XAp60hgAZCy0mCwKd7QKejgCxOWEwYesCns8CoGoBpQKemxsCnkqhY8RkIyEnAierAiZ6AqD3AqBIAqLZAqHAAqYrAqXKAqf7AHkCp+5oeGit/0VqGGrNAqzfAqyqAq1jAqz+AlcZAlXYArHd0wMfSmyTArK5CQKy5BNs3G1fbURbAyXJArZYNztujAMpQQK4WgK5QxECuSZzcDJw3QK9FQK71nCSAzINAr6Ecf4DM20CvhZzHnNLAsPHAsMAc350RzFBdNwDPKMDPJYDPbsCxXgCxkMCxgyFAshlTQLIQALJSwLJKgJkmQLdznh1XXiqeSFLzAMYn2b+AmHwGe+VIHsHXo5etw0Cz2cCz2grR0/O7w+bAMKpAs9vASXmA04OfkcBAtwjAtuGAtJLA1JYA1NbAP0DVYiAhTvHEulcQYIYgs+CyoOJAtrDAtnahAyERac4A4ahACsDZAqGbVX1AFEC32EC3rRvcwLiK+0QAfMsIwH0lwHyzoMC6+8C6Wx1Aur1AurgAPVDAbUC7oUC65iWppb/Au47A4XcmHVw3HGdAvL/AGUDjhKZjwL3DwORagOSgwL3lAL51QL4YpoYmqe3M5saA51/Av72ARcANZ8Yn68DBYkDpmYDptUAzcEDBmahhKIBBQMMRQELARsHaQZdtWMBALcEZ7sNhx6vCQATcTUAHwMvEkkDhXsBXyMdAIzrAB0A5p8Dm40IswYbn8EApwURu+kdPT4WeAVoNz5AK0IhQrRfcRFfvACWxQUyAJBMGZu5OyZgMhG6zw4vGMYYicn2BVcFWAVXBVgFYwVYBVcFWAVXBVgFVwVYBVcFWEYVCNeFZwICAgpkXukrBMkDsQYvu7sAuwSnuwDnQCkWsgVGPmk+cEI/QrZfdTdf6ABYETOrAIz+zGvL/KbnRno9JiMEKxYnNjV+bd9qwfEZwixpAWvXbjAXBV8FasnBybgIz0lbAAAACnxefYu+ADM/gQADFtEG5a0jBQCMwwsDAQ0A5WUdPSQfSkKxQrxBOCNfJ2A2JzgjCcE9CkQ/Qz54PoE+cD5xAolCvElCO1/LTk9qTQosa1QvagtuH1/gMzobCWebCmIjKzwdJkKrQrwrzAHL/F/JDh8uCQgJIn6d32o6LUoXyavJrAllwcvMCmBBXw/lEKMRAJONHUVCJRupbTnOOAozP0M+cEI/HAcKHUxHbFssLVrhvBIKfe0dK0I/HF0ISgkOM1RDQjcEO0OcLAqBGy1CPxv1CFMiIxgwMQAFj2HwXgpxZMlgC2AtI25DYBk5AhseYLMGAmsQZU5gTREBZOdgFWCVYH1gs2BLYJFoFhcGtQ7cVam8WgtDFqsBuyvNwQIfFQAcAx4BeQJsLzCVUoABigq4RxoA5CN0jgrKDaZN6gGbAoecTwVAXwD39wkANBZXDAulDCQfuq9HAE8MNAAVE58rggh6AtILS2URGwDYTgZ1BAoeWgAxALa4AZonCxZvqyQ4nxkBWwGGCfwD2e0PBqoGSga5AB3LValaCbthE4kLLT8OuwG7ASICR1ooKCggHh8hLBImBiEMjQBUAm5XkEmVAW4fD3FHAdN1D85RIBmpsE3qBxEFTF8A9/cKAHoGJGwKKwulODAtx69WDQsAX7wLAGNAlQh6AOpN7yIbvwAxALa4AZonLTsOzgKQGHtQu1jIdHKO16WbDvWZFT0b7AEpEFwSBg8bAccJOhCTBRArDDYLABEAs84BAgCkAOEAmIIABWtXLwAUAFsbxi5sdioNwRACOyQz0+EcHgsbfQJ7Ls6hHATBCqrxbAA3OS0Opge7CQAQOi7OERkAfavaHA+7GkcczaF3HgE9Kl8cAuugCAHCAULz5B9lAb4Jtwz6CDwKPgAFwAs9AksNuwi8DTwKvC7OoSoJPA67BZgBG2sKD4sa4QHDARELuxY7AKALOxC7BBige9wAO2sMPAACpgm8BRvQ9QUBvgH6bsoGewAHuwG7D00RErwBAQDqAQAAdBVbBhbLFPxvF7sYOwAuuwLrDlaouwAeuwJVICp/AAG7AALjAAg7FTwVuwAbuwG9KOClWw6/xAD0AGj7L7ZtvgNIo7vIqDsDAbuVJ0sAAlsACrsEAOfdGbsIGnsIoQUK/3AA37unuxjbGruji3lyBvupm4MAErsGGwsBvAAAhgBtuwYAC7unOwEaO7oIoZzKAbsL7QfAqTsA4XsBvwAA5QAVuwAG+wAJuwBpiwAauwAOuwIYu45pFfsAAVsADmsALkseAAa7ABe7CCEADUoBwgC3ryYBwAAAtAAOmwG+J+QAsloAHBsBv/7hCqEABcYLFRXbAAebAEK7AQIAabsAC3sAHbsACLsJoQAFygBunxnVAJEIIQAFygABOwAH2wAdmwghAAaaAAl7ABsrAG0bAOa7gAAIWwAUuwkhAAbKAOOLAAk7C6EOxPtfAAc7AG6cQEgARwADOwAJrQM3AAcbABl7Abv/Aab7AAobAAo7AAn7p+sGuwAJGwADCwAQOwAAFDsAEWsAD4sADesADbsAGQsGFhsAFTsAbpsWswG7ALoAEzsDAGkrCgDhSwACOwAEUgAXewUbAAbQABi7AAv7AF+7AGv7AOSLAbsAF3YBvAABcguhAAVKHgF7KFIAOUUA/gcNDHIAKCpwAaQFCF4BvF4jDAkHb0tsXyqJHzwUYi02A6EKtAHYABYC0QNuAXZyR1IUIQNPAhU+ASwGA3NGvHtSekAAKQAxAfsAUwrbAHuQLAErAHblDREyRgFKAFcFAAFQAQeKzAB4OwQgpQBaANYVAJVoNx+LAM1rsQDP1BYIwnVzGxhWHQnRAYiQqyJTU01IEjzCifkAfxw3QCkr4BGXTwByASksMClCGQ8DMFUE98XuAEtl3ABqAnECPxF6Osd4LjXVBgUAEBsdCggMKgQfHSlOU04IuboAChLNACYAARoAhgCJAI41AO4AtADgAJ08ALsAqwCmAKEA8gCfANMAnADrAQwBBwDAAHkAWgDLAM0BBwDXAOsAiACiATUA4wDYANUDAQcqM9TU1NS2wNzN0M5DMhcBTQFXL0cBVQFkAWMBVgFHS0NFaA0BThUHCAMyNgwHACINJCYpLDg6Oj09PT4/DkAeUVFRUVNTUlMpVFVXVlYcXWFhYGJhI2ZocG9ycnJycnJ0dHR0dHR0dHR0dHZ2d3Z1WwBA7ABFAJYAdAAuAGLyAIoAUwBTADMCc+kAh//y8gBgAI/sAJsASwBeAGD5+aoAgQCBAGUAUgCtAB4AsgB/AjwCPwD4AOMA+gD6AOQA+wDlAOUA5ADiACkCdwFNATwBOgFQAToBOgE6ATUBNAE0ATQBGAFUDwArCAAATRcKFgMVFg4AigCSAKIASwBkGAItAHAAaQCRAxIDJCoDHkE+RykAiwJLAMMCUwKgALoCkgKSApICkgKSApIChwKSApICkgKSApICkgKRApEClAKcApMCkgKSApACkAKQApACjgKRAnEB0AKTApsCkgKSApEWeQsA+gUDpwJdAjYXAVAQNQLeEQorEwFKNxNNkQF3pDwBZVkA/wM9RwEAAJMpHhiPagApYABpAC4AiQOUzIvwroRaBborDsIRAZ3VdCoLBCMxbAEzWmwBsgDdfoB/foB+gYKCfoOGhH6FiIaAh4KIgol+in6LfoyKjX6Ofo+CkH6RfpJ+k36Ug5WIloKXftoC2WzhAtdsAIJsJGygAINsbARCBD8EQQREBEIESARFBEAERgRIBEcEQwRFBEgAlmZsAKMDh2wAtGYBBWwAyVFsbADPbAIMbAD2WmwA9gEZAPYA9AD0APUA9AN8XmzUhCNlvwD2APQA9AD1APQcbGwAiVpsAPYAiQEZAPYAiQLsAPYAiQN8XmzUhCNlvxxsAPdabAEZAPYA9gD0APQA9QD0APcA9AD0APUA9AN8XmzUhCNlvxxsbACJWmwBGQD2AIkA9gCJAuwA9gCJA3xebNSEI2W/HGwCQwE2bAJKATlsAkvBbGwCV2xsA54C7AOeA54DnwOfA58DnwN8XmzUhCNlvxxsbACJWmwBGQOeAIkDngCJAuwDngCJA3xebNSEI2W/HGwEN2wAiQQ4AIkGjTFtIC9s1m4DJmwA/QDGWgJsbABVWv4UMgJsbACJAmwAVAEAuV5sAmxebGwAiV5sAmxebD3YAEls1gJsbEZFNiJ9FGVAe8xvEZKvxVfKZszAVTBzYBH2d1iyUXEHH7twNw7eZF5JJRHI5EgaRr5D20/3dfONrFLSq5qSrrgd2CEUq722WBQ/LzpA+bx1oREI5xy4BDSZNun0ZWORUJqInZSyMaioyvfSI0l5uFDzbWaQ28/zdB0hwR4OQZ0/jn9ALSLNikjFYGfqR389qtFlhD3a6KdIh97rhZYpywuLc7o8ql5/X8KCbPU3L/QlmCowhRXhsGDvg6wUNprA9bM/49uxlAj7ZVy3ouEY/BgFXBNyK0TLrSjZWeJm/T4nz6QGLT3cJNtWRZVZTvIdtaxMMJRHgig9+S11LjBh7Inr06ykoch1U097Rw0hvgmOrydQyaWcEQDg0RavuMuT0zYabUZl1e33HNSK1oNUCS03eh+9C2EvF3fq9h+XBaAMFuoWeZf+mfZgL4HzyiKDIUtfNU4oFu0aE9qt3VA3U4D3fOSrAcYVnjG3cSkp1vhXZnp3JQm4JknKdBitO2NVnGCYQwU3YMWHWB87NEd+4AHuOKI8BSIH92reW0pfs+kWCTJxDCbRjFv8Cfc4/DSBYJScJYTeAEgg9wTEvcwd/QuHRHqGzAQ4fXf5FUI1lPrO+fvEcPl4JInM1z9AtBT2bL4QYEREe7KiSnnxTwtmAFjn8lqT3mND8qTktX2F16Ae9cakqJ6/pEQsHURqyqWlRMCzKXRKfCHT7sYHWx9/T/ugYTFY6iVN3Btm58ATJR5alYZybKMWojwOw3HbFn23NFyeLl7+Er82RchyYuBoGQ3j7SAWNxiYvp5U+Fq/DEzB9cG5DlJWsqkosRze92OVlCtQEYo1S1lF72Z8xWc4ld/+fFcfTEDTFb9d8tJGQ75dpJEvcWyGmGBiTbiWDdGOcw93Dmxq5ISUrmasygONfHLvhgo83HQZenbdBtSzBkvYrCEQ/xEDMhMZsN6gqplx5jGG9mSQLhM81UEdEeJ59sdNJDAFy/gPyJoKlwPZgB/MkC/kICLiCB8va+nCdO2ry4aDfkmPFpF/H/SGQ3LJ6aAv9dtJ8DniHtLOckZix0BVb0iR5V3LAp521LBSIi6AtV7r2ZB/hQEvAw54EFNOQcFnl1xGUIc67tqK1INNwD2n/RbwgzO9h45LM6VMuN8V1ZNIQ6t+Xy3lTqyVCD5kqLy/t3/b8MLbgDg8JIWDkSZ+LrGhhr+gYpH+pr1TnCUnZPjpUdw6bSL6MWVXoDDciQDWECwU2e6VEpfrcOBbrSOijqGkEIoJPbpmeJLkcwbvA0yWIixQVjo0HnYh7fji+Dfdq1mtV1lG2Zz9R7eFMHS+FK7nybutu2fwzDpFldO2pZBshsHJWaltn3PWOoGJpCT2jE8EHOuC6FkejNWcfsWCqNqMLP9xTwcWArj2EiiI7D+EaDi7/2cqHL1gPiF6C/J7aUo7RQqogPZ11WqbyP97nsoMxPOC78wZMF7B1Y0g7JNXJV/nN1m4xx8hbqWz07KSaqr5hE4icB326DMR/vUKX9LoNjle/ZWtbUhrTAcsdgrLlG5Ne8aiR0bS/2ZhpNOVVxavWIZsEM/rd68EB4vjbbD13NkMK1qvMk74vGbSkL7ULO0sZ9R6APSCo6KH+Xn98wEdw1bCPAnDTaBsD6sidAGN58uiH4a3ovG1KyZAu2XtyGgF/vgWKGxw9R1lfAVcfuYE71DHuxtTzfGZnHaDpDGWmfEq0N4GawE7yIkaoz8jcmVmzJe1ydM8q0p08YIxFcY1YcqQc1djWBEoNETDFcgk5waRftEJasPREkrV++N/TOKkERF1fCLrXS8DFGYGRBeECMQRNEs0ES3FzUtXCcNxpYEM3Uei6XodZruXUIRnn+UXf2b/r7n1vQutoi6WoIbW7svDNWBbUWcDUc7F9SJK3bvSy9KIqhgyJHoW2Kpvv0J4ob14HFXGWWVsYXJzjwxS+SADShTgCRjhoDgjAYRGxwJ1Vonw+cpnCKhz8NQPrb0SFxHIRbmG95Q2hlC4mDxvPBRbkFa60cvWakd7f0kVBxxktzZ9agPJEWyA63RSHYVqt8cPrs2uFJ3rS3k9ETGKn5+A6F9IOrdZHfT1biEyUJKEvwzuscwshGCBJvd16TrefW03xVnJf4xvs72PdxrMidjJO8EiWyN/VWyB3fv9kc34YIuZTFtXGo9DuG3H1Uka5FgBMwDPEvRcSabi3WakNQkXFecJlFk6buLVk5YHpuKWTw6oF632FPPSVIVl5hgUAeHhj0t/sw/PEEvThLQDDFE34eCg/rLOyXT3r+L98oRKrlTO0MdALYQ3rRQqC7d822dJPGxF1K4J2TtfPSMFaCAg0n0NGk9yiaKKOJD1v2aBX9HUOIawjjfvwCmjHZJTR62R9c9x33JnBjWrN4QYEOmehy0oZMP9XM9Zyi6TYoe07PaLceRXcCWZiY/imRUWW6+mci7+wMxSdwMdbXckXtvhJH8sc4iQcTwm7yp+3f7CaesTTQB2qkgeXh+wFiSMXfMlH7Yil0OoZ2QTtRLTip2O0cLZ4SstqWHZ6H+8A2kZXhpm0kPbL9dUanTOvziqIUh6Ambwa3WrCb2eWbuCN3L1hgWUmjRC3JoL3dBhR3imSQI8xuCMfsszlji7cSShNSYdqCXPxEVwbqO9i5B6hf93YI7aeyI8jxgcVXK0I/klbvhSXjkjOIwZgPdVwmsFW7HGPLUAvDRuKm+itybRg7c8+Yqqjg824Qf+/NxsBSUNAK9KCoJpauFqK0XQULrWYj4FnxeKDuvr54iokpi+D57e6Y1zxRJJdsHnDR3JyraCUufHBRTKODWBVzthjm4k3/Hv+Q990XDVR+KW+TcJX045LW86EKhz/97aqj89A8ZvTk1//tczosU90loIPVaHuWegJU3wP//7XHcO7c0yQM2jM/IhQKrf8hiObHWiWDZManF8Uf/HzbmDfC2wT//aiZ4hGTv/xzgKwdb1sD6cGEkceow0s3b89/zg+3plyRm0HlZi886j5wUwFhdHiDTaBidZRo5cx/tMeLyguOATbzq17ydhzbrpxunuHx6lbFGiO97gsd4dk//7iCIo+Ew+hG2so5kvv+ITG4c1fzHPtu1Xn5QfUnqY3/uByVmB7gmnE/E+5zdm+6nDmoews5fr+NzThdSHzK4bBQOL9c4O8OI0xLSqjJ4lbniLJg1aFpQRLwaSMZmpkC9e/j6FOVrTQ6a/a4alGgfrl2ZL1sbHUQ3DOI7ntq9diHFfm3t1mul3rdJEJCHnlW/hlQntipMrpeMs7fUr6wK370D7VbXH0DUHzdYfRg/6Z11Ult1sffJS+heHbco15Sxy3+rDnPesqH1lajk0yu02hPUvEUqvcUXWXL7Ad0wNGMx5gOle4XJxq/r/YY0xdco2wRSEGwcT7YADlBrHc9ZbvzOL0QwyWCWWChB9Obg800v7tyBWaNvdwz+fL7Ph9i2irEeJkRgOzeEDw+JiD/V93vH9FgMEoFIJMoIuogmicZohf94SBuPn6hXaV9jP4VVVA/bu+Wg8S88GLtmEPSNRLdtlXx2XL/nuM8nKkhnlnjaropiKKLIH94pLIASci0pDBfj9Hi5BfaTSXQg5+PMjQX91Ktk4MOqK1K99l4BRPv5+vNovGZ3IxQv8ICvjV4/diThpoaM8uvd3D9d/DE477w3yAbW3IDm2i73pZ9aEj38JqS6h/s8/xgmUIVcuq2JTgefAyuoafzQxAuRASeg3NtG3ach/JEkyuX+JDt2PnDZTShUhyHHG3ttBg/6lhAchGjLJBtopj4e01MlCp2yqQRTr4sBBXru+lKaoanwYX8y2aWCJiR3KnhCOkYVFSvsO0oDRujUFOEptiNDTYrJoUbvOyvl4AhC9h3wORiTXK1MrpMfnvdnndnR/HRVSusMBgIxwrLdn3vq1VcncPiD0SquTx/kNmxeFyCT4uXVUd9AL+rSGmuq7OOCzDKeVPjiNWVaoP5KOFqYq5Xcuf/xW9S+u9eIq9GAtZWtQlgkRecjRtvG1NR4WXXpn+pwsTBTIy079Ikg8rSef1aVapIFcXCd6C2wHVjLXR+N0tw4Taw6x6H90BFRgNrtlq2up6hHKuV3inM5RJaQWZHd84e6RsKkk9po3dk9by54tpPw7cBkFas/G+GbHwuG+AwP55BZyXILTHCIVrPpXHEaUPYfL6nphJP1Rc10xG4UaCeY4IHCwuur8xmSQDgY4aVwhzWhjbtSHG8JO6P2i2nC9/0Bfx0zk6dYQq3aw7k5vIObD7SEKrxhz0fQ0+YTOfHW23CBNeZci1qNsUDhoeqmfyP6PvjoEjHk8QbrFyQVZPHVWijnb8YCM65iYNoEbvnchStZ/9cKg5Vd45j8KnB6UjzXl/bkyZx7VoD47ocUUi117WwgySSb4rXgLJ52Mv5XJbp3I+uBP81BUvOjy4Cacgi+GWWlC/8dwgqwiojjUBDnEOxyRyowwLQfytFra1OZS4XvRYr4uoamAfG3I/p2bA7G90yqKThH8Ke00Tqd+3l3dmJpaCZelBMYjGqNLVa3SM4+LQeL56gY6Bymy2LQPVOxjWfj5tq4o74swcxhyGJPynkS5xAjOXZP1/FAYcBT3u6qLoIkEfErwo4gozmyI1YCvM0oyI3ghjGPQSsof2sKUhq91WsKy9cYWN+4A2v4pG/Mxpdc6w6kI/HX7Xb0TuihmsiOy2wQIsrZbUmr3OBSUo6oDJNgQp+YqYkgTgYcWZDgawJw3DFfdzT//PhVUidgB2qa8uw/j9ToHBAS33iT8YLhhAfyXG0bQUFp7QmH7oQ3i6Flf4OTZLvJdh8pfuflmWu2ohm5pTiSg1pl3vq9uluTJwqXfh1hqy8e2iHoD+Y35gCIViTo6VOtK5dD8HYClucJucXASzwe2kPj4S4eYQtmkYHagXhAzp/F541xE8YFYqSPszDuz3soWzHy0p3E2jwZNQaIcGU9FNQwQxeDw0ZlK9dxXrj9IUHGUPTOyib8CqXmbZ7Ex54bn1rLx3qqAavu/gh6XjV0GmN1p+yyMK9HN5uYEvxgbAk43tsheREhyI+Q5WLIneKTGPmYiM/lxOp8fvqHy8YgXK0TlMiX0tliLI2JtfmWZP8eVV732sdYm+pcWzDzEmKLJZyeelyaZKkjPnnUO9keDwtgiLnmd5+t+Sr5y8brRnlvxcWEWfCqIALQYHvaXx6jTg4dAlye469uGwwOZVZCILLfGjaMg4LUCNMTtMSp1aC2y/3wR2t1v3w/iNBRQ+bNbtDqL2NAr7K4rUcyqbSpNrXZgAWXvjxBBtfYLK1uRYt3q2pfXJOAL0HtWcEwJLddOSJKV1SwvcvEuzg/4MPnA8MIUJOLqm3qI6wFyN99Ck6zYaV/zGSAzF/PGsaNa4vPLe5QnyuqVUnVQ6xELA6gbe53aGgeke+R/ycb2LJVyc7BhuzI90zA+c6wUDTb7NH//gdDSl2u/aW7lRJm8m1fLtPxcNuEM5JbkOCZKPM88HUsLRoC1pmKKlvWyeAXuxILbu0snpSxf8N+RgtLUSe5n2gdjOjoSTaN7mMZ7bF+cWk/MS8mFD4pcyl5UN7CbpFZH2a+Pm1VAnUTVfbw8qrmz1G9m5aKmRzY1SMhhPrlCn2t4uNUXNA3IFe6NOjSC1DEaAFZAfDlEkQCsbNhsZPj6NQPDSB3tLiTo0ZYoEbIeEIaKtU3Wk60rEszawTFuyHVd365LA/c/uarABN5M5rGq/dqTG3Ilye/5EKiYisisuzqNaZjmWv0z9TORc0CKbaTea214oNM9u2sXUZub/eqM3Pi/PjRSyQiOSwPWif2asTgu6hS6fb5UGosCWxdedMqdViIUUSSdIJx+qQ4KShfTT39VAWZbi+mB+iKICNwpt6cflY57Rcbs6d1kA26Iru73cuxYVlSvuJdcR5VfDYZRk8X0AXePROyw3Le6LaUdmTLzYsoNhhgQpd67xVNiHgk3pakmndeIAtTC4DCXy9oS6eU4CWxDdVmY53pKNbdAKmQsP37lrJZC6iDXMELGKcHjNuuZgcDyY8W/yv6ha3DX7OWm/35fpvhw55oitf4V+GULlcPWYyGGuVBdro19c8u0RDddDun40W7G5cSIzHLh/qZxb59R+EPY+wZ2XerkUim92hhXpKyW6WtAh6zQS97DrPyjCvKi3pCw96LeKynOpyjtsMQc2RmI/20zFOZcSa2AK++PoRcT6zeJyxlBZ7kk5mhqXGkLlM2hFKc+/T544xXP0Ua38Q6xdPTLTeG1PHnLMaOvksUQMrEFTB/lizCirmFQL8zYVU+OTeYQEFaITsBSMMYexS9HkajO2gGIf2micvntCZJsZQEwIH3/4JGJQGflBuH5rNXmnRRYXDQs3ZoEQoMtYDr1kFKUS/siiQSUxcTH9XYeBZiKDDFQoExREO9dddKQLO3BwMHvymCSTFyY+vxn3D27NDx6OlU092D5EDUwilttqVHpjJQDUceJYCLsK2swfXeNUVrBJT/w/sk+7si8rPtiMFis+oxvGdGQxirMBID700T39mULuNHzOyN+xBfcFACZcyngF1aSpv0JPkNUrAZTqfplv509cGXFUiEEm5dZb+OsP/blizqdK45/dSsIrufYTrCPY2lgJD6k6QljTfXVlHfYKSq+MsagyUcaMintyr95bD8kdTAeYNLNsMmo/Wdd8a2nStBP49ARIjqqpUHWY4q4mvO5Cq/CgCP+4/B+5zutGwX5pssgVLr1+fIM7WWLfiUQDk4c6ZdHZOWv5hG3g2dgQ5NXnpIY+BWwJpaouf25bXnjDzbHnQNofH/c6m+dEAS9Gs2h7pFRPKOBDnqswZ8KZjhId1ytHUTs533KwBoSiImoxKQUgZ7z6pA9QB3sZ8Cq0vwutJTTkfbX8AzCpm2cFXx/P22niUMHauU8IGc+78R6TsutoonoqFuoNA3l80t387YHMoL5KGAT1JO4zmx+vJ0LbLHlicHraSVYvJjnO9p++qnWgKw9OwFVVUagvZuf9qfiuum+hIicxP1q4zDnzkHsCNriLxBpxY9N+UOmqzdY1MunLMDgkMyi3uvnN3UBXJeZ8YLs5xr8QrOhimYoKuGBebZHAiBIkViv3DG8k2oNpp5OIgX6ulqaRN8V62QUPjn5tl1kPXhT9bcd8qIm8gi4or/FGbvQ6pgGSHmnayrugmf5E0upGxPRf/3xOtitGMaHLKJVm5zhglmVfI91o0yxhJZVS/5wQ8zfxK8Ylw0WmHXoGfRkoBRx9Hsnl/6sgTjAVwpmNuSeZtBwlX4qB8Bh8lxjqBDIuFGJ4I1wxN0XRlAAslzqMKwQfyA7OkuivCXfv+i+3XmhcBFM2n4jdT+NyUmBnQJPV3F2sZfKvJhUlXzSosFR4VevVVcOkFnnjdiRWc0TeSYxj41sJGYMbZTeLI3GvyZ8/gAAudQ1+4oFX+enX5V49MczGCYVBuoC4kHjp7ZVxj+clBwPr9k+v05SsezQK3enxLs1Nt/N7c7AImVUysjGou4iOohHo83Zs9/MI/OWB+OyXzOBD93NbApGHXrv8CVRHp2bwH+xB55cfNrdqFD35HSMx4iVmtzYAmSCIV8kXsHoq3DIb93riTWbubnjxbBW5zConVtbxLRStXHkIyAByaozME952Gc9aAdAbBpZSVCH88Uwb/4bPTVOVl+WoMYD7JIvK8VcMrJ8zHV4bbG0Dg7Kx17A4ej/ZcZ2Z5pVuVLUH1E/AccUTKm81SE+LQ6STTUDscUk0x2OWIbEORhg69tdoTGNkA1RfkGIRZHr5mCXOpLC55WWzCZoGPFUVtZRHwh0nq039CDdjEPo+JyaxSQAvDgR6Iqvxy0frrtEG1A385N81l05SSzN+IDm9bypF9m92EUqblnauZ5sjc37wRykOdl7w4o8WMgQsjii3EE/aJYDfHs1cH6DNBEujjcCc8qAefYFyIAURDcDnzun5UmkbBQsU4eu/W8I9nBE0qJKTdg2hwjq0+XV7a3TJ7R+alvJZCRia9lJ+grNB9dbrOmWEvUotMjvDhq4wV/kq4fvIBkzUGpDeYH74rne8uU3dgoNZdR9pUL6q9YDNRfOiF6Dyk+SYXQIghTjm9qR4tBHh0gnmF/9q3Qv22EzaLhSvDlDOxMrrCNRmLCl1jApzLrBCPn2mjn5zqK7OYK7VxOfQ5GfBfoPdyQwqFEgCVHkJ9oTnagRM3R0+rsuN5jQv9icCav/p1WqiEXSzCdLd/WEA6z6dDP7tPqPbeDYKAkVcz1lLGbFOC9b7cBd3MV0Ve8dZ89oR7OnxGS7uVpSry8banVZwpJg+nkH1jRBYa2BvBMY2xITH9ERXCjHzdZxs+ipdXP2DY7X+eWiBhtT2L0RRGTLPeazn5tpl4tu8iE2rWig731iuJDRbCHHy+g/Mb9+miAyVqfIpXT/iZeOxOxODO0hEpLM78I1+G2Z45yi3lS1K3m4WMQ559Lp4UML5vZUjYGJuxl+OPpUH5klpyBujkjprhei0TmUik10gjvNUp8mDkWlNKikmYspaVTqewbnOzJrmz8FLIpsT67EJLHIIfeDcWEfiP+DJrZ1jfxpoAb2abeMqLx+9RuZGzQoYtYVGgAWwEM9Kek2vPIeBNAKD6ao7nw6sgvfeLZPoXkbYO/tStHJdKzk+WFSFEU2NcALJAEP6S8pcnqqBBt57dwTrzQNCIdk2SocK4dLRbD/pu/VryKnm65ZYXiJCfHJk3mx9MRSl+nSK6OqEBSoGjz0/LADddwF/HqcfK3K3O+6YUGQcmj8pZL4PhZ6KrGkb8B38FmDvvLd3XQXbvS/FQmrXFTvJNkaN/FGo83KuS43BK1UfVnIqigGkCoP5fBda2MwAGTGNKX9K9t4Bx83pMFc5KSORmWKv+8VoVggWxoaBz3/9IBh6RwLd1tebwy89xvE5z6EEpXpDfrXWfRsMs6+ekUHH6idVosno55+xQ8Zqzelh0bxtJTgCcH3Z3/Cxlx9eNIS4JIFKOAVrDqbrXRszmY55a5+niJGHtkO3b6mnIDxLa1WXc7BAe33mt2KyM4Fbc3R6/WVTQN8QhlqAtave2WsQTqzWeSlKuGUVIJRqtObpv294rS0kDN1RKzdstZTXJebR2HlzsQ4P3NbMHUqFZMZw+/IKXnh4t+lY8qocp/B1oMszR03EFs3bPeND8QkItMvllObeCz3SZAjqZrobmLcrpFyQV7mwBjg3C3C8/bc5goQhv8j/IXMLGnt4mF7tybRDG5G0polxoUScQkPvmnga2/K+aapKeqSL0BTmo1Cm5g+booNOtdyKva2KoefRURaBk7113QKo3y+WTuFKtgETIK8HRluYS9DvlcciCDvnG8UaJRfZE2siZsiTHvRmN80xkUIInHeRZl5Re/+ATL6VhKFi8CZ/n/jbFV6T5pZ+Uoppvsi3qjacVFOJgWWfdlwVHKPW/TJO3na9hRM9bS2yo2rEsC6IBzRReVO6IesJU7PItzOamr+ROFfwGZmZ7ue8HNxAgLJKb7P3p8dMqk6Be5PJaT/5Rdc1deYVihWH9cjVKc9uz5EnfHqxLUkOO8iJUENBNVf5LyNy8zjLu/78k5WNTywiPfYeX3CPk7yc6CI3lum/CEZwfUaNpcI3KsPqfn2lmz3kd/acQjKA1ebkJaiuLD+epQ/Fc1llHXXMzofWzz/Kd29SNmOhcjMWw1jq1g3YfrXZ9rzXDYW4ZttfgfMi6oCUtBs0PkMVuxmq5lxEoCaSXPSqCJJ7MlKdRDidVt0AFlxk5cTdX++sBF2+E35mjwfm8ERVxH0FvuAQtsfA4V2G0TKTUxeyRGVjd/u6F1SvuAiU2/WaQjcNCU4Ep7VunXCYSbZj3U3wzu/LWM5MPlYuyQ3FOOCD/zt7K295hY2JhwF+ODDIZ676vGQFKveEQYkWj7lkK7rVmD7MhU0Y/tF8EcTTpo4/yqOufbd/zWIpMajnbDuWK2vn6OPPtz2rc9MIBNlPd8tt+yf+7SC4wqEPbozKMCwY5Bygx4JmoIEDsixWRDcdHd6S3/dZMHXOJAAv7+NIstl00crgSqHZKAEe4g3G4dzIV51EeZB01r7p8GNlfUnG/GjZgNGsqXZdYMBVtAtFNv3hJWPve4GvqZ2XxuiNkHTz5kxWgr0PjQdJlVywJ9Zf2ZvqeeTbolKtvK54re2Lq5BoyzfsRtvDfyao3kmyFzDQ88nM+qx83w74RDlkngtYiArI05Epre3GgBeSlMig0pE6RGQaFznKkGeb0SozLCyiOtxh7hgwZlbKbClzUUfC8ntMiHUOZE375RhTy9c4DA+oMLkUDkztSybZbdmP1xpaIbjUpPAHBq3cIq+CBFzbMlMMCCkUQ6d9LGV6GYCsYiEWZIy3nBnuxOYXeU4YTGDSin9e4/pCjPtQSHlg5LMEvIlF0ElthqrF129iK2RPBEWd3XWOl3SWV5uz5VUyZYp5kEFmz7QfP/B1W1BBzQ2iTGbSVT79lUHzcGXz3PJceSgz4uknETUwo0xffpr2KUvZF0i/r2sL3IFIClYx8CbIZE6Qt7MDJbOPB3xMScwaOcWG66IJfCnDkb0D2Mb+PHzX+oiCbxeTIogtyN+s2NJirNACk/OACSOTtV6vscwbzW4M168xqaI+RzR47S1nlV/rOoZnid87n/Ima2XYa3un3BuGAisNjb8eLMT9OnMtazQROFCuO1HiZXaOc0oUDbNC4eKLToOx8DzVhMgGA8XIAQ2x3b6I0uEyLssQjJX3QphcUMx4KsMgJ+72km4N2aqkBF2coKmUEt1eqIMGn+5txMT4kYVGd3ALO+y9Z4PP3d3l48JQK8s9ZZ/Qx/+NBKgBEJFlQ32psoJiihGO7FSYM5L81q72kaAYcilEFMG+ZK1BcMqELkflyCV7v8JEXLO4Rf/oZYNZHZVjJhfL6fnpP9Tio3Euue5uS7FMkfGOeRCTrBZ06Caev7tgufeTrX34Ur/Vvc+b8ksiIShNJtuF9WmYxOZ4xg8y6zTdy3KAB2y5kYkcRnXsptWwAFyKZ2I/QGySNeoQLkINUMloC+5L3WuMMx297Q1xUYLKqZ9XHavaobo6QQv4auMm+i84IhxRpPt9nUmcav9NcjCcP+TcMmxsQZ/F3mgeoA0fQgwvTsyXuuTaM3Sqtv2jaaajmaFQpK9W6uIbeqwvSDo34ZrY6elDUHwSCjHRRmlwmyy+eOra64Ssq0XSXYljMHtKY+FShcMkHsEUY/4Bw63dJ6KpwDaxmthlDdbdE+TvYF3v33cGSKqO+1H1pKYhJMvZD5ckQcHyNF8zrtiR5b0ko6NPGoRexUZTYP6VbUdn3zzxGBOi8Z0OqHjGqYxRXwN3mYi0GYEEZYq+Q3QvdKcEHILLLj8S+VFepSfErtmfZCdvxbfIifFSpEzKi+7VJsLMT+zEFeyp1OdwRC1VZrfTLIyR7xTPUcZFYPD9qI7D70uTb4hdpqPXsJIRNYbZtNwch1OI3trh3u2ScoQyM9POnInsUa+OovcwkUP1UfIzPb95n4BaF2ev57NHAej0+BVMF9/Cj9663HN2/JN3SQgslL914bKfiTTDFAz9PlQEL/dSv1H8xl3mtWxh1McFO9EJXlRDaKQDsyKO4vOJW90NFE6yw2tjbc2GeF95sbs0I9enAa6QwQVf/kJQhAD2BzUDKggOyjy1TEhED6sfk+418lQy3c/uj8aw8UEzZ6hIMCd8RohAkumMtIj9m73l2yPWoGHVTPaywkC7Yj9tBM1NxMgcrDwRtk4RO2WHT7Ql5kQCKdJj6kNuOTeyEBYBjLMhGz+O5/YGa84HEiTYEpZ6fFzy26GG2hWtTyteuYrhSyG56BjsT/wQeLRytpTY3D7sIMqZnJ9z1FDrfyjFlGl2TNw9BQysbaxOuwYYZs/7I6BANgkqCknWZC7/BBXvaeKwAmC959I+G39BUE9bExkNlbRoFRyEtNzv+NJ91FuisG3JCS6uYBeRnfv8AkAfKTeg9EYamqnsGfAV7d0f9DghHEQ5IsPGDIUhgoSj7obM4Bu5uhQ3/CYEDTHc92AsFvDK4XGrwUeGBWBHPlS+f4x+CxmmHz2sAGmSFNt65kwZC64mnaoWlu2310laYn8r62AqsR5dfjyK18MEdurdagldzfJtjFXlZs7St4QhdPiye6TPh2/ZAQLU/Fip5s7TDEM16KtRWrK9hmxnQ7bmfa/+7pa10Z8WDPK3NuJ+NN/RAbQ5vHx2uX0Lm7/w7cAEH/hvZA+mt7J7zGw7YtQYwnNN6dpgwkGjjrS3yQoeoYt1EnczmtmJfQZWzUlP3Hlg9Wzlr9IH23q3thGth+QNEANFettxKfskkGOlLk8AqoKJwDqOxAa6UzAx07plSSyNBJSGco9zjnC5gGbDoKvsMDuBR6bGRlGzJ+hFsGa/Izt78aI+WZ6dJlZKp4pGISuv9rV0sAS0MWEwCmfauO7oQZMiakHU35LBxiyJoOMddhUWgcZuC8r4Ksvn75TTcQXLJ7kWtYhGuGqPd9dZuFjBWQHNwosXY5snbHFQq72CvHXhIg+shQxycuLOuWYErwCLZeF24b7F78pO7xw4X6lIAR02hUOf5087Rl0nOaeb6CK4i/KA/EZv76ftOWZtjwxslNr0E/u8rWUmnf3amfg6UZmBAluuoj3Dd7UV+9IAJ6iYcDfSJlgmIImohjfIUMJ27z+opj50Ak9af2LCNrWrBJvMovA1OeNO+MF/MwZvnaCxTgG7Cw4QfSPF6AYCGFt21M8PySZFeV3t2Rqqs5JMzMYzGRgq4o+UaKRgBf9GHi/9X9HXA3wxkCsd/UhnHSh2zUVDiraio/6nP4y3XJqs8ABfALAtCYU7DHPMPRjgcM6Ad/HiSXDAbOdSMkvGZPAkHs8wuQTy6X2Ov/JFvcPuKfV3/r9Q28";const Ew=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),Aw=4;function f9(t){let e=0;function r(){return t[e++]<<8|t[e++]}let n=r(),s=1,i=[0,1];for(let _=1;_<n;_++)i.push(s+=r());let o=r(),a=e;e+=o;let l=0,c=0;function u(){return l==0&&(c=c<<8|t[e++],l=8),c>>--l&1}const d=31,h=2**d,p=h>>>1,g=p>>1,f=h-1;let y=0;for(let _=0;_<d;_++)y=y<<1|u();let b=[],m=0,w=h;for(;;){let _=Math.floor(((y-m+1)*s-1)/w),v=0,A=n;for(;A-v>1;){let O=v+A>>>1;_<i[O]?A=O:v=O}if(v==0)break;b.push(v);let N=m+Math.floor(w*i[v]/s),T=m+Math.floor(w*i[v+1]/s)-1;for(;((N^T)&p)==0;)y=y<<1&f|u(),N=N<<1&f,T=T<<1&f|1;for(;N&~T&g;)y=y&p|y<<1&f>>>1|u(),N=N<<1^p,T=(T^p)<<1|p|1;m=N,w=1+T-N}let C=n-4;return b.map(_=>{switch(_-C){case 3:return C+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return C+256+(t[a++]<<8|t[a++]);case 1:return C+t[a++];default:return _-1}})}function g9(t){let e=0;return()=>t[e++]}function GE(t){return g9(f9(m9(t)))}function m9(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let r=t.length,n=new Uint8Array(6*r>>3);for(let s=0,i=0,o=0,a=0;s<r;s++)a=a<<6|e[t.charCodeAt(s)],o+=6,o>=8&&(n[i++]=a>>(o-=8));return n}function y9(t){return t&1?~t>>1:t>>1}function w9(t,e){let r=Array(t);for(let n=0,s=0;n<t;n++)r[n]=s+=y9(e());return r}function ja(t,e=0){let r=[];for(;;){let n=t(),s=t();if(!s)break;e+=n;for(let i=0;i<s;i++)r.push(e+i);e+=s+1}return r}function KE(t){return za(()=>{let e=ja(t);if(e.length)return e})}function QE(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(b9(r,t))}for(;;){let r=t()-1;if(r<0)break;e.push(v9(r,t))}return e.flat()}function za(t){let e=[];for(;;){let r=t(e.length);if(!r)break;e.push(r)}return e}function YE(t,e,r){let n=Array(t).fill().map(()=>[]);for(let s=0;s<e;s++)w9(t,r).forEach((i,o)=>n[o].push(i));return n}function b9(t,e){let r=1+e(),n=e(),s=za(e);return YE(s.length,1+t,e).flatMap((o,a)=>{let[l,...c]=o;return Array(s[a]).fill().map((u,d)=>{let h=d*n;return[l+d*r,c.map(p=>p+h)]})})}function v9(t,e){let r=1+e();return YE(r,1+t,e).map(s=>[s[0],s.slice(1)])}function E9(t){let e=[],r=ja(t);return s(n([]),[]),e;function n(i){let o=t(),a=za(()=>{let l=ja(t).map(c=>r[c]);if(l.length)return n(l)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,l){if(!(i&4&&l===a[a.length-1])){i&2&&(l=a[a.length-1]),i&1&&e.push(a);for(let c of o)for(let u of c.Q)s(c,[...a,u],l)}}}function A9(t){return t.toString(16).toUpperCase().padStart(2,"0")}function JE(t){return`{${A9(t)}}`}function _9(t){let e=[];for(let r=0,n=t.length;r<n;){let s=t.codePointAt(r);r+=s<65536?1:2,e.push(s)}return e}function Gi(t){let r=t.length;if(r<4096)return String.fromCodePoint(...t);let n=[];for(let s=0;s<r;)n.push(String.fromCodePoint(...t.slice(s,s+=4096)));return n.join("")}function C9(t,e){let r=t.length,n=r-e.length;for(let s=0;n==0&&s<r;s++)n=t[s]-e[s];return n}var I9="AEUDVgHLCGMATwDUADIAdAAhADQAFAAtABQAIQAPACcADQASAAoAGAAJABIACQARAAUACwAFAAwABQAQAAMABwAEAAoABQAJAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACwANAA0AAwAKAAkABAAdAAYAZwDTAeYDMwCxCl8B8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgPi89uj00MsvBXxEPAGPCDwBnQKoEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiC+AZ4EWRJJFbEu7QDQLARtEbgECxDwAb/RyAk1AV4nD2cEQQKTAzsAGpobWgAahAGPCrysdy0OAKwAfFIcBAQFUmoA/PtZADkBIadVj2UMUgx5Il4ANQC9vAITAdQZWxDzALN9AhsZVwIcGSkCBAgXOhG7AqMZ4M7+1M0UAPDNAWsC+mcJDe8AAQA99zkEXLICyQozAo6lAobcP5JvjQLFzwKD9gU/OD8FEQCtEQL6bW+nAKUEvzjDHsuRyUvOFHcacUz5AqIFRSE2kzsBEQCuaQL5DQTlcgO6twSpTiUgCwIFCAUXBHQEqQV6swAVxUlmTmsCwjqsP/wKJQmXb793UgZBEBsnpRD3DDMBtQE7De1L2ATxBjsEyR99GRkPzZWcCKUt3QztJuMuoYBaI/UqgwXtS/Q83QtNUWgPWQtlCeM6Y4FOAyEBDSKLCt0NOQhtEPMKyWsN5RFFBzkD1UmaAKUHAQsRHTUVtSYQYqwLCTl3Bvsa9guPJq8TKXr8BdMaIQZNASka/wDPLueFsFoxXBxPXwYDCyUjxxSoUCANJUC3eEgaGwcVJakCkUNwSodRNh6TIfY8PQ1mLhNRfAf1PAUZTwuBPJ5Gq0UOEdI+jT1IIklMLAQ1fywvJ4sJzw+FDLl8cgFZCSEJsQxxEzERFzfFCDkHGS2XJCcVCCFGlWCaBPefA/MT0QMLBT8JQQcTA7UcLRMuFSkFDYEk1wLzNtUuswKPVoABFwXLDyUf3xBQR+AO6QibAmUDgyXrAC0VIQAXIpsIQ2MAX4/YUwUuywjHamwjdANnFOdhEXMHkQ5XB6ccMxW/HOFwyF4Lhggoo68JWwF1CZkBXwTjCAk1W4ygIEFnU4tYGJsgYUE/XfwCMQxlFZ9EvYd4AosPaxIbATUBcwc5DQECdxHtEWsQlQjrhgQ1tTP4OiUETyGDIBEKJwNPbM4LJyb5DPhpAaMSYgMMND137merYLYkF/0HGTLFQWAh8QuST80MnBrBGEJULhnkB78D8xrzJ+pBVwX/A6MDEzpNM+4EvQtpCIsJPwBJDqMXB9cYagpxjNABMYsBt5kDV5GDAm+PBjcHCwBnC4cFeeUAHQKnCKMABQDPA1cAOQKtB50AGQCFQQE9AycvASHlAo8DkwgxywGVLwHzKQQbwwwVAPc3bkoCw7ECgGpmogXdWAKOAkk1AU0lBAVOR1EDr3HhANsASwYT30cBFatKyxrjQwHfbysAxwD7AAU1BwVBAc0B820AtwFfCzEJorO1AU3pKQCDABVrAdcCiQDdADUAf/EBUwBNBVn5BdMCT0kBETEYK1dhAbsDHwEzAQ0AeQbLjaXJBx8EbQfTAhAbFeEC7y4HtQEDIt8TzULFAr3eVaFgAmSBAmJCW02vWzcgAqH3AmiYAmYJAp+EOBsLAmY7AmYmBG4EfwN/EwN+kjkGOXcXOYI6IyMCbB0CMjY4CgJtxwJtru+KM2dFKwFnAN4A4QBKBQeYDI0A/gvCAA21AncvAnaiPwJ5S0MCeLodXNtFrkbXAnw/AnrIAn0JAnzwBVkFIEgASH1jJAKBbQKAAAKABQJ/rklYSlsVF0rMAtEBAtDMSycDiE8Dh+ZExZEyAvKhXQMDA65LzkwtJQPPTUxNrwKLPwKK2MEbBx1DZwW3Ao43Ao5cQJeBAo7ZAo5ceFG0UzUKUtRUhQKT+wKTDADpABxVHlWvVdAGLBsplYYy4XhmRTs5ApefAu+yWCGoAFklApaPApZ8nACpWaxaCYFNADsClrUClk5cRFzRApnLAplkXMpdBxkCnJs5wjqdApwWAp+bAp64igAdDzEqDwKd8QKekgC1PWE0Ye8CntMCoG4BqQKenx8Cnk6lY8hkJyUrAievAiZ+AqD7AqBMAqLdAqHEAqYvAqXOAqf/AH0Cp/JofGixAANJahxq0QKs4wKsrgKtZwKtAgJXHQJV3AKx4dcDH05slwKyvQ0CsugXbOBtY21IXwMlzQK2XDs/bpADKUUCuF4CuUcVArkqd3A2cOECvRkCu9pwlgMyEQK+iHICAzNxAr4acyJzTwLDywLDBHOCdEs1RXTgAzynAzyaAz2/AsV8AsZHAsYQiQLIaVECyEQCyU8CyS4CZJ0C3dJ4eWF4rnklS9ADGKNnAgJh9BnzlSR7C16SXrsRAs9rAs9sL0tT0vMTnwDGrQLPcwEp6gNOEn5LBQLcJwLbigLSTwNSXANTXwEBA1WMgIk/AMsW7WBFghyC04LOg40C2scC2d6EEIRJpzwDhqUALwNkDoZxWfkAVQLfZQLeuHN3AuIv7RQB8zAnAfSbAfLShwLr8wLpcHkC6vkC6uQA+UcBuQLuiQLrnJaqlwMC7j8DheCYeXDgcaEC8wMAaQOOFpmTAvcTA5FuA5KHAveYAvnZAvhmmhyaq7s3mx4DnYMC/voBGwA5nxyfswMFjQOmagOm2QDRxQMGaqGIogUJAwxJAtQAPwMA4UEXUwER8wNrB5dnBQCTLSu3r73bAYmZFH8RBDkB+ykFIQ6dCZ8Akv0TtRQrxQL3LScApQC3BbmOkRc/xqdtQS4UJo0uAUMBgPwBtSYAdQMOBG0ALAIWDKEAAAoCPQJqA90DfgSRASBFBSF8CgAFAEQAEwA2EgJ3AQAF1QNr7wrFAgD3Cp8nv7G35QGRIUFCAekUfxE0wIkABAAbAFoCRQKEiwAGOlM6lI1tALg6jzrQAI04wTrcAKUA6ADLATqBOjs5/Dn5O3aJOls7nok6bzkYAVYBMwFsBS81XTWeNa01ZjV1NbY1xTWCNZE10jXhNZ41rTXuNf01sjXBNgI2ETXGNdU2FjYnNd417TYuNj02LjUtITY6Nj02PDbJNwgEkDxXNjg23TcgNw82yiA3iTcwCgSwPGc2JDcZN2w6jTchQtRDB0LgQwscDw8JmyhtKFFVBgDpfwDpsAD+mxQ91wLpNSMArQC9BbeOkRdLxptzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgELgEaJZkC7aMAoQCjBcGOmxdNxrsBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUHqSvAj5Gqwr7YrMUACT9AN3rlr3JG9m8w9lIAXltp/v8kfWaIaaR9OwpAES/I3ZVamDXSgB/UsOgAG6D0tq+5CIqE15FiAhV3yA2VhCQ7tj+m6xXaF53FIfGi/IAZIskMGAi2MU7MDVJNCbMzERyHZi+osdPtnFVbvq653O8rwaCy4IAf9OOok65AqJUtUriUfYsGPPVbe6jm0s9lbKlPCUKjdkHsFsEhvX4kT39ZCtAAbwQdn/h4TpO5hTByWAmr5n+Wuwhdegv6bmvX4LyOes3z2+cuHv2JFYwVMNuq2gzn8YHTjlUQd39osyWei4NKl3LAdfxlO876hh5ENp/cOvpuI9bF55guEthLLPOXjD4dktTH04P5TvZrWTM0e4+BHJxj7MLApXIFOs0sWKhNkG8iwuM5wR83my6V3wW06abhDzTXYfOr/ZpFXgXzmv4d12FFyP00/dPGbIVGV5ao8UufGzUwp/IHx6v/wDWJr9iaoCulhWwlZ7A8q/NMoD12+mBdNRgJYnThRLtMx1Bgwttn8/4Qn2CDfOSup9GVXEvA21ILgp0owHYxNOkpwLWz0G7K+WREIDjIzUzSn8I99CuJSmSpPyH0Ke6/NERYiNx+3dncSebPnOUnnWD61AhJ1n/tSLZmU5wYO5GfgzyAYJm6VL91LxZ8hL1lfximQxIDMRhIecQZBmeE5R0XlrpvwplVrJwpa8BBCdp93GPP9lyBeZ2zkRr920CR3cYbKpKHfogvm0nV7XdDz6EbjzlxADCMjSLXuXpIpyuizy39yY+I+H9rmpoIF3YwEjlH9MgGgWcCNTjHEWMqAbprn2Ox7rOHupaVE3lNyg3nt5XaZID6Y+uml5Ja+aOPu+BI+DZbiJVfaspUadakWUX6TA4dETkIqdJJHYnU4Z4yKpt5y8rVIahoMUf8A8kWtAQNCTbjp71gx3/zVdqNz1Sutkw0gFIMVm2BF4Xdv/0olw+NaDIR9Bb3DPweZA2K/cw+/b+AwyWl9ZOP67A9nexmeTNjfdzPGf9J6E6BMPKa5lJh+qNsdUz3HBUevU71eQFCqOcxiIYhacAhh/8PX0J5DdSViZ6WazDDx7cukJNpMfEkYLJ5Ao4vLoVd3d25Pg4qaVa2p2D2L3WvYPJ5Yf/A/MSxptjlgXL/KJtP2U0cRv2I09ATAiWCJYuRwiapeKFsqmi18yMMulDp3HdcIldq+7jkwsJUOHLHCzzzBw5XFvL0CAmo1ub456z7zb7shk3KPGCLZzr47oT1k/j06XNnJvG3Udv6XrP+wsqTBlZ5MaNPt9FOs/4Bt/ja/vbVhTNpBFl9Gq7MqINvGlWKOAwQzwOZy+EzSdjAqKJVV2YcskTuM94aIK+kc/AZaXiZLPREUDpkXIV947IFfj+85TrqPqLfkGcxgboMQjosf+az+odLNXdyp1mDNGsqSdK/pJ2Ca04mt/4d6s1X+lncOEYaGBBeW4pApGcjf7/XJCFbj3N3mFb+BtlIcw8ZiDKoClFX9Rf0bxCqtLpicObKJzBVVHr/6u4siH2hK75RNv7w9GfTbhJOQBYiFUZAByY4rn37tZBHT//kqKsNi3ryL9AqXJRzqiMIJMhILjoi/i8LVEsbu+Ih9bsyW16sgQqjYLO0qda6KaCPKj3DQcu6CfV5lKtjS3ZCdqLAZkOey9MR+QutJBGiz/r15GVD6rCVwJR4UUKC4GNJkfDf00OMW8aQtLSAGLXV8MIi9mbbl/qQEpxCm2L5hutFX4ekeLH4QgBWUFKs/2VVMKy46WtFE6AbwgmYm/Z0yHk5veDIrcl2HpVqb/rSE0PC9EbDzJEWqeaPhh7vF369Umq2kSiB3s5rBI6c/7N9bkRu4h2n+/h5nSwy+7n+/I+6oXQVANo2Jb5zDwtiBPf1ySCzHdT6yJShMzqSRZfnykX49CaFaxhoVF4PBhEuECJ1PrFYSpmHuyYsl14DTAV9ZxRms1XiR/kBrjhZjidOt0UNe+GSml7XNgpVw8YsUTmZXLTK+6iYnyW/wYR1W4UXwOi14xpFROHb6HcZzksgF5DbL2AFXzKNwHU2adjdAY+KCyM/cwRTBkkq/a227NI0q6DR2MkMCRu620t79bGcYUmACtqN3mk/0uNwd3JSXHqE1kzf6Yyj0W2083JNDRnIXDlgBxJ6uf58NN1f6FQiRCWB4egF8QDx74AixV8oTyw7PluIjr3/rj/WzgwPSq4xPojaF7V0xqG2u5ti2L1h6yYHv73Isrukr0kURDIEjClBsBx7kdcXUxaYMS0syT3ymLzDzslNDWQOT1Tao1YNmJHARUenhCkmV9tqCPGI5GqZaRpkiPxyjoncWjyOHYGqvbvRX+Bn1pn7EhRNXa1lqJPmoeN5VqdqIDPhEVhFsyG0d4iQEIYX0wZUbY2XbZWYlpZ/l66IrDDY0q1C1YzBDpHC4h05YqHQLqS9anyl22JQ6lEvjvdBwMHfE7z0luCXD34/rFeDa2TmSeEAykSpYO5j1G/nsgpR3qn0qaQEmLjnnLfcz+veoYqPnRqmRGwCJ6FJ3Gm/Z1/aVX5PSb03MMnjAf41ww54sD5k8FrkfBP+K0b1MrYpapWjtpZfve2HVf4ickX3LKSOhu7qI1Vd4c1kNrn2ajy1t4y93JhV4fnWCKq7OmFpcr7FjdJCXPTql0Drr14Ho3Z87+GPQ4Z/DcTiGqtvZxlRYi8cNuhXABveZIwNl/BX1huhVLaFax5OqypUrQRyb9OE3SSkPlDdy5uo5XGg2EIGEjLY1MO5cr1ibfiFWV7zspcTgkBKkwo5jPyAin04LqizZXb2tDRgwKJjGx4cVk3ngAQixwcxjYAg2Q7vmUR/hpwInMdw7OhC2qyf41vTPkudQAORS0DdLtOGQxb4fH2VYGsvJCkeWPeUwtf1/tuIhzXEThoCZzzSJqqjUtbaPI3ntHm3T5uf849hGUA0zU8ni5W+EEn3/0Y6oUhQFw9z0aGjkljBbAlFXc0y82G2wkd7VdgWa5KTgJJNjNwZMfmdnUIUn1JU5LiWX5UZEZbVlKSN76mlmjUR2ku+fucTNlO4IAAahnLjBhlvQNR9pe9swGBgq0YR7P3VCyI/seYwQ4QBzy9X+HPePgoF8WfKaJ4MBOhLCGHae6Z8xkNXwni9QAKvTNtVA56x8YJflZ/VvONRSlsSLmiSyNMnTjTaE1ko81zkzGEnVwEhjCzlwIqpxmpDAqwsEmtpdr3xpc7i/ZX3f2TzT3M0FdxIEQvO1jgmmiN+D1YpMduAzEhBtj2OBkMN/rv6p7Th4pSH6f5aH3aTvwFTl7EOSgGASI7ttyMehzpm4AVyK+bFEaFg9gnZsSUPpsbAe/0RFhrH+EXZ12Z7thf4dzN1+Sn+G8QrDA1VKaN4IFxD1rQz9Xq9Coii9S9/hPbTGjyBwFH3H1UdQuz5KsgPDEHua4/kPg2Gp/IIItsaLWBqiT9XH45MiQxSosGJ56H/0F2cjcCFd72l1665RNHURdC3lspI77esfJsl+rXXabkAy7vxDXG/XGGcKpwiKDPFfvMEgjkAHil4Za1F36RnyxxvdIAzvgfH8knukYDck07tc++DP4TdWeI7HXuq5Yl6VVFrUQtf64/dkXewlKZSHQo6YvCSpREB0GDrz+Ys2GfO8nw2SwrYwaf88AifzlPvP17bf1mI3AuccJvAjZIpBmqvharKFAebEjVKfGAwpQjWoXlm9LROsq9bCk1UeQ3CJxJqprzssS/Q04JeS1ReCCubL3J7sx86spkP4eNpp95UF+8K748icIs8vdILFklk9skQqi1So6cx3X906pvy1vz+KipTJ8fiVJxsV5MmT0XwA";const Ha=44032,$l=4352,Ul=4449,Ml=4519,ZE=19,XE=21,Ki=28,Fl=XE*Ki,S9=ZE*Fl,T9=Ha+S9,N9=$l+ZE,P9=Ul+XE,x9=Ml+Ki;function Bo(t){return t>>24&255}function eA(t){return t&16777215}let ip,_w,op,rl;function O9(){let t=GE(I9);ip=new Map(KE(t).flatMap((e,r)=>e.map(n=>[n,r+1<<24]))),_w=new Set(ja(t)),op=new Map,rl=new Map;for(let[e,r]of QE(t)){if(!_w.has(e)&&r.length==2){let[n,s]=r,i=rl.get(n);i||(i=new Map,rl.set(n,i)),i.set(s,e)}op.set(e,r.reverse())}}function tA(t){return t>=Ha&&t<T9}function R9(t,e){if(t>=$l&&t<N9&&e>=Ul&&e<P9)return Ha+(t-$l)*Fl+(e-Ul)*Ki;if(tA(t)&&e>Ml&&e<x9&&(t-Ha)%Ki==0)return t+(e-Ml);{let r=rl.get(t);return r&&(r=r.get(e),r)?r:-1}}function rA(t){ip||O9();let e=[],r=[],n=!1;function s(i){let o=ip.get(i);o&&(n=!0,i|=o),e.push(i)}for(let i of t)for(;;){if(i<128)e.push(i);else if(tA(i)){let o=i-Ha,a=o/Fl|0,l=o%Fl/Ki|0,c=o%Ki;s($l+a),s(Ul+l),c>0&&s(Ml+c)}else{let o=op.get(i);o?r.push(...o):s(i)}if(!r.length)break;i=r.pop()}if(n&&e.length>1){let i=Bo(e[0]);for(let o=1;o<e.length;o++){let a=Bo(e[o]);if(a==0||i<=a){i=a;continue}let l=o-1;for(;;){let c=e[l+1];if(e[l+1]=e[l],e[l]=c,!l||(i=Bo(e[--l]),i<=a))break}i=Bo(e[o])}}return e}function D9(t){let e=[],r=[],n=-1,s=0;for(let i of t){let o=Bo(i),a=eA(i);if(n==-1)o==0?n=a:e.push(a);else if(s>0&&s>=o)o==0?(e.push(n,...r),r.length=0,n=a):r.push(a),s=o;else{let l=R9(n,a);l>=0?n=l:s==0&&o==0?(e.push(n),n=a):(r.push(a),s=o)}}return n>=0&&e.push(n,...r),e}function nA(t){return rA(t).map(eA)}function k9(t){return D9(rA(t))}const Cw=45,sA=".",iA=65039,oA=1,Bl=t=>Array.from(t);function qa(t,e){return t.P.has(e)||t.Q.has(e)}class $9 extends Array{get is_emoji(){return!0}}let ap,aA,Ss,cp,cA,$i,Fd,Ci,gs,Iw,lp;function yf(){if(ap)return;let t=GE(p9);const e=()=>ja(t),r=()=>new Set(e()),n=(u,d)=>d.forEach(h=>u.add(h));ap=new Map(QE(t)),aA=r(),Ss=e(),cp=new Set(e().map(u=>Ss[u])),Ss=new Set(Ss),cA=r(),r();let s=KE(t),i=t();const o=()=>{let u=new Set;return e().forEach(d=>n(u,s[d])),n(u,e()),u};$i=za(u=>{let d=za(t).map(h=>h+96);if(d.length){let h=u>=i;d[0]-=32,d=Gi(d),h&&(d=`Restricted[${d}]`);let p=o(),g=o(),f=!t();return{N:d,P:p,Q:g,M:f,R:h}}}),Fd=r(),Ci=new Map;let a=e().concat(Bl(Fd)).sort((u,d)=>u-d);a.forEach((u,d)=>{let h=t(),p=a[d]=h?a[d-h]:{V:[],M:new Map};p.V.push(u),Fd.has(u)||Ci.set(u,p)});for(let{V:u,M:d}of new Set(Ci.values())){let h=[];for(let g of u){let f=$i.filter(b=>qa(b,g)),y=h.find(({G:b})=>f.some(m=>b.has(m)));y||(y={G:new Set,V:[]},h.push(y)),y.V.push(g),n(y.G,f)}let p=h.flatMap(g=>Bl(g.G));for(let{G:g,V:f}of h){let y=new Set(p.filter(b=>!g.has(b)));for(let b of f)d.set(b,y)}}gs=new Set;let l=new Set;const c=u=>gs.has(u)?l.add(u):gs.add(u);for(let u of $i){for(let d of u.P)c(d);for(let d of u.Q)c(d)}for(let u of gs)!Ci.has(u)&&!l.has(u)&&Ci.set(u,oA);n(gs,nA(gs)),Iw=E9(t).map(u=>$9.from(u)).sort(C9),lp=new Map;for(let u of Iw){let d=[lp];for(let h of u){let p=d.map(g=>{let f=g.get(h);return f||(f=new Map,g.set(h,f)),f});h===iA?d.push(...p):d=p}for(let h of d)h.V=u}}function wf(t){return(lA(t)?"":`${bf(Au([t]))} `)+JE(t)}function bf(t){return`"${t}"‎`}function U9(t){if(t.length>=4&&t[2]==Cw&&t[3]==Cw)throw new Error(`invalid label extension: "${Gi(t.slice(0,4))}"`)}function M9(t){for(let r=t.lastIndexOf(95);r>0;)if(t[--r]!==95)throw new Error("underscore allowed only at start")}function F9(t){let e=t[0],r=Ew.get(e);if(r)throw Jo(`leading ${r}`);let n=t.length,s=-1;for(let i=1;i<n;i++){e=t[i];let o=Ew.get(e);if(o){if(s==i)throw Jo(`${r} + ${o}`);s=i+1,r=o}}if(s==n)throw Jo(`trailing ${r}`)}function Au(t,e=1/0,r=JE){let n=[];B9(t[0])&&n.push("◌"),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let s=0,i=t.length;for(let o=0;o<i;o++){let a=t[o];lA(a)&&(n.push(Gi(t.slice(s,o))),n.push(r(a)),s=o+1)}return n.push(Gi(t.slice(s,i))),n.join("")}function B9(t,e){return yf(),Ss.has(t)}function lA(t){return yf(),cA.has(t)}function L9(t){return q9(j9(t,k9,G9))}function j9(t,e,r){if(!t)return[];yf();let n=0;return t.split(sA).map(s=>{let i=_9(s),o={input:i,offset:n};n+=i.length+1;try{let a=o.tokens=V9(i,e,r),l=a.length,c;if(!l)throw new Error("empty label");let u=o.output=a.flat();if(M9(u),!(o.emoji=l>1||a[0].is_emoji)&&u.every(h=>h<128))U9(u),c="ASCII";else{let h=a.flatMap(p=>p.is_emoji?[]:p);if(!h.length)c="Emoji";else{if(Ss.has(u[0]))throw Jo("leading combining mark");for(let f=1;f<l;f++){let y=a[f];if(!y.is_emoji&&Ss.has(y[0]))throw Jo(`emoji + combining mark: "${Gi(a[f-1])} + ${Au([y[0]])}"`)}F9(u);let p=Bl(new Set(h)),[g]=H9(p);W9(g,h),z9(g,p),c=g.N}}o.type=c}catch(a){o.error=a}return o})}function z9(t,e){let r,n=[];for(let s of e){let i=Ci.get(s);if(i===oA)return;if(i){let o=i.M.get(s);if(r=r?r.filter(a=>o.has(a)):Bl(o),!r.length)return}else n.push(s)}if(r){for(let s of r)if(n.every(i=>qa(s,i)))throw new Error(`whole-script confusable: ${t.N}/${s.N}`)}}function H9(t){let e=$i;for(let r of t){let n=e.filter(s=>qa(s,r));if(!n.length)throw $i.some(s=>qa(s,r))?dA(e[0],r):uA(r);if(e=n,n.length==1)break}return e}function q9(t){return t.map(({input:e,error:r,output:n})=>{if(r){let s=r.message;throw new Error(t.length==1?s:`Invalid label ${bf(Au(e,63))}: ${s}`)}return Gi(n)}).join(sA)}function uA(t){return new Error(`disallowed character: ${wf(t)}`)}function dA(t,e){let r=wf(e),n=$i.find(s=>s.P.has(e));return n&&(r=`${n.N} ${r}`),new Error(`illegal mixture: ${t.N} + ${r}`)}function Jo(t){return new Error(`illegal placement: ${t}`)}function W9(t,e){for(let r of e)if(!qa(t,r))throw dA(t,r);if(t.M){let r=nA(e);for(let n=1,s=r.length;n<s;n++)if(cp.has(r[n])){let i=n+1;for(let o;i<s&&cp.has(o=r[i]);i++)for(let a=n;a<i;a++)if(r[a]==o)throw new Error(`duplicate non-spacing marks: ${wf(o)}`);if(i-n>Aw)throw new Error(`excessive non-spacing marks: ${bf(Au(r.slice(n-1,i)))} (${i-n}/${Aw})`);n=i}}}function V9(t,e,r){let n=[],s=[];for(t=t.slice().reverse();t.length;){let i=K9(t);if(i)s.length&&(n.push(e(s)),s=[]),n.push(r(i));else{let o=t.pop();if(gs.has(o))s.push(o);else{let a=ap.get(o);if(a)s.push(...a);else if(!aA.has(o))throw uA(o)}}}return s.length&&n.push(e(s)),n}function G9(t){return t.filter(e=>e!=iA)}function K9(t,e){let r=lp,n,s=t.length;for(;s&&(r=r.get(t[--s]),!!r);){let{V:i}=r;i&&(n=i,t.length=s)}return n}function Q9(t){return L9(t)}function Y9(t){return Q9(t)}function J9(t){let e=[];function r(n){return ea.parseEvmChainId(n)||1}return n=>({id:j.CONNECTOR_ID.AUTH,name:j.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:j.CHAIN.EVM,async connect(s={}){var d;const i=await this.getProvider();let o=s.chainId;if(s.isReconnecting){const h=ea.parseEvmChainId(i.getLastUsedChainId()||""),p=(d=t.chains)==null?void 0:d[0].id;if(o=h||p,!o)throw new Error("ChainId not found in provider")}const{address:a,chainId:l,accounts:c}=await i.connect({chainId:o,preferredAccountType:z.state.defaultAccountTypes.eip155});e=(c==null?void 0:c.map(h=>h.address))||[a],await i.getSmartAccountEnabledNetworks();const u=r(l);return{accounts:e,account:a,chainId:u,chain:{id:u,unsuported:!1}}},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(n.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){return this.provider||(this.provider=Ri.getInstance({projectId:t.options.projectId,enableLogger:t.options.enableAuthLogger,onTimeout:()=>{Ni.open(Ti.ALERT_ERRORS.SOCIALS_TIMEOUT,"error")}})),Promise.resolve(this.provider)},async getChainId(){const s=await this.getProvider(),{chainId:i}=await s.getChainId();return r(i)},async isAuthorized(){const s=await this.getProvider();return Promise.resolve(s.getLoginEmailUsed())},async switchChain({chainId:s}){var i;try{const o=n.chains.find(c=>c.id===s);if(!o)throw new tn(new Error("chain not found on connector."));const l=await(await this.getProvider()).connect({chainId:s,preferredAccountType:z.state.defaultAccountTypes.eip155});return e=((i=l==null?void 0:l.accounts)==null?void 0:i.map(c=>c.address))||[l.address],n.emitter.emit("change",{chainId:Number(s),accounts:e}),o}catch(o){throw o instanceof Error?new tn(o):o}},onAccountsChanged(s){s.length===0?this.onDisconnect():n.emitter.emit("change",{accounts:s.map(Es)})},onChainChanged(s){const i=Number(s);n.emitter.emit("change",{chainId:i})},async onDisconnect(s){await(await this.getProvider()).disconnect()}})}vf.type="walletConnect";function vf(t,e,r){const n=t.isNewChainsStale??!0;let s,i,o,a,l,c,u;return d=>({id:"walletConnect",name:"WalletConnect",type:vf.type,async setup(){const h=await this.getProvider().catch(()=>null);h&&(a||(a=this.onConnect.bind(this),h.on("connect",a)),c||(c=this.onSessionDelete.bind(this),h.on("session_delete",c)))},async connect({...h}={}){try{const p=await this.getProvider();if(!p)throw new Un;l||(l=this.onDisplayUri,p.on("display_uri",l));const g=await this.isChainsStale();p.session&&g&&await p.disconnect();const f=z.state.universalProviderConfigOverride;if(!p.session||g){const w=bu.createNamespaces(r,f);await p.connect({optionalNamespaces:w,..."pairingTopic"in h?{pairingTopic:h.pairingTopic}:{}}),this.setRequestedChainsIds(r.map(C=>Number(C.id)))}const y=await this.getAccounts(),b=await this.getChainId();l&&(p.removeListener("display_uri",l),l=void 0),a&&(p.removeListener("connect",a),a=void 0),i||(i=this.onAccountsChanged.bind(this),p.on("accountsChanged",i)),o||(o=this.onChainChanged.bind(this),p.on("chainChanged",o)),u||(u=this.onDisconnect.bind(this),p.on("disconnect",u)),c||(c=this.onSessionDelete.bind(this),p.on("session_delete",c));const m=f==null?void 0:f.defaultChain;return p.setDefaultChain(m??`eip155:${b}`),{accounts:y,chainId:b}}catch(p){throw/(user rejected|connection request reset)/i.test(p==null?void 0:p.message)?new ut(p):p}},async disconnect(){const h=await this.getProvider();try{await(h==null?void 0:h.disconnect())}catch(p){if(!/No matching key/i.test(p.message))throw p}finally{o&&(h==null||h.removeListener("chainChanged",o),o=void 0),u&&(h==null||h.removeListener("disconnect",u),u=void 0),a||(a=this.onConnect.bind(this),h==null||h.on("connect",a)),i&&(h==null||h.removeListener("accountsChanged",i),i=void 0),c&&(h==null||h.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var f,y,b;const h=await this.getProvider();if(!((f=h==null?void 0:h.session)!=null&&f.namespaces))return[];const p=(b=(y=h==null?void 0:h.session)==null?void 0:y.namespaces[j.CHAIN.EVM])==null?void 0:b.accounts;return(p==null?void 0:p.map(m=>m.split(":")[2]))??[]},async getProvider({chainId:h}={}){var f,y;s||(s=await e.getUniversalProvider(),s==null||s.events.setMaxListeners(Number.POSITIVE_INFINITY));const p=Z.getActiveNamespace(),g=(f=e.getCaipNetwork())==null?void 0:f.id;if(h&&g!==h&&p){const b=Z.getStoredActiveCaipNetworkId(),m=e==null?void 0:e.getCaipNetworks(p),w=m==null?void 0:m.find(C=>C.id===b);w&&w.chainNamespace===j.CHAIN.EVM&&await((y=this.switchChain)==null?void 0:y.call(this,{chainId:Number(w.id)}))}return s},async getChainId(){var y,b,m,w;const h=(y=e.getCaipNetwork(j.CHAIN.EVM))==null?void 0:y.id;if(h)return h;const g=(w=(m=(b=(await this.getProvider()).session)==null?void 0:b.namespaces[j.CHAIN.EVM])==null?void 0:m.chains)==null?void 0:w[0],f=r.find(C=>C.id===g);return f==null?void 0:f.id},async isAuthorized(){try{const[h,p]=await Promise.all([this.getAccounts(),this.getProvider()]);return h.length?await this.isChainsStale()&&p.session?(await p.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:h,chainId:p}){var y,b,m,w;const g=await this.getProvider();if(!g)throw new Un;const f=r.find(C=>C.id===p);if(!f)throw new tn(new La);try{await g.request({method:"wallet_switchEthereumChain",params:[{chainId:ve(p)}]}),f!=null&&f.caipNetworkId&&g.setDefaultChain(f==null?void 0:f.caipNetworkId),d.emitter.emit("change",{chainId:Number(p)});const C=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...C,p]),{...f,id:f.id}}catch(C){const _=C;if(/(?:user rejected)/iu.test(_.message))throw new ut(_);try{let v;h!=null&&h.blockExplorerUrls?v=h.blockExplorerUrls:v=(y=f.blockExplorers)!=null&&y.default.url?[(b=f.blockExplorers)==null?void 0:b.default.url]:[];const A=((w=(m=f.rpcUrls)==null?void 0:m.chainDefault)==null?void 0:w.http)||[],N={blockExplorerUrls:v,chainId:ve(p),chainName:f.name,iconUrls:h==null?void 0:h.iconUrls,nativeCurrency:f.nativeCurrency,rpcUrls:A};await g.request({method:"wallet_addEthereumChain",params:[N]});const T=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...T,p]),{...f,id:f.id}}catch(v){throw new ut(v)}}},onAccountsChanged(h){h.length===0?this.onDisconnect():d.emitter.emit("change",{accounts:h.map(p=>Es(p))})},onChainChanged(h){const p=Number(h);d.emitter.emit("change",{chainId:p})},onConnect(h){this.setRequestedChainsIds(r.map(p=>Number(p.id)))},async onDisconnect(h){this.setRequestedChainsIds([]),d.emitter.emit("disconnect");const p=await this.getProvider();i&&(p.removeListener("accountsChanged",i),i=void 0),o&&(p.removeListener("chainChanged",o),o=void 0),u&&(p.removeListener("disconnect",u),u=void 0),c&&(p.removeListener("session_delete",c),c=void 0),a||(a=this.onConnect.bind(this),p.on("connect",a))},onDisplayUri(h){d.emitter.emit("message",{type:"display_uri",data:h})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var g,f,y;if(!((g=s==null?void 0:s.session)!=null&&g.namespaces))return[];const h=(y=(f=s==null?void 0:s.session)==null?void 0:f.namespaces[j.CHAIN.EVM])==null?void 0:y.accounts;return(h==null?void 0:h.map(b=>Number.parseInt(b.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var p;const h=await((p=d.storage)==null?void 0:p.getItem(this.requestedChainsStorageKey))??[];return[...new Set(h)]},async isChainsStale(){if(!n)return!1;const h=d.chains.map(f=>f.id),p=this.getNamespaceChainsIds();if(p.length&&!p.some(f=>h.includes(f)))return!1;const g=await this.getRequestedChainsIds();return!h.every(f=>g.includes(Number(f)))},async setRequestedChainsIds(h){var p;await((p=d.storage)==null?void 0:p.setItem(this.requestedChainsStorageKey,h))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const Do=Je({pendingTransactions:0}),Sw={state:Do,subscribeKey(t,e){return tr(Do,t,e)},increase(t){Do[t]+=1},decrease(t){Do[t]-=1},reset(t){Do[t]=0}};function Z9(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}const X9={enable:!1,pollingInterval:3e4};class ej extends zE{constructor(e){const r=Yr.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super({projectId:e.projectId,networks:r,adapterType:j.ADAPTER_TYPES.WAGMI,namespace:j.CHAIN.EVM}),this.balancePromises={},this.pendingTransactionsFilter={...X9,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:r}),this.setupWatchers()}async getAccounts(e){var i;const r=this.getWagmiConnector(e.id);if(!r)return{accounts:[]};if(r.id===j.CONNECTOR_ID.AUTH){const o=r.provider,{address:a,accounts:l}=await o.connect({preferredAccountType:z.state.defaultAccountTypes.eip155});return Promise.resolve({accounts:(l||[{address:a,type:"eoa"}]).map(c=>ue.createAccount("eip155",c.address,c.type))})}const{addresses:n,address:s}=Dl(this.wagmiConfig);return Promise.resolve({accounts:(i=n||[s])==null?void 0:i.map(o=>ue.createAccount("eip155",o||"","eoa"))})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(r=>r.id===e)}createConfig(e){this.caipNetworks=e.networks,this.wagmiChains=this.caipNetworks.filter(s=>s.chainNamespace===j.CHAIN.EVM);const r={},n=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,l;const i=(a=e.transports)==null?void 0:a[s.id],o=Yr.getCaipNetworkId(s);i?r[s.id]=Yr.extendWagmiTransports(s,e.projectId,i):r[s.id]=Yr.getViemTransport(s,e.projectId,(l=e.customRpcUrls)==null?void 0:l[o])}),this.wagmiConfig=h9({...e,chains:this.wagmiChains,connectors:n,transports:r})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=GL(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),Sw.increase("pendingTransactions")}});const e=Sw.subscribeKey("pendingTransactions",r=>{var n;r>=j.LIMITS.PENDING_TRANSACTIONS&&((n=this.unwatchPendingTransactions)==null||n.call(this),e())})}setupWatchers(){WL(this.wagmiConfig,{onChange:(e,r)=>{e.status==="disconnected"&&r.address&&this.emit("disconnect"),e.status==="connected"&&((e.address!==(r==null?void 0:r.address)||r.status!=="connected")&&(this.setupWatchPendingTransactions(),this.emit("accountChanged",{address:e.address,chainId:e.chainId})),e.chainId!==(r==null?void 0:r.chainId)&&this.emit("switchNetwork",{address:e.address,chainId:e.chainId}))}})}async addThirdPartyConnectors(e){var n,s;const r=[];if(e.enableCoinbase!==!1)try{const{coinbaseWallet:i}=await Zt(async()=>{const{coinbaseWallet:o}=await import("./index-CGS4Xqe0.js");return{coinbaseWallet:o}},__vite__mapDeps([39,1,2]));i&&r.push(i({version:"4",appName:((n=e.metadata)==null?void 0:n.name)??"Unknown",appLogoUrl:((s=e.metadata)==null?void 0:s.icons[0])??"Unknown",preference:e.coinbasePreference??"all"}))}catch(i){console.error("Failed to import Coinbase Wallet SDK:",i)}r.forEach(i=>{const o=this.wagmiConfig._internal.connectors.setup(i);this.wagmiConfig._internal.connectors.setState(a=>[...a,o])})}addWagmiConnectors(e,r){var o,a,l,c,u;const n=[];e.enableWalletConnect!==!1&&n.push(vf(e,r,this.caipNetworks)),e.enableInjected!==!1&&n.push(Eu({shimDisconnect:!0}));const s=((o=e.features)==null?void 0:o.email)===void 0?ht.DEFAULT_FEATURES.email:(a=e.features)==null?void 0:a.email,i=(l=e.features)!=null&&l.socials?((u=(c=e.features)==null?void 0:c.socials)==null?void 0:u.length)>0:ht.DEFAULT_FEATURES.socials;(s||i)&&n.push(J9({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),n.forEach(d=>{const h=this.wagmiConfig._internal.connectors.setup(d);this.wagmiConfig._internal.connectors.setState(p=>[...p,h])})}async signMessage(e){try{return{signature:await zL(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:r}=Dl(this.wagmiConfig),n={account:e.address,to:e.to,value:e.value,gas:e.gas,gasPrice:e.gasPrice,data:e.data,chainId:r,type:"legacy",parameters:["nonce"]};await BL(this.wagmiConfig,n);const s=await jL(this.wagmiConfig,n);return await KL(this.wagmiConfig,{hash:s,timeout:25e3}),{hash:s}}async writeContract(e){var o;const{caipNetwork:r,...n}=e,s=Number(ea.caipNetworkIdToNumber(r.caipNetworkId));return{hash:await QL(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:n.tokenAddress,account:n.fromAddress,abi:n.abi,functionName:n.method,args:n.args,__mode:"prepared"})}}async getEnsAddress(e){const{name:r,caipNetwork:n}=e;try{if(!this.wagmiConfig)throw new Error("networkControllerClient:getApprovedCaipNetworksData - wagmiConfig is undefined");let s=!1,i=!1;return S1(r)&&(i=await bu.resolveReownName(r)||!1),n.id===1&&(s=await UL(this.wagmiConfig,{name:Y9(r),chainId:n.id})),{address:s||i||!1}}catch{return{address:!1}}}async estimateGas(e){try{return{gas:await OL(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return L4(e.value,e.decimals)}formatUnits(e){return io(e.value,e.decimals)}async addWagmiConnector(e,r){var s;if(e.id===j.CONNECTOR_ID.AUTH||e.id===j.CONNECTOR_ID.WALLET_CONNECT)return;const n=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:Hn.ConnectorExplorerIds[e.id],imageUrl:((s=r==null?void 0:r.connectorImages)==null?void 0:s[e.id])??e.icon,name:Hn.ConnectorNamesMap[e.id]??e.name,imageId:Hn.ConnectorImageIds[e.id],type:Hn.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===j.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:n,chain:this.namespace,chains:[]})}async syncConnectors(e,r){VL(this.wagmiConfig,{onChange:n=>n.forEach(s=>this.addWagmiConnector(s,e))}),await Promise.all(this.wagmiConfig.connectors.map(n=>this.addWagmiConnector(n,e))),this.addWagmiConnectors(e,r),await this.addThirdPartyConnectors(e)}async syncConnection(e){const{id:r}=e,s=bi(this.wagmiConfig).find(a=>a.connector.id===r),i=this.getWagmiConnector(r),o=await(i==null?void 0:i.getProvider());return{chainId:Number(s==null?void 0:s.chainId),address:s==null?void 0:s.accounts[0],provider:o,type:s==null?void 0:s.connector.type,id:s==null?void 0:s.connector.id}}async connectWalletConnect(e){const r=this.getWalletConnectConnector();await r.authenticate();const n=this.getWagmiConnector("walletConnect");if(!n)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");return await mw(this.wagmiConfig,{connector:n,chainId:e?Number(e):void 0}),{clientId:await r.provider.client.core.crypto.getClientId()}}async connect(e){var c;const{id:r,provider:n,type:s,info:i,chainId:o}=e,a=this.getWagmiConnector(r);if(!a)throw new Error("connectionControllerClient:connectExternal - connector is undefined");n&&i&&a.id===j.CONNECTOR_ID.EIP6963&&((c=a.setEip6963Wallet)==null||c.call(a,{provider:n,info:i}));const l=await mw(this.wagmiConfig,{connector:a,chainId:o?Number(o):void 0});return{address:l.accounts[0],chainId:l.chainId,provider:n,type:s,id:r}}async reconnect(e){const{id:r}=e,n=this.getWagmiConnector(r);if(!n)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await LL(this.wagmiConfig,{connectors:[n]})}async getBalance(e){var s;const r=e.address,n=(s=this.caipNetworks)==null?void 0:s.find(i=>i.id===e.chainId);if(!r)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(n&&this.wagmiConfig){const i=`${n.caipNetworkId}:${e.address}`,o=this.balancePromises[i];if(o)return o;const a=Z.getNativeBalanceCacheForCaipAddress(i);return a?{balance:a.balance,symbol:a.symbol}:(this.balancePromises[i]=new Promise(async l=>{var d,h;const c=Number(e.chainId),u=await $L(this.wagmiConfig,{address:e.address,chainId:c,token:(h=(d=e.tokens)==null?void 0:d[n.caipNetworkId])==null?void 0:h.address});Z.updateNativeBalanceCache({caipAddress:i,balance:u.formatted,symbol:u.symbol,timestamp:Date.now()}),l({balance:u.formatted,symbol:u.symbol})}).finally(()=>{delete this.balancePromises[i]}),this.balancePromises[i]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}async getProfile(e){const r=e.chainId,n=await FL(this.wagmiConfig,{address:e.address,chainId:r});if(n){const s=await ML(this.wagmiConfig,{name:n,chainId:r});return{profileName:n,profileImage:s??void 0}}return{profileName:void 0,profileImage:void 0}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(){const e=bi(this.wagmiConfig);await Promise.all(e.map(async r=>{const n=this.getWagmiConnector(r.connector.id);n&&await xL(this.wagmiConfig,{connector:n})}))}async switchNetwork(e){await qL(this.wagmiConfig,{chainId:e.caipNetwork.id}),await super.switchNetwork(e)}async getCapabilities(e){var a,l;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const n=bi(this.wagmiConfig)[0],s=n?this.getWagmiConnector(n.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(l=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:l.capabilities;if(o){const u=Z9(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const n=bi(this.wagmiConfig)[0],s=n?this.getWagmiConnector(n.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const n=bi(this.wagmiConfig)[0],s=n?this.getWagmiConnector(n.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const n=bi(this.wagmiConfig)[0],s=n?this.getWagmiConnector(n.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setUniversalProvider(e){this.addConnector(new mf({provider:e,caipNetworks:this.caipNetworks||[],namespace:"eip155"}))}}var Tw={};const hA={mainnet:["ethereum","arbitrum","base"],testnet:["sepolia","arbitrum-sepolia","base-sepolia"]},tj={ethereum:{id:"ethereum",name:"Ethereum",chainId:1,isTestnet:!1,chainType:"EVM",rpcUrl:"https://eth.llamarpc.com",fallbackRpcUrls:["https://1rpc.io/eth","https://ethereum-rpc.publicnode.com"],blockExplorerUrl:"https://etherscan.io"},arbitrum:{id:"arbitrum",name:"Arbitrum",chainId:42161,isTestnet:!1,chainType:"EVM",rpcUrl:"https://arb1.arbitrum.io/rpc",fallbackRpcUrls:["https://1rpc.io/arb","https://arbitrum-one-rpc.publicnode.com"],blockExplorerUrl:"https://arbiscan.io"},bnb:{id:"bnb",name:"BNB Smart Chain",chainId:56,isTestnet:!1,chainType:"EVM",rpcUrl:"https://bsc-dataseed.bnbchain.org",blockExplorerUrl:"https://bscscan.com"},optimism:{id:"optimism",name:"Optimism",chainId:10,isTestnet:!1,chainType:"EVM",rpcUrl:"https://mainnet.optimism.io",fallbackRpcUrls:["https://1rpc.io/op","https://optimism-rpc.publicnode.com"],blockExplorerUrl:"https://optimistic.etherscan.io"},base:{id:"base",name:"Base",chainId:8453,isTestnet:!1,chainType:"EVM",rpcUrl:"https://base.llamarpc.com",fallbackRpcUrls:["https://1rpc.io/base","https://base-rpc.publicnode.com"],blockExplorerUrl:"https://basescan.org"},mantle:{id:"mantle",name:"Mantle",chainId:5e3,isTestnet:!1,chainType:"EVM",rpcUrl:"https://rpc.mantle.xyz",fallbackRpcUrls:["https://1rpc.io/mantle","https://mantle-rpc.publicnode.com"],blockExplorerUrl:"https://mantlescan.xyz"},avalanche:{id:"avalanche",name:"Avalanche",chainId:43114,isTestnet:!1,chainType:"EVM",rpcUrl:"https://avalanche-c-chain-rpc.publicnode.com",fallbackRpcUrls:["https://1rpc.io/avax/c"],blockExplorerUrl:"https://avascan.info"},sei:{id:"sei",name:"Sei",chainId:1329,isTestnet:!1,chainType:"EVM",rpcUrl:"https://sei.drpc.org",fallbackRpcUrls:["https://sei-public.nodies.app"],blockExplorerUrl:"https://seiscan.io"},morph:{id:"morph",name:"Morph",chainId:2818,isTestnet:!1,chainType:"EVM",rpcUrl:"https://rpc.morphl2.io",fallbackRpcUrls:["https://rpc-quicknode.morphl2.io"],blockExplorerUrl:"https://morphscan.io"},sonic:{id:"sonic",name:"Sonic",chainId:146,isTestnet:!1,chainType:"EVM",rpcUrl:"https://rpc.soniclabs.com",fallbackRpcUrls:["https://sonic-rpc.publicnode.com"],blockExplorerUrl:"https://sonicscan.org"},berachain:{id:"berachain",name:"Berachain",chainId:80094,isTestnet:!1,chainType:"EVM",rpcUrl:"https://rpc.berachain.com",fallbackRpcUrls:["https://berachain-rpc.publicnode.com"],blockExplorerUrl:"https://berascan.com"},story:{id:"story",name:"Story",chainId:1514,isTestnet:!1,chainType:"EVM",rpcUrl:"https://mainnet.storyrpc.io",fallbackRpcUrls:["https://rpc.ankr.com/story_mainnet"],blockExplorerUrl:"https://explorer.story.foundation"},mode:{id:"mode",name:"Mode",chainId:34443,isTestnet:!1,chainType:"EVM",rpcUrl:"https://mode.drpc.org",fallbackRpcUrls:["https://mainnet.mode.network"],blockExplorerUrl:"https://modescan.io"},plume:{id:"plume",name:"Plume",chainId:98866,isTestnet:!1,chainType:"EVM",rpcUrl:"https://rpc.plume.org",blockExplorerUrl:"https://explorer.plume.org"},abstract:{id:"abstract",name:"Abstract",chainId:2741,isTestnet:!1,chainType:"EVM",rpcUrl:"https://api.mainnet.abs.xyz",fallbackRpcUrls:["https://abstract.drpc.org"],blockExplorerUrl:"https://explorer.mainnet.abs.xyz"},sepolia:{id:"sepolia",name:"Sepolia",chainId:11155111,isTestnet:!0,chainType:"EVM",rpcUrl:"https://eth-sepolia.public.blastapi.io",fallbackRpcUrls:["https://1rpc.io/sepolia","https://ethereum-sepolia-rpc.publicnode.com"],blockExplorerUrl:"https://sepolia.etherscan.io"},"arbitrum-sepolia":{id:"arbitrum-sepolia",name:"Arbitrum Sepolia",chainId:421614,isTestnet:!0,chainType:"EVM",rpcUrl:"https://sepolia-rollup.arbitrum.io/rpc",blockExplorerUrl:"https://sepolia.arbiscan.io"},bnbTestnet:{id:"bnbTestnet",name:"BNB Smart Chain Testnet",chainId:97,isTestnet:!0,chainType:"EVM",rpcUrl:"https://bsc-testnet.public.blastapi.io",blockExplorerUrl:"https://testnet.bscscan.com/"},"optimism-sepolia":{id:"optimism-sepolia",name:"Optimism Sepolia",chainId:11155420,isTestnet:!0,chainType:"EVM",rpcUrl:"https://sepolia.optimism.io",blockExplorerUrl:"https://sepolia-optimism.etherscan.io"},"base-sepolia":{id:"base-sepolia",name:"Base Sepolia",chainId:84532,isTestnet:!0,chainType:"EVM",rpcUrl:"https://base-sepolia-rpc.publicnode.com",blockExplorerUrl:"https://sepolia.basescan.org"},monadTestnet:{id:"monadTestnet",name:"Monad Testnet",chainId:10143,isTestnet:!0,chainType:"EVM",rpcUrl:"https://testnet-rpc.monad.xyz",blockExplorerUrl:"https://testnet.monadexplorer.com"},abstractTestnet:{id:"abstractTestnet",name:"Abstract Testnet",chainId:11124,isTestnet:!0,chainType:"EVM",rpcUrl:"https://api.testnet.abs.xyz",blockExplorerUrl:"https://sepolia.abscan.org/"},orderlyL2:{id:"orderlyL2",name:"Orderly L2",chainId:291,isTestnet:!1,chainType:"EVM",rpcUrl:"https://rpc.orderly.network",blockExplorerUrl:"https://explorer.orderly.network"},orderlyTestnet:{id:"orderlyTestnet",name:"Orderly Testnet",chainId:4460,isTestnet:!0,chainType:"EVM",rpcUrl:"https://testnet-rpc.orderly.org",blockExplorerUrl:"https://testnet-explorer.orderly.org"},"solana-mainnet-beta":{id:"solana-mainnet-beta",name:"Solana",chainId:900900900,isTestnet:!1,chainType:"SOL",rpcUrl:Tw.SOLANA_MAINNET_RPC_URL||"https://api.mainnet-beta.solana.com",blockExplorerUrl:"https://solscan.io"},"solana-devnet":{id:"solana-devnet",name:"Solana Devnet",chainId:901901901,isTestnet:!0,chainType:"SOL",rpcUrl:Tw.SOLANA_DEVNET_RPC_URL||"https://api.devnet.solana.com",blockExplorerUrl:"https://solscan.io"}},T7={ethereum:"0xABD4C63d2616A5201454168269031355f4764337",arbitrum:"0x4E200fE2f3eFb977d5fd9c430A41531FB04d97B8",base:"0x4E200fE2f3eFb977d5fd9c430A41531FB04d97B8",sepolia:"0x779877A7B0D9E8603169DdbD7836e478b4624789","arbitrum-sepolia":"0xb1D4538B4571d411F07960EF2838Ce337FE1E80E","base-sepolia":"0xb1D4538B4571d411F07960EF2838Ce337FE1E80E","solana-mainnet-beta":"ABt79MkRXUsoHuV2CVQT32YMXQhTparKFjmidQxgiQ6E","solana-devnet":"4zMMC9srt5Ri5X14GAgXhaHii3GnPAEERYPJgZJDncDU"},N7={ethereum:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",arbitrum:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831",base:"0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913",sepolia:"0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238","arbitrum-sepolia":"0x75faf114eafb1BDbe2F0316DF893fd58CE46AA4d","base-sepolia":"0x75faf114eafb1BDbe2F0316DF893fd58CE46AA4d","solana-mainnet-beta":"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v","solana-devnet":"4zMMC9srt5Ri5X14GAgXhaHii3GnPAEERYPJgZJDncDU"};function rj(t){return Object.values(tj).find(e=>e.chainId===t)}function P7(t,e){const r=rj(e);return r?r.chainType==="SOL"&&r.isTestnet?`${r.blockExplorerUrl}/tx/${t}?cluster=devnet`:`${r.blockExplorerUrl}/tx/${t}`:null}function x7(t){return{ethereum:"https://assets.coingecko.com/asset_platforms/images/279/small/ethereum.png",sepolia:"https://assets.coingecko.com/asset_platforms/images/279/small/ethereum.png",base:"https://assets.coingecko.com/asset_platforms/images/131/small/base-network.png","base-sepolia":"https://assets.coingecko.com/asset_platforms/images/131/small/base-network.png",arbitrum:"https://assets.coingecko.com/asset_platforms/images/33/small/AO_logomark.png?1706606717","arbitrum-sepolia":"https://assets.coingecko.com/asset_platforms/images/33/small/AO_logomark.png?1706606717"}[t]||"https://assets.coingecko.com/asset_platforms/images/279/small/ethereum.png"}const O7={mainnet:{ethereum:{vaultAddress:"0x816f722424b49cf1275cc86da9840fbd5a6167e9"},arbitrum:{vaultAddress:"0x816f722424B49Cf1275cc86DA9840Fbd5a6167e9"},bnb:{vaultAddress:"0x816f722424B49Cf1275cc86DA9840Fbd5a6167e9"},optimism:{vaultAddress:"0x816f722424b49cf1275cc86da9840fbd5a6167e9"},base:{vaultAddress:"0x816f722424B49Cf1275cc86DA9840Fbd5a6167e9"},mantle:{vaultAddress:"0x816f722424B49Cf1275cc86DA9840Fbd5a6167e9"},avalanche:{vaultAddress:"0x816f722424B49Cf1275cc86DA9840Fbd5a6167e9"},sei:{vaultAddress:"0x816f722424B49Cf1275cc86DA9840Fbd5a6167e9"},morph:{vaultAddress:"0x816f722424B49Cf1275cc86DA9840Fbd5a6167e9"},sonic:{vaultAddress:"0x816f722424B49Cf1275cc86DA9840Fbd5a6167e9"},berachain:{vaultAddress:"0x816f722424B49Cf1275cc86DA9840Fbd5a6167e9"},story:{vaultAddress:"0x816f722424B49Cf1275cc86DA9840Fbd5a6167e9"},mode:{vaultAddress:"0x816f722424B49Cf1275cc86DA9840Fbd5a6167e9"},plume:{vaultAddress:"0x816f722424B49Cf1275cc86DA9840Fbd5a6167e9"},abstract:{vaultAddress:"0xE80F2396A266e898FBbD251b89CFE65B3e41fD18"},"solana-mainnet-beta":{vaultAddress:"ErBmAD61mGFKvrFNaTJuxoPwqrS8GgtwtqJTJVjFWx9Q"},orderlyL2:{vaultManagerAddress:"0x14a6342A8C1Ef9856898F510FcCE377e46668F33",feeManagerAddress:"0x343Ca787e960cB2cCA0ce8cfB2f38c3739E28a1E",solConnectorAddress:"0xCecAe061aa078e13b5e70D5F9eCee90a3F2B6AeA",ledgerAddress:"0x6F7a338F2aA472838dEFD3283eB360d4Dff5D203"}},staging:{sepolia:{vaultAddress:"0x0EaC556c0C2321BA25b9DC01e4e3c95aD5CDCd2f"},"arbitrum-sepolia":{vaultAddress:"0x0EaC556c0C2321BA25b9DC01e4e3c95aD5CDCd2f"},bnbTestnet:{vaultAddress:"0xaf2036D5143219fa00dDd90e7A2dbF3E36dba050"},"optimism-sepolia":{vaultAddress:"0xEfF2896077B6ff95379EfA89Ff903598190805EC"},"base-sepolia":{vaultAddress:"0xdc7348975aE9334DbdcB944DDa9163Ba8406a0ec"},monadTestnet:{vaultAddress:"0x9442e24203e999db4aE87E35Dc0c8F3C610c29A0"},"solana-devnet":{vaultAddress:"9shwxWDUNhtwkHocsUAmrNAQfBH2DHh4njdAEdHZZkF2"},orderlyTestnet:{vaultManagerAddress:"0x873c120b42C80D528389d85cEA9d4dC0197974aD",feeManagerAddress:"0x0B98ba78DDb29937d895c718ED167DD8f5B2972d",solConnectorAddress:"0x5Bf771A65d057e778C5f0Ed52A0003316f94322D",ledgerAddress:"0x1826B75e2ef249173FC735149AE4B8e9ea10abff"}},qa:{sepolia:{vaultAddress:"0xd5164A5a83c64E59F842bC091E06614b84D95fF5"},"arbitrum-sepolia":{vaultAddress:"0xB15a3a4D451311e03e34d9331C695078Ad5Cf5F1"},"base-sepolia":{vaultAddress:"0xEcb4abe96113c9caA3204e96C63C5377D02cb636"},"solana-devnet":{vaultAddress:"5zBjLor7vEraAt4zp2H82sy9MSqFoDnNa1Lx6EYKTYRZ"},orderlyTestnet:{vaultManagerAddress:"0x3B092aEe40Cb99174E8C73eF90935F9F35943B22",feeManagerAddress:"0x8A929891DE9a648B6A3D05d21362418f756cf728",solConnectorAddress:"0x45b6C6266A7A2170617d8A27A50C642fd68b91c4",ledgerAddress:"0x50F59504D3623Ad99302835da367676d1f7E3D44"}},dev:{sepolia:{vaultAddress:"0x1A26FBE7A6Dc6c12b8E10CD703b0c520Ee996B15"},"arbitrum-sepolia":{vaultAddress:"0x3ac2ba11ca2f9f109d50fb1a46d4c23fcadbbef6"},"solana-devnet":{vaultAddress:"EYJq9eU4GMRUriUJBgGoZ8YLQBXcWaciXuSsEXE7ieQS"},orderlyTestnet:{vaultManagerAddress:"0x4922872C26Befa37AdcA287fF68106013C82FeeD",feeManagerAddress:"0x835E970110E4a46BCA21A7551FEaA5F532F72701",solConnectorAddress:"0x9Dc724b24146BeDD2dA28b8C4B74126169B8f312",ledgerAddress:"0x8794E7260517B1766fc7b55cAfcd56e6bf08600e"}}};var nj={};const pA=nj.WALLET_CONNECT_PROJECT_ID||"67f3ccbaec6f6119a5c91a22793c89e3",sj={name:"Orderly One",description:"Create your own DEX on Orderly Network",url:"https://dex.orderly.network",icons:["https://dex.orderly.network/favicon.webp"]},fA={ethereum:jE,arbitrum:dL,base:pL,sepolia:gL,"arbitrum-sepolia":hL,"base-sepolia":fL},ij=hA.mainnet.map(t=>fA[t]),oj=hA.testnet.map(t=>fA[t]),gA=[...ij,...oj],aj=new ej({networks:gA,projectId:pA,ssr:!1});_L({adapters:[aj],networks:gA,defaultNetwork:jE,projectId:pA,metadata:sj,defaultAccountTypes:{eip155:"eoa"},features:{analytics:!0,email:!1,socials:!1},themeVariables:{"--w3m-border-radius-master":"12px","--w3m-accent":"#7C3AED"}});const R7="https://dex-api.orderly.network";let up=null,dp=!1;function D7(t){up=t}function k7(){dp=!0,up&&up(),setTimeout(()=>{dp=!1},1e3)}function $7(){return dp}export{ht as $,tj as A,F as B,La as C,_n as D,wt as E,Je as F,tr as G,Wo as H,qt as I,re as J,P as K,Nt as L,at as M,Lw as N,ue as O,ae as P,je as Q,De as R,tn as S,$t as T,ut as U,fc as V,ot as W,ze as X,j as Y,Ni as Z,Fy as _,Eu as a,Xn as a$,pe as a0,Z as a1,DU as a2,z as a3,mn as a4,gE as a5,DL as a6,KL as a7,QL as a8,N7 as a9,ou as aA,wv as aB,a7 as aC,o7 as aD,eE as aE,iE as aF,cu as aG,nf as aH,sn as aI,Me as aJ,Vv as aK,g6 as aL,Ed as aM,hu as aN,K6 as aO,Jp as aP,J6 as aQ,W4 as aR,Y6 as aS,rf as aT,kl as aU,vu as aV,$L as aW,qL as aX,ij as aY,oj as aZ,O7 as a_,T7 as aa,x7 as ab,L4 as ac,aj as ad,uj as ae,lr as af,Qe as ag,Or as ah,qo as ai,ye as aj,E7 as ak,IE as al,Xh as am,Ua as an,By as ao,dj as ap,hj as aq,a8 as ar,Pt as as,er as at,c7 as au,pt as av,i7 as aw,FU as ax,Sn as ay,no as az,v7 as b,bi as b0,LL as b1,is as b2,Dl as b3,WL as b4,xL as b5,zL as b6,D7 as b7,Zh as b8,Yc as b9,S7 as c,P7 as d,rj as e,R7 as f,Es as g,k7 as h,$7 as i,Di as j,A7 as k,_7 as l,wB as m,ve as n,C7 as o,Wp as p,R8 as q,Xc as r,vr as s,A6 as t,I7 as u,nE as v,Fs as w,b7 as x,He as y,_v as z};
