import{h as w,j as $,y as d}from"./globalDisconnect-BwfQ2Vw-.js";const b=r=>t=>t.trim()===""?`${r} is required`:null,x=(r=!0)=>t=>{if(r&&t.trim()==="")return null;try{return new URL(t),null}catch{return"Please enter a valid URL"}},P=(r,t)=>e=>e.trim().length<r?`${t} must be at least ${r} characters`:null,D=(r,t)=>e=>e.trim().length>r?`${t} cannot exceed ${r} characters`:null,j=r=>t=>/^[a-zA-Z0-9 .\-_]*$/.test(t.trim())?null:`${r} can only contain letters, numbers, spaces, dots, hyphens, and underscores`,I=(r=[])=>t=>{const e=t.trim();return e.length<5?"Broker ID must be at least 5 characters":e.length>15?"Broker ID cannot exceed 15 characters":/^[a-z0-9_-]+$/.test(e)?e.includes("orderly")?"Broker ID cannot contain 'orderly'":r.includes(e)?"This broker ID is already taken. Please choose another one.":null:"Broker ID must contain only lowercase letters, numbers, hyphens, and underscores"},E=r=>{var t;if(r.success===!1&&((t=r.error)!=null&&t.issues)){const e=r.error.issues;if(Array.isArray(e)&&e.length>0)return e[0].message}if(r.message==="Invalid request body"&&r.error)try{const e=JSON.parse(r.error);if(Array.isArray(e)&&e.length>0)return e[0].message}catch{return r.error}return r.message||"An error occurred"},U=(...r)=>t=>{for(const e of r){const s=e(t);if(s)return s}return null},z=(r,t)=>e=>e&&e.trim().length<r?`${t} must be at least ${r} characters`:null,S=r=>t=>/^[a-zA-Z0-9]*$/.test(t.trim())?null:`${r} can only contain letters, numbers`;async function m({endpoint:r,method:t="GET",body:e,token:s,contentType:n="application/json",useJsonBody:i=!0,showToastOnError:f=!0}){try{const o=r.startsWith("http")?r:`${w}${r.startsWith("/")?r:`/${r}`}`,a={};n&&(a["Content-Type"]=n),s&&(a.Authorization=`Bearer ${s}`);const c={method:t,headers:a};e&&t!=="GET"&&(c.body=i?JSON.stringify(e):e);const u=await fetch(o,c);if(u.status===401)throw $(),f&&d.error("Your session has expired. Please reconnect your wallet."),new Error("Unauthorized: Your session has expired");let l;const y=u.headers.get("content-type");if(y&&y.includes("application/json")?l=await u.json():l=await u.text(),!u.ok){let h="An error occurred";if(typeof l=="object"&&(h=E(l)),u.status===429){const p=new Error(h);throw p.status=429,p.data=l,p}const g=new Error(h);throw g.status=u.status,g}return l}catch(o){const a=o instanceof Error?o.message:"Unknown error occurred",c=(o==null?void 0:o.status)===429;throw f&&!a.includes("Unauthorized: Your session has expired")&&!c&&d.error(`Request failed: ${a}`),console.error("API request failed:",o),o}}async function A({endpoint:r,method:t="POST",formData:e,token:s,showToastOnError:n=!0}){try{const i=r.startsWith("http")?r:`${w}${r.startsWith("/")?r:`/${r}`}`,f={};s&&(f.Authorization=`Bearer ${s}`);const a=await fetch(i,{method:t,headers:f,body:e});if(a.status===401)throw $(),n&&d.error("Your session has expired. Please reconnect your wallet."),new Error("Unauthorized: Your session has expired");let c;const u=a.headers.get("content-type");if(u&&u.includes("application/json")?c=await a.json():c=await a.text(),!a.ok){let l="An error occurred";throw typeof c=="object"&&(l=E(c)),n&&d.error(`API Error: ${l}`),new Error(l)}return c}catch(i){const f=i instanceof Error?i.message:"Unknown error occurred",o=(i==null?void 0:i.status)===429;throw n&&!f.includes("Unauthorized: Your session has expired")&&!o&&d.error(`Request failed: ${f}`),console.error("API request failed:",i),i}}function k(r,t,e={}){return m({endpoint:r,method:"GET",token:t,...e})}function B(r,t,e,s={}){return m({endpoint:r,method:"POST",body:t,token:e,...s})}function T(r,t,e,s={}){return m({endpoint:r,method:"DELETE",body:t,token:e,...s})}function q(r,t={}){const e=new FormData;return Object.entries(r).forEach(([s,n])=>{n!=null&&(Array.isArray(n)||typeof n=="object"?e.append(s,JSON.stringify(n)):e.append(s,String(n)))}),t.primaryLogo&&e.append("primaryLogo",t.primaryLogo,"primaryLogo.webp"),t.secondaryLogo&&e.append("secondaryLogo",t.secondaryLogo,"secondaryLogo.webp"),t.favicon&&e.append("favicon",t.favicon,"favicon.webp"),t.pnlPosters&&t.pnlPosters.forEach((s,n)=>{s&&e.append(`pnlPoster${n}`,s,`pnlPoster${n}.webp`)}),e}function W(r,t,e,s={}){return A({endpoint:r,method:"POST",formData:t,token:e,...s})}function Y(r,t,e,s={}){return A({endpoint:r,method:"PUT",formData:t,token:e,...s})}export{m as a,B as b,q as c,U as d,T as e,W as f,k as g,x as h,S as i,j,P as k,D as m,z as o,Y as p,b as r,I as v};
