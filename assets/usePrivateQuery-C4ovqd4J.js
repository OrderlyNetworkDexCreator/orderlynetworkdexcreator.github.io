import{aW as _t,b_ as ue,b$ as le,c0 as fe}from"./ModalContext-mlJE0UaS.js";import{a as de,r as O,W as Dt}from"./index-gtzDq4NN.js";import{u as Kt}from"./OrderlyKeyContext-4mPVxEwy.js";async function Gt(t,e){const n=_t(),r=t.startsWith("http")?t:`${n}${t}`,a=await fetch(r,{...e,headers:he(e.headers,e.method)});if(a.ok)return await a.json();try{const s=await a.json();throw a.status===400?new Error(s.message||s.code||a.statusText):new Error(s.message||s.code||a.statusText)}catch(s){throw s}}function he(t={},e){const n=new Headers(t);return n.has("Content-Type")||(e!=="DELETE"?n.append("Content-Type","application/json;charset=utf-8"):n.append("Content-Type","application/x-www-form-urlencoded")),n}async function me(t,e,n){const r=await Gt(t,{method:"GET",...e});if(r.success)return typeof n=="function"?n(r.data):Array.isArray(r.data.rows)?r.data.rows:r.data;throw new Error(r.message)}async function Ze(t,e,n){return await Gt(t,{method:"POST",body:JSON.stringify(e),...n})}const Jt=(t,e={},n)=>me(t,e,n==null?void 0:n.formatter);var ut={exports:{}},lt={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pt;function pe(){if(Pt)return lt;Pt=1;var t=de();function e(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,a=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function c(l,d){var m=d(),A=r({inst:{value:m,getSnapshot:d}}),p=A[0].inst,$=A[1];return s(function(){p.value=m,p.getSnapshot=d,u(p)&&$({inst:p})},[l,m,d]),a(function(){return u(p)&&$({inst:p}),l(function(){u(p)&&$({inst:p})})},[l]),o(m),m}function u(l){var d=l.getSnapshot;l=l.value;try{var m=d();return!n(l,m)}catch{return!0}}function S(l,d){return d()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?S:c;return lt.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:g,lt}var Wt;function Ee(){return Wt||(Wt=1,ut.exports=pe()),ut.exports}var we=Ee();const zt=0,Qt=1,Yt=2,Mt=3;var $t=Object.prototype.hasOwnProperty;function wt(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&wt(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if($t.call(t,n)&&++r&&!$t.call(e,n)||!(n in e)||!wt(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const j=new WeakMap,W=()=>{},_=W(),gt=Object,f=t=>t===_,V=t=>typeof t=="function",M=(t,e)=>({...t,...e}),Xt=t=>V(t.then),ft={},st={},Ct="undefined",Z=typeof window!=Ct,yt=typeof document!=Ct,ge=Z&&"Deno"in window,ye=()=>Z&&typeof window.requestAnimationFrame!=Ct,Zt=(t,e)=>{const n=j.get(t);return[()=>!f(e)&&t.get(e)||ft,r=>{if(!f(e)){const a=t.get(e);e in st||(st[e]=a),n[5](e,M(a,r),a||ft)}},n[6],()=>!f(e)&&e in st?st[e]:!f(e)&&t.get(e)||ft]};let St=!0;const Se=()=>St,[Rt,vt]=Z&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[W,W],Re=()=>{const t=yt&&document.visibilityState;return f(t)||t!=="hidden"},ve=t=>(yt&&document.addEventListener("visibilitychange",t),Rt("focus",t),()=>{yt&&document.removeEventListener("visibilitychange",t),vt("focus",t)}),Oe=t=>{const e=()=>{St=!0,t()},n=()=>{St=!1};return Rt("online",e),Rt("offline",n),()=>{vt("online",e),vt("offline",n)}},Te={isOnline:Se,isVisible:Re},_e={initFocus:ve,initReconnect:Oe},qt=!Dt.useId,X=!Z||ge,De=t=>ye()?window.requestAnimationFrame(t):setTimeout(t,1),dt=X?O.useEffect:O.useLayoutEffect,ht=typeof navigator<"u"&&navigator.connection,Ht=!X&&ht&&(["slow-2g","2g"].includes(ht.effectiveType)||ht.saveData),ot=new WeakMap,Ce=t=>gt.prototype.toString.call(t),mt=(t,e)=>t===`[object ${e}]`;let Ae=0;const Ot=t=>{const e=typeof t,n=Ce(t),r=mt(n,"Date"),a=mt(n,"RegExp"),s=mt(n,"Object");let o,c;if(gt(t)===t&&!r&&!a){if(o=ot.get(t),o)return o;if(o=++Ae+"~",ot.set(t,o),Array.isArray(t)){for(o="@",c=0;c<t.length;c++)o+=Ot(t[c])+",";ot.set(t,o)}if(s){o="#";const u=gt.keys(t).sort();for(;!f(c=u.pop());)f(t[c])||(o+=c+":"+Ot(t[c])+",");ot.set(t,o)}}else o=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},At=t=>{if(V(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?Ot(t):"",[t,e]};let be=0;const Tt=()=>++be;async function te(...t){const[e,n,r,a]=t,s=M({populateCache:!0,throwOnError:!0},typeof a=="boolean"?{revalidate:a}:a||{});let o=s.populateCache;const c=s.rollbackOnError;let u=s.optimisticData;const S=d=>typeof c=="function"?c(d):c!==!1,g=s.throwOnError;if(V(n)){const d=n,m=[],A=e.keys();for(const p of A)!/^\$(inf|sub)\$/.test(p)&&d(e.get(p)._k)&&m.push(p);return Promise.all(m.map(l))}return l(n);async function l(d){const[m]=At(d);if(!m)return;const[A,p]=Zt(e,m),[$,i,tt,z]=j.get(e),P=()=>{const D=$[m];return(V(s.revalidate)?s.revalidate(A().data,d):s.revalidate!==!1)&&(delete tt[m],delete z[m],D&&D[0])?D[0](Yt).then(()=>A().data):A().data};if(t.length<3)return P();let T=r,N,L=!1;const y=Tt();i[m]=[y,0];const k=!f(u),x=A(),B=x.data,et=x._c,q=f(et)?B:et;if(k&&(u=V(u)?u(q,B):u,p({data:u,_c:q})),V(T))try{T=T(q)}catch(D){N=D,L=!0}if(T&&Xt(T))if(T=await T.catch(D=>{N=D,L=!0}),y!==i[m][0]){if(L)throw N;return T}else L&&k&&S(N)&&(o=!0,p({data:q,_c:_}));if(o&&!L)if(V(o)){const D=o(T,q);p({data:D,error:_,_c:_})}else p({data:T,error:_,_c:_});if(i[m][1]=Tt(),Promise.resolve(P()).then(()=>{p({_c:_})}),L){if(g)throw N;return}return T}}const kt=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},Ie=(t,e)=>{if(!j.has(t)){const n=M(_e,e),r=Object.create(null),a=te.bind(_,t);let s=W;const o=Object.create(null),c=(g,l)=>{const d=o[g]||[];return o[g]=d,d.push(l),()=>d.splice(d.indexOf(l),1)},u=(g,l,d)=>{t.set(g,l);const m=o[g];if(m)for(const A of m)A(l,d)},S=()=>{if(!j.has(t)&&(j.set(t,[r,Object.create(null),Object.create(null),Object.create(null),a,u,c]),!X)){const g=n.initFocus(setTimeout.bind(_,kt.bind(_,r,zt))),l=n.initReconnect(setTimeout.bind(_,kt.bind(_,r,Qt)));s=()=>{g&&g(),l&&l(),j.delete(t)}}};return S(),[t,a,S,s]}return[t,j.get(t)[4]]},Le=(t,e,n,r,a)=>{const s=n.errorRetryCount,o=a.retryCount,c=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!f(s)&&o>s||setTimeout(r,c,a)},xe=wt,[ee,Ve]=Ie(new Map),Ne=M({onLoadingSlow:W,onSuccess:W,onError:W,onErrorRetry:Le,onDiscarded:W,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Ht?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Ht?5e3:3e3,compare:xe,isPaused:()=>!1,cache:ee,mutate:Ve,fallback:{}},Te),Fe=(t,e)=>{const n=M(t,e);if(e){const{use:r,fallback:a}=t,{use:s,fallback:o}=e;r&&s&&(n.use=r.concat(s)),a&&o&&(n.fallback=M(a,o))}return n},Ue=O.createContext({}),je="$inf$",ne=Z&&window.__SWR_DEVTOOLS_USE__,Pe=ne?window.__SWR_DEVTOOLS_USE__:[],We=()=>{ne&&(window.__SWR_DEVTOOLS_REACT__=Dt)},re=t=>V(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],Me=()=>{const t=O.useContext(Ue);return O.useMemo(()=>M(Ne,t),[t])},$e=t=>(e,n,r)=>t(e,n&&((...s)=>{const[o]=At(e),[,,,c]=j.get(ee);if(o.startsWith(je))return n(...s);const u=c[o];return f(u)?n(...s):(delete c[o],u)}),r),qe=Pe.concat($e),He=t=>function(...n){const r=Me(),[a,s,o]=re(n),c=Fe(r,o);let u=t;const{use:S}=c,g=(S||[]).concat(qe);for(let l=g.length;l--;)u=g[l](u);return u(a,s||c.fetcher||null,c)},ke=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const a=r.indexOf(n);a>=0&&(r[a]=r[r.length-1],r.pop())}},tn=(t,e)=>(...n)=>{const[r,a,s]=re(n),o=(s.use||[]).concat(e);return t(r,a,{...s,use:o})};We();const pt=Dt.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),Et={dedupe:!0},Bt=Promise.resolve(_),Be=(t,e,n)=>{const{cache:r,compare:a,suspense:s,fallbackData:o,revalidateOnMount:c,revalidateIfStale:u,refreshInterval:S,refreshWhenHidden:g,refreshWhenOffline:l,keepPreviousData:d}=n,[m,A,p,$]=j.get(r),[i,tt]=At(t),z=O.useRef(!1),P=O.useRef(!1),T=O.useRef(i),N=O.useRef(e),L=O.useRef(n),y=()=>L.current,k=()=>y().isVisible()&&y().isOnline(),[x,B,et,q]=Zt(r,i),D=O.useRef({}).current,Q=f(o)?f(n.fallback)?_:n.fallback[i]:o,bt=(h,w)=>{for(const R in D){const E=R;if(E==="data"){if(!a(h[E],w[E])&&(!f(h[E])||!a(rt,w[E])))return!1}else if(w[E]!==h[E])return!1}return!0},It=O.useMemo(()=>{const h=!i||!e?!1:f(c)?y().isPaused()||s?!1:u!==!1:c,w=C=>{const F=M(C);return delete F._k,h?{isValidating:!0,isLoading:!0,...F}:F},R=x(),E=q(),I=w(R),J=R===E?I:w(E);let v=I;return[()=>{const C=w(x());return bt(C,v)?(v.data=C.data,v.isLoading=C.isLoading,v.isValidating=C.isValidating,v.error=C.error,v):(v=C,C)},()=>J]},[r,i]),K=we.useSyncExternalStore(O.useCallback(h=>et(i,(w,R)=>{bt(R,w)||h()}),[r,i]),It[0],It[1]),Lt=!z.current,oe=m[i]&&m[i].length>0,G=K.data,H=f(G)?Q&&Xt(Q)?pt(Q):Q:G,nt=K.error,at=O.useRef(H),rt=d?f(G)?f(at.current)?H:at.current:G:H,xt=oe&&!f(nt)?!1:Lt&&!f(c)?c:y().isPaused()?!1:s?f(H)?!1:u:f(H)||u,Vt=!!(i&&e&&Lt&&xt),ae=f(K.isValidating)?Vt:K.isValidating,ie=f(K.isLoading)?Vt:K.isLoading,Y=O.useCallback(async h=>{const w=N.current;if(!i||!w||P.current||y().isPaused())return!1;let R,E,I=!0;const J=h||{},v=!p[i]||!J.dedupe,C=()=>qt?!P.current&&i===T.current&&z.current:i===T.current,F={isValidating:!1,isLoading:!1},Ft=()=>{B(F)},Ut=()=>{const b=p[i];b&&b[1]===E&&delete p[i]},jt={isValidating:!0};f(x().data)&&(jt.isLoading=!0);try{if(v&&(B(jt),n.loadingTimeout&&f(x().data)&&setTimeout(()=>{I&&C()&&y().onLoadingSlow(i,n)},n.loadingTimeout),p[i]=[w(tt),Tt()]),[R,E]=p[i],R=await R,v&&setTimeout(Ut,n.dedupingInterval),!p[i]||p[i][1]!==E)return v&&C()&&y().onDiscarded(i),!1;F.error=_;const b=A[i];if(!f(b)&&(E<=b[0]||E<=b[1]||b[1]===0))return Ft(),v&&C()&&y().onDiscarded(i),!1;const U=x().data;F.data=a(U,R)?U:R,v&&C()&&y().onSuccess(R,i,n)}catch(b){Ut();const U=y(),{shouldRetryOnError:it}=U;U.isPaused()||(F.error=b,v&&C()&&(U.onError(b,i,U),(it===!0||V(it)&&it(b))&&(!y().revalidateOnFocus||!y().revalidateOnReconnect||k())&&U.onErrorRetry(b,i,U,ce=>{const ct=m[i];ct&&ct[0]&&ct[0](Mt,ce)},{retryCount:(J.retryCount||0)+1,dedupe:!0})))}return I=!1,Ft(),!0},[i,r]),Nt=O.useCallback((...h)=>te(r,T.current,...h),[]);if(dt(()=>{N.current=e,L.current=n,f(G)||(at.current=G)}),dt(()=>{if(!i)return;const h=Y.bind(_,Et);let w=0;y().revalidateOnFocus&&(w=Date.now()+y().focusThrottleInterval);const E=ke(i,m,(I,J={})=>{if(I==zt){const v=Date.now();y().revalidateOnFocus&&v>w&&k()&&(w=v+y().focusThrottleInterval,h())}else if(I==Qt)y().revalidateOnReconnect&&k()&&h();else{if(I==Yt)return Y();if(I==Mt)return Y(J)}});return P.current=!1,T.current=i,z.current=!0,B({_k:tt}),xt&&(p[i]||(f(H)||X?h():De(h))),()=>{P.current=!0,E()}},[i]),dt(()=>{let h;function w(){const E=V(S)?S(x().data):S;E&&h!==-1&&(h=setTimeout(R,E))}function R(){!x().error&&(g||y().isVisible())&&(l||y().isOnline())?Y(Et).then(w):w()}return w(),()=>{h&&(clearTimeout(h),h=-1)}},[S,g,l,i]),O.useDebugValue(rt),s){const h=i&&f(H);if(!qt&&X&&h)throw new Error("Fallback data is required when using Suspense in SSR.");h&&(N.current=e,L.current=n,P.current=!1);const w=$[i],R=!f(w)&&h?Nt(w):Bt;if(pt(R),!f(nt)&&h)throw nt;const E=h?Y(Et):Bt;!f(rt)&&h&&(E.status="fulfilled",E.value=!0),pt(E)}return{mutate:Nt,get data(){return D.data=!0,rt},get error(){return D.error=!0,nt},get isValidating(){return D.isValidating=!0,ae},get isLoading(){return D.isLoading=!0,ie}}},se=He(Be),en=(t,e)=>{const n=_t(),{formatter:r,...a}=e||{};return se(t,(s,o)=>Jt(s.startsWith("http")?s:`${n}${s}`,o,{formatter:r}),a)};async function Ke(t){const e=Date.now(),{accountId:n,orderlyKey:r,payload:a}=t,{method:s,url:o,data:c}=a;let u=`${String(e)}${s??"POST"}${o}`;c&&(u+=JSON.stringify(c));const S=new TextEncoder,g=await ue(S.encode(u),r);return{"orderly-timestamp":`${e}`,"orderly-key":`ed25519:${le(await fe(r))}`,"orderly-signature":Ge(g),"orderly-account-id":n}}function Ge(t){return btoa(Array.from(new Uint8Array(t)).map(e=>String.fromCharCode(e)).join("")).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}const Je=t=>{const{accountId:e,orderlyKey:n}=Kt(),r=_t();return(a,s,o)=>{try{return t(a,async u=>{const S=Array.isArray(u)?u[0]:u,g=`${r}${S}`,d=await Ke({accountId:e,orderlyKey:n,payload:{method:"GET",url:S}});return s(g,{headers:d})},o)}catch(c){throw console.error("signature error:",c),c}}},nn=(t,e)=>{const{formatter:n,...r}=e||{},a=Array.isArray(e==null?void 0:e.use)?(e==null?void 0:e.use)??[]:[],{accountId:s,orderlyKey:o}=Kt();return se(()=>t&&s&&o?[t,s,o]:null,(c,u)=>Jt(c,u,{formatter:n}),{...r,use:[Je,...a]})};export{qt as I,_ as U,Me as a,dt as b,Ke as c,en as d,nn as e,me as f,Tt as g,M as m,Ze as p,Gt as r,At as s,se as u,tn as w};
