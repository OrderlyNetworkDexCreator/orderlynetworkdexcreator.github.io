import{f as w,h as $,y as d}from"./globalDisconnect-DEHmIGkh.js";const P=r=>t=>t.trim()===""?`${r} is required`:null,b=(r=!0)=>t=>{if(r&&t.trim()==="")return null;try{return new URL(t),null}catch{return"Please enter a valid URL"}},x=(r,t)=>e=>e.trim().length<r?`${t} must be at least ${r} characters`:null,D=(r,t)=>e=>e.trim().length>r?`${t} cannot exceed ${r} characters`:null,I=r=>t=>/^[a-zA-Z0-9 .\-_]*$/.test(t.trim())?null:`${r} can only contain letters, numbers, spaces, dots, hyphens, and underscores`,U=(r=[])=>t=>{const e=t.trim();return e.length<5?"Broker ID must be at least 5 characters":e.length>15?"Broker ID cannot exceed 15 characters":/^[a-z0-9_-]+$/.test(e)?e.includes("orderly")?"Broker ID cannot contain 'orderly'":r.includes(e)?"This broker ID is already taken. Please choose another one.":null:"Broker ID must contain only lowercase letters, numbers, hyphens, and underscores"},E=r=>{var t;if(r.success===!1&&((t=r.error)!=null&&t.issues)){const e=r.error.issues;if(Array.isArray(e)&&e.length>0)return e[0].message}if(r.message==="Invalid request body"&&r.error)try{const e=JSON.parse(r.error);if(Array.isArray(e)&&e.length>0)return e[0].message}catch{return r.error}return r.message||"An error occurred"},j=(...r)=>t=>{for(const e of r){const s=e(t);if(s)return s}return null};async function y({endpoint:r,method:t="GET",body:e,token:s,contentType:o="application/json",useJsonBody:i=!0,showToastOnError:f=!0}){try{const n=r.startsWith("http")?r:`${w}${r.startsWith("/")?r:`/${r}`}`,a={};o&&(a["Content-Type"]=o),s&&(a.Authorization=`Bearer ${s}`);const c={method:t,headers:a};e&&t!=="GET"&&(c.body=i?JSON.stringify(e):e);const u=await fetch(n,c);if(u.status===401)throw $(),f&&d.error("Your session has expired. Please reconnect your wallet."),new Error("Unauthorized: Your session has expired");let l;const m=u.headers.get("content-type");if(m&&m.includes("application/json")?l=await u.json():l=await u.text(),!u.ok){let h="An error occurred";if(typeof l=="object"&&(h=E(l)),u.status===429){const p=new Error(h);throw p.status=429,p.data=l,p}const g=new Error(h);throw g.status=u.status,g}return l}catch(n){const a=n instanceof Error?n.message:"Unknown error occurred",c=(n==null?void 0:n.status)===429;throw f&&!a.includes("Unauthorized: Your session has expired")&&!c&&d.error(`Request failed: ${a}`),console.error("API request failed:",n),n}}async function A({endpoint:r,method:t="POST",formData:e,token:s,showToastOnError:o=!0}){try{const i=r.startsWith("http")?r:`${w}${r.startsWith("/")?r:`/${r}`}`,f={};s&&(f.Authorization=`Bearer ${s}`);const a=await fetch(i,{method:t,headers:f,body:e});if(a.status===401)throw $(),o&&d.error("Your session has expired. Please reconnect your wallet."),new Error("Unauthorized: Your session has expired");let c;const u=a.headers.get("content-type");if(u&&u.includes("application/json")?c=await a.json():c=await a.text(),!a.ok){let l="An error occurred";throw typeof c=="object"&&(l=E(c)),o&&d.error(`API Error: ${l}`),new Error(l)}return c}catch(i){const f=i instanceof Error?i.message:"Unknown error occurred",n=(i==null?void 0:i.status)===429;throw o&&!f.includes("Unauthorized: Your session has expired")&&!n&&d.error(`Request failed: ${f}`),console.error("API request failed:",i),i}}function S(r,t,e={}){return y({endpoint:r,method:"GET",token:t,...e})}function z(r,t,e,s={}){return y({endpoint:r,method:"POST",body:t,token:e,...s})}function B(r,t,e,s={}){return y({endpoint:r,method:"DELETE",body:t,token:e,...s})}function T(r,t={}){const e=new FormData;return Object.entries(r).forEach(([s,o])=>{o!=null&&(Array.isArray(o)||typeof o=="object"?e.append(s,JSON.stringify(o)):e.append(s,String(o)))}),t.primaryLogo&&e.append("primaryLogo",t.primaryLogo,"primaryLogo.webp"),t.secondaryLogo&&e.append("secondaryLogo",t.secondaryLogo,"secondaryLogo.webp"),t.favicon&&e.append("favicon",t.favicon,"favicon.webp"),t.pnlPosters&&t.pnlPosters.forEach((s,o)=>{s&&e.append(`pnlPoster${o}`,s,`pnlPoster${o}.webp`)}),e}function k(r,t,e,s={}){return A({endpoint:r,method:"POST",formData:t,token:e,...s})}function q(r,t,e,s={}){return A({endpoint:r,method:"PUT",formData:t,token:e,...s})}export{y as a,T as b,j as c,q as d,I as e,x as f,S as g,B as h,k as i,U as j,D as m,z as p,P as r,b as v};
