import{r as l,j as e}from"./index-gtzDq4NN.js";import{I as s}from"./iconify-AJT-F7UA.js";import{a as F}from"./apiClient-Br2nePLb.js";import{g as u}from"./leaderboard-bKzLTWQW.js";import{u as _}from"./index-B6zKOWfM.js";import{L as N}from"./components-CyfABTTb.js";import"./globalDisconnect-DEHmIGkh.js";import"./index-BftLqECp.js";import"./index-Dvs6MNyz.js";function A(){const{dexId:m}=_(),[r,y]=l.useState(null),[h,w]=l.useState([]),[v,g]=l.useState(!0),[p,k]=l.useState(null),[d,L]=l.useState("weekly"),$=async()=>{try{g(!0);const t=await F({endpoint:`/api/leaderboard/broker/${m}?period=${d}`}),a={...t.data.aggregated,id:t.data.dex.id,primaryLogo:t.data.dex.primaryLogo,dexUrl:t.data.dex.dexUrl,description:t.data.dex.description,banner:t.data.dex.banner,logo:t.data.dex.logo,tokenAddress:t.data.dex.tokenAddress,tokenChain:t.data.dex.tokenChain,telegramLink:t.data.dex.telegramLink,discordLink:t.data.dex.discordLink,xLink:t.data.dex.xLink,websiteUrl:t.data.dex.websiteUrl};y(a),w(t.data.daily.sort((i,c)=>new Date(c.date).getTime()-new Date(i.date).getTime()))}catch(t){console.error("Error fetching DEX data:",t),k("Failed to load DEX data")}finally{g(!1)}};l.useEffect(()=>{$()},[m,d]);const x=t=>t>=1e9?`${(t/1e9).toFixed(2)}B`:t>=1e6?`${(t/1e6).toFixed(2)}M`:t>=1e3?`${(t/1e3).toFixed(2)}K`:t.toFixed(2),n=t=>t>=1e9?`${(t/1e9).toFixed(2)}B`:t>=1e6?`${(t/1e6).toFixed(2)}M`:t>=1e3?`${(t/1e3).toFixed(2)}K`:t.toFixed(2),b=t=>{const a=t<0,i=Math.abs(t),c=x(i);return{value:a?`-$${c}`:`+$${c}`,isNegative:a}},D=()=>!(r!=null&&r.tokenAddress)||!(r!=null&&r.tokenChain)?null:`https://www.geckoterminal.com/${{ethereum:"eth",polygon:"polygon_pos",arbitrum:"arbitrum",base:"base",bsc:"bsc",near:"near",solana:"solana",avalanche:"avax"}[r.tokenChain.toLowerCase()]||r.tokenChain.toLowerCase()}/tokens/${r.tokenAddress}?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=4h`;if(v)return e.jsx("div",{className:"min-h-screen pt-24 pb-12 px-4 md:px-8",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(s,{icon:"svg-spinners:pulse-rings-multiple",width:48,className:"text-primary"}),e.jsx("span",{className:"ml-3 text-lg text-gray-300",children:"Loading DEX details..."})]})})});if(p||!r)return e.jsx("div",{className:"min-h-screen pt-24 pb-12 px-4 md:px-8",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(s,{icon:"heroicons:exclamation-triangle",width:48,className:"text-error mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"DEX Not Found"}),e.jsx("p",{className:"text-gray-400 mb-6",children:p||"The requested DEX could not be found."}),e.jsxs(N,{to:"/board",className:"inline-flex items-center gap-2 px-6 py-3 bg-primary hover:bg-primary-light text-white font-medium rounded-lg transition-colors",children:[e.jsx(s,{icon:"heroicons:arrow-left",width:20}),"Back to Board"]})]})})});const f=b(r.totalPnl),o=u(d),j=D();return e.jsx("div",{className:"min-h-screen pt-24 pb-12 px-4 md:px-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8 slide-fade-in",children:[e.jsx("div",{className:"flex items-center gap-4 mb-6",children:e.jsxs(N,{to:"/board",className:"inline-flex items-center gap-2 px-4 py-2 bg-background-card hover:bg-primary/20 text-gray-300 hover:text-white rounded-lg transition-colors",children:[e.jsx(s,{icon:"heroicons:arrow-left",width:20}),"Back to Board"]})}),e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[r.logo?e.jsx("img",{src:r.logo,alt:`${r.brokerName} logo`,className:"w-16 h-16 object-cover rounded-full"}):r.primaryLogo?e.jsx("img",{src:r.primaryLogo,alt:`${r.brokerName} logo`,className:"w-16 h-16 object-cover rounded-full"}):e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary/20 to-secondary/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-bold text-white",children:r.brokerName.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white",children:r.brokerName}),r.description&&e.jsx("p",{className:"text-gray-300 mt-2 max-w-2xl",children:r.description})]})]}),e.jsxs("div",{className:"flex gap-3 ml-auto",children:[e.jsxs("a",{href:r.dexUrl||"#",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-3 bg-primary hover:bg-primary-light text-white font-medium rounded-lg transition-colors",children:[e.jsx(s,{icon:"mdi:chart-line",width:20}),"Visit DEX"]}),r.websiteUrl&&e.jsxs("a",{href:r.websiteUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-3 bg-gray-700 hover:bg-gray-600 text-white font-medium rounded-lg transition-colors",children:[e.jsx(s,{icon:"mdi:web",width:20}),"Website"]})]})]})]}),r.banner&&e.jsx("div",{className:"w-full max-h-32 lg:max-h-36 mb-4 h-fit slide-fade-in-delayed",children:e.jsx("img",{src:r.banner,alt:`${r.brokerName} banner`,className:"w-full h-full max-h-32 lg:max-h-36 object-contain"})}),e.jsx("div",{className:"mb-8 slide-fade-in-delayed",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Time Period:"}),["daily","weekly","30d","90d"].map(t=>e.jsx("button",{onClick:()=>L(t),className:`px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 ${d===t?"bg-primary text-white":"bg-background-card text-gray-300 hover:bg-primary/20 hover:text-white"}`,children:u(t)},t))]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8 slide-fade-in-delayed",children:[e.jsxs("div",{className:"bg-background-card border border-gray-600 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/20 rounded-lg flex items-center justify-center",children:e.jsx(s,{icon:"mdi:chart-line",width:24,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Volume"}),e.jsxs("p",{className:"text-sm text-gray-400",children:["(",o,")"]})]})]}),e.jsxs("div",{className:"text-2xl font-bold text-white",children:["$",x(r.totalVolume)]})]}),e.jsxs("div",{className:"bg-background-card border border-gray-600 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-secondary/20 rounded-lg flex items-center justify-center",children:e.jsx(s,{icon:"mdi:currency-usd",width:24,className:"text-secondary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Fees"}),e.jsxs("p",{className:"text-sm text-gray-400",children:["(",o,")"]})]})]}),e.jsxs("div",{className:"text-2xl font-bold text-white",children:["$",n(r.totalFee)]})]}),e.jsxs("div",{className:"bg-background-card border border-gray-600 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500/20 rounded-lg flex items-center justify-center",children:e.jsx(s,{icon:"mdi:cash-multiple",width:24,className:"text-green-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Revenue"}),e.jsxs("p",{className:"text-sm text-gray-400",children:["(",o,")"]})]})]}),e.jsxs("div",{className:"text-2xl font-bold text-white",children:["$",n(r.totalBrokerFee)]})]}),e.jsxs("div",{className:"bg-background-card border border-gray-600 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-success/20 rounded-lg flex items-center justify-center",children:e.jsx(s,{icon:"mdi:trending-up",width:24,className:"text-success"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"PnL"}),e.jsxs("p",{className:"text-sm text-gray-400",children:["(",o,")"]})]})]}),e.jsx("div",{className:`text-2xl font-bold ${f.isNegative?"text-error":"text-success"}`,children:f.value})]})]}),j&&e.jsx("div",{className:"mb-8 slide-fade-in-delayed",children:e.jsxs("div",{className:"bg-background-card border border-gray-600 rounded-lg py-3 px-1 md:p-3 lg:p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(s,{icon:"mdi:chart-timeline-variant",width:24,className:"text-primary"}),e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Token Information"})]}),e.jsx("div",{className:"aspect-[3/4] sm:aspect-square md:aspect-[4/3] bg-gray-800 rounded-lg overflow-hidden",children:e.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:j,frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]})}),(r.telegramLink||r.discordLink||r.xLink)&&e.jsx("div",{className:"mb-8 slide-fade-in-delayed",children:e.jsxs("div",{className:"bg-background-card border border-gray-600 rounded-lg p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Social Links"}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[r.telegramLink&&e.jsxs("a",{href:r.telegramLink,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[e.jsx(s,{icon:"mdi:telegram",width:20}),"Telegram"]}),r.discordLink&&e.jsxs("a",{href:r.discordLink,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors",children:[e.jsx(s,{icon:"mdi:discord",width:20}),"Discord"]}),r.xLink&&e.jsxs("a",{href:r.xLink,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 300 300.251",fill:"white",children:e.jsx("path",{d:"M178.57 127.15L290.27 0h-26.46l-97.03 110.38L89.34 0H0l117.13 166.93L0 300.25h26.46l102.4-116.59 81.8 116.59H300M36.01 19.54h40.65l187.13 262.13h-40.66"})}),"@",r.xLink.split("/").pop()]})]})]})}),h.length>0&&e.jsx("div",{className:"slide-fade-in-delayed",children:e.jsxs("div",{className:"bg-background-card border border-gray-600 rounded-lg p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Daily Performance"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-600",children:[e.jsx("th",{className:"text-left py-3 px-2 text-gray-400",children:"Date"}),e.jsx("th",{className:"text-right py-3 px-2 text-gray-400",children:"Volume"}),e.jsx("th",{className:"text-right py-3 px-2 text-gray-400",children:"Fees"}),e.jsx("th",{className:"text-right py-3 px-2 text-gray-400",children:"Revenue"}),e.jsx("th",{className:"text-right py-3 px-2 text-gray-400",children:"PnL"})]})}),e.jsx("tbody",{children:h.map((t,a)=>{const i=b(t.realized_pnl);return e.jsxs("tr",{className:"border-b border-gray-700 last:border-b-0",children:[e.jsx("td",{className:"py-3 px-2 text-white",children:new Date(t.date).toLocaleDateString()}),e.jsxs("td",{className:"py-3 px-2 text-right text-white",children:["$",x(t.perp_volume)]}),e.jsxs("td",{className:"py-3 px-2 text-right text-white",children:["$",n(t.total_fee)]}),e.jsxs("td",{className:"py-3 px-2 text-right text-white",children:["$",n(t.broker_fee)]}),e.jsx("td",{className:`py-3 px-2 text-right font-medium ${i.isNegative?"text-error":"text-success"}`,children:i.value})]},a)})})]})})]})})]})})}export{A as default};
