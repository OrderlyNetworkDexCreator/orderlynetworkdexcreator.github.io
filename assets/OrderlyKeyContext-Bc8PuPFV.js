import{r as t,j as K}from"./index-gtzDq4NN.js";import{u as v}from"./DexContext-BUFcSEJ_.js";import{b as O,l as x,s as p}from"./ModalContext-3rcxIYCP.js";import{a as E}from"./useAuth-RM4Avg_6.js";const d=t.createContext(void 0);function A({children:s}){const{address:l,isConnected:u}=E(),{brokerId:n}=v(),[a,o]=t.useState(null),[e,c]=t.useState(null);t.useEffect(()=>{if(l&&n){const r=O(l,n);c(r)}else c(null)},[l,n]),t.useEffect(()=>{if(e){const r=x(e);o(r||null)}else o(null)},[e]),t.useEffect(()=>{u||(o(null),c(null))},[u]);const y=t.useCallback(r=>{o(r),r&&e&&p(e,r)},[e]),i=t.useCallback(()=>{if(e){const m=`orderly-key:${e}:mainnet`;localStorage.removeItem(m)}o(null)},[e]),f=!!(a&&e&&n);return K.jsx(d.Provider,{value:{orderlyKey:a,accountId:e,setOrderlyKey:y,clearOrderlyKey:i,hasValidKey:f},children:s})}function S(){const s=t.useContext(d);if(s===void 0)throw new Error("useOrderlyKey must be used within an OrderlyKeyProvider");return s}export{A as O,S as u};
