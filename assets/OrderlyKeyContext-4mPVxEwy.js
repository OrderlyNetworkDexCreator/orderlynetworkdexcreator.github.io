import{r,j as x}from"./index-gtzDq4NN.js";import{u as p}from"./DexContext-BStH6aHx.js";import{e as i,l as I,s as C}from"./ModalContext-mlJE0UaS.js";import{a as E}from"./useAuth-CdmGF86g.js";const m=r.createContext(void 0);function g({children:l}){const{address:n,isConnected:a}=E(),{brokerId:o}=p(),[d,s]=r.useState(null),[e,c]=r.useState(null);r.useEffect(()=>{if(!a){s(null),c(null);return}if(n&&o){const t=i(n,o),u=I(t);c(t),s(u||null)}else c(null),s(null)},[n,o,a]);const y=n&&o?i(n,o):null,K=!y||e===y,f=r.useCallback(t=>{s(t),t&&e&&C(e,t)},[e]),O=r.useCallback(()=>{if(e){const u=`orderly-key:${e}:mainnet`;localStorage.removeItem(u)}s(null)},[e]),v=!!(d&&e&&o);return x.jsx(m.Provider,{value:{orderlyKey:d,accountId:e,setOrderlyKey:f,clearOrderlyKey:O,hasValidKey:v,isOrderlyKeyReady:K},children:l})}function h(){const l=r.useContext(m);if(l===void 0)throw new Error("useOrderlyKey must be used within an OrderlyKeyProvider");return l}export{g as O,h as u};
