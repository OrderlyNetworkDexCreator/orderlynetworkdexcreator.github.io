import{r as t,j as e}from"./index-gtzDq4NN.js";import{y as i,A as Oe,e as or,f as Pe}from"./globalDisconnect-BwfQ2Vw-.js";import{g as v,b as K,e as cr}from"./apiClient-DEwubw2O.js";import{u as dr}from"./useAuth-CdmGF86g.js";import{u as mr,aV as h,aW as xr}from"./ModalContext-mlJE0UaS.js";import{B as $}from"./Card-CTDM2G3r.js";import{F as xe}from"./FuzzySearchInput-CMoxZWNE.js";import{P as hr}from"./Pagination-DDKCGfOm.js";import{g as je}from"./deploymentUrl-2BmYCh8V.js";import"./clsx-B-dksMZM.js";import"./dijkstra-C00ieaqj.js";import"./css-BzFf4VQ5.js";import"./Combination-CTmdEaXQ.js";import"./index-Dvs6MNyz.js";import"./tslib.es6-MJ473bz6.js";import"./dayjs.min-DsMxAas2.js";import"./browser-BqbI9gSd.js";const I=async(d,p)=>{try{await navigator.clipboard.writeText(d),i.success(`${p} copied to clipboard`)}catch(N){console.error("Failed to copy to clipboard:",N),i.error(`Failed to copy ${p}`)}};function ur({token:d,onCustomDomainOverrideUpdate:p,onRedeployment:N,isUpdatingCustomDomainOverride:D,redeployingDexes:Z}){const[E,O]=t.useState([]),[g,P]=t.useState(!1),[z,H]=t.useState(!1),[V,W]=t.useState(1),[b,_]=t.useState(20),[ee,C]=t.useState(0),[f,re]=t.useState(""),[k,Q]=t.useState(""),[y,se]=t.useState(new Set),[w,te]=t.useState(""),[R,T]=t.useState(""),ae=s=>{se(m=>{const x=new Set(m);return x.has(s)?x.delete(s):x.add(s),x})},u=async(s,m,x)=>{if(!d)return;const X=s??V,B=m??b,j=x??f,U=!!j;U&&!(X===1&&j==="")?H(!0):P(!0);try{const S=(X-1)*B,ue=j?`&search=${encodeURIComponent(j)}`:"",q=await v(`api/admin/dexes?limit=${B}&offset=${S}${ue}`,d);O(q.dexes),C(q.pagination.total),W(X),_(B),re(j)}catch(S){console.error("Error loading DEXs:",S),i.error("Failed to load DEXs")}finally{U?H(!1):P(!1)}},G=s=>{Q(s)};t.useEffect(()=>{if(!d)return;const s=setTimeout(()=>{u(1,b,f)},300);return()=>clearTimeout(s)},[f,b,d]),t.useEffect(()=>{const s=setTimeout(()=>{re(k)},300);return()=>clearTimeout(s)},[k]);const he=async(s,m)=>{await p(s,m),await u()};return e.jsxs("div",{className:"bg-light/5 backdrop-blur-sm rounded-xl p-4 md:p-6 border border-light/10 md:col-span-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-medium",children:"Browse All DEXs"}),e.jsx("button",{onClick:()=>{u(V,b,f)},disabled:g,className:"p-1 rounded hover:bg-dark/50",title:"Refresh DEX list",children:e.jsx("div",{className:`i-mdi:refresh h-5 w-5 ${g?"animate-spin":""} `})})]}),e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"A comprehensive list of all DEXs and their database values."}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search by broker name or broker ID...",value:k,onChange:s=>G(s.target.value),className:"w-full bg-dark border border-light/20 rounded px-4 py-2 text-sm focus:border-primary-light outline-none placeholder:text-gray-500"}),k&&e.jsx("button",{onClick:()=>G(""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-300 p-1",title:"Clear search",children:e.jsx("div",{className:"i-mdi:close h-4 w-4"})})]})}),g?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"i-svg-spinners:pulse-rings h-8 w-8 mx-auto text-primary-light mb-2"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Loading DEXs..."})]}):E.length===0?e.jsx("p",{className:"text-gray-400 text-sm italic",children:"No DEXs found."}):e.jsxs("div",{className:"relative space-y-4 max-h-[600px] overflow-y-auto",children:[z&&e.jsx("div",{className:"absolute inset-0 bg-dark/50 backdrop-blur-sm rounded-lg z-10 flex items-center justify-center min-h-[200px]",children:e.jsxs("div",{className:"text-center p-4",children:[e.jsx("div",{className:"i-svg-spinners:pulse-rings h-6 w-6 mx-auto text-primary-light mb-2"}),e.jsx("p",{className:"text-xs text-gray-300",children:"Searching..."})]})}),E.map(s=>e.jsxs("div",{className:"bg-dark/30 p-3 rounded-lg border border-light/10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("h3",{className:"font-medium text-primary-light",children:[s.brokerName||"Unnamed DEX"," (ID:"," ",s.id.substring(0,8),"...)"]}),e.jsx("button",{onClick:()=>I(s.id,"DEX ID"),className:"text-gray-400 hover:text-primary-light p-1 rounded",title:"Copy full DEX ID",children:e.jsx("div",{className:"i-mdi:content-copy h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-2 text-xs",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Broker ID:"})," ",s.brokerId]}),e.jsx("button",{onClick:()=>I(s.brokerId,"Broker ID"),className:"text-gray-400 hover:text-primary-light p-1 rounded ml-2",title:"Copy Broker ID",children:e.jsx("div",{className:"i-mdi:content-copy h-3 w-3"})})]}),s.repoUrl&&e.jsxs("div",{className:"md:col-span-2 flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("strong",{children:"Repo URL:"})," ",e.jsx("a",{href:s.repoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-primary-light hover:underline break-all",children:s.repoUrl})]}),e.jsx("button",{onClick:()=>I(s.repoUrl,"Repository URL"),className:"text-gray-400 hover:text-primary-light p-1 rounded ml-2 flex-shrink-0",title:"Copy Repository URL",children:e.jsx("div",{className:"i-mdi:content-copy h-3 w-3"})})]}),s.customDomain&&e.jsxs("div",{className:"md:col-span-2 flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("strong",{children:"Custom Domain:"})," ",e.jsx("a",{href:`https://${s.customDomain}`,target:"_blank",rel:"noopener noreferrer",className:"text-warning hover:underline break-all",children:s.customDomain})]}),e.jsx("button",{onClick:()=>I(`https://${s.customDomain}`,"Custom Domain URL"),className:"text-gray-400 hover:text-primary-light p-1 rounded ml-2 flex-shrink-0",title:"Copy Custom Domain URL",children:e.jsx("div",{className:"i-mdi:content-copy h-3 w-3"})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("strong",{className:"text-xs",children:"Custom Domain Override:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",placeholder:"example.com",value:w===s.id?R:s.customDomainOverride||"",onChange:m=>{w!==s.id&&(te(s.id),T(s.customDomainOverride||"")),T(m.target.value)},className:"text-xs bg-dark/50 border border-light/20 rounded px-2 py-1 text-white placeholder-gray-400 focus:border-primary focus:outline-none min-w-0 flex-1",disabled:D}),e.jsx($,{onClick:()=>he(s.id,R),disabled:D||w!==s.id,variant:"primary",size:"sm",className:"text-xs px-2 py-1 flex items-center gap-1",children:D&&w===s.id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"i-svg-spinners:pulse-rings h-3 w-3"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"i-mdi:check h-3 w-3"}),"Update"]})})]})]}),s.customDomainOverride&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("strong",{children:"Override URL:"})," ",e.jsx("a",{href:s.customDomainOverride,target:"_blank",rel:"noopener noreferrer",className:"text-primary-light hover:underline break-all",children:s.customDomainOverride})]}),e.jsx("button",{onClick:()=>I(s.customDomainOverride,"Custom Domain Override URL"),className:"text-gray-400 hover:text-primary-light p-1 rounded ml-2 flex-shrink-0",title:"Copy Override URL",children:e.jsx("div",{className:"i-mdi:content-copy h-3 w-3"})})]})]}),s.repoUrl&&e.jsxs("div",{className:"md:col-span-2 flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("strong",{children:"Deployment URL:"})," ",e.jsx("a",{href:je(s.repoUrl),target:"_blank",rel:"noopener noreferrer",className:"text-success hover:underline break-all",children:je(s.repoUrl).replace("https://","")})]}),e.jsx("button",{onClick:()=>I(je(s.repoUrl),"Deployment URL"),className:"text-gray-400 hover:text-primary-light p-1 rounded ml-2 flex-shrink-0",title:"Copy Deployment URL",children:e.jsx("div",{className:"i-mdi:content-copy h-3 w-3"})})]})]}),s.repoUrl&&e.jsx("div",{className:"mt-3 pt-3 border-t border-light/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("strong",{className:"text-xs",children:"Actions:"})}),e.jsx($,{onClick:()=>N(s.id,s.brokerName),disabled:Z.has(s.id),variant:"primary",size:"sm",className:"text-xs px-3 py-1 flex items-center gap-2",children:Z.has(s.id)?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"i-svg-spinners:pulse-rings h-3 w-3"}),"Deploying..."]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"i-mdi:rocket-launch h-3 w-3"}),"Redeploy"]})})]})}),s.themeCSS&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-light/10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{className:"text-xs",children:"CSS Theme:"}),e.jsx("button",{onClick:()=>ae(s.id),className:"text-gray-400 hover:text-primary-light p-1 rounded",title:y.has(s.id)?"Hide theme":"Show theme",children:e.jsx("div",{className:`h-3 w-3 transition-transform ${y.has(s.id)?"i-mdi:chevron-up":"i-mdi:chevron-down"}`})})]}),e.jsx("button",{onClick:()=>I(s.themeCSS,"CSS Theme"),className:"text-gray-400 hover:text-primary-light p-1 rounded",title:"Copy CSS Theme",children:e.jsx("div",{className:"i-mdi:content-copy h-3 w-3"})})]}),y.has(s.id)&&e.jsx("div",{className:"bg-dark/50 rounded p-2 max-h-40 overflow-y-auto",children:e.jsx("pre",{className:"text-xs text-gray-300 whitespace-pre-wrap break-all",children:s.themeCSS})})]})]},s.id))]}),!g&&E.length>0&&e.jsx(hr,{currentPage:V,pageSize:b,totalItems:ee,onPageChange:s=>u(s,b,f),onPageSizeChange:s=>u(1,s,f),itemName:"DEXs"})]})}const pr=d=>{const p=Pe(d);return p?p.name:"Unknown"};function Br(){var $e;const[d,p]=t.useState(null),[N,D]=t.useState(""),[Z,E]=t.useState(!1),[O,g]=t.useState([]),[P,z]=t.useState(!1),[H,V]=t.useState([]),[W,b]=t.useState(!1),[_,ee]=t.useState(""),[C,f]=t.useState(""),[re,k]=t.useState(!1),[Q,y]=t.useState([]),[se,w]=t.useState(""),[te,R]=t.useState(!1),[T,ae]=t.useState(""),[u,G]=t.useState(""),[he,s]=t.useState(!1),[m,x]=t.useState([]),[X,B]=t.useState(""),[j,U]=t.useState(!1),[ve,S]=t.useState(null),[ue,q]=t.useState(!0),{isAuthenticated:Ne,token:o}=dr(),{openModal:Y}=mr(),[ze,De]=t.useState(new Set),[ne,pe]=t.useState(""),[ge,ke]=t.useState(""),[c,we]=t.useState(""),[F,Se]=t.useState(3),[A,Ie]=t.useState(6),[ie,Ee]=t.useState(0),[le,Ce]=t.useState(5),[oe,Re]=t.useState(""),[ce,Te]=t.useState(void 0),[He,Xe]=t.useState(!1),[be,de]=t.useState([]),[Be,Ue]=t.useState(""),[Fe,fe]=t.useState(!1),[J,ye]=t.useState(null),[Ae,Ve]=t.useState([]),[me,L]=t.useState(null),[We,Le]=t.useState(!1),_e=async(r,a)=>{Y("confirmation",{title:"Redeploy DEX",message:`Are you sure you want to trigger a redeployment for "${a}"?`,warningMessage:"This will redeploy the DEX to GitHub Pages. The process may take several minutes to complete, but the current version will remain available during deployment.",confirmButtonText:"Redeploy",confirmButtonVariant:"primary",onConfirm:async()=>{De(n=>new Set(n).add(r));try{await K(`api/admin/dex/${r}/redeploy`,{},o),i.success(`Redeployment triggered for ${a}`)}catch(n){console.error("Error triggering redeployment:",n),n instanceof Error?i.error(`Failed to trigger redeployment: ${n.message}`):i.error("Failed to trigger redeployment")}finally{De(n=>{const l=new Set(n);return l.delete(r),l})}}})},Qe=async(r,a)=>{Le(!0);try{const n=await K(`api/admin/dex/${r}/custom-domain-override`,{customDomainOverride:a||null},o);n.message&&i.success(n.message)}catch(n){console.error("Error updating custom domain override:",n),n instanceof Error?i.error(`Failed to update custom domain override: ${n.message}`):i.error("Failed to update custom domain override")}finally{Le(!1)}};t.useEffect(()=>{async function r(){if(!Ne){S(!1),q(!1);return}try{const a=await v("api/admin/check",o);S(a.isAdmin),a.isAdmin&&(Me(),M())}catch(a){console.error("Error checking admin status:",a),S(!1)}finally{q(!1)}}r()},[Ne,o]);const Me=async()=>{b(!0);try{const r=await v("api/admin/users",o);V(r.admins)}catch(r){console.error("Error loading admin users:",r),i.error("Failed to load admin users")}finally{b(!1)}},M=async()=>{try{const r=await v("api/stats?period=30d",o);p(r)}catch(r){console.error("Error loading DEX statistics:",r)}},Ge=async r=>{if(!r){g([]),z(!1);return}z(!0);try{const a=await v(`api/admin/dexes?limit=100&offset=0&search=${encodeURIComponent(r.trim())}`,o);g(a.dexes)}catch(a){console.error("Error searching DEXs:",a),g([])}finally{z(!1)}},qe=async r=>{if(w(r),!r){y([]),R(!1);return}R(!0);try{const a=await v(`api/admin/dexes?limit=100&offset=0&search=${encodeURIComponent(r.trim())}`,o);y(a.dexes)}catch(a){console.error("Error searching DEXs:",a),y([])}finally{R(!1)}},Ye=async r=>{if(B(r),!r){x([]),U(!1);return}U(!0);try{const n=(await v(`api/admin/dexes?limit=100&offset=0&search=${encodeURIComponent(r.trim())}`,o)).dexes.filter(l=>l.repoUrl);x(n)}catch(a){console.error("Error searching DEXs:",a),x([])}finally{U(!1)}},Je=async r=>{if(Ue(r),!r){de([]),fe(!1);return}fe(!0);try{const n=(await v(`api/admin/dexes?limit=100&offset=0&search=${encodeURIComponent(r.trim())}`,o)).dexes.filter(l=>l.repoUrl&&(l.brokerId==="demo"||!l.brokerId));de(n)}catch(a){console.error("Error searching DEXs:",a),de([])}finally{fe(!1)}},Ke=r=>{D(r.id),g([])},Ze=r=>{ee(r.id),f(r.brokerId),y([]),w("")},er=r=>{if(ae(r.id),r.repoUrl){const a=r.repoUrl.match(/github\.com\/[^/]+\/([^/]+)/);a&&a[1]&&G(a[1])}x([]),B("")},rr=r=>{pe(r.id),ke(r.brokerName||"Unknown DEX"),de([]),Ue("")},sr=async()=>{var r;try{const a=await fetch(`${xr()}/v1/public/broker/name`);if(!a.ok)throw new Error("Failed to fetch broker IDs");const n=await a.json();if(n.success&&((r=n.data)!=null&&r.rows)){const l=n.data.rows.map(lr=>lr.broker_id);Ve(l)}}catch(a){console.error("Error fetching broker IDs:",a)}};t.useEffect(()=>{if(!c){L(null);return}if(!/^[a-z0-9_-]+$/.test(c)){L("Broker ID must contain only lowercase letters, numbers, hyphens, and underscores");return}if(c.includes("orderly")){L("Broker ID cannot contain 'orderly'");return}if(c.length<5||c.length>15){L("Broker ID must be between 5-15 characters");return}if(Ae.includes(c)){L("This broker ID is already taken. Please choose another one.");return}L(null)},[c,Ae]),t.useEffect(()=>{sr()},[]);const tr=async r=>{if(r.preventDefault(),!N.trim()){i.error("Please select a DEX to delete");return}Y("confirmation",{title:"Delete DEX",message:'Are you sure you want to delete "Selected DEX"? This action cannot be undone.',warningMessage:"Deleting this DEX will permanently remove all associated data from the system, including the GitHub repository. However, any deployed instances on GitHub Pages will remain active and must be manually disabled through GitHub.",confirmButtonText:"Delete DEX",confirmButtonVariant:"danger",isDestructive:!0,onConfirm:async()=>{E(!0);try{await cr(`api/admin/dex/${N.trim()}`,null,o,{showToastOnError:!1}),i.success("DEX deleted successfully"),M(),D("")}catch(n){console.error("Error in admin component:",n),n instanceof Error?i.error(n.message):i.error("An unknown error occurred")}finally{E(!1)}}})},ar=async r=>{if(r.preventDefault(),!_.trim()){i.error("Please enter a DEX ID");return}if(!C.trim()){i.error("Please enter a Broker ID");return}Y("confirmation",{title:"Update Broker ID",message:`Are you sure you want to update the broker ID for "Selected DEX" from "Current" to "${C.trim()}"?`,warningMessage:"Updating the broker ID will affect the DEX's integration with the Orderly Network. This change will be immediate and may impact trading functionality.",confirmButtonText:"Update Broker ID",confirmButtonVariant:"warning",onConfirm:async()=>{k(!0);try{await K(`api/admin/dex/${_}/broker-id`,{brokerId:C.trim()},o,{showToastOnError:!1}),i.success("Broker ID updated successfully"),M()}catch(l){console.error("Error updating broker ID:",l),l instanceof Error?i.error(l.message):i.error("An unknown error occurred")}finally{k(!1)}}})},nr=async r=>{if(r.preventDefault(),!T.trim()){i.error("Please enter a DEX ID");return}if(!u.trim()){i.error("Please enter a new repository name");return}Y("confirmation",{title:"Rename Repository",message:`Are you sure you want to rename the repository for "Selected DEX" from "Current Repository" to "${u.trim()}"?`,warningMessage:"Renaming the repository will update all references including the deployment URL. This may cause temporary downtime during the transition.",confirmButtonText:"Rename Repository",confirmButtonVariant:"warning",onConfirm:async()=>{s(!0);try{await K(`api/admin/dex/${T}/rename-repo`,{newName:u.trim()},o,{showToastOnError:!1}),i.success("Repository renamed successfully"),M()}catch(l){console.error("Error renaming repository:",l),l instanceof Error?i.error(l.message):i.error("An unknown error occurred")}finally{s(!1)}}})},ir=async r=>{if(r.preventDefault(),!ne.trim()){i.error("Please select a DEX");return}if(!c.trim()){i.error("Please enter a broker ID");return}if(!oe.trim()){i.error("Please enter a transaction hash");return}const a=ge||"Selected DEX";Y("confirmation",{title:"Create Broker ID Manually",message:`Are you sure you want to manually create broker ID "${c.trim()}" for "${a}"?`,warningMessage:"This will create the broker ID on-chain without requiring payment verification. The DEX will be graduated automatically and fees will be set as specified.",confirmButtonText:"Create Broker ID",confirmButtonVariant:"primary",onConfirm:async()=>{Xe(!0),ye(null);try{const n=ce?Pe(ce):void 0,l=await K(`api/admin/dex/${ne}/create-broker`,{brokerId:c.trim(),makerFee:F,takerFee:A,rwaMakerFee:ie,rwaTakerFee:le,txHash:oe.trim(),chainId:ce,chain_type:n==null?void 0:n.chainType},o,{showToastOnError:!1});i.success(l.message),ye(l),M(),pe(""),ke(""),we(""),Se(3),Ie(6),Ee(0),Ce(5),Re(""),Te(void 0)}catch(n){ye(null),console.error("Error creating manual broker ID:",n),n instanceof Error?i.error(n.message):i.error("An unknown error occurred")}finally{Xe(!1)}}})};return ue?e.jsxs("div",{className:"w-full max-w-3xl mx-auto px-4 py-6 md:py-10 text-center mt-26 pb-52",children:[e.jsx("div",{className:"i-svg-spinners:pulse-rings-multiple h-12 w-12 mx-auto text-primary-light mb-4"}),e.jsx("p",{children:"Checking admin status..."})]}):ve?e.jsxs("div",{className:"w-full max-w-4xl mx-auto px-4 py-6 md:py-10 mt-26 pb-52",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-6",children:"Admin Tools"}),e.jsxs("div",{className:"bg-warning/10 backdrop-blur-sm rounded-xl p-4 md:p-6 border border-warning/20 mb-6",children:[e.jsx("p",{className:"text-warning font-medium mb-2",children:"⚠️ Warning: Admin Only Area"}),e.jsx("p",{className:"text-gray-300 text-sm",children:"This page contains tools for administrators only. Improper use can result in data loss."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-light/5 backdrop-blur-sm rounded-xl p-4 md:p-6 border border-light/10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-medium",children:"Admin Users"}),e.jsx("button",{onClick:Me,disabled:W,className:"p-1 rounded hover:bg-dark/50",title:"Refresh admin list",children:e.jsx("div",{className:`i-mdi:refresh h-5 w-5 ${W?"animate-spin":""}`})})]}),e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"List of users with admin privileges."}),W?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"i-svg-spinners:pulse-rings h-8 w-8 mx-auto text-primary-light mb-2"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Loading admins..."})]}):e.jsx(e.Fragment,{children:H.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left border-b border-light/10",children:[e.jsx("th",{className:"px-2 py-2",children:"Address"}),e.jsx("th",{className:"px-2 py-2",children:"Added On"})]})}),e.jsx("tbody",{children:H.map(r=>e.jsxs("tr",{className:"border-b border-light/5",children:[e.jsxs("td",{className:"px-2 py-3 font-mono text-xs",children:[r.address.substring(0,6),"...",r.address.substring(r.address.length-4)]}),e.jsx("td",{className:"px-2 py-3",children:new Date(r.createdAt).toLocaleDateString()})]},r.id))})]})}):e.jsx("p",{className:"text-gray-400 text-sm italic",children:"No admin users found."})})]}),e.jsxs("div",{className:"bg-primary/5 backdrop-blur-sm rounded-xl p-4 md:p-6 border border-primary/10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-medium",children:"Broker ID Management"}),e.jsx("button",{onClick:()=>{M()},className:"p-1 rounded hover:bg-dark/50",title:"Refresh stats",children:e.jsx("div",{className:"i-mdi:refresh h-5 w-5"})})]}),e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Manage broker ID configurations and fee settings for DEXs. Graduation is now automated - users can graduate their DEX by sending ORDER tokens."}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center",children:[e.jsx("div",{className:"i-mdi:chart-box text-primary-light mr-1.5 h-4 w-4"}),"Quick Stats"]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsx("div",{className:"bg-success/10 rounded-lg p-3",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"Active Broker IDs"}),e.jsx("span",{className:"text-2xl font-medium text-success",children:(($e=d==null?void 0:d.graduated)==null?void 0:$e.allTime)||0})]})})})]})]}),e.jsxs("div",{className:"bg-light/5 backdrop-blur-sm rounded-xl p-4 md:p-6 border border-light/10",children:[e.jsx("h2",{className:"text-xl font-medium mb-4",id:"update-broker-id",children:"Update Broker ID"}),e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Update the broker ID for a specific DEX. This affects the DEX's integration with the Orderly Network."}),e.jsxs("form",{onSubmit:ar,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"brokerSearch",className:"block text-sm font-medium mb-1",children:"Search DEX"}),e.jsx(xe,{placeholder:"Search by DEX ID, broker name, or broker ID...",onSearch:qe,initialValue:se,className:"mb-2"}),Q.length>0&&e.jsx("div",{className:"mt-2 border border-light/10 rounded-lg overflow-hidden",children:e.jsx("div",{className:"max-h-48 overflow-y-auto",children:Q.map(r=>e.jsxs("div",{className:"p-2 hover:bg-primary-light/10 cursor-pointer flex justify-between border-b border-light/5 last:border-b-0",onClick:()=>Ze(r),children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:r.brokerName||"Unnamed DEX"}),e.jsxs("div",{className:"text-xs text-gray-400",children:["ID: ",r.id.substring(0,8),"..."]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Current Broker ID: ",r.brokerId]})]}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(r.createdAt).toLocaleDateString()})]},r.id))})}),se&&Q.length===0&&!te&&e.jsx("div",{className:"text-sm text-gray-400 p-2",children:"No DEXs found matching your search."}),te&&e.jsxs("div",{className:"text-center py-2",children:[e.jsx("div",{className:"i-svg-spinners:pulse-rings h-6 w-6 mx-auto text-primary-light/80"}),e.jsx("p",{className:"text-xs text-gray-300 mt-1",children:"Searching..."})]})]}),e.jsx(h,{id:"dexId",label:"DEX ID",value:_,onChange:r=>ee(r.target.value),placeholder:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",helpText:"Enter the UUID of the DEX to update",required:!0}),e.jsx(h,{id:"brokerId",label:"New Broker ID",value:C,onChange:r=>f(r.target.value),placeholder:"new-broker-id",helpText:"Enter the new broker ID (1-50 characters)",required:!0,minLength:1,maxLength:50}),e.jsx($,{type:"submit",variant:"primary",isLoading:re,loadingText:"Updating...",className:"mt-2",children:"Update Broker ID"})]})]}),e.jsxs("div",{className:"bg-light/5 backdrop-blur-sm rounded-xl p-4 md:p-6 border border-light/10",children:[e.jsx("h2",{className:"text-xl font-medium mb-4",children:"Rename Repository"}),e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Rename the GitHub repository for a DEX. This will update all references including the deployment URL."}),e.jsxs("form",{onSubmit:nr,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"repoSearch",className:"block text-sm font-medium mb-1",children:"Search DEX"}),e.jsx(xe,{placeholder:"Search by DEX ID, broker name, or repository URL...",onSearch:Ye,initialValue:X,className:"mb-2"}),m.length>0&&e.jsx("div",{className:"mt-2 border border-light/10 rounded-lg overflow-hidden",children:e.jsx("div",{className:"max-h-48 overflow-y-auto",children:m.map(r=>e.jsxs("div",{className:"p-2 hover:bg-primary-light/10 cursor-pointer flex justify-between border-b border-light/5 last:border-b-0",onClick:()=>er(r),children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:r.brokerName||"Unnamed DEX"}),e.jsxs("div",{className:"text-xs text-gray-400",children:["ID: ",r.id.substring(0,8),"..."]}),r.repoUrl&&e.jsxs("div",{className:"text-xs text-gray-400 truncate max-w-xs",children:["Repo:"," ",r.repoUrl.replace("https://github.com/","")]})]}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(r.createdAt).toLocaleDateString()})]},r.id))})}),X&&m.length===0&&!j&&e.jsx("div",{className:"text-sm text-gray-400 p-2",children:"No DEXs found matching your search."}),j&&e.jsxs("div",{className:"text-center py-2",children:[e.jsx("div",{className:"i-svg-spinners:pulse-rings h-6 w-6 mx-auto text-primary-light/80"}),e.jsx("p",{className:"text-xs text-gray-300 mt-1",children:"Searching..."})]})]}),e.jsx(h,{id:"repoDexId",label:"DEX ID",value:T,onChange:r=>ae(r.target.value),placeholder:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",helpText:"Enter the UUID of the DEX to update",required:!0}),e.jsx(h,{id:"newRepoName",label:"New Repository Name",value:u,onChange:r=>G(r.target.value),placeholder:"new-repo-name",helpText:"Lowercase letters, numbers, and hyphens only",required:!0,pattern:"^[a-z0-9-]+$",minLength:1,maxLength:90}),e.jsx($,{type:"submit",variant:"primary",isLoading:he,loadingText:"Renaming...",className:"mt-2",children:"Rename Repository"})]})]}),e.jsxs("div",{className:"bg-error/10 backdrop-blur-sm rounded-xl p-4 md:p-6 border border-error/20",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"i-mdi:alert-octagon text-error mr-2 h-6 w-6"}),e.jsx("h2",{className:"text-xl font-medium text-error",children:"Delete DEX"})]}),e.jsxs("p",{className:"text-gray-400 text-sm mb-6",children:["Danger zone! This tool will"," ",e.jsx("span",{className:"text-error font-semibold",children:"permanently delete a DEX"})," ","and all associated data. This action"," ",e.jsx("span",{className:"font-semibold",children:"cannot be undone"}),"."]}),e.jsxs("form",{onSubmit:tr,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"dexSearch",className:"block text-sm font-medium mb-1 text-error",children:"Search DEX"}),e.jsx(xe,{placeholder:"Search by wallet address, broker name, broker ID, or DEX ID...",onSearch:Ge,initialValue:"",className:"mb-2"}),O.length>0&&e.jsx("div",{className:"mt-2 border border-error/30 rounded-lg overflow-hidden",children:e.jsx("div",{className:"max-h-48 overflow-y-auto",children:O.map(r=>e.jsxs("div",{className:"p-2 hover:bg-error/10 cursor-pointer flex justify-between items-center border-b border-error/20 last:border-b-0",onClick:()=>Ke(r),children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:r.brokerName||"Unnamed DEX"}),e.jsxs("div",{className:"text-xs font-mono text-gray-400",children:["ID: ",r.id.substring(0,8),"..."]}),e.jsxs("div",{className:"text-xs font-mono text-gray-400",children:["Wallet: ",r.user.address.substring(0,8),"...",r.user.address.substring(r.user.address.length-6)]})]}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(r.createdAt).toLocaleDateString()})]},r.id))})}),O.length===0&&!P&&e.jsx("div",{className:"text-sm text-gray-400 p-2",children:"No DEXs found matching your search."}),P&&e.jsxs("div",{className:"text-center py-2",children:[e.jsx("div",{className:"i-svg-spinners:pulse-rings h-6 w-6 mx-auto text-primary-light/80"}),e.jsx("p",{className:"text-xs text-gray-300 mt-1",children:"Searching..."})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dexToDeleteId",className:"block text-sm font-medium mb-1 text-error",children:"DEX ID"}),e.jsx("input",{type:"text",id:"dexToDeleteId",value:N,onChange:r=>D(r.target.value),placeholder:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",className:"w-full bg-dark rounded px-4 py-3 text-base border border-error/30 focus:border-error outline-none placeholder:text-gray-500"}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Enter the DEX ID or use the search above to find a DEX"})]}),e.jsx($,{type:"submit",variant:"danger",isLoading:Z,loadingText:"Deleting...",className:"mt-4 text-base font-semibold py-3",children:"Delete DEX"})]})]}),e.jsxs("div",{className:"bg-success/10 backdrop-blur-sm rounded-xl p-4 md:p-6 border border-success/20",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"i-mdi:plus-circle text-success mr-2 h-6 w-6"}),e.jsx("h2",{className:"text-xl font-medium text-success",children:"Manual Broker Creation"})]}),e.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Create a broker ID manually for any user without requiring payment verification. A transaction hash must be provided as proof of some transaction, but it won't be validated."}),e.jsxs("form",{onSubmit:ir,className:"space-y-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"manualSearch",className:"block text-sm font-medium mb-1",children:"Search DEX"}),e.jsx(xe,{placeholder:"Search by DEX ID, broker name, or wallet address...",onSearch:Je,initialValue:Be,className:"mb-2"}),be.length>0&&e.jsx("div",{className:"mt-2 border border-success/30 rounded-lg overflow-hidden",children:e.jsx("div",{className:"max-h-48 overflow-y-auto",children:be.map(r=>e.jsxs("div",{className:"p-2 hover:bg-success/10 cursor-pointer flex justify-between border-b border-success/20 last:border-b-0",onClick:()=>rr(r),children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:r.brokerName||"Unnamed DEX"}),e.jsxs("div",{className:"text-xs text-gray-400",children:["DEX ID: ",r.id.substring(0,8),"..."]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Wallet: ",r.user.address.substring(0,8),"...",r.user.address.substring(r.user.address.length-6)]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Broker ID: ",r.brokerId||"None"]})]}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(r.createdAt).toLocaleDateString()})]},r.id))})}),Be&&be.length===0&&!Fe&&e.jsx("div",{className:"text-sm text-gray-400 p-2",children:"No eligible DEXs found. DEX must have a repository and no existing broker ID."}),Fe&&e.jsxs("div",{className:"text-center py-2",children:[e.jsx("div",{className:"i-svg-spinners:pulse-rings h-6 w-6 mx-auto text-success/80"}),e.jsx("p",{className:"text-xs text-gray-300 mt-1",children:"Searching..."})]})]}),e.jsx(h,{id:"manualDexId",label:"DEX ID",value:ne,onChange:r=>pe(r.target.value),placeholder:"dex-...",helpText:ge?`DEX ID for: ${ge}`:"DEX ID (auto-filled when selecting a DEX from search)",required:!0}),e.jsx(h,{id:"manualBrokerId",label:"Broker ID",value:c,onChange:r=>we(r.target.value),placeholder:"new-broker-id",helpText:"5-15 characters, lowercase letters, numbers, hyphens, and underscores only. Cannot contain 'orderly'",required:!0,minLength:5,maxLength:15,pattern:"^[a-z0-9_-]+$"}),me&&e.jsxs("div",{className:"mt-1 text-xs text-error flex items-center",children:[e.jsx("span",{className:"i-mdi:alert-circle mr-1"}),me]}),!me&&c&&e.jsxs("div",{className:"mt-1 text-xs text-success flex items-center",children:[e.jsx("span",{className:"i-mdi:check-circle mr-1"}),"Broker ID is available"]}),e.jsx(h,{id:"manualTxHash",label:"Transaction Hash",value:oe,onChange:r=>Re(r.target.value),placeholder:"0x...",helpText:"Transaction hash as proof (will not be validated for payment)",required:!0,minLength:10,maxLength:100}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"manualChainId",className:"block text-sm font-medium mb-1",children:"Chain (Optional)"}),e.jsxs("select",{id:"manualChainId",value:ce||"",onChange:r=>Te(r.target.value?parseInt(r.target.value):void 0),className:"w-full bg-dark rounded px-4 py-3 text-base border border-light/10 focus:border-primary-light outline-none",children:[e.jsx("option",{value:"",children:"Select chain (optional)"}),e.jsx("optgroup",{label:"Mainnet",children:Object.values(Oe).filter(r=>!r.isTestnet&&["ethereum","arbitrum","base","solana-mainnet-beta"].includes(r.id)).map(r=>e.jsx("option",{value:r.chainId,children:r.name},r.chainId))}),e.jsx("optgroup",{label:"Testnet",children:Object.values(Oe).filter(r=>r.isTestnet&&["sepolia","arbitrum-sepolia","base-sepolia","solana-devnet"].includes(r.id)).map(r=>e.jsx("option",{value:r.chainId,children:r.name},r.chainId))})]}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Select the chain where the transaction occurred (ORDER/USDC available chains)"})]}),e.jsxs("div",{className:"bg-light/5 rounded-xl p-4 mb-4",children:[e.jsxs("h3",{className:"text-md font-medium mb-2 flex items-center",children:[e.jsx("div",{className:"i-mdi:cog text-gray-400 w-5 h-5 mr-2"}),"Trading Fee Configuration"]}),e.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"Configure the trading fees for this DEX."}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold mb-2 text-gray-200",children:"Standard Fees"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(h,{id:"manualMakerFee",label:"Maker Fee (bps)",type:"number",value:F.toString(),onChange:r=>Se(parseInt(r.target.value)||0),placeholder:"3",helpText:"0-15 bps",required:!0}),e.jsx(h,{id:"manualTakerFee",label:"Taker Fee (bps)",type:"number",value:A.toString(),onChange:r=>Ie(parseInt(r.target.value)||0),placeholder:"6",helpText:"3-15 bps",required:!0})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold mb-2 text-gray-200",children:"RWA Asset Fees"}),e.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Configure separate fees for Real World Asset (RWA) trading."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(h,{id:"manualRwaMakerFee",label:"RWA Maker Fee (bps)",type:"number",value:ie.toString(),onChange:r=>Ee(parseInt(r.target.value)||0),placeholder:"0",helpText:"0-15 bps"}),e.jsx(h,{id:"manualRwaTakerFee",label:"RWA Taker Fee (bps)",type:"number",value:le.toString(),onChange:r=>Ce(parseInt(r.target.value)||0),placeholder:"5",helpText:"0-15 bps"})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-info/10 rounded-lg border border-info/20",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"i-mdi:information-outline text-info mt-0.5 h-4 w-4 flex-shrink-0"}),e.jsxs("div",{className:"text-xs text-gray-300",children:[e.jsx("p",{className:"font-medium text-info mb-1",children:"Fee Calculation:"}),e.jsx("p",{className:"font-medium text-gray-200 mt-2 mb-1",children:"Standard:"}),e.jsxs("p",{children:["• Maker Fee: ",F," bps (",F*.01,"%)"]}),e.jsxs("p",{children:["• Taker Fee: ",A," bps (",A*.01,"%)"]}),e.jsx("p",{className:"font-medium text-gray-200 mt-2 mb-1",children:"RWA:"}),e.jsxs("p",{children:["• RWA Maker Fee: ",ie," bps (",ie*.01,"%)"]}),e.jsxs("p",{children:["• RWA Taker Fee: ",le," bps (",le*.01,"%)"]})]})]})})]}),e.jsx($,{type:"submit",variant:"primary",isLoading:He,loadingText:"Creating broker ID...",className:"mt-2 text-base font-semibold py-3",disabled:!ne||!c||!oe||!!me||F<0||F>15||A<3||A>15,children:"Create Broker ID Manually"})]}),J&&e.jsxs("div",{className:"mt-6 bg-dark/40 border border-success/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"i-mdi:check-circle text-success mr-2 h-5 w-5"}),e.jsx("span",{className:"text-success font-medium",children:"Broker ID created successfully"})]}),e.jsxs("div",{className:"text-xs text-gray-300 mb-1",children:[e.jsx("strong",{children:"Broker ID:"})," ",J.brokerCreationData.brokerId]}),e.jsxs("div",{className:"text-xs text-gray-300 mb-1",children:[e.jsx("strong",{children:"DEX:"})," ",J.dex.brokerName," (ID:"," ",J.dex.id,")"]}),e.jsxs("div",{className:"text-xs text-gray-300",children:[e.jsx("strong",{children:"Transaction Hashes:"}),e.jsx("ul",{className:"list-disc ml-6 mt-1",children:Object.entries(J.brokerCreationData.transactionHashes).map(([r,a])=>e.jsx("li",{className:"break-all",children:e.jsxs("a",{href:or(a,parseInt(r))||"#",target:"_blank",rel:"noopener noreferrer",className:"text-primary-light hover:underline",children:[pr(parseInt(r)),": ",a]})},a))})]})]})]}),e.jsx(ur,{token:o||"",onCustomDomainOverrideUpdate:Qe,onRedeployment:_e,isUpdatingCustomDomainOverride:We,redeployingDexes:ze})]})]}):e.jsxs("div",{className:"w-full max-w-3xl mx-auto px-4 py-6 md:py-10 mt-26 pb-52",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-6",children:"Admin Tools"}),e.jsxs("div",{className:"bg-error/10 backdrop-blur-sm rounded-xl p-4 md:p-6 border border-error/20",children:[e.jsx("p",{className:"text-error font-medium mb-2",children:"⚠️ Access Denied"}),e.jsx("p",{className:"text-gray-300 text-sm",children:"You don't have admin privileges to access this page."})]})]})}export{Br as default};
